
[Data]
life = 1000
attack = 86
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 15
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 170
IntPersistIndex = 0
FloatPersistIndex = 0

[Size]
xscale = 1
yscale = 1   
ground.back = 20    
ground.front = 20   
air.back = 18       
air.front = 18     
height = 35
attack.dist = 150 
proj.attack.dist = 90
proj.doscale = 0     
head.pos = 10, -92   
mid.pos = 0, -58    
shadowoffset = -2
draw.offset = 0,0

[Velocity]
walk.fwd  = 4
walk.back = -3
run.fwd  = 6, 0   
run.back = -6.5,0 
jump.neu = 0,-9.5
jump.back = -4,-9.5
jump.fwd = 4,-9.5
runjump.back = -5,-9
runjump.fwd = 5,-9    
airjump.neu = 0,-7
airjump.back = -3     
airjump.fwd = 6

[Movement]
airjump.num = 0     
airjump.height = 0 
yaccel = .5       
stand.friction = .85  
crouch.friction = .82




[Statedef 9741]
type=A
movetype=I
physics=N
anim=9741
ctrl=0

[State 9741, wrong]
type=destroyself
trigger1= (parent,ID)!=(root,ID)

[State 9741, Safety]
type=selfstate
trigger1= !ishelper
value=0

[State 9741, uglyhack]
type=varset
trigger1= !var(17)
var(15)=1


[State 9741, pausecheck]
type=varset
trigger1= gametime>root,var(58)
trigger2= !(root,alive)
trigger3= roundstate!=2
trigger4= root,var(12)
var(15)=1 ;var2

[State 9741, facing]
type=turn
trigger1= var(9):=(facing!=root,facing)

[State 9741, dirturnonAI]
type=parentvarset
triggerall= !var(15) && !var(9)
trigger1= root,command="fwd"
trigger2= root,command="back"
trigger3= root,command="up"
trigger4= root,command="down"
var(12)=1

[State 9741, dirturnoffAI]
type=parentvarset
triggerall= !var(15) && !var(9) && (root,var(12)>=1)
trigger1= command="fwd" && root,command="fwd"
trigger2= command="back" && root,command="back"
trigger3= command="up" && root,command="up"
trigger4= command="down" && root,command="down"
var(12)=-1

[State 9741, buttonturnonAI]
type=parentvarset
triggerall= !var(15);var2
trigger1= root,command="a"
trigger2= root,command="b"
trigger3= root,command="c"
trigger4= root,command="x"
trigger5= root,command="y"
trigger6= root,command="z"
trigger7= root,command="start"
var(12)=1

[State 9741, buttonturnoffAI]
type=parentvarset
triggerall= !var(15) && (root,var(12)>=1)
trigger1= command="a" && root,command="a"
trigger2= command="b" && root,command="b"
trigger3= command="c" && root,command="c"
trigger4= command="x" && root,command="x"
trigger5= command="y" && root,command="y"
trigger6= command="z" && root,command="z"
trigger7= command="start" && root,command="start"
var(12)=-1

[State 9741, unpausecheck]
type=varset
triggerall= var(15);var2
trigger1= root,command="fwd" || root,command="back" || root,command="up" || root,command="down"
trigger2= root,command="a" || root,command="b" || root,command="c"
trigger3= root,command="x" || root,command="y" || root,command="z"
trigger4= root,command="start"
trigger5= var(15)=1
trigger5= var(15):=0
var(15)=1;var2

[State 9741, goodbye]
type=destroyself
triggerall= var(17):=1
trigger1= root,var(12)
trigger2= !(root,alive)
trigger3= roundstate!=2




;---------------------------------------------------------------------------
;slp
[Statedef 200]
type    = S                      
movetype= A                    
physics = S                    
juggle=ifelse(numtarget,15,8)                  
velset = 0,0                     
ctrl = 0                        
anim = 200                                         
sprpriority = 2                
poweradd = 0



[State 200, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 7


[State 200, voz]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 400
value = 0, ifelse (Random <= 550, 23, 24)



[State 200, Hit]
type=hitdef
trigger1= ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1= anim=200 && animelem=2
attr=S,NA
damage=20,0
animtype=Light
air.animtype = Back
fall.animtype = Back
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime=ifelse(var(33),4,8), ifelse(var(33),4,8)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = 1, -86
hitsound = S1, 11
guardsound = S1, 15
ground.type=High
ground.slidetime=12+2*var(17)
ground.hittime=12+2*var(17)
ground.velocity= ifelse(var(33), -2.66, -4.49), 0
ground.cornerpush.veloff = ifelse(var(33), -4.33, -8.17)
air.type=Low
air.hittime=18
air.velocity=  ifelse(var(33), -2.5, -5), -7
air.cornerpush.veloff = 0
getpower= 72*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0

[State Idle]
type=statetypeset
trigger1= animelemtime(4)>=0
movetype=I

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------
;ssp longe
[Statedef 203]
type    = S
movetype= A
physics = S
juggle=ifelse(numtarget,15,8)                 
ctrl = 0
velset = 0,0
anim = 203
sprpriority = 2
poweradd = 18 *!var(33)

[State 1100, corrida]
type = veladd
trigger1 = animelem = 3
x = 1

[State 203, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 8


[State 203, voz]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 400
value = 0, ifelse (Random <= 550, 24, 25)





[State 210, Hit]
type=hitdef
trigger1= ((p2stateno!=[5020,5040]) || var(33)) && p2stateno!=5040
trigger1= animelem=4
attr=S,NA
damage=65,0 
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=MA
hitflag=MAF
priority=4,Hit
pausetime= ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -10, -68
hitsound = S1, 13
guardsound = S1, 15
ground.type=Low
ground.slidetime=18+4*var(17)
ground.hittime=18+4*var(17)
ground.velocity= ifelse(var(33), -5.77, -10.52), 0
ground.cornerpush.veloff = ifelse(var(33), -6.82, -12.74)
air.type=Low
air.hittime=12
air.velocity= ifelse(var(33), -2.5, -5), -7
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
airguard.ctrltime= 16
airguard.velocity= ifelse(var(33),-4,-8), -1.5
airground.cornerpush.veloff = 0
fall.recover=0
envshake.time=12
envshake.freq=60
envshake.ampl=5

[State Idle]
type=statetypeset
trigger1= animelemtime(8)>=0
movetype=I

[State 203, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------

;ssp perto
[Statedef 204]
type    = S
movetype= A
physics = S
juggle=ifelse(numtarget,15,8)                  
ctrl = 0
velset = 0,0
anim = 204
sprpriority = 2
poweradd = 18 *!var(33)
hitcountpersist=1

[State 204, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 8



[State 210, Hit]
type=hitdef
trigger1= ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1= animelem=3 && anim=204
attr=S,NA
damage=60,0
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime= ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -23, -70
hitsound = S1, 13
guardsound = S1, 15
ground.type=Low
ground.slidetime=18+4*var(17)
ground.hittime=18+4*var(17)
ground.velocity= -10.52, 0
ground.cornerpush.veloff = -12.74
air.type=Low
air.hittime=18
air.velocity= ifelse(var(33), -2.5, -5), -7
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0
envshake.time=10
envshake.freq=60
envshake.ampl=5

[State 210, Hit]
type=hitdef
trigger1= ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1= animelem=4 && anim=204
trigger1= !movecontact && !movereversed
attr=S,NA
damage=60,0
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime= ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -23, -70
hitsound = S1, 13
guardsound = S1, 15
ground.type=High
ground.slidetime=18+4*var(17)
ground.hittime=18+4*var(17)
ground.velocity=  ifelse(var(33), -5.77, -10.52), 0
ground.cornerpush.veloff = 0
air.type=Low
air.hittime=18
air.velocity= ifelse(var(33), -2.5, -5), -7
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0
envshake.time=10
envshake.freq=60
envshake.ampl=5



[State 803, Vel]
type = posset
trigger1 = Pos y <0
y=0


[State Idle]
type=statetypeset
trigger1= animelemtime(5)>=0
movetype=I


[State 204, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
;slk
[Statedef 205]
type    = S                      
movetype= A                    
physics = S                    
juggle=ifelse(numtarget,15,8)                  
velset = 0,0                     
ctrl = 0                        
anim = 205                                          
sprpriority = 2                
poweradd = 0
hitcountpersist=1

[State 205, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 9


[State 215, Hit]
type=hitdef
trigger1= ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1= animelem=3
attr=S,NA
damage=20,0
animtype=Light
air.animtype = Back
fall.animtype = Back
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime= ifelse(var(33),4,8), ifelse(var(33),4,8)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -17, -37
hitsound = S1, 12
guardsound = S1, 15
ground.type=Low
ground.slidetime=12+2*var(17)
ground.hittime=12+2*var(17)
ground.velocity= -4.49, 0
ground.cornerpush.veloff = ifelse(var(33), -4.33, -8.17)
air.type=Low
air.hittime=18
air.velocity= ifelse(var(33), -2.5, -5), -7
air.cornerpush.veloff = 0
getpower= 72*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0
                                        
[State Idle]
type=statetypeset
trigger1= animelemtime(5)>=0
movetype=I

[State 205, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------

[Statedef 206]
type    = S                      
movetype= A                    
physics = S                    
juggle=ifelse(numtarget,15,8)                  
velset = 4,0                     
ctrl = 0                        
anim = 1350                                     
sprpriority = 2                
poweradd = 18 *!var(33)

[State 206, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 9



[State 206, 1]
type = Hitdef
trigger1 =((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = H
animtype = Medium
air.animtype = up
fall.animtype = up
priority = 4,Hit
damage = 50, 0
pausetime = 14, 15
guard.pausetime = 9, 8
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -32, -101
hitsound = S1, 12
guardsound = S1, 15
ground.type = High
air.type = High
ground.slidetime = 13
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 15
ground.velocity = -6.4
guard.velocity = -6
air.velocity = -5, -5
sprpriority = 2
getpower = ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower = 35 ,35
ground.cornerpush.veloff = -10
envshake.time=5
envshake.freq=60
envshake.ampl=5

[State 206, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------


[StateDef 207]
type = S
physics = S
moveType = A
anim = 207
ctrl = 0
velSet = 0,0
sprPriority = 1
powerAdd = 18 * !var(33)
faceP2 = 1

[State 207, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 9


[State 1410, PosAdd]
type = PosAdd
trigger1 = AnimElem = 1
x = 8

[State 1410, StateTypeSet: Idle]
type = StateTypeSet
trigger1 = AnimElemTime(6) >= 0
moveType = I

[State 1410, HitDef 1]
type = HitDef
trigger1 =((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1 = AnimElem = 3
attr = S, SA
hitFlag = MAF
guardFlag = M
priority = 4, Hit
damage = 28, 0
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -18, -102
hitsound = S1, 13
guardsound = S1, 15
pauseTime = ifElse(var(33), 5, 10) - 1, ifElse(var(33), 5, 10)
guard.pauseTime = ifElse(var(33), 5, 10) - 1, ifElse(var(33), 5, 10)
animType = Back
air.animType = Back
fall.animType = Back
ground.type = High
air.type = Low
ground.hitTime = 18
ground.slideTime = 18
guard.hitTime = 18
air.hitTime = 120
ground.velocity = -4.32, 0
ground.cornerPush.velOff = 0
guard.velocity = -10.52
guard.cornerPush.velOff = 0
air.velocity = -4.32, -7.49
air.cornerPush.velOff = 0
yAccel = 0.58
fall = 0
air.fall = 1
fall.recover = 0
fall.recoverTime = 120
forceStand = 1
getpower= 72*!var(33), 36*!var(33)
givepower = 35 ,35
envshake.time=9
envshake.freq=80
envshake.ampl=4


[State 1410, HitDef 2]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
hitFlag = MAF
guardFlag = M
priority = 4, Hit
damage = 34, 0
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -18, -102
hitsound = S1, 13
guardsound = S1, 15
pauseTime = ifElse(var(33), 5, 10) - 1, ifElse(var(33), 5, 10)
guard.pauseTime = ifElse(var(33), 5, 10) - 1, ifElse(var(33), 5, 10)
animType = Back
air.animType = Back
fall.animType = Back
ground.type = High
air.type = Low
ground.hitTime = 18
ground.slideTime = 18
guard.hitTime = 18
air.hitTime = 120
ground.velocity = -4.32, 0
ground.cornerPush.velOff = 0
guard.velocity = -10.52
guard.cornerPush.velOff = 0
air.velocity = -4.32, -7.49
air.cornerPush.velOff = 0
yAccel = 0.58
fall = 0
air.fall = 1
fall.recover = 0
fall.recoverTime = 120
forceStand = 1
envshake.time=9
envshake.freq=80
envshake.ampl=4


[State 1410, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1



;---------------------------------------------------------------------

;joelho medio
[Statedef 208]
type=S
movetype=A
physics=S
juggle=ifelse(numtarget,15,8)
anim=209
velset=0,0
poweradd=18*!var(33)
sprpriority=1
ctrl=0
facep2=1


[State 220, Hit]
type=hitdef
trigger1= ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1= animelem=3 && anim=209
attr=S,NA
damage=40,0
animtype=Medium
air.animtype = Back
fall.animtype = Back
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime= ifelse(var(33),5,10), ifelse(var(33),5,10)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy=-15,-78
hitsound = S1, 13
guardsound = S1, 15
ground.type=Low
ground.slidetime=15+3*var(17)
ground.hittime=15+3*var(17)
ground.velocity= ifelse(var(33), -4.30, -7.51), 0
ground.cornerpush.veloff = 0
air.type=Low
air.hittime=18
air.velocity= ifelse(var(33), -2.5, -5), -7
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0
envshake.time=10
envshake.freq=60
envshake.ampl=5

[State Idle]
type=statetypeset
trigger1= animelemtime(4)>=0
movetype=I

[State 220, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1


;---------------------------------------------------------------------

[Statedef 210]
type=S
movetype=A
physics=S
juggle=ifelse(numtarget,15,8)
anim=210
velset=0,0
poweradd=18*!var(33)
sprpriority=1
ctrl=0
facep2=1


[State 225, Hit]
type=hitdef
trigger1= ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1= animelem=3 && anim=210
attr=S,NA
damage=33,0
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=M
hitflag=MAF 
priority=4,Hit 
pausetime= ifelse(var(33),4,8), ifelse(var(33),4,8)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy=-10,-103
hitsound = S1, 12
guardsound = S1, 15
ground.type=High
ground.slidetime=18+4*var(17)
ground.hittime=18+4*var(17)
ground.velocity=  ifelse(var(33), -4.30, -7.51), 0
ground.cornerpush.veloff = ifelse(var(33), -5.78, -10.47)
air.type=Low
air.hittime=18
air.velocity=-3,-3
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0
envshake.time=10
envshake.freq=60
envshake.ampl=5


[State 225, Hit2]
type=hitdef
trigger1= p2stateno!=5040
trigger1= animelem=5 && anim=210
attr=S,NA
damage=33,0
animtype = Hard
air.animtype = Hard
fall.animtype = Hard
guardflag=M
hitflag=MAF 
priority=4,Hit 
pausetime= ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy=-10,-72
hitsound = S1, 12
guardsound = S1, 15
ground.type=Low
ground.slidetime=18+4*var(17)
ground.hittime=18+4*var(17)
ground.velocity=  ifelse(var(33), -5.77, -10.52), 0
ground.cornerpush.veloff = ifelse(var(33), -6.82, -12.74)
air.type=Low
air.hittime=18
air.velocity= ifelse(var(33), -4, -8), 8
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
air.fall=1
fall.recover=0
fall.recover=0
envshake.time=10
envshake.freq=60
envshake.ampl=5

[State Idle]
type=statetypeset
trigger1= animelemtime(6)>=0
movetype=I

[State 225, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1


;---------------------------------------------------------------------

;taekwondo ex300
[Statedef 211]
type    = S                      
movetype= A                    
physics = S                    
juggle=ifelse(numtarget,15,8)                  
velset = 0,0                     
ctrl = 0                        
anim = 300                                          
sprpriority = 2                
poweradd = 18 *!var(33)

[State 300, Width]
type = Width
trigger1 = 1
value = 10,-15

[State 300, efeito]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1, 10


[State 207, voz]
type = PlaySnd
trigger1 = AnimElem = 5 && Random <= 500
value = 0, ifelse (Random <= 550, 24, 25)



[State 207, 1]
type = Hitdef
trigger1 = AnimElem = 8
attr = S, NA
hitflag = MAF
guardflag = H
animtype = Hard
air.animtype = up
fall.animtype = up
priority = 4,Hit
damage = 39, 0
pausetime = ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -18, -55
hitsound = S1, 12
guardsound = S1, 15
ground.type = Low
air.type = High
ground.slidetime = 13
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 15
ground.velocity = -3
ground.cornerpush.veloff = ifelse(var(33), -5.78, -10.47)
guard.velocity = -4
air.velocity = -5,3
sprpriority = 2
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36,36
air.fall = 1
envshake.time=9
envshake.freq=80
envshake.ampl=4


[State Idle]
type=statetypeset
trigger1= animelemtime(9)>=0
movetype=I

[State 300, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------


;ex208
[Statedef 212]
type    = S
movetype= A
physics = S
juggle=ifelse(numtarget,15,8)                  
ctrl = 0
velset = 0,0
anim = 208
sprpriority = 2
poweradd = 18 *!var(33)


[State 208, Position]
type = PosAdd
trigger1 = Time = 0
x = 7

[State 208, efeito]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1, 10


[State 208, voz]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse (Random <= 550, 24, 25)


[State 208, 1]
type = Hitdef
trigger1 =((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 4,Hit
damage = 78, 0
pausetime = ifelse(var(33), 6, 12), ifelse(var(33), 6, 12)
guard.pausetime = 9, 8
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -18, -65
hitsound = S1, 14
guardsound = S1, 15
ground.type = Low
air.type = High
ground.slidetime = 16
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 18
ground.velocity = ifelse(var(33), -5.77, -10.52), 0
guard.velocity = -11.5
ground.cornerpush.veloff = ifelse(var(33), -5.78, -10.47)
air.velocity = -5, -5
sprpriority = 2
getpower = ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower = 35 ,35          
envshake.time = 9
envshake.ampl = 3

[State 208, 1]
type = Hitdef
trigger1 = AnimElem = 6
trigger1 = prevstateno = 207
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Diagup
air.animtype = Diagup
fall.animtype = Diagup
priority = 4,Hit
damage = 80, 0
pausetime = 12, 13
guard.pausetime = 9, 8
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -18, -65
hitsound = S1, 13
guardsound = S1, 15
ground.type = High
air.type = High
ground.slidetime = 16
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 18
ground.velocity = -5, -3
guard.velocity = -11.5
air.velocity = -5, -5
sprpriority = 2
getpower = ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower = 35 ,35          
envshake.time = 9
envshake.ampl = 3
fall = 1

[State Idle]
type=statetypeset
trigger1= animelemtime(6)>=0
movetype=I

[State 208, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------

;ryu punch
[Statedef 213]
type=S
movetype=A
physics=S
juggle=ifelse(numtarget,15,8)
anim=212
velset=0,0
poweradd=18*!var(33)
sprpriority=1
ctrl=0
facep2=1

[State 212, Snd]
type=playsnd
trigger1= animelem=5
value=1,8
channel=0

[State 212, Snd]
type=playsnd
trigger1= animelem=5
value=0,23
channel=1

[State 212, Vel]
type=velset
trigger1= animelemtime(4)>=0 && animelemtime(6)<=0
x=6


[State 212, Hit]
type=hitdef
trigger1= ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1= (animelem=6 || animelem=7) && anim=212
attr=S,NA
damage=33,0
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime= ifelse(var(33),5,10), ifelse(var(33),6,12)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy=-25,-61
hitsound = S1, 13
guardsound = S1, 15
ground.type=Low
ground.slidetime=18+4*var(17)
ground.hittime=18+4*var(17)
ground.velocity= ifelse(var(33), -4.30, -7.51), 0
ground.cornerpush.veloff = ifelse(var(33), -5.78, -10.47)
air.type=Low
air.hittime=18
air.velocity=  ifelse(var(33), -2.5, -5), -7
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0
envshake.time=8
envshake.freq=40
envshake.ampl=4

[State Idle]
type=statetypeset
trigger1= animelemtime(8)>=0
movetype=I

[State 212, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1

;---------------------------------------------------------------------

;rodadao
[Statedef 214]
type    = S                      
movetype = A                    
physics = S                    
juggle  = 5                  
velset = 0,0                     
ctrl = 0                        
anim = 1062                                
sprpriority = 2                
poweradd= 72*!var(33)

[State 300, Width]
type = Width
trigger1 = 1
value = 1,-1


[State 1060, efeito]
type = PlaySnd
trigger1 = AnimElem = 2 || (Anim = 300 && AnimElem = 7)
value = 1, 10
channel = 0

[State 1060, voz]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse (Random <= 550, 24, 25)
channel = 1



[State 208, 133]
type = Hitdef
trigger1 = p2statetype=A
trigger1 = Anim != 300 && AnimElem = 5
attr = S, SA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
priority = 4,Hit
damage = 60,0
pausetime = 17, 20
guard.pausetime = ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2550+(random%4)
guard.sparkno = S8036
sparkxy = -28, -90
hitsound = S1, 13
guardsound = S1, 15
ground.type = High
air.type = High
ground.slidetime = 16
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 18
ground.velocity = -4.2,-10
guard.velocity = ifelse(var(33), -5.77, -11.52)
air.velocity = -4.2, -10
sprpriority = 2
givepower = 35 ,35  
fall = 1
;fall.recover = 0
;air.fall = 1
;air.recover = 0
yaccel = .55
envshake.time=8
envshake.freq=65
envshake.ampl=6



[State 225, Hit]
type=hitdef
trigger1= animelem=5 && p2statetype!=A
trigger1= (p2stateno!=[5020,5050])
attr=S,NA
damage=60,0
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime= ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2550+(random%4)
guard.sparkno = S8036
sparkxy=-10,-92
hitsound = S1, 13
guardsound = S1, 15
guard.velocity= ifelse(var(33), -5.77, -11.52)
ground.type=High
ground.slidetime=18+4*var(17)
ground.hittime=18+4*var(17)
ground.velocity= ifelse(var(33), -5.77, -10.52), 0
ground.cornerpush.veloff = ifelse(var(33), -6.82, -12.74)
air.type=Low
air.hittime=18
air.velocity= ifelse(var(33), -2.5, -5), -7
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0
envshake.time=8
envshake.freq=65
envshake.ampl=6



[State Idle]
type=statetypeset
trigger1= animelemtime(6)>=0
movetype=I


[State 1060, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------


[StateDef 215]
type = S
physics = S
moveType = A
anim = 215
ctrl = 0
velSet = 0,0
sprPriority = 1
powerAdd = 72 * !var(33)
faceP2 = 1

[State 300, efeito]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1, 10


[State 207, voz]
type = PlaySnd
trigger1 = AnimElem = 5 && Random <= 500
value = 0, ifelse (Random <= 550, 24, 25)


[State 1405, StateTypeSet: Idle]
type = StateTypeSet
trigger1 = AnimElemTime(7) >= 0
moveType = I

[State 1405, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S, SA
hitFlag = MAF
guardFlag = H
priority = 4, Hit
damage = 55, 7
pausetime = ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -18, -55
hitsound = S1, 12
guardsound = S1, 15
animType = Back
air.animType = Back
fall.animType = Back
ground.type = High
air.type = Low
ground.hitTime = 18
ground.slideTime = 18
guard.hitTime = 18
air.hitTime = 120
ground.velocity = -4.32, 0
ground.cornerpush.veloff = ifelse(var(33), -5.78, -10.47)
guard.velocity = -10.52
air.velocity = -4.32, -7.49
air.cornerPush.velOff = 0
yAccel = 0.58
fall = 0
air.fall = 1
fall.recover = 0
fall.recoverTime = 120
forceStand = 1
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
envShake.time = 14
envShake.ampl = 4
envShake.freq = 120

[State 1405, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1




;clp
[Statedef 400]
type    = C
movetype= A
physics = C
juggle=ifelse(numtarget,15,8)                 
ctrl = 0
anim = 400
sprpriority = 2
poweradd = 0

[State 400, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 7


[State 230, Hit]
type=hitdef
trigger1= ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1= animelem=2
attr=C,NA 
damage=20,0
animtype=Light
air.animtype = Back
fall.animtype = Back
guardflag=M 
hitflag=MAF 
priority=4,Hit 
pausetime= ifelse(var(33),4,8), ifelse(var(33),4,8)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy=-10,-51
hitsound = S1, 11
guardsound = S1, 15
ground.type=Low
ground.slidetime=12+2*var(17)
ground.hittime=12+2*var(17)
ground.velocity= ifelse(var(33), -2.66, -4.49), 0
ground.cornerpush.veloff = ifelse(var(33), -4.33, -8.17)
air.type=Low
air.hittime=18
air.velocity= ifelse(var(33), -2.5, -5), -7
air.cornerpush.veloff = 0
getpower= 72*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0

[State Idle]
type=statetypeset
trigger1= animelemtime(3)>=0
movetype=I


[State 400, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------
;cmp
[Statedef 401]
type    = C
movetype= A
physics = C
juggle=ifelse(numtarget,15,8)                 
ctrl = 0
anim = 401
sprpriority = 2
poweradd = 20

[State 401, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 9



[State 401, 2]
type = Hitdef
trigger1 =((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1 = AnimElem = 3 || AnimElem = 4
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Medium
air.animtype = up
fall.animtype = up
priority = 4,Hit
damage = 50, 0
pausetime = 10, 11
guard.pausetime = 5, 4
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = 8, -50
hitsound = S1, 12
guardsound = S1, 15
ground.type = Low
air.type = High
ground.slidetime = 10
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 15
ground.velocity = -7
guard.velocity = -8.5
air.velocity = -5, -5
ground.cornerpush.veloff = -8
sprpriority = 2
getpower = ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower = 35 ,35
persistent = 0

[State 401, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------
;csp
[Statedef 402]
type    = C
movetype= A
physics = C
juggle=ifelse(numtarget,15,8)                 
ctrl = 0
anim = 402
sprpriority = 2
poweradd = 18

[State 402, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 8


[State 402, voz]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse (Random <= 550, 24, 25)


[State 240, Hit]
type=hitdef
trigger1= ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1= animelem=4
attr=C,NA
damage=60,0
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=M
hitflag=MAF 
priority=4,Hit 
pausetime= ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -10,-73
hitsound = S1, 13
guardsound = S1, 15
ground.type=Low
ground.slidetime=18+4*var(17)
ground.hittime=18+4*var(17)
ground.velocity= ifelse(var(33), -5.77, -10.52), 0
ground.cornerpush.veloff = ifelse(var(33), -6.82, -12.74)
air.type=Low
air.hittime=18
air.velocity= ifelse(var(33), -2.5, -5), -7
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0
envshake.time=10
envshake.freq=60
envshake.ampl=5

[State 240, Hit]
type=hitdef
trigger1= ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1= animelem=5
trigger1= !movecontact && !movereversed
attr=S,NA
damage=60,0
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=M
hitflag=MAF 
priority=4,Hit 
pausetime= ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -10,-120
hitsound = S1, 13
guardsound = S1, 15
ground.type=High
ground.slidetime=18+4*var(17)
ground.hittime=18+4*var(17)
ground.velocity= ifelse(var(33), -5.77, -10.52), 0
ground.cornerpush.veloff = ifelse(var(33), -6.82, -12.74)
air.type=Low
air.hittime=18
air.velocity= ifelse(var(33), -2.5, -5), -7
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0
envshake.time=10
envshake.freq=60
envshake.ampl=5

[State Idle]
type=statetypeset
trigger1= animelemtime(6)>=0
movetype=I

[State 402, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------
;clk
[Statedef 403]
type    = C
movetype= A
physics = C
juggle=ifelse(numtarget,15,8)                  
ctrl = 0
anim = 403
sprpriority = 2
poweradd = 0

[State 403, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 9


[State 245, Hit]
type=hitdef
trigger1= ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1= animelem=2
attr=C,NA 
damage=20,0
animtype=Light
air.animtype = Back
fall.animtype = Back
guardflag=L
hitflag=MAF 
priority=4,Hit 
pausetime= ifelse(var(33),4,8), ifelse(var(33),4,8)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = 8, -4
hitsound = S1, 12
guardsound = S1, 15
ground.type=Low
ground.slidetime=12+2*var(17)
ground.hittime=12+2*var(17)
ground.velocity= ifelse(var(33), -2.66, -4.49), 0
ground.cornerpush.veloff = ifelse(var(33), -4.33, -8.17)
air.type=Low
air.hittime=18
air.velocity= ifelse(var(33), -2.5, -5), -7
air.cornerpush.veloff = 0
down.velocity=-2,-2
getpower= 72*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0


[State Idle]
type=statetypeset
trigger1= animelemtime(3)>=0
movetype=I


[State 403, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------
;cmk
[Statedef 404]
type    = C                      
movetype= A                    
physics = C                    
juggle=ifelse(numtarget,15,8)                                     
velset = 0,0                     
ctrl = 0                        
anim = 404                                         
sprpriority = 2                
poweradd = 18

[State 404, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 9

[State 250, Hit]
type=hitdef
trigger1= ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1= animelem=3
attr=C,NA 
damage=40,0
animtype=Medium
air.animtype = Back
fall.animtype = Back
guardflag=L 
hitflag=MAF 
priority=4,Hit 
pausetime= ifelse(var(33),5,10), ifelse(var(33),5,10)
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = 8, -5
hitsound = S1, 12
guardsound = S1, 15
ground.type=Low
ground.slidetime=15+3*var(17)
ground.hittime=15+3*var(17)
ground.velocity= ifelse(var(33), -4.30, -7.51), 0
ground.cornerpush.veloff =  ifelse(var(33), -5.78, -10.47)
air.type=Low
air.hittime=18
air.velocity= ifelse(var(33), -2.5, -5), -7
air.cornerpush.veloff = 0
down.velocity=-3,-3
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0

[State Idle]
type=statetypeset
trigger1= animelemtime(4)>=0
movetype=I


[State 404, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------
;csk
[Statedef 405]
type    = C
movetype= A
physics = C
juggle= ifelse((p2movetype=H && p2statetype=A), 15, 1)
ctrl = 0
anim = 405
sprpriority = 2
poweradd = 18

[State 405, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 10


[State 405, voz]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse (Random <= 550, 24, 25)


[State 405, 1]
type = Hitdef
trigger1 =((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1 = AnimElem = 3
attr = C, NA
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=L 
hitflag=MAF 
priority=4,Hit 
damage = 65, 0
pausetime = ifelse(var(33),6,12), ifelse(var(33),6,12)
guard.pausetime = 10, 9
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = 8, -12
hitsound = S1, 13
guardsound = S1, 15
ground.type = Trip
air.type=Low
ground.slidetime = 17
guard.slidetime = 18+4*var(17)
ground.hittime = 18+4*var(17)
air.hittime = 18
guard.ctrltime = 19
ground.velocity = -1.33,-6.85
guard.velocity = ifelse(var(33), -5.77, -10.52)
air.velocity = -1.33,-6.85
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = ifelse(var(33), -6.82, -12.74)
sprpriority = 2
getpower = ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower = 36 ,36           
yaccel = .5
fall=1
fall.recover=0
envshake.time=5
envshake.freq=50
envshake.ampl=4

[State Idle]
type=statetypeset
trigger1= animelemtime(4)>=0
movetype=I

[State 405, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------
;deslize com queda
[Statedef 406]
type    = C
movetype= A
physics = C
juggle=ifelse((p2movetype=H && p2statetype=A), 15, 1)
ctrl = 0
anim = 407
sprpriority = 2
hitcountpersist=1
poweradd = 18


[State 0, VelAdd]
type = Velset
trigger1 = animelem = 3
x = 16

[State 810, Push]
type = PlayerPush
trigger1 = movehit
value = 0

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = S0, 23

[State 200, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 7

[State 200, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 9, 4

[State 214, Dust]
type=explod
trigger1= animelemtime(2)>=0 && vel x>.5 && !(time%3)
anim=7103
ID=7103
sprpriority=3
postype=p1
pos=45,0
vel=-2,0
removetime=-2
ownpal=1
pausemovetime=-1
supermovetime=-1



[State 440, 3]
type = HitDef
trigger1 = ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1 = animelem=3
attr = C, NA
damage    = 65,0
hitflag = MAF
guardflag = L
pausetime = ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2554+(random%4)
guard.sparkno = S8035
sparkxy = 8, -12
hitsound = S1, 13
guardsound = S1, 15
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1.5,-3.5
air.velocity = -1.2,-3
guard.velocity = -5
fall = 1
fall.recover=0
getpower = ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower = 36 ,36
envshake.time=5
envshake.freq=50
envshake.ampl=4

[State Idle]
type=statetypeset
trigger1= animelemtime(5)>=0
movetype=I


[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------
;deslize sem queda
[Statedef 407]
type    = C
movetype= A
physics = C
juggle=ifelse(numtarget,15,8)
ctrl = 0
anim = 407
sprpriority = 2
hitcountpersist=1
poweradd = 18

[State 0, VelAdd]
type = Velset
trigger1 = animelem = 3
x = 16


[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = S0, 23

[State 200, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 7

[State 200, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 9, 4

[State 214, Dust]
type=explod
trigger1= animelemtime(2)>=0 && vel x>.5 && !(time%3)
anim=7103
ID=7103
sprpriority=3
postype=p1
pos=45,0
vel=-2,0
removetime=-2
ownpal=1
pausemovetime=-1
supermovetime=-1



[State 440, 3]
type = HitDef
trigger1 = ((p2stateno!=[5020,5050]) || var(33)) && p2stateno!=5040
trigger1 = animelem=3
attr = C, NA
damage    = 55
hitflag = MAF
guardflag = L
pausetime = ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2554+(random%4)
guard.sparkno = S8035
sparkxy = 8, -12
hitsound = S1, 13
guardsound = S1, 15
ground.type = low
ground.slidetime = 10
ground.hittime  = 17
ground.velocity = -1.5
air.velocity = -1.2,-3
guard.velocity = -5
getpower = ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower = 36 ,36
envshake.time=7
envshake.freq=60
envshake.ampl=4

[State Idle]
type=statetypeset
trigger1= animelemtime(5)>=0
movetype=I

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------
;jlp
[Statedef 600]
type    = A
movetype= A
physics = A
juggle=ifelse(numtarget,15,8)                 
ctrl = 0
anim = 600
sprpriority = 2
poweradd = 0

[State 600, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 7



[State 600, 2]
type = Hitdef
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype=Light
air.animtype = Back
fall.animtype = Back
priority = 3,Hit
damage = 25, 0
pausetime = 9, 9
guard.pausetime = 9, 7
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = 8, -59
hitsound = S1, 11
guardsound = S1, 15
ground.type=High
ground.slidetime=9
ground.hittime=12
ground.velocity=-2
air.type=Low
air.velocity=-4.5,-6.5
yaccel=.5
getpower=72*!var(33), 36*!var(33)
givepower=36 ,36
envshake.time=9
envshake.freq=60
envshake.ampl=1

;---------------------------------------------------------------------
;jmp
[Statedef 601]
type    = A                      
movetype = A                    
physics = A                    
juggle=ifelse(numtarget,15,8)                
ctrl = 0                        
anim = 601                                        
sprpriority = 2                
poweradd = 17

[State 601, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 9



[State 601, 2]
type = Hitdef
trigger1 = AnimElem = 3 
attr = A, NA
hitflag = MAF
guardflag = HA
air.animtype = up
fall.animtype = up
priority = 2,Hit
damage = 50, 0
pausetime = 10, 10
guard.pausetime = 9, 7
sparkno =s2550+(random%4)
guard.sparkno = s8035
sparkxy = -34, -70
hitsound = S1, 12
guardsound = S1, 15
ground.type=High
ground.slidetime=11
ground.hittime=14
ground.velocity=-5
air.type=Low
air.velocity = -6.4, -4.8
airguard.velocity = -5.33,-1
getpower=ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=35 ,35
envshake.time=9
envshake.freq=60
envshake.ampl=2

;---------------------------------------------------------------------
;jsp
[Statedef 602]
type    = A
movetype= A
physics = A
juggle=ifelse(numtarget,15,8)                  
ctrl = 0
anim = 602
sprpriority = 2
poweradd = 30

[State 602, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 8


[State 602, voz]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse (Random <= 550, 24, 25)



[State 270, Hit]
type=hitdef
;trigger1= (p2stateno!=[5020,5050])
trigger1= animelem=3
attr=A,NA
damage=60,0
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=HA 
hitflag=MAF 
priority=4,Hit 
pausetime= 12,12
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy=-20,-62
hitsound = S1, 13
guardsound = S1, 15
ground.type=High
ground.hittime=12
ground.slidetime=12
ground.velocity= -4.49, 0
ground.cornerpush.veloff = -8.17
guard.velocity= -10.52
guard.cornerpush.veloff = -12.74
air.type=Low
air.hittime=18
air.velocity= -5, -7
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
airguard.ctrltime= 16
airguard.velocity= -8, -1.5
airguard.cornerpush.veloff = 0
fall.recover=0
envshake.time=6
envshake.freq=50
envshake.ampl=5

[State 270, Type]
type=statetypeset
trigger1= animelemtime(4)>=0
movetype=I






;---------------------------------------------------------------------

[Statedef 603]
type    = A
movetype= A
physics = A
juggle=ifelse(numtarget,15,8)                  
ctrl = 0
anim = 603
sprpriority = 2
poweradd = 18

[State 603, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 9


[State 603, 1]
type = Hitdef
trigger1 = animelem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = up
fall.animtype = up
priority = 3,Hit
damage = 25, 0
pausetime = 9, 9
guard.pausetime = 9, 7
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = 8, -99
hitsound = S1, 12
guardsound = S1, 15
ground.type=High
ground.slidetime=11
ground.hittime=14
ground.velocity=-3
air.type=High
air.velocity=-3,-2
getpower=72*!var(33), 36*!var(33)
givepower=35 ,36
envshake.time=9
envshake.freq=60
envshake.ampl=2
 
;---------------------------------------------------------------------
;jlk
[Statedef 604]
type    = A
movetype= A
physics = A
juggle=ifelse(numtarget,15,8)            
ctrl = 0
anim = 604
sprpriority = 2
poweradd = 0

[State 604, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 9



[State 603, 1]
type = Hitdef
trigger1 = AnimElem = 2 
attr = A, NA
hitflag = MAF
guardflag = HA
animtype=Light
air.animtype = Back
fall.animtype = Back
priority = 3,Hit
damage = 25, 0
pausetime = 9, 9
guard.pausetime = 9, 7
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = 8, -49
hitsound = S1, 12
guardsound = S1, 15
ground.type=High
ground.slidetime=11
ground.hittime=14
ground.velocity=-3
air.type=High
air.velocity=-4.5,-6.5
getpower=72*!var(33), 36*!var(33)
givepower=36 ,36
yaccel=.5
fall.recover=0
envshake.time=9
envshake.freq=60
envshake.ampl=2

;---------------------------------------------------------------------
;jmk levanta oponente
[Statedef 605]
type    = A                      
movetype = A                    
physics = A                    
juggle=ifelse(numtarget,15,8)                
ctrl = 0                        
anim = 605                                    
sprpriority = 2                
poweradd = 18

[State 605, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 9



[State 605, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = heavy
air.animtype = up
fall.animtype = up
priority = 2,Hit
damage = 50, 0
pausetime = 9, 9
guard.pausetime = 9, 7
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = 8, -99
hitsound = S1, 12
guardsound = S1, 15
ground.type=High
ground.slidetime=11
ground.hittime=14
ground.velocity=-1.8,-11
air.type=High
air.velocity=-1.8,-11
airguard.velocity = -5,-2
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36,36
envshake.time=9
envshake.freq=60
envshake.ampl=2
fall=1

;---------------------------------------------------------------------
;jmk
[Statedef 606]
type    = A                      
movetype = A                    
physics = A                    
juggle=ifelse(numtarget,15,8)                  
ctrl = 0                        
anim = 606                                    
sprpriority = 2                
poweradd = 18

[State 606, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 9



[State 606, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = 65, 0
pausetime = 12, 12
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -28, -52
hitsound = S1, 12
guardsound = S1, 15
ground.type=High
ground.slidetime=11
ground.hittime=14
ground.velocity=-5
air.type=low
air.velocity = -6.4, -4.8
airguard.velocity = -5.33,-1
getpower=ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36 ,36
envshake.time=9
envshake.freq=60
envshake.ampl=2


;---------------------------------------------------------------------
;jsk vel=0
[Statedef 607]
type    = A
movetype= A
physics = A
juggle=ifelse(numtarget,15,8)                  
ctrl = 0
anim = 607
sprpriority = 2
poweradd = 18

[State 607, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 10


[State 607, voz]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse (Random <= 550, 24, 25)


[State 285, Hit]
type=hitdef
trigger1= (p2stateno!=[5020,5050])
trigger1= anim=607 && animelem=5
attr=A,NA
damage=60,0
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=HA 
hitflag=MAF 
priority=4,Hit 
pausetime= 12, 12
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy=-10,-77
hitsound = S1, 13
guardsound = S1, 15
ground.type=High
ground.hittime=12
ground.slidetime=12
ground.velocity= -4.49, 0
ground.cornerpush.veloff = -8.17
guard.velocity= -10.52
guard.cornerpush.veloff = -12.74
air.type=Low
air.hittime=18
air.velocity= -5, -7
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
airguard.ctrltime= 16
airguard.velocity= -8, -1.5
airguard.cornerpush.veloff = 0
fall.recover=0
envshake.time=12
envshake.freq=60
envshake.ampl=4

[State 285, Type]
type=statetypeset
trigger1= anim=607 && animelemtime(6)>=0
movetype=I



;---------------------------------------------------------------------
;jsk
[Statedef 608]
type    = A
movetype= A
physics = A
juggle=ifelse(numtarget,15,8)                  
ctrl = 0
anim = 608
sprpriority = 2
poweradd = 18

[State 608, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 10


[State 608, voz]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse (Random <= 550, 24, 25)




[State 285, Hit]
type=hitdef
trigger1= (p2stateno!=[5020,5050]) 
trigger1= anim=608 && animelem=3
attr=A,NA
damage=60,0
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=HA 
hitflag=MAF 
priority=4,Hit 
pausetime= 12,12
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy=-10,-48
hitsound = S1, 13
guardsound = S1, 15
ground.type=High
ground.hittime=12
ground.slidetime=12
ground.velocity= -4.49, 0
ground.cornerpush.veloff =-8.17
guard.velocity= -10.52
guard.cornerpush.veloff = -12.74
air.type=Low
air.hittime=18
air.velocity= -5, -7
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
airguard.ctrltime= 16
airguard.velocity= -8, -1.5
airguard.cornerpush.veloff = 0
fall.recover=0
envshake.time=12
envshake.freq=60
envshake.ampl=4



[State 101, 3]
type = ChangeState
triggerall = power=3000 && movehit
triggerall = p2bodydist x < 40
trigger1 = Command = "tatsu1" || Command = "tatsu2" || Command = "tatsu3"
value = 1050
ctrl = 0


;---------------------------------------------------------------------


[Statedef 710]
type=S
physics=S
movetype=I
anim=710
velset=0,0
ctrl=0
sprpriority=-1


[State 207, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 9



[State 710, push]
type=playerpush
trigger1=1
value=0

[State 710, hb]
type=hitby
trigger1=1
value=SCA,AT
time=1


[State 710, attack]
type=changestate
trigger1= var(12)<=0 && (time=[15,25])
trigger1= command="x" || command="y" || command="z" || command="a" || command="b" || command="c"
value=ifelse((command="x" || command="y" || command="z"),203,208)

[State 710, attack]
type=changestate
trigger1= var(12)>=1 && (time=[18,25]) && (p2dist x=[0,60]) && p2movetype!=A
value=ifelse(random<500,203,208)

[State 710, end]
type=changestate
trigger1=!animtime
value=0
ctrl=1


;---------------------------------------------------------------------

[Statedef 720]
type    = S
physics = N
anim = 720
poweradd= 0
sprpriority = 2
velset = 0,0
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem=3
value = S5,13

[State 405, UCantHitMe]
type = NotHitBy
trigger1 = stateno = 720
value = SCA

[State 100, 1]
type = VelSet
trigger1 = AnimElemTime(5) = 0
x = const(velocity.walk.fwd.x)

[State 100, 1]
type = VelAdd
trigger1 = AnimElemTime(3) > 0
x = -.2

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, Assert]
type = AssertSpecial
trigger1 = Time > 9
flag = Invisible


[State 100, Transparency]
type = AfterImage
trigger1 = Time > 9
time = 2
framegap = 1
length = 2
PalContrast = ifelse(Time < 26, 260-(time*10), (time*10)-250), ifelse(Time < 26, 260-(time*10), (time*10)-250), ifelse(Time < 26, 260-(time*10), (time*10)-250)
trans = add

[State 810, Push]
type = PlayerPush
trigger1 = AnimElemTime(5) > 2
value = 0

[State 100, 5]
type = ChangeState
trigger1 = time > 35
value = 721
ctrl = 0

;---------------------------------------------------------------------

[Statedef 721]
type = S
physics = S
ctrl = 1
anim = 721
velset = 0,0
poweradd= 0



[State 101, 3]
type = ChangeState
trigger1 = animtime=0
value = 0
ctrl = 1


;====================== FOCUS ATTACK CHARGE ==========================
[Statedef 790]
type    = S
physics = S
movetype= I
anim = 790
ctrl = 0
velset = 0,0
sprpriority = 0
poweradd= ifelse((prevstateno = [200,3999] ),-300,18*!var(33))


[State 0, Varset]
type = VarAdd
trigger1 = time = 0
v = 37
value = life


[State 0, VarAdd]
type = VarAdd
trigger1 = 1
v = 28
value = 1

[State 0, VelAdd]
type = Velset
trigger1 = time >= 9 && time <= 19
x = .5
y = 0


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S9,5
volume = -50
freqmul = 2.0


[State 1, Landing Anim]
type = Explod
trigger1 = Time = 1
anim = 795
ID = 795
pos = 2,0
postype = p1
bindtime = 1
removetime = -2
scale = .6,.6
sprpriority = -1
ownpal = 1
removeongethit = 0
pausemovetime=99999
ignorehitpause =1
persistent =0

[State 0, VarSet]
type = VarSet
trigger1 = prevstateno = [200,3999]
v = 38
value = 1



[State 5201, flash]
type=palfx
trigger1 = var(38)=1
trigger1= time<12
trigger1= (gametime%4) = 1
mul= 256, 250, 0
add= 150,150,150
time=1

[State 5201, flash]
type=palfx
trigger1 = var(38)=1
trigger1= time>12
trigger1= (gametime%4) = 1
mul= 256, 250, 250
add= 150,150,150
time=1


[State 5201, flash]
type=palfx
trigger1 = var(38)=0
trigger1= time>15
trigger1= (gametime%4) = 1
mul= 256, 250, 250
add= 150,150,150
time=1

[State 0, LifeAdd]
type = LifeAdd
trigger1 = 1
value = -2
kill = 0

[State 1600, reversal]
type=reversaldef
trigger1 = 1
reversal.attr = SCA,NA,SA,NP,SP
pausetime=0,0
hitsound=-1
sparkno=-1
numhits=0
p1stateno = 791

[State 2004, hitoverride]
type=hitoverride 
trigger1 = 1
time=1
attr=SCA,AP
stateno=791
ignorehitpause=0

[State 820, StateChange]
type = ChangeState
triggerall = var(12) <=0
trigger1 = var(28) >=20
trigger1 = (Command != "focusx" || Command != "focusa")
trigger2 = var(28) >=52
value = 792
persistent = 0

[State 820, StateChange]
type = ChangeState
triggerall = var(12) >=0
trigger1 = var(28) >=20
trigger1 = p2bodydist x < 81
trigger1 = p2statetype!=L
trigger1 = p2stateno=[120,155]
trigger1 = (p2dist y=[-50,50])
trigger2 = var(28) >=52
value = 792
persistent = 0

[State 820, StateChange]
type = ChangeState
triggerall = var(12) <=0
trigger1 = command="BB"
value = 102


[State 820, StateChange]
type = ChangeState
triggerall = var(12) <=0
trigger1 = command="FF"
value = 101

;====================== FOCUS ATTACK CHARGE 2 ==========================

[Statedef 791]
type    = S
physics = S
movetype= I
anim = 791
ctrl = 0
velset = 0,0
sprpriority = 2


[State 0, LifeAdd]
type = LifeAdd
trigger1 = time > 7
value = -2
kill = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = (gametime%4) =1
time = 3
ampl = -2

[State 0, Pause]
type = Pause
trigger1 = time = 0
time = 7
movetime = 7

[State 0, VarAdd]
type = VarAdd
trigger1 = time > 7
v = 28
value = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 796
ID = 796
scale =1.2,1.2
pos = 30,-65
bindtime = 1
removetime = -2
pausemovetime=99999
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S9,3
volume = 255
freqmul = 2.0


[State 5201, flash]
type=palfx
trigger1 = time = 0
add=0,0,200
sinadd=0,0,-200,40
time=10
time=1

[State 5201, flash]
type=palfx
trigger1 = time > 7
trigger1 = var(38)=1
trigger1= (gametime%4) = 1
mul= 256, 250, 0
add= 150,150,150
time=1

[State 5201, flash]
type=palfx
trigger1 = time > 7
trigger1 = var(38)=0
trigger1= (gametime%4) = 1
mul= 256, 250, 250
add= 150,150,150
time=1




[State 820, StateChange]
type = ChangeState
triggerall = var(12) <=0
triggerall = time >8
trigger1 = var(28) >=20
trigger1 = (Command != "focusx" || Command != "focusa")
trigger2 = var(28) >=52
value = 792
persistent = 0

[State 820, StateChange]
type = ChangeState
triggerall = var(12) >=0
trigger1 = var(28) >=20
trigger1 = p2bodydist x < 81
trigger2 = var(28) >=52
value = 792
persistent = 0

;========================= ATTACK ================================

[Statedef 792]
type    = S
movetype= A
physics = S
juggle=0
poweradd=12*!var(33)
ctrl = 0
velset = 0,0
anim = 792
sprpriority = 2



[State 0, VelAdd]
type = Velset
trigger1 = time >= 20 && time <= 35
x = 0
y = 0



;[State 0, PosAdd]
;type = PosAdd
;trigger1 = (animelemtime(1) = 0)
;x = -5

;[State 0, PosAdd]
;type = PosAdd
;trigger1 = (animelemtime(3) = 0)
;x = 25

[State 0, LifeAdd]
type = LifeAdd
triggerall = var(37) >= var(28)
trigger1 = time = 4
trigger2 = time = 6
value = 1*(var(28))
kill = 0

[State 0, LifeAdd]
type = LifeAdd
triggerall = var(37) < var(28)
trigger1 = time = 4
value = (var(37))-1
kill = 0


[State 203, efeito]
type = PlaySnd
trigger1 = time = 0
value = 1, 8


[State 200, voz]
type = PlaySnd
trigger1 = time=2 && var(28) <52
value = 9,10
channel = 0

[State 200, voz]
type = PlaySnd
trigger1 = time=2 && var(28) >=52
value = 9,9




[State 5201, flash]
type=palfx
trigger1= animelem = 3
add=100,100,100
sinadd=-100,-100,-100,40
time=10

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 7504
ID = 7504
pos = 0,0
postype = p1
bindtime = 1
facing = -1
removetime = -2
scale = .7,.4
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1



[State 0, Explod]
type = Explod
trigger1 = var(28) >=52
trigger1 = animelem = 2
anim = 6145
ID = 6145
pos = 25,-67
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = .3,.3
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0



[State 205, hit]
type=hitdef
triggerall = enemynear,statetype = A
triggerall = var(28)<=30
trigger1 = animelem = 3
attr=S,NA
hitflag = MAF
guardflag = MA
animtype = back
priority = 5,Hit
damage=80,5
pausetime=15,18
sparkno = s2554+(random%4)
guard.sparkno= S8036
sparkxy = -10 , -80
hitsound=s1,14
guardsound=s1,15
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 25
air.hittime = 25
guard.ctrltime = 25
ground.velocity = -8
guard.velocity = -6.8
air.velocity = -4, -9
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower = 36,36
persistent = 0
envshake.time = 16
envshake.ampl = 4
fall.envshake.time = 16
fall.envshake.ampl = 4
yaccel = .5
id = 790
nochainid=790


[State 205, hit]
type=hitdef
triggerall = enemynear,statetype = A
triggerall = var(28) >30
triggerall = var(28) <=51
trigger1 = animelem = 3
attr=S,NA
hitflag = MAF
guardflag = MA
animtype = diagup
priority = 5,Hit
damage=100,7
pausetime=18,18
guard.pausetime = 13,13
sparkno = s2554+(random%4)
guard.sparkno= S8036
sparkxy = -10, -80
hitsound=s1,14
guardsound=s1,15
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 25
air.hittime = 25
guard.ctrltime = 25
fall = 1
air.recover = 0
fall.recover = 0
ground.velocity = -8
guard.velocity = -6.8
air.velocity = -4, -10.5
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower = 36,36
persistent = 0
envshake.time = 22
envshake.ampl = 6
yaccel = .5
id = 790
nochainid=790

[State 205, hit]
type=hitdef
triggerall = enemynear,statetype = A
triggerall = var(28) >=52
trigger1 = animelem = 3
attr=S,NA
hitflag = MAF
guardflag = ;MA
animtype = diagup
priority = 5,Hit
damage=120,10
pausetime=20,20
guard.pausetime = 13,13
sparkno = s2554+(random%4)
guard.sparkno= S8036
sparkxy = -10, -80
hitsound=s1,14
guardsound=s1,15
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 25
air.hittime = 25
guard.ctrltime = 25
fall = 1
air.recover = 0
fall.recover = 0
ground.velocity = -10
guard.velocity = -6.8
air.velocity = -5, -10.5
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower = 36,36
persistent = 0
envshake.time = 22
envshake.ampl = 6
yaccel = .5
id = 790
nochainid=790


[State 205, hit]
type=hitdef
triggerall = enemynear,statetype != A
triggerall = var(28)<=30
trigger1 = animelem = 3
attr=S,NA
hitflag = MAF
guardflag = MA
animtype = heavy
air.animtype = diagup
fall.animtype = back
priority = 5,Hit
damage=80,5
pausetime=13,15
sparkno = s2554+(random%4)
guard.sparkno= S8036
sparkxy = -10, -80
hitsound=s1,14
guardsound=s1,15
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 25
air.hittime = 25
guard.ctrltime = 25
air.fall = 1
air.recover = 0
ground.velocity = -8
guard.velocity = -6.8
air.velocity = -4, -5
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower = 36,36
persistent = 0
envshake.time = 16
envshake.ampl = 4
yaccel = .5
id = 790
nochainid=790


[State 205, hit]
type=hitdef
triggerall = enemynear,statetype != A
triggerall = var(28) >30
triggerall = var(28) <=51
trigger1 = animelem = 3
attr=S,NA
hitflag = MAF
guardflag = MA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage=100,7
pausetime=20,0
guard.pausetime = 13,13
sparkno = s2554+(random%4)
guard.sparkno= S8036
sparkxy = -10, -80
hitsound=s1,14
guardsound=s1,15
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 25
air.hittime = 25
guard.ctrltime = 25
air.fall = 1
air.recover = 0
ground.velocity = -8
guard.velocity = -6.8
air.velocity = -3, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower = 36,36
persistent = 0
envshake.time = 22
envshake.ampl = 6
yaccel = .5
id = 790
nochainid=790
p2stateno = 797


[State 205, hit]
type=hitdef
triggerall = enemynear,statetype != A
triggerall = var(28) >=52
trigger1 = animelem = 3
attr=S,NA
hitflag = MAF
guardflag = ;MA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage=120,10
pausetime=20,0
guard.pausetime = 13,13
sparkno = s2554+(random%4)
guard.sparkno= S8036
sparkxy = -10, -80
hitsound=s9,11
guardsound=s1,15
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 25
air.hittime = 25
guard.ctrltime = 25
air.fall = 1
air.recover = 0
ground.velocity = -8
guard.velocity = -6.8
air.velocity = -3, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower = 36,36
persistent = 0
envshake.time = 22
envshake.ampl = 6
yaccel = .5
id = 790
nochainid=790
p2stateno = 797


[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 820, StateChange]
type = ChangeState
triggerall = var(12) <=0
triggerall = movecontact
trigger1 = command="BB"
value = 105


[State 820, StateChange]
type = ChangeState
triggerall = var(12) <=0
triggerall = movecontact
trigger1 = command="FF"
value = 101




;--------------------------- TARGET STANDING -------------------------





[Statedef 797]
type=S
physics=S
movetype=H
ctrl=0
velset=-6,0
sprpriority=-1

[State 0, anim]
type=changeanim2
trigger1= !time
value=797

[State 0, HitFallSet]
type = HitFallSet
trigger1 = animelem = 5
value = 1


[State 0, lili]
type=velset
trigger1= animelem=2 || animelem=3 || animelem=4
x=-2

[State 0, stop]
type=posset
trigger1= 1
y=0

[State 0, stop]
type=velset
trigger1= 1
y=0

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 6
time = 5
freq = 60
ampl = -2

[State 1232, FX]
type=playsnd
trigger1 = animelem = 6
value=f7,0

[State 1232, FX]
type=explod
trigger1 = animelem = 6
anim=f62
pos= 0, 0
postype=p1
sprpriority=-5


[State 0, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(7)>=0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 1114100, end]
type=selfstate
trigger1= time>=150
value=ifelse(alive,5120,5150)


;--------------------------------------------------------------------



;throw
[Statedef 800]
type = S
physics = S
movetype = A
anim = 800
ctrl = 0
velset = 0,0
sprpriority = 1
poweradd=18*!var(33)
facep2 = 1

[State 800, AttackDist]
type = AttackDist
trigger1 = 1
value = 0


[State 800, HitDef]
type = HitDef
trigger1 = AnimElem = 2
trigger1 = !var(47)
attr = S,NT        
hitflag = M-       
priority = 1,Miss
hitsound = S1,17
sparkno=-1
yaccel = .5
p1facing = ifelse((var(12)<=0&&command="holdfwd") || (var(12)>=1&&frontedgedist<backedgedist),1,-1)
p2facing = 1
p1stateno = 805
p2stateno = 807
numhits = 0
getpower = 0,0
givepower = 0,0




[State 800, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2, 15
channel = 0


[State 800, PosSet]
type = PosSet
trigger1 = !Time
y = 0


[State 800, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I       


[State 800, VarSet]
type = VarSet
trigger1 = !Time && var(12)>=1
var(5) = Ceil(Random/250)


[State 800, VarSet]
type = VarSet
trigger1 = 1
var(19) = 0


[State 800, VarSet]
type = VarSet
trigger1 = NumEnemy
trigger1 = (EnemyNear, StateNo = [0,899]) && (EnemyNear, StateNo != [100,104]) && (EnemyNear, StateNo != [600,799])
var(19) = 7


[State 800, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;
[Statedef 805]
type = S
movetype = A
physics = N
anim = 805
ctrl = 0

[State 805, ChangeState]
type = ChangeState
triggerall = var(12)<=0
triggerall = AnimElemTime(2)<1
trigger1 = NumTarget && var(19)
trigger1 = (Target, Command = "holdfwd" || Target, Command = "holdback")
trigger1 = (Target, Command = "b" || Target, Command = "c" || Target, Command = "y" || Target, Command = "z")
value = 890

[State 805, ChangeState]
type = ChangeState
triggerall = var(12)>=1
triggerall = AnimElemTime(2)<1
trigger1 = NumTarget && var(19)
trigger1 = random<80
value = 890

[State 805, VarSet]
type = VarSet
trigger1 = var(19)>0
var(19) = -1


[State 805, HitAdd]
type = HitAdd
trigger1 = AnimElem = 6
value = 1


[State 805, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0



[State 805, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 25
channel = 0


[State 805, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 6
value = 72


[State 805, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1
time = -1
pos = -30,0


[State 805, TargetBind]
type = TargetBind
trigger1 = AnimElem = 2
time = -1
pos = -27,-64


[State 805, TargetBind]
type = TargetBind
trigger1 = AnimElem = 3
time = -1
pos = -5,-78


[State 805, TargetBind]
type = TargetBind
trigger1 = AnimElem = 4
time = -1
pos = 50,-88


[State 805, TargetBind]
type = TargetBind
trigger1 = AnimElem = 5
time = -1
pos = 73,-57


[State 805, TargetBind]
type = TargetBind
trigger1 = AnimElem = 6
time = 1
pos = 88,-60


[State 805, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 6
value = -112


[State 805, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 6
value = 36


[State 805, TargetState]
type = TargetState
trigger1 = !Time
value = 806


[State 805, VarAdd]
type = VarAdd
trigger1 = var(19)>0
var(19) = -1


[State 805, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;
[Statedef 806]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 806, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 806


[State 806, EnvShake]
type = EnvShake
trigger1 = (Pos Y>=0) && (Vel Y>0)
time = 20


[State 806, ScreenBound]
type = ScreenBound
trigger1 = AnimElemTime(5)<=0
value = 1


[State 806, SprPriority]
type = SprPriority
trigger1 = AnimElem = 3
value = 2


[State 806, SprPriority]
type = SprPriority
trigger1 = AnimElem = 4
value = -1


[State 806, Turn]
type = Turn
trigger1 = AnimElemTime(6)>0
trigger1 = (Pos Y>=0) && (Vel Y>0)


[State 806, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(6)>=0
y = .49


[State 806, VelSet]
type = VelSet
trigger1 = AnimElem = 6 || AnimElem = 5
x = -2.2
y = -8

[State 807, SelfState]
type = SelfState
trigger1 = var(12)<=0
trigger1 = Command = "recovery"
trigger1 = Alive && Time>=30
value = IfElse((Pos Y>=-20), 5200, 5210)

[State 807, SelfState]
type = SelfState
trigger1 = var(12)>=1
trigger1 = Alive && Time>=54
trigger1 = random<100
value = IfElse((Pos Y>=-20), 5200, 5210)



[State 806, SelfState]
type = SelfState
trigger1 = AnimElemTime(6)>0
trigger1 = (Pos Y>=0) && (Vel Y>0)
value = 5100


;---------------------------------------------------------------------------
;
[Statedef 807]
type = A
movetype = H
physics = N
velset = 0,0

[State 807, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA



[State 807, SelfState]
type = SelfState
trigger1 = Time>5
value = 5100

;---------------------------------------------------------------------------
;
[Statedef 811]
type = S
physics = S
movetype = A
anim = 800
ctrl = 0
velset = 0,0
sprpriority = 1
poweradd=18*!var(33)
facep2 = 1

[State 810, AttackDist]
type = AttackDist
trigger1 = 1
value = 0


[State 810, HitDef]
type = HitDef
trigger1 = AnimElem = 2
trigger1 = !var(47)
attr = S,NT        
hitflag = M- 
sparkno=-1       
priority = 1,Miss
hitsound =  S31,2
yaccel = .5
p1facing = IfElse(Command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 835
p2stateno = 837
numhits = 0
getpower = 0,0
givepower = 0,0


[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2, 15
channel = 0



[State 810, PosSet]
type = PosSet
trigger1 = !Time
y = 0


[State 810, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I       


[State 810, VarSet]
type = VarSet
trigger1 = !Time && var(12)>=1
var(5) = Ceil(Random/250)


[State 810, VarSet]
type = VarSet
trigger1 = 1
var(19) = 0


[State 810, VarSet]
type = VarSet
trigger1 = NumEnemy
trigger1 = (EnemyNear, StateNo = [0,899]) && (EnemyNear, StateNo != [100,104]) && (EnemyNear, StateNo != [600,799])
var(19) = 7


[State 810, ChangeState]
type = ChangeState
trigger1 = NumTarget && var(19)
trigger1 = (Target, Command = "holdfwd" || Target, Command = "holdback")
trigger1 = (Target, Command = "b" || Target, Command = "c" || Target, Command = "y" || Target, Command = "z")
value = 890


[State 810, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;---------------------------------------------------------------------------




;ex throw
[Statedef 823];800
type=S
movetype=A
physics=S
juggle=6
velset=0,0
ctrl=0
anim=823
sprpriority=1
facep2=1
poweradd=-500

[State 1010, strengthvar]
type=varset
trigger1= var(8)!=4
var(8)=4


[State 800, Don't Guard]
type=attackdist
trigger1=1
value=0

[State 800, Hit]
type=hitdef
trigger1= animelem=2
attr=S,ST
hitflag=AFM
priority=1,miss 
sparkno=-1
hitsound=S1,17
p1facing=ifelse((var(12)<=0&&command="holdfwd") || (var(12)>=1&&frontedgedist<backedgedist),-1,1)
p2facing=1
p1stateno=ifelse((var(12)<=0&&command="holdfwd") || (var(12)>=1&&frontedgedist>backedgedist),825,824) 
guard.dist=0
fall=1
fall.recover=0



[State Idle]
type=statetypeset
trigger1= animelemtime(3)>=0
movetype=I

[State 800, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1


;---PLAYER---
[Statedef 824];801
type=S
movetype=A
physics=S
anim=824
ctrl=0
sprpriority=1




[State Width]
type=width
trigger1= 1
edge=30,0

[State 801, Bind 1]
type=targetbind
trigger1= 1
pos=45, ifelse(enemynear, pos y <0, -30, 0)

[State Throw]
type=targetstate
trigger1= !time
value=826


[State 801, End]
type=changestate
trigger1= !animtime
value=828
ctrl=0


;---PLAYER TURNS---
[Statedef 825];803
type=S
movetype=A
physics=S
anim=826
ctrl=0
sprpriority=1



[State Throw]
type=targetstate
trigger1= !time
value=827

[State Width]
type=width
trigger1= 1
edge=30,30

[State 803, Bind 1]
type=targetbind
trigger1= animelemtime(1)>=0 && animelemtime(2)<0
pos=-45,0

[State 803, Bind 2]
type=targetbind
trigger1= animelemtime(2)>=0 && animelemtime(3)<0
pos=-25,0

[State 803, Bind 3]
type=targetbind
trigger1= animelemtime(3)>=0 && animelemtime(4)<0
pos=0,0

[State 803, Bind 4]
type=targetbind
trigger1= animelemtime(4)>=0 && animelemtime(5)<0
pos=22,0

[State 803, Bind 5]
type=targetbind
trigger1= animelemtime(5)>=0
pos=45,0

[State 803, spr]
type=sprpriority
trigger1= 1
value=1-2*(animelemtime(2)>=0 && animelemtime(5)<0)

[State 803, End]
type=changestate
trigger1= !animtime
value=828
ctrl=0

;---TARGET---
[Statedef 826];802
type=A
movetype=H
physics=N
velset=0,0
sprpriority=0

[State 802, Anim]
type=changeanim2
trigger1= !time
value=ifelse(pos y<0, 5030, 5005)



[State Safety]
type=selfstate
trigger1= time>=60
value= ifelse(pos y<0, 5040, 0)
ctrl=1


[Statedef 827];804
type=A
movetype=H
physics=N
velset=0,0
sprpriority=0


[State 804, Anim]
type=changeanim2
trigger1= !time
value=827

[State Safety]
type=selfstate
trigger1= time>=60
value= ifelse(pos y<0, 5040, 0)
ctrl=1



;---PLAYER---
[Statedef 828];805
type=S
movetype=A
physics=S
anim=828
ctrl=0

[State 805, throw]
type=targetstate
trigger1= !time
value=829


[State 805, width]
type=width
trigger1= animelemtime(4)<0
edge=0,40

[State 805, width]
type=width
trigger1= animelemtime(4)>=0 && animelemtime(5)<0
edge=0,70

[State 805, throwsnd]
type=playsnd
trigger1= animelem=2
value=2,1
channel=0

[State 805, Bind 1]
type=targetbind
trigger1= animelemtime(1)>=0 && animelemtime(2)<0
pos=15,-76

[State 805, Bind 2]
type=targetbind
trigger1= animelemtime(2)>=0 && animelemtime(3)<0
pos=-11,-105

[State 805, Bind 3]
type=targetbind
trigger1= animelemtime(3)>=0 && animelemtime(4)<0
pos=-40,-80

[State 805, Bind 4]
type=targetbind
trigger1= animelem=4
pos=-70,-45

[State 805, Snd]
type=playsnd
trigger1= numtarget
trigger1= target,stateno=24080 && target,time=1
value=3,11
volume=-100
persistent=0

[State 805, Dust]
type=explod
trigger1= numtarget
trigger1= target,stateno=24080 && target,time=1
anim=8090
ID=8090
sprpriority=-2
postype=p2
pos=0,0
vel=0,0
ownpal=1
;scale=.5,.5

[State 805, shake]
type=envshake
trigger1= numtarget
trigger1= target,stateno=24080 && target,time=1
time=12
freq=120
ampl=6
persistent=0


[State 805, hurt]
type=targetlifeadd
trigger1=  numtarget
trigger1= target,stateno=24080 && target,time=1
value=-112

[State 805, hurt]
type=targetpoweradd
trigger1= animelem=4
value=36


[State 805, throw]
type=targetstate
trigger1= animelem=4
value=830

[State 805, Pos]
type=posadd
trigger1= !animtime
x=3

[State 805, Turn]
type=turn
trigger1= !animtime

[State 805, End]
type=changestate
trigger1= !animtime
value=0 
ctrl=1


[Statedef 829];808
type=A
movetype=H
physics=N
velset=0,0
sprpriority=0

[State 808, Anim]
type=changeanim2
trigger1= !time
value=829

[State 808, camera]
type=screenbound
trigger1= 1
value=1
movecamera=0,0

[Statedef 830];809
type=A
movetype=H
physics=N
velset=2,10


[State 809, grav]
type=gravity
trigger1= 1




[State 809, hitground]
type=changestate
trigger1= vel y>0
trigger1= pos y>=-9
value=24080



;[State 809, hitground]
;type=selfstate
;trigger1= vel y>0
;trigger1= pos y>=-9
;value=5110





; P2 
[Statedef 24080]
type    = A
movetype= H
physics = N


[State 2408, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2408, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 2408, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 2407

[State 2408, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 24090

;---------------------------------------------------------------------------
; P2 
[Statedef 24090]
type    = A
movetype= H
physics = N


[State 2409, Vel]
type = VelSet
trigger1 = Time = 0
y = -8.4
x = 1.4

[State 2409, Gravity]
type = VelAdd
trigger1 = 1
y = .4

[State 2409, Anim 2409]
type = ChangeAnim2
trigger1 = Time = 0
value = 2409

[State 2409, Anim 2407]
type = ChangeAnim2
trigger1 = Vel Y > 0
trigger1 = Anim = 2409
persistent = 0
value = 2407

[State 2409, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100






;
[Statedef 835]
type = S
movetype = A
physics = N
anim = 835
ctrl = 0

[State 815, ChangeState]
type = ChangeState
triggerall = var(12)<=0
triggerall = AnimElemTime(2)<1
trigger1 = NumTarget && var(19)
trigger1 = (Target, Command = "holdfwd" || Target, Command = "holdback")
trigger1 = (Target, Command = "b" || Target, Command = "c" || Target, Command = "y" || Target, Command = "z")
value = 890

[State 805, ChangeState]
type = ChangeState
triggerall = var(12)>=1
triggerall = AnimElemTime(2)<1
trigger1 = NumTarget && var(19)
trigger1 = random<80
value = 890


[State 815, VarSet]
type = VarSet
trigger1 = var(19)>0
var(19) = -1


[State 815, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 8090
ID = 7102
pos = 15,0
postype = p1  
supermovetime = -1
pausemovetime = -1
scale = .75,.75
sprpriority = -2
ownpal = 1
persistent = 0

[State 815, HitAdd]
type = HitAdd
trigger1 = AnimElem = 9
value = 1


[State 815, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0




[State 815, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
value = S0,23
channel = 0



[State 815, PosAdd]
type = PosAdd
triggerall = command = "holdfwd"
trigger1 = !Time
x = 50


[State 815, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 9
value = 72


[State 815, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1
time = -1
pos = -32,0


[State 815, TargetBind]
type = TargetBind
trigger1 = AnimElem = 2
time = -1
pos = -16,-70


[State 815, TargetBind]
type = TargetBind
trigger1 = AnimElem = 3
time = -1
pos = 0,-45


[State 815, TargetBind]
type = TargetBind
trigger1 = AnimElem = 4
time = -1
pos = 10,-24


[State 815, TargetBind]
type = TargetBind
trigger1 = AnimElem = 5
time = -1
pos = -24,-16


[State 815, TargetBind]
type = TargetBind
trigger1 = AnimElem = 6
time = 1
pos = -20,-60


[State 815, TargetBind]
type = TargetBind
trigger1 = AnimElem = 7
time = -1
pos = 0,-45


[State 815, TargetBind]
type = TargetBind
trigger1 = AnimElem = 8
pos = 80,-64


[State 815, TargetBind]
type = TargetBind
trigger1 = AnimElem = 9
time = 1
pos = 100,-55


[State 815, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 9
value = -130


[State 815, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 9
value = 36


[State 815, TargetState]
type = TargetState
trigger1 = !Time
value = 836


[State 815, VarAdd]
type = VarAdd
trigger1 = var(19)>0
var(19) = -1

[State 815, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 3


[State 815, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0


[State 815, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 836]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 816, AngleSet]
type = AngleSet
trigger1 = !Time
value = 0


[State 816, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 836


[State 816, EnvShake]
type = EnvShake
trigger1 = (Pos Y>=0) && (Vel Y>0)
time = 20


[State 816, ScreenBound]
type = ScreenBound
trigger1 = AnimElemTime(9)<=0
value = 1


[State 816, Turn]
type = Turn
trigger1 = AnimElemTime(9)>0
trigger1 = (Pos Y>=0) && (Vel Y>0)


[State 816, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(9)>0
y = .49


[State 816, VelSet]
type = VelSet
trigger1 = AnimElem = 9
x = -3.2
y = -7.5


[State 807, SelfState]
type = SelfState
trigger1 = var(12)<=0
trigger1 = Command = "recovery"
trigger1 = Alive && Time>=42
value = IfElse((Pos Y>=-20), 5200, 5210)

[State 807, SelfState]
type = SelfState
trigger1 = var(12)>=1
trigger1 = Alive && Time>=62
trigger1 = random<100
value = IfElse((Pos Y>=-20), 5200, 5210)


[State 816, SelfState]
type = SelfState
trigger1 = AnimElemTime(9)>0
trigger1 = (Pos Y>=0) && (Vel Y>0)
value = 5100


;---------------------------------------------------------------------------
;
[Statedef 837]
type = A
movetype = H
physics = N
velset = 0,0

[State 817, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA


[State 817, SelfState]
type = SelfState
trigger1 = Time>5
value = 5100

;--------------------------------------------------------------------

[Statedef 890]
type = S
physics = N
movetype = I
anim = 5945
ctrl = 0
velset = 0,0
sprpriority = 1

[State 890, FX]
type=explod
trigger1= !time
anim=8036
ID=7000
sprpriority=5
postype=p1
pos=0,-55
ownpal=1
pausemovetime=-1
supermovetime=-1


[State 890, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


[State 890, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0


[State 890, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,3
channel = 0

[State 890, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,15
channel = 0




[State 890, PosAdd]
type = PosAdd
trigger1 = !Time
x = 24


[State 890, PosSet]
type = PosSet
trigger1 = !Time
y = 0


[State 890, TargetBind]
type = TargetBind
trigger1 = !Time && NumTarget
pos = 0,0


[State 890, TargetFacing]
type = TargetFacing
trigger1 = !Time && NumTarget
value = -1


[State 890, TargetState]
type = TargetState
trigger1 = !Time && NumTarget
value = 895


[State 890, VelSet]
type = VelSet
trigger1 = 1
x = -1.425
y = 0


[State 890, ChangeState]
type = ChangeState
trigger1 = Time>=27
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;
[Statedef 895]
type = S
physics = N
movetype = I
ctrl = 0
velset = 0,0
sprpriority = 1

[State 895, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = IfElse(SelfAnimExist(5945), 5945, 130)


[State 895, ChangeAnim]
type = ChangeAnim
trigger1 = Time>=20 && Anim = 130
value = 140


[State 895, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && !SelfAnimExist(5945) && SelfAnimExist(5910)
value = 5910


[State 895, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0


[State 895, PosSet]
type = PosSet
trigger1 = !Time
y = 0


[State 895, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


[State 895, VelSet]
type = VelSet
trigger1 = 1
x = -1.425
y = 0


[State 895, SelfState]
type = SelfState
trigger1 = Time>=27
value = 0
ctrl = 1




;=====================================================================
;roll
[Statedef 810]
type    = S
physics = S
movetype= I
anim = 810
ctrl = 0
velset = 0,0

[State 810, voz]
type = Playsnd
trigger1 = AnimElem = 3 && Random <= 500
value = 0,ifelse (Random <= 500, 14, 24)




[State 810, Velocity]
type = VelSet
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(7) <= 0
x = ifelse (AnimElemTime(7) = 0, 0, 6)


[State 720, hb]
type=hitby
trigger1= animelemtime(9)<0
value=SCA,AT
time=1

[State 810, Push]
type = PlayerPush
trigger1 = AnimElemTime(2) > 0
value = 0


[State 810, Ctrl]
type = CtrlSet
trigger1 = AnimElemTime(8) >= 0
value = 1

[State 810, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------

[Statedef 815]
type    = S
physics = S
movetype= I
anim = 815
ctrl = 0
velset = 0,0

[State 810, voz]
type = Playsnd
trigger1 = AnimElem = 3 && Random <= 400
value = 0,ifelse (Random <= 550, 14, 24)


[State 810, Push]
type = PlayerPush
trigger1 = AnimElemTime(2) > 0
value = 0


[State 810, Velocity]
type = VelSet
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(6) <= 0
x = -6



[State 720, hb]
type=hitby
trigger1= animelemtime(8)<0
value=SCA,AT
time=1

[State 810, Ctrl]
type = CtrlSet
trigger1 = AnimElemTime(7) >= 0
value = 1

[State 810, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;=====================================================================


[Statedef 816]
type    = A
physics = A
movetype= I
anim = 816
ctrl = 0
velset = 0,0
poweradd= 0


[State 200, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 13



[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 8050
ID = 2469
pos = 4,-53
postype = p1  
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 1.2,1.2
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1


[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0


[State 810, Velocity]
type = velset
trigger1 = var(12)<=0
trigger1 =  command="holdfwd" && command="y"
trigger2 = var(12)>=1
trigger2 = frontedgedist > backedgedist
x = 8


[State 810, Velocity]
type = velset
trigger1 = var(12)<=0
trigger1 =  command="holdback" && command="y"
trigger2 = var(12)>=1
trigger2 = frontedgedist < backedgedist
x = -7



[State 810, HitBy]
type = notHitBy
trigger1 = 1
value = SCA, NT,ST,HT


[State 0]
type = VelSet
trigger1 = movecontact
x = 0
y = 0


[State 810, StateChange]
type = Changestate
trigger1 = Pos Y >= -20 && Vel Y > 0
value = 817
ctrl = 0


;=====================================================================



[Statedef 817]
type    = A
physics = A
movetype= I
anim = 8050
ctrl = 0
velset = 0,0
poweradd= 0
sprpriority=4


[State 810, StateChange]
type = Changestate
trigger1 = animtime=0
value = 1015
ctrl = 0

;====================================================================

[Statedef 820]
type    = S
physics = N
movetype= I
anim = 820
ctrl = 0
velset = 0,0


[State 900, lightning]
type = Explod
trigger1 = time = 70
trigger2 = time = 200
anim = 2711
id = 2711
postype = p1
pos = 0,0
bindtime = 1
sprpriority = -2
removeongethit = 1
removetime = 23
ownpal = 1
ontop = 0
scale = 1,1
pausetime = 200
supermovetime = 200

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 69
trigger2 = time = 199
value = S3,7

[State 740, shake]
type = envshake
trigger1 = anim = 820&&!(time%4)
time = 4
fre = 80
ampl = 2

[State 740, flash]
type = palfx
trigger1 = anim = 820&&!(time%12)
add = 80,20,0
sinadd = 80,20,0,12
time = 12

[State 740, fx]
type=helper
trigger1=anim=820&&!numhelper(822)
helpertype=normal
stateno=822
ID=822
name="Power Charge"
postype=p1
pos = 5,0
ownpal=1
persistent=0


[State 820, PowerMax Sound]
type = PlaySnd
trigger1 = Power >= 3000
value = 1, 19
persistent = 0

[State 820, PowerAdd]
type = PowerAdd
triggerall= anim=820 && power<powermax
trigger1= var(12)<=0 && (Command = "holdb" && Command = "holdy")
trigger2= var(12)>=1
value=2+(time/10)

[State 820, Anim]
type = ChangeAnim
triggerall = anim!= 821 
trigger1= var(12)<=0 && (Command != "holdb" || Command != "holdy") 
trigger2= power>=powermax || roundstate!=2
trigger3= var(12)>=1 && (inguarddist || p2bodydist x<=120)
trigger3= p2stateno!=001
value = 821


[State 820, StateChange]
type = ChangeState
trigger1 = Anim = 821 && !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------


[Statedef 822]
physics=N
anim=8010
sprpriority=-2

[State 7240, fx]
type=explod
trigger1=!numexplod(2461)
anim=2461
ID=2461
sprpriority=4
postype=p1
removetime=-1

[State 7240, fx]
type=modifyexplod
trigger1=1
ID=2461
scale=.5,.1+.00022*(root,power)

[State 7240, fx]
type=modifyexplod
trigger1=root,power>=3000
ID=2461
scale=.5,.75


[State 7240, bind]
type=bindtoroot
trigger1=parent, anim = 820
pos=-4,0
time=1

[State 7240, assert]
type=assertspecial
trigger1=1
flag=noshadow
ignorehitpause=1

[State 820, Voice]
type = Playsnd
trigger1 = Time = 4
value =3,1
persistent = 0
loop=1
channel = 1

[State 900, particulas]
type = Explod
trigger1 = !(time%4)
anim = 8783
pos = 0,-5
random = 80,10
sprpriority = 5
ownpal = 1
vel = ceil(1-random/500),-ceil(2+random/333)
accel = 0,.15
facing = -1+(random<500)*2
scale = .8,.8

[State 900, particulas]
type = Explod
trigger1 = !(time%4)
anim = 8783
pos = 0,-65
random = 50,80
sprpriority = -5
ownpal = 1
vel = 0, -1.2
scale = .8,.8


[State 7240, image]
type=afterimage
trigger1=!time
time=999
timegap=1
framegap=1
length=4
palmul=.5,.33,.25
palcontrast=120,120,120
trans=add


[State 7240, anim]
type=changeanim
trigger1=anim=8010
trigger1 = (root,stateno!=820)||(root,anim!=820)
value=8011
elem=animelemno(0)

[State 820, Voice]
type = Stopsnd
trigger1 = anim = 8011
channel = 1

[State 820, Voice]
type = Stopsnd
trigger1 = anim = 8011
channel = 2


[State 7240, remove]
type=removeexplod
trigger1=anim=8011&&!animtime

[State 7240, end]
type=destroyself
trigger1=anim=8011&&!animtime


;---------------------------------------------------------------------
;airthrow
[Statedef 831]
type = A
movetype = A
physics = A
juggle = 0
ctrl = 0
anim = 831

[State 850, AttackDist]
type = AttackDist
trigger1 = 1
value = 0


[State 850, Missed]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2, 15
channel = 0

[State 850, 1]
type = HitDef
Trigger1 = Time = 0
attr = A, NT
hitflag = AF
priority = 3, Miss
sparkno = -1
sprpriority = -1
p1facing = IfElse (Command = "holdback", -1, 1)
p2facing = 1
p1stateno = 832
p2stateno = 833
numhits = 0
fall = 1

[State 850, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(3)>=0
movetype = I      

[State 850, 2]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52


;==========================================================================


[Statedef 832]
type = A
physics = N
movetype = A
anim = 832
sprpriority = -1
ctrl = 0



[State 805, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 17
channel = 1

[State 805, efeito]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1, 10
channel = 1

[State 805, voz]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,13
channel = 0


[State 860, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.45

[State 860, PosSet]
type = PosSet
trigger1 = Pos Y >= 0 && Vel Y > 0
y = 0


[State 860, VelSet]
type = VelSet
trigger1 = Pos Y >= 0
y = 0


[State 860, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 0

[State 860, VelMul]
type = VelMul
trigger1 = AnimElem = 1
x = 0.5

[State 860, VelMul]
type = VelMul
trigger1 = Pos Y = 0 && Vel X > 0
x = 0.4


[State 860, Width]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(10) < 0
edge = 40, 40

[State 860, Bind]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 2, < 0
pos = -38, 0

[State 860, Bind]
type = TargetBind
trigger1 = AnimElem = 2, >= 0 && AnimElem = 3, < 0
pos = -38, -61


[State 860, Bind]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 4, < 0
pos = -12, -61



[State 860, Bind]
type = TargetBind
trigger1 = AnimElem = 4
pos = 31, -54


[State 860, HP]
type = TargetLifeAdd
trigger1 = AnimElem = 5
value = -90


[State 860, Thrown]
type = TargetState
trigger1 = AnimElem = 5
value = 834

[State 860, env]
type = EnvShake
trigger1 = AnimElem = 4
time = 10
freq = 120
ampl = -4


[State 860, Finish]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




[Statedef 833]
type = A
MoveType = H
physics = N
VelSet = 0, 0


[State 825, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 833



[Statedef 834]
type = A
MoveType = H
physics = N
velset = -4,-8
poweradd = 20

[State 807, Turn]
type = Turn
trigger1 = Time = 0

[State 807, Vel]
type = Gravity
trigger1 = 1


[State 807, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 20


[State 807, SelfState]
type = SelfState
trigger1 = var(12)<=0
trigger1 = Command = "recovery"
trigger1 = Alive && Time>=30
value = IfElse((Pos Y>=-20), 5200, 5210)

[State 807, SelfState]
type = SelfState
trigger1 = var(12)>=1
trigger1 = Alive && Time>=54
trigger1 = random<100
value = IfElse((Pos Y>=-20), 5200, 5210)

[State 826, 4]
type = SelfState
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100


;=====================================================================

[Statedef 835]
type    = A
movetype= A
physics = N
anim = 805
poweradd = 60
ctrl = 0

[State 835, efeito]
type = PlaySnd
trigger1 = Time = 0
value = 1, 17
channel = 1

[State 835, efeito]
type = PlaySnd
trigger1 = AnimElem = 4 || AnimElem = 7
value = 1, 10
channel = 1

[State 835, voz]
type = PlaySnd
trigger1 = Time = 0 || AnimElemTime(8) = 0
value = 0, ifelse (Time = 0, 13,24)
channel = 0

[State 835, efeito]
type = PlaySnd
trigger1 = P2StateNo = 5100
value = 1, 22
channel = 1
persistent = 0

[State 835, Vel]
type = Gravity
trigger1 = 1

[State 835, Vel]
type = VelSet
trigger1 = Pos Y >= 0 && Vel Y > 0
y = 0

[State 835, Pos]
type = PosSet
trigger1 = Pos Y >= 0 && Vel Y > 0
y = 0

[State 835, Vel]
type = VelSet
trigger1 = Pos Y = 0|| AnimElemTime(8) = 0
x = ifelse (Pos Y = 0, 6, 0)

[State 835, Vel]
type = VelMul
trigger1 = Pos Y = 0 && Vel X > 0
x = 0.95

[State 805, Bind 1]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = -28, 0

[State 805, Bind 2]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = -16, -71

[State 805, Bind 3]
type = TargetBind
trigger1 = (AnimElemTime(3) >= 0 && AnimElemTime(4) < 0) || (AnimElemTime(7) >= 0 && AnimElemTime(8) < 0)
pos = 26, -42

[State 805, Bind 4]
type = TargetBind
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0 
pos = 30, -10

[State 805, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0 
pos = -35, -30

[State 805, Bind 6]
type = TargetBind
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0 
pos = -24, -79

[State 805, Bind 7]
type = TargetBind
trigger1 = AnimElemTime(8) = 0 
pos = 90, -76

[State 805, Width]
type = Width
trigger1 = AnimElemTime(9) < 0
edge = 40,40

[State 805, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 8
value = -140

[State 805, Throw]
type = TargetState
trigger1 = AnimElemTime(8) = 3
value = 807

[State 805, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;=====================================================================

;Hadouken
[Statedef 1000]
type    = S
movetype = A
physics = S
anim = 1000
sprpriority = 2
juggle  = 0
poweradd= 72*!var(33)
velset = 0,0
ctrl = 0

[State 1000, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = ifelse (Command = "hadou1", 0, ifelse (Command = "hadou2", 1, 2))

[State 1000, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 9


[State 1000, efeito]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1, 18


[State 1000, voz]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,15


[State 1000, strengthvarAI]
type=varset
trigger1= !time && var(12)>=1
var(5)= ifelse((p2movetype=H || random<500), 2, ifelse(random<500, 1, 0))

[State 1000, width]
type=width
trigger1= animelemtime(5)=0
value=30,0

[State 1000, Hadouken]
type=helper
trigger1= animelemtime(5)=1
helpertype=normal
stateno=1005
ID=1005
name="Hadouken"
postype=p1
pos=80,-68
size.xscale=.5
size.yscale=.5
ownpal=1


[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------

;hadou helper
[Statedef 1005]
type=S
physics=N
movetype=A
anim=2004
ctrl=0
velset=0,0
sprpriority=4

[State 1005, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=1011
ignorehitpause=1

[State 3005,hitby]
type = nothitby
trigger1= (root,Numhelper(1111))
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1


[State 3005,hitby]
type = hitby
triggerall= !(root,Numhelper(1111))
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1


[State 1005, strengthvar]
type=varset
trigger1= !time
var(5)=root,var(5)

[State 1005, movehitvar]
type=varset
trigger1= movecontact && numtarget
trigger1= !(target,ishelper)
var(25)=1
ignorehitpause=1




[State 1005, Vel]
type=velset
trigger1= 1
x=ifelse(var(5)=2,6,ifelse(var(5)=1,4.5,3))
y=0

[State 1005, Assert]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1


[State 1005, Hit]
type=hitdef
trigger1= 1
priority=4,Hit
attr=S,SP
damage=ifelse(root,var(33),30, 100),7
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=0,12
sparkno=-1
guard.sparkno=s1005
sparkxy=-10,0
guardsound = S1,15
hitsound = S1,25
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity= -10.52, 0
ground.cornerpush.veloff= 0
air.velocity=-4,-4
air.fall=1
fall.recover=!(root,var(33))
fall.recovertime=30
getpower= ifelse(p2movetype=H,72,144)*!(root,var(33)), 36*!(root,var(33))
givepower=36,36
envshake.time=14
envshake.freq=120
envshake.ampl=4
sprpriority=4
yaccel=.5
airguard.ctrltime= 16
airguard.velocity= -8, -1.5
forcestand=1

[State 1005, Sparks]
type=explod
trigger1= movehit && numtarget
trigger1= (target,movetype=H) && !(target,time)
anim=2554+(random%4)
ID=7000
sprpriority=5
postype=left
pos=ceil((target,pos x)-((target,const(size.ground.front)-10)*facing)+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 1005, End]
type=changestate
trigger1= movecontact
value=1011
ignorehitpause=1

[State 1005, End]
type=destroyself
trigger1=pos x!=[-200,200]




;--------------------------------------------------------------------



;exhadouken
[Statedef 1001]
type=S
physics=S
movetype=A
anim=2001
ctrl=0
velset=0,0
poweradd=-500
sprpriority=1
facep2=1

[State 1010, strengthvar]
type=varset
trigger1= var(8)!=4
var(8)=4

[State 1010, width]
type=width
trigger1= animelemtime(5)=0
value=30,0

[State 1010, Hadouken]
type=helper
trigger1= animelemtime(5)=1
helpertype=normal
stateno=1002
ID=1002
name="exHadouken"
postype=p1
pos=80,-68
ownpal=1

[State 1010, snd]
type=playsnd
trigger1= animelem=3
value=0,15


[State 1010, snd]
type=playsnd
trigger1= animelemtime(5)=1
value=1,18

[State 1010, end]
type=changestate
trigger1= !animtime
value=0
ctrl=1

;-------------------------------------------------------------------

;exhadou helper
[Statedef 1002]
type=S
physics=N
movetype=A
ctrl=0
velset=0,0
sprpriority=4

[State 1015, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=ifelse(var(22)<2,1002,1003)
ignorehitpause=1

[State 1015,hitby]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1


[State 1015, Anim]
type=changeanim
trigger1= !time && !prevstateno
value=2002

[State 1015, hitvar]
type=varadd
trigger1= !time
var(22)=1



[State 1015, Vel]
type=velset
trigger1= 1
x=ifelse((time<2 && var(22)>1),1,7)
y=0

[State 1015, Assert]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 1015, HitSound]
type=playsnd
trigger1= movehit && numtarget
trigger1= target,time=0 && target,movetype=H
value=1,13
channel=1
persistent=0
ignorehitpause=1

[State 1015, Hit]
type=hitdef
trigger1= 1
priority=4,Hit
attr=S,SP
damage=76,7
animtype=Back
hitflag=MAF
guardflag=MA
pausetime=4*(var(22)<2),6
sparkno=-1
guard.sparkno=s7001
sparkxy=-10,0
guardsound=S1,15
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-4,-4
ground.cornerpush.veloff=0
air.velocity=-4,-4
fall=1
fall.recover=0
fall.recovertime=34
getpower=0
givepower=36,36
envshake.time=14
envshake.freq=120
envshake.ampl=4
palfx.color=32
palfx.sinadd=80,25,0,8
palfx.mul=512,256,128
palfx.time=32
sprpriority=4
yaccel=.5
airguard.ctrltime= 16
airguard.velocity= -4, -1.5
forcestand=1

[State 1015, Sparks]
type=explod
trigger1= movehit && numtarget
trigger1= (target,movetype=H) && !(target,time)
anim=2554+(random%4)
ID=7000
sprpriority=5
postype=left
pos=ceil((target,pos x)-((target,const(size.ground.front)-10)*facing)+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 1015, flames]
type=helper
trigger1= movehit && numtarget && numhelper(7180)<1
trigger1= !(target,time) && (target,movetype=H)
helpertype=normal
stateno=7180
ID=7180
name="flames"
postype=p2
bindtime=1000
ownpal=1
facing=-1
size.ground.front=0
size.ground.back=0
ignorehitpause=1

[State 1015, End]
type=changestate
trigger1= movecontact
value=ifelse(var(22)<2,1002,1003)

[State 1015, End]
type=destroyself
trigger1=pos x!=[-200,200]

;---------------------------------------------------------------------

[Statedef 1003]
type=A
physics=N
movetype=I
anim=2003
ctrl=0
velset=0,0
sprpriority=4

[State 1016, Snd]
type=playsnd
trigger1= !time
value=5,1
ignorehitpause=1
persistent=0

[State 1016, Assert]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 1016, End]
type=destroyself
trigger1= !animtime

;---------------------------------------------------------------------


[Statedef 1080]
type=S
physics=S
movetype=A
anim=1080
ctrl=0
velset=0,0
poweradd=72*!var(33)
sprpriority=1
facep2=1

[State 1080,solo]
type	= Explod
trigger1 = animelem = 3
anim = 8090
id = 8090
pos	= 10,0
postype	= p1
facing= 1
vfacing	= 1
bindtime= -1
vel= 0,0
accel	= 0,0
random	= 0,0
removetime= 199
scale	= .8,.8
sprpriority= -1
ontop	= 0
shadow	= 0,0,0
ownpal	= 1
removeongethit	= 1


[State 1080,solo]
type	= Explod
trigger1 = animelem = 3
anim = 888
id = 888
pos	= 10,0
postype	= p1
facing= 1
vfacing	= 1
bindtime= -1
vel= 0,0
accel	= 0,0
random	= 0,0
removetime= 199
scale	= .5,.5
sprpriority= 2
ontop	= 1
shadow	= 0,0,0
ownpal	= 1
removeongethit	= 1


[State 3020, width]
type=width
trigger1= 1
value=30,0

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 22
value = 2


[State 3020, denjinvarreset]
type=varset
trigger1= anim=1080 && animelemtime(3)<0
trigger2= anim=1081 && animelemtime(2)>0
var(35)=0

[State 3020, denjinvar]
type=varadd
triggerall= anim=1080 && animelemtime(3)>=0
trigger1= var(12)<=0 && command="holdy"  && var(35)<200
trigger2= var(12)>=1
var(35)=1

[State 3020, denjinvar]
type=varadd
triggerall= anim=1080 && animelemtime(3)>=0
trigger1= var(12)<=0 &&  command="holdy"  && var(35)<200
trigger1= (command="fwd" || command="back" || command="up" || command="down")
trigger2= var(12)>=1 && random<200
var(35)=2

[State 3040, shake]
type=envshake
trigger1= anim=1080 && animelemtime(3)>=0 && !(time%4)
time=4
freq=120
ampl=1+ceil(var(35)/70)

[State 3020, Anim]
type=changeanim
triggerall= anim=1080 && animelemtime(3)>=0
trigger1= var(35)>=200
trigger2= var(12)<=0 && command!="holdy"
value=1081


[State 3020, Anim]
type=changeanim
triggerall= var(12)>=1 && numenemy
triggerall= anim=1080 && animelemtime(3)>=0
trigger1= (p2dist x<0 || enemynear,movetype=A || inguarddist)
trigger2= (p2bodydist x<=90) && (enemynear,stateno=40)
value=1081


[State 3020, hadouken]
type=helper
trigger1= command!="holdy"
trigger1= var(35)<=59
trigger1= anim=1081 && animelem=2
trigger2= var(12)>=1 && var(35)<=59
trigger2= anim=1081 && animelem=2
helpertype=normal
stateno=1081
ID=1081
name="Denjin1"
postype=p1
pos=73,-73
size.xscale=.6
size.yscale=.6
ownpal=1



[State 3020, hadouken]
type=helper
trigger1= var(12)<=0  && var(35)>=60
trigger1= anim=1081 && animelem=2
trigger2= anim=1081 && animelem=2
trigger2= var(12)>=1 && var(35)>=60
helpertype=normal
stateno=1084
ID=1084
name="Denjin4"
postype=p1
pos=93,-73
size.xscale=.7
size.yscale=.7
ownpal=1



[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 1084
ID = 1084
pos = -1,-71
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 198
scale = .8,.8
sprpriority = 5
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 1
persistent = 1

[State 4303, modifyexplod]
type=modifyexplod
triggerall = time <= 180
trigger1=1
ID=1084
scale=.005*time,.005*time

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = anim != 1080
id =1084

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = anim != 1080
id =8090


[State 3020, poeiraaa]
type=explod
trigger1= anim=1081 && animelem=1
vel=0,0
anim=2710
sprpriority=3
postype=p1
pos=30,0
ownpal=1
scale=.50,.35
pausemovetime=-1
supermovetime=-1

[State 3040, snd]
type=playsnd
trigger1= anim=1080 && animelem=3
value=3,12
channel=0

[State 3040, stopsnd]
type=stopsnd
trigger1= anim=1081 && animelem=2
channel=0

[State 3040, snd]
type=playsnd
trigger1= anim=1080 && animelem=3
value=0,26
channel=3

[State 3040, stopsnd]
type=stopsnd
trigger1= anim=1081 && animelem=2
channel=3


[State 3020, snd]
type=playsnd
trigger1= anim=1081 && animelem=2
value=9,13


[State 1000, efeito]
type = PlaySnd
trigger1 = anim=1081 && animelem=3
value = 1, 18


[State 3020, End]
type=changestate
trigger1= anim=1081 && !animtime
value=0
ctrl=1

;=====================================================================


[Statedef 1081,fraco]
type = A
physics = N
movetype = A
ctrl = 0
velset = 0,0
sprpriority = 5
poweradd = 0
anim = 1083


[State 3005,hitby]
type = nothitby
trigger1= (root,Numhelper(1111))
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1


[State 3005, hitoverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA,NP,SP,HP
stateno = 1011
ignorehitpause = 1

[State 3005,hitby]
type = hitby
triggerall= !(root,Numhelper(1111))
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1


[State 3005, vel]
type = velset
trigger1 = 1
x = 4.5

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3005, sparks]
type=explod
trigger1=movehit&&numtarget
trigger1=(target,movetype=H)&&!(target,time)
anim=2558+(random%4)
ID=2724
sprpriority=5
postype=left
pos=ceil((target,pos x)-(target,const(size.ground.front)-10)*facing+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 3005, hit]
type=hitdef
trigger1=1
priority=4,Hit
attr = S, SP
damage=80,7
animtype=Back
hitflag=MAF
guardflag=M
pausetime = 0,9
sparkno=-1
guard.sparkno=s1005
sparkxy=-10,0
hitsound = S1,25
guardsound = S1,15
ground.type = High
ground.slidetime = 13
ground.hittime  = 15
guard.ctrltime = 16
ground.velocity = -7
air.velocity = -5,-3
airguard.velocity = -4,-2
air.juggle = 3
air.fall = 1
air.recover = 1
getpower = ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower= 36, 36
palcolor = 43,-20,9
palbright = 43,43,43
palcontrast = 33,33,33
envshake.time=12
envshake.freq=100
envshake.ampl=4
yaccel=.5
ownpal=1


[State 0, PosFreeze]
type = PosFreeze
trigger1 = movecontact
value = 1


[State 3005, end]
type=changestate
trigger1=movecontact
value=1011

[State 3005, end]
type=destroyself
trigger1=time>100;frontedgedist<-140||backedgedist<0


;=====================================================================


[Statedef 1084,bola]
type = A
physics = N
movetype = A
ctrl = 0
velset = 0,0
sprpriority = 5
poweradd = 0


[State 700, asserts]
type=assertspecial
trigger1=1
flag=unguardable

[State 1005, strengthvar]
type=varset
trigger1= !time
var(5)=root,var(5)


[State 3005,hitby]
type = nothitby
trigger1= (root,Numhelper(1111))
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1


[State 3005, hitoverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA,NP,SP,HP
stateno = ifelse(var(2)<var(4),1084,1011)
ignorehitpause = 1

[State 3005,hitby]
type = hitby
triggerall= !(root,Numhelper(1111))
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1

[State 3025, Anim]
type=changeanim
trigger1= !time && !prevstateno
value=1083

[State 3025, strengthvar]
type=varset
trigger1= !time && !prevstateno
var(5)= ifelse(root,var(35)>=200, 4, ifelse(root,var(35)>=120, 3, ifelse(root,var(35)>=60, 2, ifelse(root,var(35)>=20, 1, 0))))

[State 3025, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 3025, maxhitvar]
type=varadd
trigger1= !time && !prevstateno
var(4)=1+var(5)

[State 3025, movehitvar]
type=varset
trigger1= movecontact && numtarget
trigger1= !(target,ishelper)
var(3)=1
ignorehitpause=1

[State 3025, Vel]
type=velset
trigger1= 1
x=ifelse((time<2 && var(2)>1),.5,4+1.5*var(5))
y=0



[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3005, sparks]
type=explod
trigger1=movehit&&numtarget
trigger1=(target,movetype=H)&&!(target,time)
anim=2558+(random%4)
ID=2724
sprpriority=5
postype=left
pos=ceil((target,pos x)-(target,const(size.ground.front)-10)*facing+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 3025, HitSound]
type=playsnd
trigger1= movehit && numtarget
trigger1= target,time=0 && target,movetype=H
value=1,25
channel=1
persistent=0
ignorehitpause=1

[State 3005, hit]
type=hitdef
trigger1=1
priority=4,Hit
attr = S, SP
damage=40,7
animtype=Back
hitflag=MAF
guardflag=M
pausetime = 4*(var(2)<var(4)),12
sparkno=-1
guard.sparkno=s1005
sparkxy=-10,0
guardsound = S1,15
ground.type = High
ground.slidetime = 13
ground.hittime  = 15
guard.ctrltime = 16
ground.velocity = -7
air.velocity = -5,-3
airguard.velocity = -4,-2
air.juggle = 3
air.fall = 1
air.recover = 1
getpower = ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower= 36, 36
palcolor = 43,-20,9
palbright = 43,43,43
palcontrast = 33,33,33
envshake.time=12
envshake.freq=100
envshake.ampl=4
yaccel=.5
ownpal=1
ID=1084



[State 3025, p2state]
type=targetstate
trigger1= movehit && numtarget(1084)
trigger1= target(1084),gethitvar(hitcount)>=1
trigger1= (target(1084),stateno=5000) || (target(1084),stateno=5010) || (target(1084),stateno=5020)
value=7696
ID=1084
ignorehitpause=1


[State 3025, End]
type=changestate
trigger1= movecontact
value=ifelse(var(2)<var(4),1084,1011)

[State 3025, End]
type=destroyself
trigger1=pos x!=[-220,220]


;---------------------------------------------------------------------

; HadouKen especial
[Statedef 1008]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1000
sprpriority = 2


[State 1008, 1]
type = Helper
trigger1 = AnimElemTime(5) = 1
helpertype = normal
name = "slowhado"
stateno = 1009
ID = 1111
pos = 67, -70
postype = p1
ownpal = 1
size.xscale=.8
size.yscale=.8

[State 1008,1 ]
type   = PlaySnd
trigger1   = animelem = 4
value = 2, 5
channel  = -1

[State 1008, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------

[Statedef 1009]
type    = A
movetype= A
anim = 1008
sprpriority = 3
poweradd= -500


[State 10000, Debug]
type=displaytoclipboard
trigger1= 1
text="RootD X=%f RootD Y=%f VelX=%f VelY=%f"
params= rootdist x, rootdist y, vel x, vel y


[State 1000, 1]
type = Explod
trigger1 = animelem = 2
ID = 1007
anim = 1007
pos = 4-random%8,1-random%5
vel = 0.2-random%1-0.2,-1.1
scale = 0.6,0.6
ownpal = 1
bindtime = 1
sprpriority = 3


[State 3005, hitoverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA,NP,SP,HP
stateno = 1011
ignorehitpause = 1

[State 3005,hitby]
type = hitby
triggerall= !(root,Numhelper(1111))
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1



[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1




[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1


[State 2004, hitoverride]
type=hitoverride
triggerall= p2stateno=1260 
trigger1 = p2stateno=1260
time=-1
attr=SCA,SP
stateno=2015
ignorehitpause=0



[State 2004, hitoverride]
type=hitoverride
triggerall= p2stateno!=1260
trigger1 = 1
time=-1
attr=SCA,NP,SP,HP
stateno=1012
ignorehitpause=1


[state 1009, 1]
type = VelSet
trigger1 = Time = 0
x = .2


[State 1009, 2]
type = HitDef
triggerall =!time
trigger1=1
attr = A, SP                     
damage = 130,60
animtype = hard                 
guardflag = MA                  
hitflag = MAF                  
priority = 7 , Hit               
sprpriority = 3
projcancelanim = s1005
pausetime = 14, 14
guard.sparkno = -1                
sparkno = -1
sparkxy = 0, 0              
hitsound = S1,25                  
guardsound = S1,15                
ground.type = High               
ground.slidetime = 20
ground.hittime  = 25             
ground.velocity = -3,-10
guard.velocity = -14
airguard.velocity = -6
air.type = High                  
air.velocity = -3, -8.5         
air.hittime = 25
fall = 1
air.fall = 1
palfx.time = 31
palfx.add = 160,240,140
palfx.mul = 80,120,220
palfx.sinadd = 80, 80, 80, 5
affectteam=B
envshake.time=11
envshake.freq=60
envshake.ampl=5
ignorehitpause = 1
fall.recover = 0

[State 2005, hit by ken]
type=changestate
triggerall= root,movetype=A
trigger1= (root,NumProjID(1261) = 1)
trigger1= ((pos x-root,pos x)*(root,facing)=[0,180])
value=2016



[State 2015, hit by partner]
type=changestate
trigger1= numpartner && time
trigger1= partner,movetype=A && partner,hitdefattr=SCA,AA
trigger1= (partner,NumProjID(1261) = 1)
trigger1= ((pos x-partner,pos x)*(partner,facing)=[0,150])
value=2017


[State 1009, 3]
type = ChangeState
trigger1= movecontact && numtarget
trigger1= !(target,ishelper)
trigger2= roundstate!=2
value=1011

[State 1009, 3]
type = ChangeState
trigger1= movecontact
value=1012


;---------------------------------------------------------------------

[Statedef 2015]
type    = A
movetype= A
anim = 1008
sprpriority = 3
ctrl=0


[State 1000, 1]
type = Explod
trigger1 = animelem = 2
ID = 1007
anim = 1007
pos = 4-random%8,1-random%5
vel = 0.2-random%1-0.2,-1.1
scale = 0.6,0.6
ownpal = 1
bindtime = 1
sprpriority = 3

[State 1000, 1]
type = Explod
trigger1 = animelem = 2
ID = 1007
anim = 1007
pos = 4-random%8,1-random%5
vel = 0.2-random%1-0.2,-1.1
scale = 0.6,0.6
ownpal = 1
bindtime = 1
sprpriority = 3

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2004, hitoverride]
type=hitoverride
trigger1= p2stateno=1260
time=-1
attr=SCA,SP
stateno=2015
ignorehitpause=1

[State 2015, turn]
type=turn
trigger1= !time && p2dist x>=0


[State 2015, hitvel]
type=velset
trigger1= !time
x=5


[State 2005, hit by ken]
type=changestate
triggerall= root,movetype=A
trigger1= (root,NumProjID(1261) = 1)
trigger1= ((pos x-root,pos x)*(root,facing)=[0,180])
value=2016

[State 2015, hit by partner]
type=changestate
trigger1= numpartner && time
trigger1= partner,movetype=A && partner,hitdefattr=SCA,AA
trigger1= (partner,NumProjID(1261) = 1)
trigger1= ((pos x-partner,pos x)*(partner,facing)=[0,150])
value=2017


[State 1009, 2]
type = HitDef
trigger1 = !time
attr = A, SP                     
damage = 200,90
animtype = hard                 
guardflag = MA                  
hitflag = MAF                  
priority = 7 , Hit               
sprpriority = 3
projcancelanim = s1005
pausetime = 3, 3
guard.sparkno = -1             
sparkno = -1
sparkxy = 0, 0              
hitsound = S1,25                  
guardsound = S1,15                
ground.type = High               
ground.slidetime = 20
ground.hittime  = 25             
ground.velocity = -5,-9
guard.velocity = -17
airguard.velocity = -7
air.type = High                  
air.velocity = -4, -8         
air.hittime = 25
fall = 1
air.fall = 1
palfx.time = 31
palfx.add = 160,240,140
palfx.mul = 80,120,220
palfx.sinadd = 80, 80, 80, 5
affectteam=B
envshake.time=11
envshake.freq=60
envshake.ampl=5
ignorehitpause = 1
p2stateno =1123
p2facing = 1

[State 1009, 3]
type = ChangeState
trigger1 = movecontact
trigger2= roundstate!=2
value=1011

[State 9741, wrong]
type=destroyself
trigger1= time>150


;---------------------------------------------------------------------


[Statedef 2016]
type    = A
movetype= A
anim = 1008
sprpriority = 3
ctrl=0


[State 1000, 1]
type = Explod
trigger1 = animelem = 2
ID = 1007
anim = 1007
pos = 4-random%8,1-random%5
vel = 0.2-random%1-0.2,-1.1
scale = 0.6,0.6
ownpal = 1
bindtime = 1
sprpriority = 3

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2004, hitoverride]
type=hitoverride
trigger1= p2stateno=1260
time=-1
attr=SCA,SP
stateno=2015
ignorehitpause=1

[State 2016, turn]
type=turn
trigger1= !time && rootdist x>=0

[State 2016, hitvel]
type=velset
trigger1= !time
x=5

[State 1009, 2]
type = HitDef
trigger1 = !time
attr = A, SP                     
damage = 200,90
animtype = hard                 
guardflag = MA                  
hitflag = MAF                  
priority = 7 , Hit               
sprpriority = 3
projcancelanim = s1005
pausetime = 3, 3 
guard.sparkno = -1                
sparkno = -1
sparkxy = 0, 0              
hitsound = S1,25                  
guardsound = S1,15                
ground.type = High               
ground.slidetime = 20
ground.hittime  = 25             
ground.velocity = -5,-9
guard.velocity = -17
airguard.velocity = -7
air.type = High                  
air.velocity = -4, -8         
air.hittime = 25
fall = 1
air.fall = 1
palfx.time = 31
palfx.add = 160,240,140
palfx.mul = 80,120,220
palfx.sinadd = 80, 80, 80, 5
affectteam=B
envshake.time=11
envshake.freq=60
envshake.ampl=5
ignorehitpause = 1
p2stateno =1123
p2facing = 1

[State 1009, 3]
type = ChangeState
trigger1 = movecontact
trigger2= roundstate!=2
value=1011

[State 9741, wrong]
type=destroyself
trigger1= time>150

;--------------------------------------------------------------------

[Statedef 2017]
type=A
movetype=A
anim=1008
ctrl=0
sprpriority=3


[State 1000, 1]
type = Explod
trigger1 = animelem = 2
ID = 1007
anim = 1007
pos = 4-random%8,1-random%5
vel = 0.2-random%1-0.2,-1.1
scale = 0.6,0.6
ownpal = 1
bindtime = 1
sprpriority = 3

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2004, hitoverride]
type=hitoverride
trigger1= p2stateno=1260
time=-1
attr=SCA,SP
stateno=2015
ignorehitpause=1

[State 2017, turn]
type=turn
trigger1= !time && ((partner,pos x)-pos x)>=0

[State 2017, hitvel]
type=velset
trigger1= !time
x=5


[State 2005, hit by ken]
type=changestate
triggerall= root,movetype=A
trigger1= (root,NumProjID(1261) = 1)
trigger1= ((pos x-root,pos x)*(root,facing)=[0,180])
value=2016


[State 1009, 2]
type = HitDef
trigger1 = !time
attr = A, SP                     
damage = 200,90
animtype = hard                 
guardflag = MA                  
hitflag = MAF                  
priority = 7 , Hit               
sprpriority = 3
projcancelanim = s1005
pausetime = 3, 3 
guard.sparkno = -1                
sparkno = -1
sparkxy = 0, 0              
hitsound = S1,25                  
guardsound = S1,15                
ground.type = High               
ground.slidetime = 20
ground.hittime  = 25             
ground.velocity = -5,-9
guard.velocity = -17
airguard.velocity = -7
air.type = High                  
air.velocity = -4, -8         
air.hittime = 25
fall = 1
air.fall = 1
palfx.time = 31
palfx.add = 160,240,140
palfx.mul = 80,120,220
palfx.sinadd = 80, 80, 80, 5
affectteam=B
envshake.time=11
envshake.freq=60
envshake.ampl=5
ignorehitpause = 1
p2stateno =1123
p2facing = 1

[State 1009, 3]
type = ChangeState
trigger1 = movecontact
trigger2= roundstate!=2
value=1011


;---------------------------------------------------------------------


[Statedef 1012]
type    = A
movetype= A
anim = 1008
sprpriority = 3
poweradd= 0



[State 1000, 1]
type = Explod
trigger1 = animelem = 2
ID = 1007
anim = 1007
pos = 4-random%8,1-random%5
vel = 0.2-random%1-0.2,-1.1
scale = 0.33,0.33
ownpal = 1
bindtime = 1
sprpriority = 3



[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,AP
ignorehitpause=1

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2004, hitoverride]
type=hitoverride
triggerall= p2stateno=1260
trigger1 = p2stateno=1260
time=-1
attr=SCA,SP
stateno=2015
ignorehitpause=0


[State 2004, hitoverride]
type=hitoverride
triggerall= p2stateno!=1260
trigger1 = 1
time=-1
attr=SCA,NP,SP,HP
stateno=1011
ignorehitpause=1



[State 1002, 1]
type = HitDef
trigger1 = p2stateno != 001
trigger1 = 1
attr = S,SP
animtype = Hard
damage  = 0,0
getpower = 30
givepower = 30
hitflag = MAF
;guardflag = MF
sparkno = -1
sparkxy = 0, 0              
hitsound = S1,25                  
guardsound = S1,15    
pausetime = 0,0
ground.type = High
ground.slidetime = 20
ground.hittime = 20
air.animtype = Back
ground.velocity = 0, 0
air.velocity = 0, 0
p2stateno = 001
affectteam=B



[State 2005, hit by ken]
type=changestate
triggerall= root,movetype=A
trigger1= (root,NumProjID(1261) = 1)
trigger1= ((pos x-root,pos x)*(root,facing)=[0,180])
value=2016


[State 2015, hit by partner]
type=changestate
trigger1= numpartner && time
trigger1= partner,movetype=A && partner,hitdefattr=SCA,AA
trigger1= (partner,NumProjID(1261) = 1)
trigger1= ((pos x-partner,pos x)*(partner,facing)=[0,150])
value=2017



[State 1321, VS]
type = null
trigger1 = time = 0
trigger1 = var(0):=20
trigger1 = var(1):=((random%11)-5) ;X Velset
trigger1 = var(2):=((random%11)-5) ;Y Velset
trigger2 = time ;< 20
trigger2 = fvar(0):=(enemynear(0),pos x - pos x)*facing
trigger2 = fvar(1):=(enemynear(0),pos y + enemynear(0),const(size.mid.pos.y) - pos y)
trigger2 = fvar(2):=((fvar(0)**2)+(fvar(1)**2))**0.5

[state 1321, VelS]
type = velset
trigger1 = time = 0
x = ((random%3))
y = ((random%9)-4)

[State -1]
type = veladd
trigger1 = time >= 10
x = ifelse(vel x < 8.0*(fvar(0)/fvar(2)),0.1,-0.1)
y = ifelse(vel y < 8.0*(fvar(1)/fvar(2)),0.1,-0.1)


[State 1003, Trans]
type = trans
trigger1 = 1
trans = add
ignorehitpause = 1

[State 1140, ASS]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2010, AS]
type = angleset
trigger1 = vel x != 0
value = atan(vel y/vel x)*(-180.0/pi)+((vel x<0)*180)


[State 2010, AS]
type = angleset
trigger1 = vel x = 0
value = ifelse(vel y<0,90,-90)

[State 1301, Rotate]
type = angledraw
trigger1 = 1
scale = .8,.8
ignorehitpause = 1



[State 1009, 3]
type = ChangeState
trigger1 = movecontact
trigger2= roundstate!=2
trigger3 = time>400
value=1011


;---------------------------------------------------------------------

[Statedef 1011]
type = A
movetype = I
ctrl = 0
anim = 1018
velset = 0, 0
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1014
ID = 8099
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
vel = 1,0
accel = 0,0
random = 0,0
removetime = -2
scale = .5,.5
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 1001]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 707]
type= PlayerPush
trigger1= 1
value= 0
persistent= 1

[State 3026, Assert]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1


[State 1006, end]
type=destroyself
trigger1=!animtime;time>=1


;-----------------------------------------------------------------------

[Statedef 001]
movetype= H
velset = 0,0
ctrl = 0

[State 001, treme]
type = PosAdd
trigger1 = time >= 90
x = 1-2*(time%2)

[State 001, 3]
type = PosFreeze
trigger1 = 1
trigger1 = time > 1
value = 1

[State 001, 2]
type = changeanim
trigger1 = 1
value = (anim)
elem = (animelemno(0))

[State 001, 3]
type = PalFX
trigger1 = time != 0
add = 0,156,198
mul = 13,179,199
time = 1

[State 001, Cair no Ar]
type = HitOverride
trigger1 = p2stateno = 001
forceair = 1 
time = -1 
attr = SCA

[State 001, 1]
type = HitOverride
trigger1 = Pos Y < 0
time = 130
attr = SCA,AA, AT, NP
forceair = 1

[State 001, CS]
type = SelfState
trigger1 = time = 100
ctrl = 1
value = 0

[State 001, 3]
type = SelfState
trigger1 = time = 99
trigger1 = Pos Y != 0
ctrl = 1
value = 5050


;( congelado 2 vez )

[Statedef 002]
movetype= H
velset = 0,0
ctrl = 0

[State 002, 3]
type = PalFX
trigger1 = time = 0
add = 74,198,222 
mul = 140,222,239
time = 1

[State 002, 3]
type = SelfState
trigger1 = time = 1
trigger1 = Pos Y >= 0
ctrl = 1
value = 5000

[State 002, 3]
type = SelfState
trigger1 = time = 1
trigger1 = Pos Y < 0
ctrl = 1
value = 5050



;---------------------------------------------------------------------
;ar pulinho
[Statedef 1033]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 72*!var(33)
ctrl = 0
anim = 1033

[State 2004, hitoverride]
type=hitoverride 
trigger1 = stateno=1033
time=10
attr=SCA,AP
stateno=1034
ignorehitpause=0


[State 600, vel]
type = velmul
trigger1 = vel x > 0
trigger1 = prevstateno = 101
trigger1 = (time%2) = 0
x = .9


[State 600, vel]
type = velset
trigger1 = vel x > 0
trigger1 = prevstateno = 101
trigger1 = time = 0
x = 4



[state 645, hitdef]
type = hitdef
trigger1 = time > 0
trigger1 = movecontact = 0
attr = A, NA
animtype  = heavy
damage    = 40
animtype=Hard
air.animtype=Back
guardflag=HA
hitflag=MAFD
priority=4,Hit
pausetime=4,12
sparkno = s2554+(random%4)
guard.sparkno = S8035
hitsound = S1, 13
guardsound = S1, 15
sparkxy = -10,-37
ground.type = low
ground.slidetime = 6
ground.velocity =  -1
air.velocity = 0,2.3
envshake.time=10
envshake.freq=60
envshake.ampl=5
fall=0
air.fall=1
fall.recover=1
yaccel=.5
ground.hittime=22
air.type=Low
air.cornerpush.veloff=0
down.velocity=0,0
getpower=72*!var(33), 36*!var(33)
givepower=36 , 36

[State 641, 4_1]
type = VelSet
trigger1 = movecontact = 1
trigger1 = p2stateno=5080
x = 1.8
y = -6
ignorehitpause = 1



[State 641, 4]
type = VelSet
triggerall = movecontact = 1
trigger1 = p2statetype = S
trigger1 = FrontEdgeBodyDist >= 50
x = 2.5
y = -9
ignorehitpause = 0

[State 641, 4]
type = VelSet
triggerall = movecontact = 1
trigger1 = p2statetype = S
trigger1 = FrontEdgeBodyDist < 50
x = -2.5
y = -9
ignorehitpause = 0


[State 641, 4_1]
type = VelSet
triggerall = movecontact = 1
trigger1 = p2statetype = C
x = 2.3
y = -9
ignorehitpause = 1

[State 641, 4a]
type = VelSet
trigger1 = movehit = 1
trigger1 = p2statetype = A
trigger1 = statetype = A
x = 1.8
y = -10.125
ignorehitpause = 1

[State 641, 4b]
type = VelSet
trigger1 = moveguarded = 1
trigger1 = p2statetype = A
trigger1 = statetype = A
x = 1.8
y = -10.125
ignorehitpause = 0

[State 641, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 1, 7
persistent = 0



[State 645, ChangeAnim]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1



;=====================================================================




;ar pulinho
[Statedef 1034]
type    = A
movetype= I
physics = A
poweradd= 72*!var(33)
ctrl = 0
anim = 1033

[State 641, 4]
type = VelSet
trigger1 = vel x >0
x = 2
y = -6
ignorehitpause = 0

[State 641, 4]
type = VelSet
trigger1 = vel x <0
x = -2.5
y = -6
ignorehitpause = 0

[State 641, 4]
type = VelSet
trigger1 = vel x =0
x = 0
y = -6
ignorehitpause = 0

[State 645, ChangeAnim]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1


;==========<TAUNT>==========
[Statedef 195]
type=S
ctrl=0
velset=0,0
physics=S


[State 195, taunt]
type=changeanim
trigger1= !time
value=ifelse(roundno=1,195,196)

[State 195, Snd]
type=playsnd
trigger1= anim=195 && animelem=3
value=5,22
channel=0

[State 195, Snd]
type=playsnd
trigger1= anim=196 && animelem=2
value=5,21
channel=0

[State 195, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1

;=====================================================================

;air Hadou forward
[Statedef 1112]
type    = A
movetype= A
physics = A
poweradd= 72*!var(33)
juggle = 7
ctrl = 0
anim = 1112


[State 1000, voz]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,10
channel = 0


[State 1804, Velset]
type = VelSet
trigger1 = animelem = 4
y = -4
x = -6


[State 1000, Hadouken]
type=helper
trigger1= animelemtime(5)=1
helpertype=normal
stateno=1005
ID=1005
name="Hadouken"
postype=p1
pos=50,-68
size.xscale=.5
size.yscale=.5
ownpal=1

[State 0,]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl=1
;---------------------------------------------------------------------

[Statedef 1260]
type    = S
movetype = A
physics = S
poweradd = 72
velset = 0,0
ctrl = 0
juggle = 8
anim=1260


[State 203, voz]
type = PlaySnd
trigger1 = AnimElem = 3 && Random <= 550
value = 0, ifelse (Random <= 550, 24, 25)
channel = 0


[State 203, efeito]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1, 8
channel = 1



[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 903, EnvShake]
type = EnvShake
trigger1 = AnimElemTime(3) = 0
time = 20
ampl = 5

[State 1505, dust]
type=explod
trigger1=AnimElemTime(3) = 0
anim=8015
ID=8015
sprpriority=2
postype=p1
pos=48,0
ownpal=1
ignorehitpause=1

[State 1505, dust]
type=explod
trigger1=AnimElemTime(3) = 0
anim=8090
ID=8090
sprpriority=-2
postype=p1
pos=48,0
scale=.75,.75
ownpal=1
ignorehitpause=1



[State 1000, Proj]
type = Projectile
trigger1 = AnimElemTime(3) = 1
projanim = 1261
Projhitanim = -1
Projremanim = -1
projremovetime = 5
offset = 73,-70
projpriority = 1
velocity = 0
attr = S, SP
damage=0
animtype = heavy
air.animtype = up
hitflag = MAF
guardflag = MA
pausetime = 0,5
sparkno =-1
guard.sparkno = -1
sparkxy = 0
hitsound = S1,25
guardsound = S1,15
ground.type = High
ground.slidetime = 13
ground.hittime  = 30
guard.ctrltime = 26
air.hittime = 40
ground.velocity = -11,0
guard.velocity = -10.5
air.velocity = -5, -5
airguard.velocity = -5,0
air.juggle = 15
fall = 0
fall.recover = 1
air.fall = 0
yaccel = .5
envshake.time = 15
envshake.ampl = 5
ProjID = 1261
givepower=-1000


[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------

;Falling kick2
[StateDef 1300]
type = A
movetype= A
physics = A
juggle  = 4
velset = 0,0
ctrl = 0
anim = 1452
poweradd = 72
sprpriority = 2

[State 0, PosFreeze]
type = PosFreeze
trigger1 = time = [1,6]
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = time > 7
x = 9.7
y = 8.2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 0,23
channel = -1


[State 1300, 1]
type = HitDef
trigger1 != time
attr = S, NA
damage = 60, 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12, 16
sparkno =  s2554+(random%4)
guard.sparkno = S8036
sparkxy = 8, -33
hitsound   = S1,13
guardsound = S1,15
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = -4
air.velocity = - 2.5,-2.5
airguard.velocity = -1.9,-.8
air.type = High
persistent = 0
yaccel = .40
getpower=ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=35 , 35

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1301
ctrl = 0


;--------------------------------------------------------------------
;Falling kick2.5
[StateDef 1301]
type = A
movetype= A
physics = A
juggle  = 0
velset = 0,0
anim = 1301
ctrl = 0
poweradd = 20
sprpriority = 2

[State 0, Velset]
type = VelSet
trigger1 = 1
x = -2.5

[State 0, VelAdd]
type = VelAdd
trigger1 = animelem = 1
y = -7

[State 0, ctrlset]
type = ctrlset
trigger1 = time>=17
value=1

[State Idle]
type=statetypeset
trigger1= anim=1301
movetype=I

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3
;--------------------------------------------------------------------
;ryu kick
[Statedef 1331]
type=S
physics=S
movetype=A
ctrl=0
velset=0,0
poweradd=72*!var(33)
juggle=6
sprpriority=1
facep2=1

[State 1300, strengthvar]
type=varset
trigger1= !time && var(12)<=0
var(5)=ifelse((command="ryukick3"),2,ifelse(command="ryukick2",1,0))

[State 1300, strengthvarAI]
type=varset
trigger1= !time && var(12)>=1
var(5)= ifelse(random<500, 1, 2)

[State 1300, Anim]
type=changeanim
trigger1= !time
value=ifelse(var(5)=2,1332,ifelse(var(5)=1,1331,1330))

[State 1300, Vel]
type=velset
trigger1= (anim=[1331,1332]) && animelemtime(4)<0
trigger2= anim=1300 && animelemtime(2)<0
x=4


[State 1300, Snd]
type=playsnd
trigger1= (anim=[1331,1332]) && animelem=6
trigger2= anim=1330 && animelem=4
value = 0, ifelse (Random <= 550, 24, 25)
channel=0


[State 208, efeito]
type = PlaySnd
trigger1= anim=1330 && animelem=3
trigger2= (anim=[1331,1332]) && animelem=5
value = 1, 10


[State 1300, Hit]
type=hitdef
trigger1= (anim=[1331,1332]) && animelem=6
trigger2= anim=1330 && animelem=4
attr=S,SA
damage=(70+var(5)*14),7
animtype=Hard
air.animtype=Hard
fall.animtype=Hard
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime= ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2554+(random%4)
guard.sparkno = S8035
hitsound = S1, 14
guardsound = S1, 1
sparkxy=-10,-78
ground.type=Low
ground.slidetime=16
ground.hittime=16
ground.velocity=-3-var(5)*1,-6
air.type=Low
air.velocity=-3-var(5)*1,-6
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.velocity= -10.52
guard.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36,36
envshake.time=16
envshake.freq=120
envshake.ampl=6
fall=1
fall.recover=0
yaccel=.5
forcestand=1

[State 1300, Pos]
type=posadd
trigger1= (anim=1330 && animelem=8) || ((anim=[1331,1332]) && animelem=10)
x=15

[State 1300, Pos]
type=posadd
trigger1= (anim=1330 && animelem=9) || ((anim=[1331,1332]) && animelem=11)
x=10

[State 1300, Pos]
type=posadd
trigger1= !animtime
x=5

[State Idle]
type=statetypeset
trigger1= anim=1330 && animelemtime(6)>=0
trigger2= anim=1331 && animelemtime(8)>=0
trigger3= anim=1332 && animelemtime(8)>=0
movetype=I

[State 1300, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1


;---------------------------------------------------------------------

;ryu kick ex
[Statedef 1335]
type=S
physics=S
movetype=A
anim=1331
ctrl=0
velset=0,0
poweradd=-500
juggle=ifelse((p2movetype=H && p2statetype=A),7,0)
facep2=1
sprpriority=1

[State 1010, strengthvar]
type=varset
trigger1= var(8)!=4
var(8)=4


[State 1310, vel]
type=velset
trigger1= (anim=[1331,1332]) && animelemtime(4)<0
trigger2= anim=1330 && animelemtime(2)<0
x=6.5

[State 1310, snd]
type=playsnd
trigger1= animelem=6
value=0,24
channel=0


[State 1310, snd]
type=playsnd
trigger1= animelem=5
value=1,10

[State 1310, hit]
type=hitdef
trigger1= !time
ID=1335
attr=S,SA
damage=80,9
animtype=Hard
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime=12,12
sparkno = s2554+(random%4)
guard.sparkno = S8035
sparkxy=-10,-78
hitsound = S1, 14
guardsound = S1, 1
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-12,-6
air.type=Low
air.velocity=-12,-6
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.velocity= -10.52
guard.cornerpush.veloff = -12.74
getpower=0
givepower=36,36
envshake.time=16
envshake.freq=120
envshake.ampl=6
p2facing=1
fall=1
fall.recover=0
forcestand=1
yaccel=.5

[State 1310, p2state]
type=targetstate
trigger1= movehit && numtarget(1335)
trigger1= (target(1335),stateno=5000) || (target(1335),stateno=5010) || (target(1335),stateno=5020)
value=1111300
ID=1335
ignorehitpause=1



[State 1310, pos]
type=posadd
trigger1= animelem=10 || animelem=11
x=ifelse((animelem=10),15,10)

[State 1310, pos]
type=posadd
trigger1= !animtime
x=5

[State 1310, end]
type=changestate
trigger1= !animtime
value=0
ctrl=1

[State Idle]
type=statetypeset
trigger1= animelemtime(8)>=0
movetype=I


;---------------------------------------------------------------------


; airHadou downward
[Statedef 1424]
type = A
movetype = A
physics = A
ctrl = 0
poweradd = 72
anim = 1111
juggle = 2

[State 0, ]
type = velset
trigger1 = statetype = A
trigger1 = time = [4,12]
x = 0
y = 0


[State 0, ]
type = velset
trigger1 = statetype = A
trigger1 = animelem = 5
y = -9.5
x = 0

[State 0, ]
type = Gravity
trigger1 = animelem = 5


[State 1000, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 9
channel = 1

[State 1000, efeito]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1, 18


[State 1000, voz]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,10
channel = 0




[State 0, ]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "hadoken"
ID = 1006
pos = 14,-40
postype = p1
stateno = 1425
ownpal = 1
size.xscale=.5
size.yscale=.5


[State 0,]
type = ChangeState
triggerall = var(12)<=0
trigger1 = command="tatsu1"|| command="tatsu2"|| command="tatsu3"
value = 1050



[State 0,]
type = ChangeState
trigger1 = AnimTime = 0
value = 50

[State 5040, 6]
type = ChangeState
triggerall = command="y"
trigger1 = BackEdgeBodyDist <= 0
trigger2 = FrontEdgeBodyDist <= 10
value = 3750

[State 5040, 6]
type = ChangeState
triggerall = command="holddown" && command="a"
trigger1 = time>=15
value = 1033

[State 4000, 7]
type = ChangeState
trigger1 = command="bison" && time >10
value = 3201
ctrl = 0


;---------------------------------------------------------------------


;downw hadohelper
[Statedef 1425]
type = S
movetype = A
physics = S
ctrl = 0
anim = 3307
velset = 0,-20
sprpriority = 5


[State 3005, hitoverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA,NP,SP,HP
stateno = 1011
ignorehitpause = 1

[State 3005,hitby]
type = hitby
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1

[State 0, ]
type = ScreenBound
trigger1 = stateno = 1425
value = 0

[State 0, ]
type = VelSet
trigger1 = stateno = 1425
y = 4.7

[State 7240, assert]
type=assertspecial
trigger1=1
flag=noshadow
ignorehitpause=1

[State 0, ]
type = HitDef
trigger1 = 1
attr = S,SP
hitflag = MAFD
guardflag = MA 
animtype = Hard
priority = 4,Hit
damage = 90,15
pausetime = 3,15
guard.pausetime = 4,3
sparkno = -1
hitsound = S1,25
guardsound = S1,15
sparkxy = 10,-70
hitsound = s3,9
guardsound = s3,9
ground.type = trip
air.type = Trip
ground.slidetime = 20
ground.hittime = 20
ground.velocity = 0
guard.velocity = 0
air.velocity = -4,4
air.fall = 1
palcolor = 43,-20,9
palbright = 43,43,43
palcontrast = 33,33,33
envshake.time=12
envshake.freq=100
envshake.ampl=4
yaccel=.5
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36,36


[State 1424, 6]
type = EnvShake
trigger1 = (Pos y >= 0)
time = 14
ampl = 5


[State 0, ]
type = ChangeState
trigger1 = movehit = 1
trigger2 = movecontact = 1
value = 1011

[State 1055, end]
type=changestate
trigger1=pos y>=0
value=1011
ignorehitpause=1


;---------------------------------------------------------------------

[Statedef 1006]
type = S
movetype = I
physics = S
ctrl = 0
anim =1005
velset = 0,0
sprpriority = 5

[State 7240, assert]
type=assertspecial
trigger1=1
flag=noshadow
ignorehitpause=1

[State 1006, Assert]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1


[State 707]
type= PlayerPush
trigger1= 1
value= 0
persistent= 1

[State 2054]
type= palfx
trigger1= !Time
add = 0, 0, 0
sinadd = -255,-255,-255,200
time= 50
invertall = 0

[State 1006, End]
type=destroyself
trigger1= !animtime


;---------------------------------------------------------------------

;exshoryu
[Statedef 1110]
type=S
physics=S
movetype=A
anim=1110
ctrl=0
velset=0,0
poweradd=-500
juggle=7
facep2=1
sprpriority=1
sprpriority=1

[State 1010, strengthvar]
type=varset
trigger1= var(8)!=4
var(8)=4

[State 1110, nothitby]
type=nothitby
trigger1= anim=1110 && animelemtime(4)<0
value=SCA
time=1
ignorehitpause=1

[State 1110, vel]
type=velset
trigger1= anim=1110 && animelem=4
x=15
y=-12

[State 1110, snd]
type=playsnd
trigger1= anim=1110 && animelem=4
value=1,1


[State 1110, vel]
type=velmul
trigger1= 1
x=.88

[State 1110, vel]
type=velmul
trigger1= vel y>0
x=0


[State 1110, snd]
type=playsnd
trigger1= anim=1110 && animelem=3
value=9,12
channel=0
ignorehitpause=1
persistent=0

[State 1110, hit]
type=hitdef
trigger1= animelem=2 && anim=1110
trigger2= animelem=3 && anim=1110
attr=S,SA 
damage=65,8
animtype=Back
guardflag=M
hitflag=MAF 
priority=7,Hit 
pausetime=12,16
sparkno=s2554+(random%4)
guard.sparkno=S8036
sparkxy=-10,ifelse((animelem=2),-53,-79)
hitsound=S1,13
guardsound=S1,15
ground.type=Low
ground.slidetime=16
ground.hittime=16
ground.velocity=0,-8
ground.cornerpush.veloff = 0
air.type=Low
air.velocity=0,-8
ground.cornerpush.veloff = 0
guard.velocity= -10.52
ground.cornerpush.veloff = 0
getpower=0
givepower=36,36
envshake.time=16
envshake.freq=120
envshake.ampl=5
fall=1
fall.recover=0;1
fall.animtype=Medium
yaccel=.5
forcestand=1

[State 1110, hit2]
type=hitdef
trigger1= animelem=4 && anim=1110
trigger2=  anim=1101
attr=A,SA 
damage=16,5
animtype=Up
guardflag=MA 
hitflag=MAF 
priority=7,Hit 
pausetime=12,12
sparkno=s2554+(random%4)
guard.sparkno= S8036
sparkxy=-10,-106
hitsound=S1,13
guardsound=S1,15
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-3,-13
ground.cornerpush.veloff = 0
air.type=Low
air.velocity=-3,-13
ground.cornerpush.veloff = 0
guard.velocity= -10.52
ground.cornerpush.veloff = 0
getpower=0
givepower=36,36
envshake.time=16
envshake.freq=120
envshake.ampl=5
fall=1
fall.recover=0
yaccel=.5
airguard.ctrltime= 16
airground.cornerpush.veloff = 0
airguard.velocity= -1.5
forcestand=1



[State 1110, statetype]
type=statetypeset
trigger1= anim=1110 && animelemtime(4)>=0
trigger2= anim=1101
statetype=A
physics=A

[State 1110, anim]
type=changeanim
trigger1= anim=1110 && animelemtime(4)>0 && vel y>-2.7
value=1101
persistent=0



;---------------------------------------------------------------------

[Statedef 1113]
type    = A
movetype= A
physics = S
poweradd= 72*!var(33)
ctrl = 0
anim = 1114

[State 405, UCantHitMe]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AT

[State 0, Velset]
type = Velset
triggerall = backedgebodydist= [ 241, 290] 
trigger1 = animelem=2
x = -14.5


[State 0, Velset]
type = Velset
trigger1 =animelem=3
x = -8

[State 0,]
type = ChangeState
trigger1 = animtime=0
value = 1115
ctrl=0

[State 1123, 6]
type = PlaySnd
triggerall =  backedgebodydist= [ 241, 290] 
trigger1 = animelem=2
value = 3,11

[State 1123, 6]
type = PlaySnd
triggerall =  backedgebodydist= [ 241, 290] 
trigger1 = animelem=2
value = 2,10


[State 1123, 6]
type = EnvShake
triggerall =  backedgebodydist= [ 241, 290] 
trigger1 = animelem=2
time = 20
ampl = 5

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 3000, Superpause]
type = SuperPause
triggerall =  backedgebodydist= [ 241, 290] 
triggerall = (enemy,numhelper=0 && p2MoveType = A) || Enemy, NumProj = 0
trigger1 = animelem=2
time = 6
movetime = 5
anim = -1
sound = 0
poweradd = 0
darken = 0

;---------------------------------------------------------------------


[Statedef 1114]
type    = A
movetype= A
physics = S
poweradd= 72*!var(33)
ctrl = 0
anim = 1114


[State 405, UCantHitMe]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AT

[State 200, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = up
fall.animtype = up
priority = 2,Hit
damage = 35, 0
pausetime = 10, 10
guard.pausetime = 10, 10
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = 0, 0
hitsound = S1, 12
guardsound = S1, 15
ground.type = High
air.type = High
ground.slidetime = 3
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 10
ground.velocity = -3
air.velocity = -2, -1
getpower=ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=35 ,35
ground.cornerpush.veloff=-6
envshake.time=17
envshake.freq=60
envshake.ampl=4



[State 3000, Superpause]
type = SuperPause
trigger1 = movecontact
time = 4
movetime = 3
anim = -1
sound = 0
poweradd = 0
darken = 0


[State 0, VelAdd]
type = Velset
trigger1 = movecontact
x = -7


[State 0,]
type = ChangeState
triggerall = animtime=0
trigger1 = movecontact
value = 1115
ctrl=0


[State 0,]
type = ChangeState
triggerall = animtime=0
trigger1 = !movecontact
value = 5120
ctrl=0

;---------------------------------------------------------------------

[Statedef 1115]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = 20
anim = 1348
juggle =0
velset = -6,0


[State 405, UCantHitMe]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AT


[State 810, Ctrl]
type = CtrlSet
trigger1 = AnimElemTime(3) >= 0
value = 1

[State 203, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 8
channel = 1

[State 203, voz]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 350
value = 0, ifelse (Random <= 550, 24, 25)
channel = 0

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 1348,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------

;ombro
[Statedef 1210]
type=S
physics=S
movetype=A
ctrl=0
velset=11,0
poweradd=72*!var(33)
juggle=0
anim = 3751
facep2=1


[State 100, 5]
type = Explod
trigger1 = vel x > 0 && (time % 4) = 0 
ID = 2221
anim = 2221
postype = p1
facing = 1
vfacing = 1
pos = -13,-40
bindtime = 1
removetime = 6
ontop = 1
vel = 0,0
ownpal = 1
random = 12,57
sprpriority = 3
scale = .36,.14
removeongethit = 1
ignorehitpause = 1
persistent = 1

[State 100, 6]
type = Explod
trigger1 = vel x > 0  && (time % 4) = 0
ID = 2221
anim = 2221
postype = p1
facing = 1
vfacing = 1
pos = -9,-60
bindtime = 1
removetime = 6
ontop = 1
ownpal = 1
random = 22, 66
sprpriority = 3
scale = .32,.12
removeongethit = 1
ignorehitpause = 1
persistent = 1


[State 200, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9, 4


[State 3001, Width]
type = Width
trigger1 = 1
edge = 20,0


[State 214, Dust]
type=explod
trigger1= animelemtime(2)>=0 && vel x>.5 && !(time%3)
anim=7103
ID=7103
sprpriority=3
postype=p1
pos=45,0
vel=-2,0
removetime=-2
ownpal=1
pausemovetime=-1
supermovetime=-1



[State 1100, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,23


[State 1300, hit]
type=hitdef
trigger1=AnimELem = 2 || AnimElem = 3
attr=S,SA 
damage=85,10
animtype=Hard
air.animtype=Hard
fall.animtype=Hard
guardflag=MA
hitflag=MAF 
priority=4,Hit 
pausetime=12,12
sparkno = s2554+(random%4)
guard.sparkno = S8035
sparkxy = -18, -65
hitsound = S1, 14
guardsound = S1, 1
ground.type=Low
ground.slidetime=16
ground.hittime=16
ground.velocity=-7,-6
guard.velocity =-9
guard.ctrltime = 1
airguard.velocity=-4,-1.5
air.type=Low
air.velocity=-7,-5
air.cornerpush.veloff=0
ground.cornerpush.veloff=-11
guard.cornerpush.veloff=-15
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36 , 36
envshake.time=16
envshake.freq=60
envshake.ampl=6
fall=1
fall.recovertime = 32
;fall.recover=0
yaccel=.5

[State Idle]
type=statetypeset
trigger1= animelemtime(3)>=0
movetype=I


[State 1300, end]
type=changestate
trigger1=!animtime
value=0
ctrl=1


;---------------------------------------------------------------------


;ex ombro
[Statedef 1211]
type=S
physics=S
movetype=A
ctrl=0
poweradd=-500
juggle=ifelse((p2movetype=H && p2statetype=A),7,0)
velset=14,0
facep2=1
sprpriority=1
anim = 3751

[State 1010, strengthvar]
type=varset
trigger1= var(8)!=4
var(8)=4


[State 200, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9, 4


[State 100, 5]
type = Explod
trigger1 = vel x > 0  
ID = 2221
anim = 2221
postype = p1
facing = 1
vfacing = 1
pos = -30,-40
bindtime = 1
removetime = 6
ontop = 1
vel = 0,0
ownpal = 1
random = 12,57
sprpriority = 3
scale = .36,.14
removeongethit = 1
ignorehitpause = 1
persistent = 1

[State 100, 6]
type = Explod
trigger1 = vel x > 0  
ID = 2221
anim = 2221
postype = p1
facing = 1
vfacing = 1
pos = -26,-60
bindtime = 1
removetime = 6
ontop = 1
ownpal = 1
random = 22, 66
sprpriority = 3
scale = .32,.12
removeongethit = 1
ignorehitpause = 1
persistent = 1



[State 1111303, vel]
type=velset
trigger1=animelem=3
x=0


[State 3001, Width]
type = Width
trigger1 = 1
edge = 20,0

[State 214, Dust]
type=explod
trigger1= animelemtime(2)>=0 && vel x>.5 && !(time%3)
anim=7103
ID=7103
sprpriority=3
postype=p1
pos=45,0
vel=-2,0
removetime=-2
ownpal=1
pausemovetime=-1
supermovetime=-1


[State 1100, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,23



[State 1300, hit]
type=hitdef
trigger1=AnimELem = 2 || AnimElem = 3
attr=S,SA 
damage=90,15
ID=1211
animtype=Hard
air.animtype=Hard
fall.animtype=Hard
guardflag=MA
hitflag=MAF 
priority=4,Hit 
pausetime=12,12
sparkno = s2554+(random%4)
guard.sparkno = S8035
sparkxy = -18, -65
hitsound = S1, 14
guardsound = S1, 1
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-12,-6
air.type=Low
air.velocity=-12,-6
air.cornerpush.veloff = 0
guard.cornerpush.veloff=-18
guard.velocity= -13.52
airguard.velocity=-6,-2
ground.cornerpush.veloff = -4
getpower=0
givepower=36,36
envshake.time=16
envshake.freq=120
envshake.ampl=6
p2facing=1
fall=1
fall.recover=0;0
forcestand=1
yaccel=.5


[State 1310, p2state]
type=targetstate
trigger1= movehit && numtarget(1211)
trigger1= (target(1211),stateno=5000) || (target(1211),stateno=5010) || (target(1211),stateno=5020)
value=1111300
ID=1211
ignorehitpause=1



[State 810, Ctrl]
type = CtrlSet
trigger1 = movehit
trigger1 = AnimElemTime(5) >= 0
value = 1

[State Idle]
type=statetypeset
trigger1= animelemtime(3)>=0
movetype=I

[State 1300, end]
type=changestate
trigger1=!animtime
value=0
ctrl=1

;---------------------------------------------------------------------

[Statedef 1111300]
type=A
movetype=H
physics=N
velset=0,0

[State 1111300, anim]
type=changeanim
trigger1=1
value=5002

[State 1111300, end]
type=changestate
trigger1=hitshakeover
value=1111301

;---------------------------------------------------------------------

[Statedef 1111301]
type=A
movetype=H
physics=N

[State 1111301, vel]
type=hitvelset
trigger1=!time
x=1
y=1
[State 1111301, grav]
type=veladd
trigger1=1
y=gethitvar(yaccel)

[State 1111301, screen]
type=screenbound
trigger1=1
value=1
movecamera=0,1
[State 1111301, push]
type=playerpush
trigger1=1
value=0

[State 1111301, anim]
type=changeanim
trigger1=!time
value=5030

[State 1111301, bounce]
type=changestate
trigger1= backedgebodydist<=10 || frontedgebodydist<=10
value=1111302

[State 1111301, end]
type=selfstate
trigger1=vel y>0&&pos y>=0
value=5100

;---------------------------------------------------------------------

[Statedef 1111302]
type=A
movetype=H
physics=N

[State 1111302, turn]
type=turn
trigger1=!time
trigger1=frontedgedist<backedgedist

[State 1111302, pos]
type=posset
trigger1=1
x=-160*facing

[State 1111302, pos]
type=posfreeze
trigger1=1
x=1
y=1

[State 1111302, screen]
type=screenbound
trigger1=1
value=1
movecamera=0,1

[State 1111302, push]
type=playerpush
trigger1=1
value=1

[State 1111302, anim]
type=changeanim
trigger1=1
value=5000

[State 1123, 6]
type = PlaySnd
trigger1 = !time
value = F7, 2

[State 1123, 6]
type = EnvShake
trigger1 = !time
time = 20
ampl = 5

[State 1111302, fx]
type=explod
trigger1=!time
anim=f72
pos=0,floor(screenpos y)-50
postype=back
sprpriority=3

[State 1111302, end]
type=changestate
trigger1=time>=4
value=1111303

;---------------------------------------------------------------------

[Statedef 1111303]
type=A
movetype=H
physics=N

[State 1111303, turn]
type=turn
trigger1=!time

[State 1111303, grav]
type=veladd
trigger1=1
y=.5
[State 1111303, vel]
type=velset
trigger1=!time
x=-2.5
y=-9

[State 1111303, anim]
type=changeanim
trigger1=!time
value=ifelse(selfanimexist(5051),5051,5030)

[State 1111303, anim]
type=changeanim
trigger1=anim=5030&&!animtime
value=5050

[State 1111303, anim]
type=changeanim
trigger1=vel y>-3&&anim=5051
value=5061

[State 1111303, screen]
type=screenbound
trigger1=1
value=1
movecamera=0,0

[State 1111303, push]
type=playerpush
trigger1=1
value=0

[State 1111303, end]
type=selfstate
trigger1=vel y>0&&pos y>=0
value=5100


;=====================================================================

;Tatsumaki medio
[Statedef 1220]
type    = S
movetype =  A
physics = S
juggle  = 10                  
velset = 0,0
ctrl = 0
anim = 1220
poweradd = 72

[State 300, Width]
type = Width
trigger1 = 1
value = 9,-5

[State 1100, Dash]
type = veladd
trigger1 = animelem = 3 || animelem = 4 || animelem = 5 || animelem = 6
x = 3

[State 1100, Dash Stop]
type = veladd
trigger1 = animelem = 7
x = 0

[State 1100, efeito]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,1

[State 1100, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,8

[State 1100, efeito]
type = PlaySnd
trigger1 = AnimElem = 8
value = S1,8

[State 1100, efeito]
type = PlaySnd
trigger1 = AnimElem = 9
value = S2,1

[State 1100, 3]
type = Hitdef
trigger1 = animelem = 9
attr = S, SA
hitflag = MAF
guardflag = MA
animtype = Diagup
priority = 4, Hit
damage = 60, 5
pausetime = 14, 14
sparkno = s2554+(random%4)
guard.sparkno = S8035
sparkxy = -13, -60
hitsound = S1, 14
guardsound = S1, 1
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime  = 30
ground.velocity = -.50,-8
airguard.velocity = -6,-3
guard.velocity = -8
air.velocity = -1,-8
air.hittime = 30
air.animtype = back
fall.animtype = back
envshake.time = 14
envshake.ampl = 10
ground.cornerpush.veloff = -7
air.cornerpush.veloff = -7
guard.cornerpush.veloff = -12
airguard.cornerpush.veloff = -2
fall = 1
envshake.time=9
envshake.freq=60
envshake.ampl=5
getpower=ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=35 , 35

[State 1100, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------
;=====================================================================

;ex Tatsumaki forte
[Statedef 1200]
type    = S
movetype =  A
physics = S
juggle = ifelse (p2movetype=H&&p2statetype=A, 5, 0)
velset = 0,0
ctrl = 0
anim = 1200
poweradd = ifelse (var(12)>=1,  0,-500)

[State 1010, strengthvar]
type=varset
trigger1= var(8)!=4
var(8)=4

[State 300, Width]
type = Width
trigger1 = 1
value = 16,-5

[State 1100, Dash]
type = veladd
trigger1 = animelem = 3 || animelem = 4 || animelem = 5 || animelem = 6
x = 3

[State 1100, Dash Stop]
type = veladd
trigger1 = animelem = 7
x = 0

[State 1100, efeito]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,1

[State 1100, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,8

[State 1100, efeito]
type = PlaySnd
trigger1 = AnimElem = 7
value = S1,8

[State 1100, efeito]
type = PlaySnd
trigger1 = AnimElem = 8
value = S2,1


[State 1100, 3]
type = Hitdef
trigger1 = animelem = 8
attr = S, SA
hitflag = MAF
guardflag = MA
animtype = diagup
priority = 4, Hit
damage = ifelse((p2movetype=H && p2statetype=A),80,100),10
pausetime = 10, 11
sparkno = s2554+(random%4)
guard.sparkno = S8035
sparkxy = -23, -67
hitsound = S1, 14
guardsound = S1, 1
ground.type = High
air.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -6, -5.5
airguard.velocity = -4.5,-2.2
air.velocity = -5.5,-5
air.hittime = 18
ground.cornerpush.veloff = -6
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -12
airguard.cornerpush.veloff = 0
guard.velocity = -11
p2facing=1
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time=41
envshake.freq=80
envshake.ampl=6
id=1123
getpower=0,0
givepower=35 , 35

[State 2400, 0]
type = TargetState
triggerall= prevstateno!=406
trigger1 = numtarget(1123) && movehit && p2movetype = H
value = 1123
ignorehitpause = 0
persistent = 0

[State Idle]
type=statetypeset
trigger1= animelemtime(9)>=0
movetype=I

[State 1100, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
;=====================================================================

[Statedef 1123]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0


[State 1123, 0]
type = PlayerPush
trigger1 = 1
value = 0

[State 1123, 0]
type = ChangeAnim
trigger1 = 1
value = 5017

[State 1123, 1]
type = VelSet
trigger1 = time = 1
x = -10

[State 1123, 6]
type = PlaySnd
trigger1 = time > 5
trigger1 = backedgedist <= 15
value = F7, 2

[State 1123, 6]
type = EnvShake
trigger1 = time > 5
trigger1 = backedgedist <= 15
time = 20
ampl = 5

[State 1123, 7]
type = ChangeState
trigger1 = time > 5
trigger1 = backedgedist <= 15
value = 1124

;---------------------------------------------------------------------
;=====================================================================

;P2 State(wall bound)
[Statedef 1124]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 2580, 3]
type = GameMakeAnim
trigger1 = backedgedist <= 15
persistent = 0
ignorehitpause = 1
value = 72
pos = -45,-65
postype = p1
bindtime = -1

[State 1124, 2]
type = ChangeAnim
trigger1 = time < 7
value = 5030

[State 1124, 2]
type = ChangeAnim
trigger1 = time = 7
value = 5050

[State 1124, 2]
type = VelSet
trigger1 = time = 7
persistent = 0
x = 2
y = -9

[State 1124, 2]
type = VelAdd
trigger1 = time >= 7
y = 0.45


[State 1124, 7]
type = ChangeAnim
triggerall = time > 7
trigger1 = Vel Y > 0
trigger1 = Pos Y > 15
value = 5050

[State 1124, 7]
type = SelfState
triggerall = time > 7
trigger1 = Vel Y > 0
trigger1 = Pos Y > 15
value = 5100

;---------------------------------------------------------------------
;=====================================================================

[Statedef 1010]
type    = S
movetype = A
physics = S
juggle  = ifelse((p2movetype=H&&p2statetype=A),7,8)                  
anim = ifelse (Command = "shoryu1", 1010, ifelse (Command = "shoryu2", 1011, 1012))
sprpriority = 2
velset = 0,0
ctrl = 0
poweradd= ifelse (Command = "shoryu1", 52, ifelse (Command = "shoryu2", 72, 92))*!var(33)

[State 1010, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = ifelse (Command = "shoryu1", 0, ifelse (Command = "shoryu2", 1, 2))


[State 1010, efeito]
type = PlaySnd
trigger1 = Time = 2
value = 1,8



[State 1010, voz]
type = PlaySnd
trigger1 = time = 0
value = 0,16



[State 1015, flames]
type=helper
trigger1= movehit && numtarget && numhelper(7180)<1
trigger1= !(target,time) && (target,movetype=H)
trigger1= anim=1012
helpertype=normal
stateno=7180
ID=7180
name="flames"
postype=p2
bindtime=1000
ownpal=1
facing=-1
size.ground.front=0
size.ground.back=0
ignorehitpause=1


[State 1010, Muteki]
type = NotHitBy
trigger1 = (Anim = [1010, 1012]) && AnimElemTime(5) < 0
value = SCA

[State 1010, StateType]
type = StateTypeSet
trigger1 = (Anim = [1010, 1012]) && AnimElem = 5
StateType = A
physics = N

[State 1010, Velocity]
type = VelSet
trigger1 = (Anim = [1010, 1012]) && AnimElem = 5
x = 4 + (2*Var(5))
y = ifelse (Var(5) = 0, -4, ifelse (Var(5) = 1, -5, -8.6))

[State 1010, Vel X]
type = VelMul
trigger1 = Time > ifelse (Var(5) = 0, 8, ifelse (Var(5) = 1, 10, 12)) && Vel X
x = ifelse (Var(5) = 2, 0.9, 0.8)
y = ifelse (Var(5) = 2, 1, 1.05)

[State 1010, Gravity]
type = VelAdd
trigger1 = Time > ifelse (Var(5) = 0, 8, ifelse (Var(5) = 1, 10, 12))
y = ifelse (Var(5) = 0, .45, ifelse(Var(5) = 1, .47, .49))

[State 1010, ChangeAnim]
type = ChangeAnim
trigger1 = Time > 8 && Vel Y > 0
value = 1013
persistent = 0


[State 2200, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1012 && Time = 0
value = 5,7

[State 1010, Fire1]
type = Explod
trigger1 = Anim = 1012 && Time = 0
Anim = 1016
pos = 0, 0
postype = p1
ontop = 1
ownpal = 1
bindtime = 9

[State 1010, Fire2]
type = Explod
trigger1 = Anim = 1012 && AnimElemTime(5) >= 0 && !NumExplod(1017)
Anim = 1017
pos = 0, 0
postype = p1
ontop = 1
ownpal = 1
bindtime = -1
ignorehitpause = 1
removetime = -1
ID = 1017




;-----------------------

; Shoryuken fraco

[State 1010, HitDef]
type = HitDef
trigger1 = Anim = 1010 && (AnimElem = 4 || AnimElem = 5)
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage  = ifelse((p2movetype=H && p2statetype=A),70,100),15
priority  = 5, Hit
hitflag = MAF
guardflag = M
pausetime = ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = 8, -80
hitsound   = S1,13
guardsound = S1,15
ground.type = Low
ground.slidetime = 15
ground.hittime  = 16
guard.ctrltime = 17
ground.velocity = -3, -9
guard.velocity = -11
air.velocity = -1.1,-9.5
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36,36
envshake.time=16
envshake.freq=120
envshake.ampl=4
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0


;---------------------

; Shoryuken medio

[State 1010, HitDef]
type = HitDef
trigger1 = Anim = 1011 && AnimElem = 4 
attr = A, SA
animtype=Hard
fall.animtype=Hard
damage  = 60,8
priority  = 5, Hit
hitflag = MAF
guardflag = M
pausetime = ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = 8, -80
hitsound   = S1,13
guardsound = S1,15
ground.type = Low
air.type = Low
ground.slidetime = 15
ground.hittime  = 16
guard.ctrltime = 17
ground.velocity = -3, -9
guard.velocity = -11
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36,36
air.velocity = -3,-9
envshake.time=16
envshake.freq=120
envshake.ampl=4
forcestand = 1
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5

[State 1010, HitDef]
type = HitDef
trigger1 = Anim = 1011 && AnimElem = 5
attr = A, SA
animtype=Heavy
damage  = 60,8
priority  = 5, Hit
hitflag = MAF
guardflag = M
pausetime = ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = 8, -80
hitsound   = S1,13
guardsound = S1,15
ground.type = High
air.type = High
ground.slidetime = 15
ground.hittime  = 16
guard.ctrltime = 17
ground.velocity = -3, -9
guard.velocity = -11
air.velocity = -3,-9
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36,36
envshake.time=16
envshake.freq=120
envshake.ampl=4
forcestand = 1
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5

;-----------------------------------

; Shoryuken forte

[State 1010, HitDef]
type = HitDef
trigger1 = Anim = 1012 && (AnimElem = 2 || AnimElem = 3)
attr = S, SA
animtype=Hard
fall.animtype=Hard
damage    = 40,10
priority  = 5, Hit
hitflag = MA
guardflag = M
pausetime = ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = 8, -45
hitsound   = S1,13
guardsound = S1,15
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
guard.ctrltime = 15
ground.velocity = -1.8,-11
guard.velocity = -11
air.velocity = -1.9,-9.4
getpower=ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=35 , 35
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
envshake.time=16
envshake.freq=120
envshake.ampl=4
forcestand = 1
persistent = 0
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
palfx.time = 60
palfx.mul = 256,256,256
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.invertall = 0
palfx.color = 0

[State 1010, HitDef]
type = HitDef
trigger1 = Anim = 1012 && (AnimElem = 4)
attr = A, SA
animtype  = Heavy
air.animtype = Back
damage    = 50,5
priority  = 5, Hit
hitflag = MAF
guardflag = M
pausetime = ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = 8, -100
hitsound   = S1,13
guardsound = S1,15
ground.type = Low
ground.slidetime = 14
ground.hittime  = 15
guard.ctrltime = 15
ground.velocity = -1.8,-11.1
guard.velocity = -11
air.velocity = -1.9,-10.1
envshake.time = 14
envshake.freq=120
envshake.ampl=4
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
;yaccel = .5
forcestand = 1
getpower=ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=35 , 35
palfx.time = 60
palfx.mul = 256,256,256
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.invertall = 0
palfx.color = 0

[State 1010, HitDef]
type = HitDef
trigger1 = Anim = 1012 && (AnimElem = 5)
attr = A, SA
animtype  = Heavy
air.animtype = Back
damage    = 50,5
priority  = 5, Hit
hitflag = MAF
guardflag = M
pausetime = ifelse(var(33),6,12), ifelse(var(33),6,12)
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = 8, -100
hitsound   = S1,13
guardsound = S1,15
ground.type = Low
ground.slidetime = 14
ground.hittime  = 15
guard.ctrltime = 15
ground.velocity = -3, -11
guard.velocity = -11
air.velocity = -4,-9
envshake.time = 14
envshake.freq=120
envshake.ampl=4
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
forcestand = 1
getpower=ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=35 , 35
palfx.time = 60
palfx.mul = 256,256,256
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.invertall = 0
palfx.color = 0

[State 5040, 6]
type = ChangeState
triggerall = command="holddown" && command="a"
triggerall = anim !=1010
trigger1 = time>=27
value = 1033

[State Idle]
type=statetypeset
trigger1= anim=1013
movetype=I

[State 1010, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1015





;ai weak shoryu
[Statedef 1017]
type    = S
movetype = A
physics = S
juggle  = ifelse((p2movetype=H&&p2statetype=A),14,10)                  
anim =  1010
sprpriority = 2
velset = 0,0
ctrl = 0
poweradd= 72*!var(33)
hitcountpersist=1

[State 1010, efeito]
type = PlaySnd
trigger1 = Time = 0
value = 1,1
channel = 1

[State 1010, voz]
type = PlaySnd
trigger1 = time = 0
value = 0,16
channel = 0


[State 1010, Muteki]
type = NotHitBy
trigger1 = Anim = 1010 && AnimElemTime(5) < 0
value = SCA

[State 1010, StateType]
type = StateTypeSet
trigger1 = Anim = 1010 && AnimElem = 5
StateType = A
physics = N


[State 1010, Velocity]
type = VelSet
trigger1 = Anim = 1010 && AnimElem = 5
x = 4
y = -4

[State 1010, Vel X]
type = VelMul
trigger1 = Time >  8 && Vel X
x = 0.9
y =1.05

[State 1010, Gravity]
type = VelAdd
trigger1 = Time > 8
y = .45

[State 1010, ChangeAnim]
type = ChangeAnim
trigger1 = Time > 8 && Vel Y > 0
value = 1013
persistent = 0


[State 1010, HitDef]
type = HitDef
trigger1 = Anim = 1010 && (AnimElem = 4 || AnimElem = 5)
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage  = ifelse((p2movetype=H&&p2statetype=A),65,100),15
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 14, 15
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = 8, -80
hitsound   = S1,13
guardsound = S1,15
ground.type = Low
ground.slidetime = 15
ground.hittime  = 16
guard.ctrltime = 17
ground.velocity = -3, -9
guard.velocity = -11
air.velocity = -1.2,-9
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36,36
envshake.time=16
envshake.freq=120
envshake.ampl=4
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0

[State Idle]
type=statetypeset
trigger1= anim=1013
movetype=I

[State 1010, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 13416


;---------------------------------------------------------------------

[Statedef 13416]
type = S
movetype= A
physics = N
ctrl = 0
anim = 1015
velset = 0,0

[State 1015, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1015, efeito]
type = PlaySnd
trigger1 = Time = 0
value = 1, 2
channel = 20

[State 1015, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 1015, Dust]
type = Explod
trigger1 = Time = 0
Anim = 8090
pos = 0, 0
postype = p1
ontop = 0
scale = 0.5, 0.5
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
ID = 8090

[State 1015, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------

[Statedef 1015]
type = S
movetype= I
physics = N
ctrl = 0
anim = 1015
velset = 0,0

[State 1015, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1015, efeito]
type = PlaySnd
trigger1 = Time = 0
value = 1, 2
channel = 20

[State 1015, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 1015, Dust]
type = Explod
trigger1 = Time = 0
Anim = 8090
pos = 0, 0
postype = p1
ontop = 0
scale = 0.5, 0.5
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
ID = 8090

[State 1015, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------


; Tatsumaki Senpuu Kyaku chao
[Statedef 1030]
type=A
physics=N
movetype=A
ctrl=0
velset=0,0
juggle=ifelse(var(5)=0,7,ifelse(var(5)=1,8,8)) *!var(33)
poweradd=72*!var(33)
sprpriority=1
facep2=1

[State 1200, strengthvar]
type=varset
trigger1= !time && var(12)<=0
var(5)=ifelse((command="tatsu3"),2,ifelse(command="tatsu2",1,0))

[State 1200, strengthvarAI]
type=varset
trigger1= !time && var(12)>=1
var(5)= ifelse((p2movetype=H || random<333), 2, ifelse(random<500, 1, 0))

[State 1200, Pos]
type=posset
trigger1=!time
y=0

[State 1200, Width]
type=width
trigger1=1
edge=20,0
player=10,10

[State 1200, Anim]
type=changeanim
Trigger1=!time
value=ifelse(var(5)=0,1030,ifelse(var(5)=1,1031,1032))

[State 1200, Snd]
type=playsnd
trigger1= (anim=[1030,1032]) && animelem=1
value=1,1

[State 1200, Snd]
type=playsnd
trigger1= animelem=1
value=0,17
channel=1

;[State 1200, Dust]
;type=helper
;trigger1= (anim=[1030,1032]) && animelem=1
;helpertype=normal
;stateno=7100
;ID=7100
;name="Dust"
;postype=p1
;ownpal=1

[State 1200, StateIdle]
type = statetypeset
trigger1 = var(5)=0 && animelem=12
trigger2 = var(5)=1 && animelem=30
trigger3 = var(5)=2 && animelem=36
movetype = I

[State 1200, Vel]
type=velset
trigger1=animelem = 1
x=ifelse(var(5)=0,2.7,ifelse(var(5)=1,3,3.6))
y=-6.4

[State 1200, Vel]
type = VelMul
trigger1=var(5)=0 && animelemtime(13) >= 0
trigger2=var(5)=1 && animElemtime(31) >= 0
trigger3=var(5)=2 && animElemtime(36) >= 0
x = .96

[State 1200, Vel]
type=velset
trigger1=animelem=6
y=0

[State 1200, Vel]
type=veladd
trigger1= animelemtime(5) < 0
trigger2=var(5)=0 && animelemtime(13) >= 0
trigger3=var(5)=1 && animelemtime(31) >= 0
trigger4=var(5)=2 && animelemtime(36) >= 0
y=.4

[State 1200, Push]
type = PlayerPush
trigger1 = enemynear,Pos Y < -75
value = 0

[State 1200, Snd]
type = PlaySnd
trigger1 = AnimElem = 1 || AnimElem = 5 || AnimElem = 9
trigger2 = var(5)>=1 && (AnimElem = 12 || AnimElem = 15 || AnimElem = 18 || AnimElem = 21)
trigger3 = var(5)=2 && (AnimElem = 24 || AnimElem = 27)
value = s1,9

[State 1200, StateIdle]
type = statetypeset
trigger1 = var(5)=0 && animelem = 15
trigger2 = var(5)=1 && animelem = 33
trigger3 = var(5)=2 && animelem = 39
movetype = I

[State 1200, HitDef]
type = HitDef
trigger1 = animelem=2
attr = A, SA
damage = 35, 7
animtype = Heavy
air.animtype = Back
guardflag = M
hitflag = MAF
priority = 7, Hit
pausetime = 13, 14
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = -10, -48
hitsound   = S1,13
guardsound = S1,15
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,0
guard.velocity = -8
ground.cornerpush.veloff= -8
guard.cornerpush.veloff= -11.2
airguard.velocity = -6.67,-1
air.type = Low
air.velocity = -6,-6
air.hittime = 20
air.cornerpush.veloff= 0
airguard.cornerpush.veloff= 0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .49
persistent = 0
givepower = 35,35
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
envshake.time = 10
envshake.ampl = 3


[State 1200, HitDef]
type = HitDef
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 16
trigger5 = AnimElem = 20
trigger6 = AnimElem = 22
trigger7 = AnimElem = 26
trigger8 = AnimElem = 28
trigger9 = AnimElem = 32
trigger10 = AnimElem = 34
attr = A, SA
damage = 29, 5
animtype = Heavy
air.animtype = Back
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 11, 12
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = -10, -48
hitsound   = S1,13
guardsound = S1,15
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8*ifelse(p2dist x>=0,1,-1),0
guard.velocity = -8*ifelse(p2dist x>=0,1,-1)
air.velocity = -2.5,-6 ;-6*ifelse(p2dist x>=0,1,-1),-6
ground.cornerpush.veloff= -11.2
guard.cornerpush.veloff= -11.2
airguard.velocity = -6.67,-1
air.type = Low
air.hittime = 20
air.cornerpush.veloff= 0
airguard.cornerpush.veloff= 0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .49
persistent = 1
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=35,35
envshake.time = 10
envshake.ampl = 3


[State 1200, End]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1036


; Tatsumaki Senpuu Kyaku (land)
[Statedef 1036]
type = S
physics = S
ctrl = 0
anim = 1036
velset = 0,0

[State 1205, Pos]
type=posset
trigger1= !time
y=0

[State 1205, snd]
type=playsnd
trigger1= !time
value=0,52

[State 1205, dust]
type=explod
trigger1= !time
anim=8090
ID=8090
sprpriority=-2
postype=p1
pos=5,0
scale=.5,.5
ownpal=1
pausemovetime=-1
supermovetime=-1

[State 1205, End]
type = ChangeState
trigger1= !animtime
value=0
ctrl=1

;--------------------------------------------------------------------

[Statedef 1041]
type    = A
movetype = A
physics = N
juggle = 0
anim = ifelse (Command = "ryusen1", 1040, ifelse (Command = "ryusen2", 1041, 1042))
sprpriority = 2
velset = 0,0
ctrl = 0
poweradd= ifelse (Command = "ryusen1", 52, ifelse (Command = "ryusen2", 72, 92))*!var(33)

[State 300, Width]
type = Width
trigger1 = 1
value = -38,-5


[State 1040, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = ifelse (Command = "ryusen1", 0, ifelse (Command = "ryusen2", 1, 2))

[State 1040, efeito]
type = PlaySnd
trigger1 = Time = 4
value = 1,1


[State 1040, efeito]
type = PlaySnd
trigger1 = Time = 13
value = 1, 10


[State 1040, voz]
type = PlaySnd
trigger1 = Time = 4
value = 0,13


[State 1040, Velocity]
type = VelSet
trigger1 = Time = 1
x = 3
y = -(9 + (2*Var(5)))

[State 1040, Velocity]
type = VelSet
trigger1 = movecontact
x = 0
y = 13


[State 1040, Velocity]
type = VelAdd
trigger1 = Time > 1
y = ifelse (!Var(5), .90, ifelse (Var(5) = 1, .95, .99))

[State 1040, Velocity]
type = VelMul
trigger1 = Vel Y > -2
y = ifelse (!Var(5), 1.01, ifelse (Var(5) = 1, 1.02, 1.03))

[State 1040, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S, SA
animtype  = Heavy
damage  = ifelse (Var(5) = 0, 100, ifelse (Var(5) = 1, 120, 140)), ifelse (Var(5) = 0, 10, ifelse (Var(5) = 1, 15, 20))
priority = 4,Hit
hitflag = MAF
guardflag = M
pausetime = 7, 5
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = 8, -85
hitsound   = S1,13
guardsound = S1,15
ground.type = Trip
ground.slidetime = 16
ground.hittime  = 90
guard.ctrltime = 16
ground.velocity = -4, 11
guard.velocity = -12
air.velocity = -4, 11
ground.cornerpush.veloff = 0
getpower=ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=35 , 35
envshake.time = 10 + (Var(5)*2)
envshake.ampl = 3 + (Var(5)*2)
down.hittime = 20
down.bounce = 0
fall = 1
fall.recover = 0
air.recover = 0
air.fall = 1



[State 1045, Dust]
type = Explod
trigger1 = Time = 0
Anim = 8090
pos = 0, 0
postype = p1
ontop = 0
scale = 0.5, 0.5
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
ID = 8090


[State 1046, HitDef]
type = HitDef
triggerall = !movecontact
trigger1 = anim=1045
;trigger1 = AnimElem = 1
attr = S, SA
animtype  = light
air.animtype = back
damage  = ifelse (Var(5) = 0, 100, ifelse (Var(5) = 1, 120, 140)), ifelse (Var(5) = 0, 10, ifelse (Var(5) = 1, 15, 20))
priority = 4,Hit
hitflag = DF
guardflag = M
pausetime = 14, 14
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = 1, 5
hitsound   = S1,13
guardsound = S1,15
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 16
ground.velocity = 0, 11
guard.velocity = -1
air.velocity = 0, 11
ground.cornerpush.veloff = 0
down.hittime = 30
envshake.time = 15 + (Var(5)*2)
envshake.ampl = 3 + (Var(5)*2)
;fall = 1


[State 1040, ChangeState]
type = Changeanim
trigger1 = Pos Y >= 50 && Vel Y > 0
value = 1045

[State 1046, PosSet]
type = PosSet
trigger1 = anim=1045
y = 0

[State 1046, PosSet]
type = velSet
trigger1 = anim=1045
y = 0
x=0

[State 903, EnvShake]
type = EnvShake
trigger1 =anim=1045 && AnimElem = 1
time = 7
ampl = 5

[State Idle]
type=statetypeset
triggerall=anim=1045
trigger1= animelemtime(2)>=0
movetype=I

[State 1040, ChangeState]
type = ChangeState
trigger1 = anim=1045
trigger1 = animtime=0
value = 0
ctrl=1

;-------------------------------------------------------------------

;ex ryusen
[Statedef 1040]
type    = A
movetype = A
physics = N
juggle = 0
anim = 1042
sprpriority = 2
velset = 0,0
ctrl = 0
poweradd= -500

[State 300, Width]
type = Width
trigger1 = 1
value = -38,-5

[State 1010, strengthvar]
type=varset
trigger1= var(8)!=4
var(8)=4



[State 1040, efeito]
type = PlaySnd
trigger1 = Time = 0
value = 1,1


[State 1040, efeito]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1, 10


[State 1040, voz]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,13


[State 1040, Velocity]
type = VelSet
trigger1 = Time = 1
x = 4
y = -14

[State 1040, Velocity]
type = VelSet
trigger1 = movecontact
x = 0
y = 13


[State 1040, Velocity]
type = VelAdd
trigger1 = Time > 1
y = .99

[State 1040, Velocity]
type = VelMul
trigger1 = Vel Y > -2
y = 1.03

[State 1040, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S, SA
animtype  = Heavy
damage  = 180, 30
priority = 4,Hit
hitflag = MAF
guardflag = M
pausetime = 7, 5
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = 8, -85
hitsound   = S1,13
guardsound = S1,15
ground.type = Trip
ground.slidetime = 16
ground.hittime  = 90
guard.ctrltime = 16
ground.velocity = -4, 11
guard.velocity = -12
air.velocity = -4, 11
ground.cornerpush.veloff = 0
getpower=0
givepower=35 , 35
envshake.time = 12
envshake.ampl = 6
down.hittime = 20
down.bounce = 0
fall = 1
fall.recover = 0
air.recover = 0
air.fall = 1



[State 1045, Dust]
type = Explod
trigger1 = Time = 0
Anim = 8090
pos = 0, 0
postype = p1
ontop = 0
scale = 0.5, 0.5
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
ID = 8090



[State 1040, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 50 && Vel Y > 0 && !movecontact
value = 1045


[State 1040, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1046

;---------------------------------------------------------------------

[Statedef 1045]
type = S
movetype= A
physics = N
juggle = 0
ctrl = 0
anim = 1045
velset = 0,0

[State 903, EnvShake]
type = EnvShake
trigger1 =AnimElemTime(1) = 0
time = 15
ampl = 5

[State 1045, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

;[State 1045, VarSet]
;type = VarSet
;trigger1 = Time = 0
;var(5) = 0

[State 1045, efeito]
type = PlaySnd
trigger1 = Time = 0
value = 1, 6


[State 1045, HitDef]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SA
animtype  = Hard
air.animtype = up
damage  = ifelse (Var(5) = 0, 100, ifelse (Var(5) = 1, 120, 140)), ifelse (Var(5) = 0, 10, ifelse (Var(5) = 1, 15, 20))
priority = 4,Hit
hitflag = DF
guardflag = M
pausetime = 14, 14
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = 1, 5
hitsound   = S1,13
guardsound = S1,15
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 16
ground.velocity = -4, 11
guard.velocity = -12
air.velocity = -4, 11
ground.cornerpush.veloff = 0
down.hittime = 30
envshake.time = 15 + (Var(5)*2)
envshake.ampl = 3 + (Var(5)*2)
fall = 1
p2stateno = 804


[State 1045, Dust]
type = Explod
trigger1 = Time = 0
Anim = 2707
pos = 40, 8
postype = p1
ontop = 1
scale = .8, .8
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
ID = 8090


[State 1045, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------

[Statedef 804]
type = A
movetype = H
physics = N
sprpriority = -1


[State 804]
type = Velset
trigger1 = time = 0
x = -1
y = -14


[State 804,2]
type = Gravity
trigger1 = 1


[State 804, 4]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5061

[State 804,5]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------

[Statedef 1046]
type = S
movetype= A
physics = N
juggle = 0
ctrl = 0
anim = 1045
velset = 0,0

[State 1046, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1046, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 1046, efeito]
type = PlaySnd
trigger1 = Time = 0
value = 1, 6
channel = 1


[State 1045, Dust]
type = Explod
trigger1 = Time = 0
Anim = 2707
pos = 40, 8
postype = p1
ontop = 1
scale = .8, .8
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
ID = 8090

[State 1046, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------

[Statedef 1050]
type    = A
movetype = A
physics = N
juggle = ifelse((p2movetype=H&&p2statetype=A),5,1)
anim = 1050
sprpriority = 2
ctrl = 0
poweradd= ifelse (Command = "tatsu1", 52, ifelse (Command = "tatsu2", 72, 92))

[State 300, Width]
type = Width
trigger1 = 1
edge=5,0

[State 1030, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = ifelse (Command = "tatsu1", 0, ifelse (Command = "tatsu2", 1, 2))

[State 1050, efeito]
type = PlaySnd
trigger1 = Time = 0
value = 1,1
channel = 0

[State 1050, efeito]
type = PlaySnd
trigger1 = AnimElem = 3 || AnimElem = 5 || AnimElem = 9 || AnimElem = 11
value = 1, 9


[State 1050, voz]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,17


[State 1050, Velocity]
type = veladd
trigger1 = !time && anim = 1050
x = ifelse(vel x>=0,1,-1)
y=-.9


[State 1050, Velocity]
type = veladd
trigger1 = anim = 1050 && animelemtime(24)< 0
y = -const(movement.yaccel)*.28

[State 1050, Velocity]
type = veladd
trigger1 = anim = 1050 && animelemtime(25)< 0
y = -const(movement.yaccel)*.55


[State 1050, Velocity]
type = veladd
trigger1 = anim!=1059
trigger1 = vel y >=0
y = -.3


[State 1201, 1]
type = PlayerPush
trigger1 = enemynear,Pos Y < -100
value = 0


[State 1050, HitDef]
type = HitDef
trigger1 = AnimElem = 4 || AnimElem = 6 || AnimElem = 10 || AnimElem = 12
attr = S, SA
animtype  = Heavy
air.animtype = up
damage  = ifelse(!Var(5), 27, ifelse (Var(5) = 1, 27, 27)),ifelse(!Var(5), 15, ifelse (Var(5) = 1, 8, 9))
priority = 4,Hit
hitflag = MAF
guardflag = MA
pausetime = 9, 10
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = 8, -63
hitsound   = S1,13
guardsound = S1,15
ground.type = High
ground.slidetime = 13
ground.hittime  = 17
guard.ctrltime = 16
ground.velocity = -5
air.cornerpush.veloff = -12
air.velocity = -5,-3
airguard.velocity = -6.67,-1
air.recover = 0
p1facing = 1
air.fall = 1
forcestand = 1
p1facing = 1
envshake.time = 10
envshake.ampl = 3
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36,36


[State 1030, StateType]
type = StateTypeSet
trigger1 = time >= 3
physics = A

[State 1050, ChangeState]
type = ChangeState
trigger1 = hitcount>=3
trigger2 = time>=28
value = 1059
ctrl = 0



[State 1030, ChangeState]
type = ChangeState
triggerall=var(12)<=0
triggerall= movecontact
trigger1 = command = "bite2"
trigger2 = command = "bite3"
value = 39998
ctrl = 0

;---------------------------------------------------------------------


[Statedef 760]
type=U
physics=U
movetype=A
anim=ifelse(statetype=A,762,760)
ctrl=0
velset=ifelse((statetype=S),0,vel x),ifelse((statetype=S),0,vel y)
poweradd=-1000

[State 760, stop]
type=posfreeze
trigger1= anim=762
value=1

[State 3000, efeito]
type = PlaySnd
trigger1 = !time
value = 1,19
volume = 10

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,8
channel = 0


[State 760, Super Pause FX]
type=helper
trigger1= !time
helpertype=normal
stateno=7260
ID=7260
postype=p1
pos=ifelse((anim=760),-2,ifelse((anim=762),-5,-8)),ifelse((anim=760),-62,ifelse((anim=762),-77,-43))
ownpal=1
size.xscale=1
size.yscale=1
persistent=0
supermovetime=9999

[State 760, superchargepause]
type=superpause
trigger1= !time
time=30
anim=-1
sound=s7,2
darken=0
movetime=30*(anim!=762)


[State 760, var]
type=varset
triggerall= var(12)<=0
trigger1= (anim=[760,761]) && !animtime
trigger2= anim=762 && !time
var(33)=180

[State 760, var]
type=varset
trigger1= var(12)>=1 && animelemtime(8)>=0
var(33)=180



[State 760, nhb]
type=nothitby
trigger1= (anim=[760,761])
trigger2= anim=762 && time<=1
time=8
value=SCA

[State 760, image]
type=afterimage
trigger1= (anim=[760,761]) && time=30
trigger2= anim=762 && time=1
time=2
timegap=1
framegap=4
length=13
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=64,128,192
palpostbright=0,0,0
trans=add1

[State 760, End]
type=changeanim
trigger1= anim=762 && !animtime
value=41
elem=6

[State 760, Type]
type=statetypeset
trigger1= anim=41
statetype=A
physics=A

[State 760, ctrl]
type=ctrlset
trigger1= anim=41
value=1

[State 760, End]
type=changestate
trigger1= (anim=[760,761]) && !animtime
value=0
ctrl=1




;---------------------------------------------------------------------


[Statedef 1053]
type = S
movetype = I
physics = S
poweradd = 300
ctrl = 0



[State 1000, ChangeState]
type = ChangeState
triggerall = statetype!=L
trigger1 = animTime =0
value = 0
ctrl = 1

[State 1000, ChangeState]
type = ChangeState
triggerall = statetype=L
trigger1 = animTime =0
value = 5110
ctrl = 0


;---------------------------------------------------------------------

;fim airtatsu
[Statedef 1059]
type    = A
movetype= I
physics = A
ctrl = 0
anim = 1035

[State 1050, Changeanim]
type = ChangeAnim
trigger1 = time>=11
value = 1059

[State 1010, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1015

;---------------------------------------------------------------------

;fim supertatsu
[Statedef 1069]
type    = A
movetype= I
physics = A
ctrl = 0
anim = 2102

[State 210, var(6) facedif]
type = turn
trigger1 = !time




[State 1010, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1015

;---------------------------------------------------------------------


; ex tatsu cho
[Statedef 1055]
type=A
physics=N
movetype=A
anim=1055
ctrl=0
velset=0,0
poweradd= ifelse (var(12)>=1,  0,-500)
juggle=5
facep2=1
sprpriority=1

[State 1010, strengthvar]
type=varset
trigger1= var(8)!=4
var(8)=4


[State 1200, nothitby]
type=nothitby
trigger1= anim=1055 && animelemtime(2)<0
value=SCA
time=1
ignorehitpause=1


[State 1200, Snd]
type=playsnd
trigger1= anim=1055 && animelem=1
value=0,17

[State 1200, Snd]
type=playsnd
trigger1= animelem=1
value=1,1


[State 1200, statetype]
type=statetypeset
trigger1= anim=1055 && animElemTime(1) >= 0 && AnimElemTime(5) < 0
statetype=A
physics=A

[State 1200, statetype]
type=statetypeset
triggerall= anim=1055
trigger1 = animElemTime(6) >= 0 && AnimElemTime(28) < 0
statetype=A
physics=N

[State 1200, statetype]
type=statetypeset
trigger1= anim=1055 && animElemTime(29) >= 0 && AnimElemTime(36) < 0
statetype=A
physics=A

[State 1200, Vel]
type=velset
trigger1= anim=1055 && animelem=1
x=3.5
y=-4

[State 1200, Vel]
type=velset
trigger1= anim=1055 && AnimElemTime(6) >= 0 && AnimElemTime(28) < 0
x=3.5
y=0

[State 1200, spin]
type=playsnd
trigger1= anim=1055 && !(animelemtime(1)%9)
value=s1,9
channel=1

[State 1200, Hit]
type=hitdef
trigger1= anim=1055 && animelemtime(2)=-1
trigger2= anim=1055 && (animelem=7 || animelem=13 || animelem=19 || animelem=25)
attr=S,SA
damage= 65, 7
animtype=Hard
guardflag=MA
hitflag=MAF
priority=4,Hit
pausetime= 14, 14
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = -10, -48
hitsound   = S1,13
guardsound = S1,15
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-2.5,-8
air.type=Low
air.velocity=-2.5,-6.5
ground.cornerpush.veloff = 0
guard.velocity= -10.52
ground.cornerpush.veloff = -12.74
getpower= 0
givepower=36,36
envshake.time=16
envshake.freq=120
envshake.ampl=4
fall=1
fall.recover=0
airguard.ctrltime= 16
airguard.velocity= -8, -1.5
forcestand=1
airground.cornerpush.veloff = 0

[State 1200, hitb]
type=hitdef
trigger1= anim=1055 && (animelem=10 || animelem=16 || animelem=22 || animelem=28)
attr=S,SA
damage= 65, 7
animtype=Hard
guardflag=MA
hitflag=MAF
priority=4,Hit
pausetime= 14 ,14
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = -10, -48
hitsound   = S1,13
guardsound = S1,15
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=3,-8
air.type=Low
air.velocity=3,-6.5
ground.cornerpush.veloff = 0
guard.velocity= -10.52
ground.cornerpush.veloff =-12.74
getpower= 0
givepower=36,36
envshake.time=16
envshake.freq=120
envshake.ampl=4
fall=1
fall.recover=0
airguard.ctrltime= 16
airguard.velocity= -8, -1.5
forcestand=1
airground.cornerpush.veloff = 0

[State Idle]
type=statetypeset
trigger1= anim=1055 && animElemTime(29) >= 0 && AnimElemTime(36) < 0
movetype=I

;---------------------------------------------------------------------

;akuma chute
[Statedef 1250]
type = A     
movetype = A     
physics = N
anim = 1250  
juggle  = 4   
velset = 0,0
ctrl = 0
poweradd = 72
hitcountpersist=1


[State 1200, Position]
type = PosFreeze
trigger1 = AnimElemTime(2) < 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 3491



[State 1200, Velocity]
type = VelSet
trigger1 = AnimElem = 4
x = 9
y = 5.5

[State 1200, Velocity]
type = VelAdd
trigger1 = AnimElemTime(4) >= 0
y = .25

[State 1200, Position]
type = VelSet
trigger1 = Pos Y >= 0
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 0,23
channel = -1


[State 1220, HitDef]
type = HitDef
trigger1 = Time >= 4
attr = A, SA
animtype  = Heavy
air.animtype = up
damage  = ifelse((p2movetype=H),40,80),5
priority = 4,Hit
hitflag = MAF
guardflag = HA
pausetime = 11, 11
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = 8, -33
hitsound   = S1,13
guardsound = S1,15
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -10
air.velocity = -3,-5
air.fall = 1
air.recover = 0
persistent = 0
getpower=ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=35 , 35
envshake.time=12
envshake.freq=60
envshake.ampl=3


[State 1200, StateChange]
type = ChangeState
trigger1 = Pos Y >= 20 && Vel Y > 0
value = 52
ctrl = 1


;---------------------------------------------------------------------

;lye
[Statedef 1345]
type    = S                      
movetype= I                    
physics = S                    
juggle  = 5                  
velset = -8,0                     
ctrl = 0                        
anim = 1345                                       
sprpriority = 2                
poweradd = 72

[State 203, efeito]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1, 8
channel = 1


[State 0,]
type = ChangeState
triggerall = time >= 17
triggerall=var(12)<=0
trigger1= command = "fwd" 
value = 1346
ctrl = 1

[State 0,]
type = ChangeState
triggerall = time >= 20
triggerall=var(12)<=0
trigger1= command = "up"
value = 1347
ctrl = 1


[State 0,]
type = ChangeState
triggerall = time >= 17
triggerall=var(12)<=0
trigger1 = command = "back"
value = 1348
ctrl = 1

[State 1345, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------

[Statedef 1346]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = 20
anim = 1346
juggle = 2
velset = 0,0

[State 100, 1]
type = VelSet
trigger1 = AnimElem = 3
x = 7

[State 203, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 8
channel = 1

[State 203, voz]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 450
value = 0, ifelse (Random <= 550, 24, 25)
channel = 0

[State 1346, 2]
type = Hitdef
trigger1 = animelem = 4
attr = S, SA
hitflag = MAFD
guardflag = D
animtype = Heavy
air.animtype = diagup
fall.animtype = up
priority = 4,Hit
damage = 70
pausetime = 9, 9
guard.pausetime = 9, 7
sparkno = s2554+(random%4)
guard.sparkno = S8035
sparkxy = 1, -86
hitsound = S1, 12
guardsound = S1, 15
ground.type=High
ground.slidetime=1
ground.hittime=25
ground.velocity= 1
air.type=Low
air.velocity=-1
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36,36
envshake.time=9
envshake.freq=60
envshake.ampl=2

[State 1346,4]
type = ChangeState
trigger1 = command = "shoryu1" && movehit
value = 1010
ctrl = 1

[State 1346,4]
type = ChangeState
trigger1 = command = "tatsu1" && movehit
value = 1030
ctrl = 1


[State 1346,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------

[Statedef 1347]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = 72
anim = 1347
juggle = 2
velset = 0,0


[State 203, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 8
channel = 1


[State 203, voz]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 450
value = 0, ifelse (Random <= 550, 24, 25)
channel = 0

[State 1347, 2]
type = Hitdef
trigger1 = animelem = 2
attr = S, SA
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = diagup
fall.animtype = up
priority = 4,Hit
damage = 80, 15
pausetime = 13, 17
guard.pausetime = 9, 7
sparkno = s2554+(random%4)
guard.sparkno = S8035
sparkxy = 1, -86
hitsound = S1, 12
guardsound = S1, 15
ground.type=High
ground.slidetime=11
ground.hittime=14
ground.velocity= -1 ,-10.5
air.type=Low
air.velocity=-1,-9
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36 , 36
fall=1
envshake.time=12
envshake.freq=55
envshake.ampl=4



[State 1347,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------

[Statedef 1348]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = 72
anim = 1348
juggle = 2
velset = -15,0

[State 203, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 8
channel = 1

[State 203, voz]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 350
value = 0, ifelse (Random <= 550, 24, 25)
channel = 0


[State 1348,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------

[Statedef 1400]
type    = C
movetype= A
physics = C
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1400

[State 1200, ound]
type = PlaySnd
trigger1 = animelem = 6
value = 9,1
volume = 50

[State 235, sssa]
type = envshake
trigger1 = animelem = 6
time = 20
ampl = 7



[State 4200, Dust]
type=helper
trigger1= animelem = 6
helpertype=normal
stateno=4210
ID=4210
name="Purple Dust"
postype=p1
pos=-8,0
ownpal=1

[State 0, ]
type = HitDef
trigger1 = animelem = 7
attr = S, HA
animtype = up
damage  = ifelse((p2bodydist x < 70),80,40),0
priority = 4, hit
hitflag = MAFD
guardflag = MA
pausetime = 11,12
sparkno   = -1
guard.sparkno  = -1
sparkxy = -12,-90
hitsound = S1, 14
guardsound = S1, 1
ground.type = low
ground.slidetime = 12
ground.hittime = 16
ground.velocity = -.2,-6
air.velocity  = -.2,-6
fall  = 1
air.recover = 0
fall.recover = 0
getpower  = ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
fall.recover  = 0
givepower   = 35,35

[State Idle]
type=statetypeset
trigger1= animelemtime(9)>=0
movetype=I

[State 1100, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------

[Statedef 1402]
type    = S   
movetype= I     
physics = N     
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1402
poweradd = 40

[State 835, Pos]
type = PosSet
trigger1 = 1
y = 0

[State 1402, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------

[Statedef 1403]
type = A
movetype = I
Physics = N
anim = 1403
ctrl = 0
sprpriority = 2

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 1852, 6]
type = VelAdd
trigger1 = Time >= 0
y = .30

[State 1852, 6]
type = VelSet
trigger1 = Time = 0
x = 4.5
y = -6

[State 2001, 8]
type = Turn
trigger1 = AnimElem = 6
persistent = 0

[State 1852, 8]
type = ChangeState
trigger1 = command="air"&&Time >= 10
value = 1424

[State 1852, 8]
type = ChangeState
trigger1 = command="bison"&&Time >= 10
value = 3201


[State 1852, 8]
type = ChangeState
trigger1 = Time = 22
value = 1404


;---------------------------------------------------------------------

[Statedef 1404]
type = A
movetype = I
Physics = N
anim = 1404
ctrl = 1
sprpriority = 2

[State 810, Push]
type = PlayerPush
trigger1 =1
value = 0

[State 1404, 3]
type = VelAdd
trigger1 = Time >= 4
y = .3

[State 1404, 5]
type = VelSet
trigger1 = Pos Y >= 5
trigger1 = Vel Y > 0
y = 0

[State 1852, 8]
type = ChangeState
trigger1 = Pos Y >= 0
value = 1402

;---------------------------------------------------------------------


;ex jax
[Statedef 1405]
type    = C
movetype= A
physics = C
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1405
poweradd = -500

[State 1010, strengthvar]
type=varset
trigger1= var(8)!=4
var(8)=4

[State 1200, ound]
type = PlaySnd
trigger1 = animelem = 6
value = 9,1
volume = 50

[State 235, sssa]
type = envshake
trigger1 = animelem = 6
time = 23
ampl = 8

[State 4200, Dust]
type=helper
trigger1= animelem = 6
helpertype=normal
stateno=4210
ID=4210
name="Purple Dust"
postype=p1
pos=-8,0
ownpal=1


[State 0, ]
type = HitDef
trigger1 = animelem = 7
attr = S, HA
animtype = up
damage  = ifelse((p2bodydist x < 70),140,70),0
priority = 4, hit
hitflag = MAFD
;guardflag = MA
pausetime = 11,12
sparkno   = -1
guard.sparkno  = -1
sparkxy = -12,-90
hitsound = S1, 14
guardsound = S1, 1
ground.type = low
ground.slidetime = 12
ground.hittime = 16
ground.velocity = -.2,-8.5
air.velocity  = -.2,-8.8
fall  = 1
air.recover = 0
fall.recover = 0
getpower  = 0
fall.recover  = 0
givepower   = 35,35


[State Idle]
type=statetypeset
trigger1= animelemtime(9)>=0
movetype=I

[State 1100, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------


[Statedef 1410]
type    = A     
movetype= A     
physics = N     
juggle  = 1     
velset = 0,0
ctrl = 0
anim = 1410
poweradd= 72*!var(33)


[State 1410, 4]
type = ChangeState
trigger1 = Time = 10
value = 1411
ctrl = 1

;------------------------------------------------------------------------------------------

[Statedef 1411]
type    = A     
movetype= A     
physics = N     
juggle  = 1     
velset = 14,8
ctrl = 0
anim = 1401
poweradd = 72

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 0,23
channel = -1


[State 1411, 0]
type = HitDef
trigger1 = AnimElem = 1
attr = A, SA  
damage = 80,0
animtype = Medium
guardflag = HA
hitflag = MAFD
priority = 3, Hit
pausetime = 9,9
guard.sparkno = S8036
sparkno = s2554+(random%4)
sparkxy = -10,-13
hitsound = S1, 11
guardsound = S1, 15
ground.type = Low
ground.slidetime = 10
ground.hittime  = 24
guard.ctrltime = 31
ground.Velocity = -3
air.Velocity = -2,-1
down.Velocity = 0,0
getpower=ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=35 , 35

[State 1411, 2]
type = VelSet
trigger1 = Pos Y >= 0
x = 0

[State 1411, 8]
type = ChangeState
trigger1 = movecontact
value = 1403

[State 1411, 4]
type = ChangeState
trigger1 = Pos Y >= 5
trigger1 = Vel Y > 0
value = 1402
ctrl = 1


;---------------------------------------------------------------------

[Statedef 1451]
type    = A     
movetype= A     
physics = N     
juggle=ifelse((prevstateno=[1000,4999]),0,6)*!var(33)     
ctrl = 0
anim = 1451
poweradd= -1000
sprpriority = 2

[State 1015, flames]
type=helper
trigger1= movehit && numtarget && numhelper(7180)<1
trigger1= !(target,time) && (target,movetype=H)
helpertype=normal
stateno=7180
ID=7180
name="flames"
postype=p2
bindtime=1000
ownpal=1
facing=-1
size.ground.front=0
size.ground.back=0
ignorehitpause=1



[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 3491

[State 0, Helper]
type = Helper
triggerall = p2stateno = [5000,5999]
trigger1 = movehit && !numhelper(3502)
helpertype = normal 
name = "falling kick echo"
ID = 3502
stateno = 1453
pos = -60,-39
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, Explod] ; fogo no p
type = Explod
trigger1 = AnimElem = 2
anim = 1490
ID =  30520
pos = 5,-22
postype = p1  
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1.7,1.8
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 0



[State 0, PosFreeze]
type = PosFreeze
trigger1 = time = [1,45]
value = 1

[State 0, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,21
channel = 0


[State 0, VelSet]
type = VelSet
trigger1 = time > 45
x = 16.5
y = 14


[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1


[State 3000, strengthvar]
type=varset
trigger1= var(54)!=5
var(54)=5

[State 3000, superchargehelper]
type=helper
trigger1= animelem=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos = 27, -83
ownpal=1
persistent=0
supermovetime=9999

[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 45
movetime =  45
anim = -1
sound = -1
darken = 0
p2defmul = 1


[State 1400, 1]
type = HitDef
trigger1 != time
attr = S, NA
damage = ifelse((p2movetype=H ),60,80),20
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5,18
sparkno = s2558+(random%4)
guard.sparkno = s8036
sparkxy = -10, -10
hitsound= S1, 13
guardsound = s2,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = 0,-7
airguard.velocity = -1.9,-.8
air.type = High
persistent = 0
getpower=0
air.velocity = 0,-7
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .49
envshake.time=24
envshake.freq=60
envshake.ampl=6


[State 3500, end]
type = ChangeState
trigger1 = Pos Y >= 10 && Vel Y > 10
ctrl = 0
value = 1452


;---------------------------------------------------------------------

[Statedef 1452]
type = S
physics = N
ctrl = 0
sprpriority = 0
anim = 1453

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem=1
id = 30520

[State 1015, Dust]
type = Explod
trigger1 = Time = 0
Anim = 2714
pos = 67, 0
postype = p1
ontop = 0
scale = .5,.9
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 9


[State 3300, sts]
type=velmul
trigger1= anim=1453
x=.8

[State 7509, spin]
type=angleadd
trigger1= time = 41
value=-30

[State 7509, spin]
type=angleset
trigger1= anim = 1453
value=0

[State 7509, spin]
type=angledraw
trigger1= time > 40
scale=1,1


[State 0, PosSet]
type = PosSet
trigger1 = animelem = 1
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 != time
value = 0

[State 0, Playsound]
type = Playsnd
trigger1= !time
value = 9,2


[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0


[State 3502, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------

[StateDef 1453]
type = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1452
poweradd = 0
sprpriority = 2


[State 1005, trans]
type=trans
trigger1=1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 =time = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 999

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 1
time = 300
add = 0,-200,-200
mul = 256,256,256
sinadd = 40,80,40,10
invertall = 0
color = 0

[State 0, Helper]
type = Helper
trigger1 = movehit && !numhelper(3503)
helpertype = normal 
name = "falling kick echo"
ID = 3503
stateno = 1454
pos = -50,-32
postype = p1    
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove

[State 0, PosFreeze]
type = PosFreeze
trigger1 = time = [1,10]
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = time > 10
x = 13.5
y = 12

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 1400, 1]
type = HitDef
trigger1 != time
attr = S, NA
damage = ifelse((p2movetype=H ),50,60),20
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1,30
sparkno = s2558+(random%4)
guard.sparkno = s8036
sparkxy = -10, -10
hitsound= S1, 13
guardsound = s2,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = 0,-10
airguard.velocity = -1.9,-.8
getpower=0
air.type = High
persistent = 0
air.velocity = 0,-10
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .49
envshake.time=20
envshake.freq=40
envshake.ampl=6

[State 3500, end]
type = Destroyself
triggerall = movehit
triggerall = Pos Y >= 0 && Vel Y > 0
trigger1 = AnimElemTime(3) >= 2

[State 3000, end]
type = Destroyself
triggerall = Pos Y >= 0 && Vel Y > 0
trigger1 = AnimElemTime(3) >= 2

;---------------------------------------------------------------------

[StateDef 1454]
type = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1452
poweradd = 0
sprpriority = 2

[State 1005, trans]
type=trans
trigger1=1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 !=time
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 999

[State 0, PalFXWiz]
type = PalFX
trigger1 != time
time = 30
add = 0,-200,-200
mul = 256,256,256
sinadd = 40,80,40,10
invertall = 0
color = 0

[State 0, PosFreeze]
type = PosFreeze
trigger1 = time = [1,10]
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = time > 10
x = 13.5
y = 12

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 1400, 1]
type = HitDef
trigger1 != time
attr = S, NA
damage = ifelse((p2movetype=H ),40,50),10
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1,10
sparkno = s2558+(random%4)
guard.sparkno = s8036
sparkxy = -10, -10
hitsound= S1, 13
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = 0,-7
getpower=0
airguard.velocity = -1.9,-.8
air.type = High
persistent = 0
air.velocity = 0,-7
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .49
envshake.time=20
envshake.freq=40
envshake.ampl=6


[State 3500, end]
type = Destroyself
triggerall = movehit
triggerall = Pos Y >= 0 && Vel Y > 0
trigger1 = AnimElemTime(3) >= 2

[State 3000, end]
type = Destroyself
triggerall = Pos Y >= 0 && Vel Y > 0
trigger1 = AnimElemTime(3) >= 2


;---------------------------------------------------------------------


[Statedef 1515]
type = S
movetype= A
physics = N
ctrl = 0
anim = 3095
velset = 0,0

[State 1015, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1015, efeito]
type = PlaySnd
trigger1 = Time = 0
value = 1, 2
channel = 20

[State 1015, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 1015, Dust]
type = Explod
trigger1 = Time = 0
Anim = 8090
pos = 0, 0
postype = p1
ontop = 0
scale = 0.5, 0.5
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
ID = 8090

[State 1015, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------
; cotovelo ryu
[Statedef 1600]
type=S
movetype=A
physics=S
juggle=ifelse(numtarget,15,8)
anim=1630
velset=0,0
poweradd=18*!var(33)
sprpriority=1
ctrl=0
facep2=1


[State 214, Vel]
type=velset
trigger1= animelem=2
x=9

[State 214, Snd]
type=playsnd
trigger1= animelem=2
value = 1, 9

[State 200, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9, 4

[State 200, voz]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 400
value = 0, ifelse (Random <= 550, 23, 24)

[State 214, Dust]
type=explod
trigger1= animelemtime(2)>=0 && vel x>.5 && !(time%3)
anim=7103
ID=7103
sprpriority=3
postype=p1
pos=45,0
vel=-2,0
removetime=-2
ownpal=1
pausemovetime=-1
supermovetime=-1

[State 214, Hit]
type=hitdef
trigger1= (p2stateno!=[5020,5050]) 
trigger1= animelem=2
attr=S,NA
damage=20,0
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime= 8, 8
sparkno=s2550+(random%4)
guard.sparkno=S8035
sparkxy=-10,-49
hitsound=S1,13
guardsound=S1,15
ground.type=Low
ground.slidetime=18+4*var(17)
ground.hittime=18+4*var(17)
ground.velocity= -4.49, 0
ground.cornerpush.veloff = -12
air.type=Low
air.hittime=18
air.velocity= -5, -7
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0


[State 214, Hit]
type=hitdef
trigger1= (p2stateno!=[5020,5050])
trigger1= animelem=3
attr=S,NA
damage=50,0
animtype=Hard
air.animtype = Back
fall.animtype = Back
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime= 12, 12
sparkno=s2550+(random%4)
guard.sparkno=S8035
sparkxy=-10,-62
hitsound=S1,13
guardsound=S1,15
ground.type=Low
ground.slidetime=18+4*var(17)
ground.hittime=18+4*var(17)
ground.velocity=  -10.52, 0
ground.cornerpush.veloff = -16
air.type=Low
air.hittime=18
air.velocity= -5, -7
air.cornerpush.veloff = 0
getpower= ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower=36,36
yaccel=.5
fall.recover=0

[State Idle]
type=statetypeset
trigger1= animelemtime(4)>=0
movetype=I

[State 214, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1

;---------------------------------------------------------------------

;carregar
[StateDef 1700]
type = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1700
poweradd = 72
sprpriority = 2


[State 3040, shake]
type=envshake
triggerall= time>=70
trigger1= anim=1700 && animelemtime(2)>=0 && !(time%4)
time=3
freq=40
ampl=3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 12 || time = 59 || time = 105
value = 2,11
volume = 0
channel = 7
freqmul = 1.0
loop = 0
pan = 0
removeongethit = 1



[State 0, VarSet]
type = VarSet
trigger1 = command = "holdb"
v = 29
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = command != "holdb"
v = 29
value = 0

[State 0, Explod]
type = Explod
trigger1 = numexplod(1709) = 0
trigger1 = animelem=2
anim = 1709
ID = 1709
pos = -10,-20
postype = p1  
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
persistent = 0





[State 1000, 1]
type = ChangeState
triggerall = var(29) = 0
triggerall = anim = 1700 
trigger1 = Time >= 8 
trigger1 = var(12)<=0
value = 1704


[State 1000, 2]
type = ChangeState
triggerall = var(29) = 0
triggerall = anim = 1700 
trigger1 = Time >= 8 
trigger1 = var(12)>=1
trigger1 = !enemynear,movetype=I
trigger1 = enemynear, stateno!=[120,155]
value = 1704


[State 1000, 2]
type = ChangeState
triggerall = anim = 1700
trigger1 = Time = 105

trigger2 = var(12)<=0
trigger2 = command= "FF"

trigger3 = var(12)>=1
trigger3 = time = [22,80]
trigger3 = random<14
value = 1701

;---------------------------------------------------------------------

[StateDef 1701]
type = S
movetype= A
physics = S
juggle  = 3
velset = 0,0
ctrl = 0
anim = 1701
poweradd = 0
sprpriority = 2

[State 900, lightning]
type = Explod
trigger1 = !time
anim = 2711
id = 2711
postype = p1
pos = 30, 0
bindtime = 1
sprpriority = 1
removeongethit = 1
removetime = 23
ownpal = 1
ontop = 0
scale = 1,1
pausetime = 200
supermovetime = 200

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S3,6

[State 9741, armourvar]
type=varset
trigger1= !time
var(39)=1


[State 2400, Blink]
type = PalFX
trigger1 = Time % 3 = 0
time = 2
add = 100,100,30
sinadd = 45, 45, 11, 4

[State 3000, dust]
type=explod
trigger1=animelem=2
vel=0,0
anim=2710
ID=2710
sprpriority=3
postype=p1
pos=40,0
ownpal=1
scale=.65,.65




[State 100, 5]
type = Explod
trigger1 = (time%4) = 1
ID = 2221
anim = 2221
postype = p1
facing = 1
vfacing = 1
pos = 3,-40
bindtime = 1
removetime = 6
ontop = 1
vel = 0,0
ownpal = 1
random = 12,57
sprpriority = 3
scale = .36,.14
removeongethit = 1
ignorehitpause = 1
persistent = 1

[State 100, 6]
type = Explod
trigger1 = (time%4) = 1
ID = 2221
anim = 2221
postype = p1
facing = 1
vfacing = 1
pos = 2,-60
bindtime = 1
removetime = 6
ontop = 1
ownpal = 1
random = 22, 66
sprpriority = 3
scale = .32,.12
removeongethit = 1
ignorehitpause = 1
persistent = 1



[State 200, voz]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9,14
channel = 0



[State 0, VelSet]
type = Velset
trigger1 = time>0
x = 7.5
y = 0

[State 3020, C]
type = VelMul
trigger1 = time=[0,4]
x = .3

[State 0, ChangeState]
type = ChangeState
triggerall = time>3
trigger1 = p2bodydist x < 80
value = 1702
ctrl = 0

[State 3900, end]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = frontedgedist <= 0
value = 0
ctrl = 1

;---------------------------------------------------------------------

[StateDef 1702]
type = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1702
poweradd = 0
sprpriority = 3


[State 9741, armourvar]
type=varset
trigger1= !time
var(39)=1


[State 1015, flames]
type=helper
trigger1= movehit && numtarget && numhelper(7180)<1
trigger1= !(target,time) && (target,movetype=H)
helpertype=normal
stateno=7180
ID=7180
name="flames"
postype=p2
bindtime=1000
ownpal=1
facing=-1
size.ground.front=0
size.ground.back=0
ignorehitpause=1


[State 214, Dust]
type=explod
trigger1= animelemtime(1)>=0 && vel x>.5 && !(time%3)
anim=7103
ID=7103
sprpriority=3
postype=p1
pos=0,0
vel=-2,0
removetime=-2
ownpal=1
pausemovetime=-1
supermovetime=-1



[State -2, X]
type = Width
trigger1 = 1
player = 2,30

[State 0, Explod]
type = Explod
trigger1 = AnimElem=7
anim = 1705
ID = 3991
pos = 64,-76
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = .4,.4
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 1



[State 7240, remove]
type=removeexplod
trigger1=animelem=14
id=3991

[State 3020, u]
type = velset
trigger1 = time<34
x = 5.5



[State 3020, C]
type = VelMul
trigger1 = 1
x = .3

[State 3020, x]
type = VelSet
trigger1 = AnimElem=7
x = 0


[State 3020, K[hx]
type = VelAdd
triggerall = AnimElem = 8
trigger1 = moveGuarded
x = -3

[State 3020, qbg|[Y]
type = Pause
triggerall = AnimElemTime(14) >= 0
trigger1 = movehit
time = 30
persistent = 0

[State 3020, qbg`];
type = HitDef
trigger1 = AnimElem = 7 
attr = S, HA
animtype  = hard
damage    = 0,20;
priority  = 4,hit
hitflag = MAFD
guardflag = MA
pausetime = 1,25
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = -10,-57
hitsound   = S5,17
guardsound = S1,15
ground.type = Low
ground.slidetime = 14
ground.hittime  = 15
ground.velocity = -1,-2
air.velocity = -1,-2
guard.velocity = -6
airguard.velocity = -6, -2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2facing = 1
hitonce = 0
kill = 0
guard.kill = 1
numhits = 0
getpower = ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)



[State 3020, qbg`];
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
animtype  = diagup
damage    = 200, 70
priority  = 5
hitflag = MAFD
guardflag = MA
pausetime = 15,5
guard.pausetime = 4, 5
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = floor(-70+P2Dist X),-54;
hitsound   = S5,17
guardsound = S1,15
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.slidetime = 20
guard.hittime = 20
ground.velocity = -40,-14
air.velocity = -40,-14;
guard.velocity = -10
airguard.velocity = -10, -4.5
ground.cornerpush.veloff = -30
air.cornerpush.veloff = -30
down.cornerpush.veloff = -30
guard.cornerpush.veloff = -30
airguard.cornerpush.veloff = -30
fall = 1
fall.recover = 0
fall.recovertime = 99999
down.bounce = 1
hitonce = 0
p2facing = 1
ID = 3022
kill = 0
getpower = ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower = 36,36
ignorehitpause = 0



[State 3020, h]
type = EnvShake
trigger1 = AnimElem = 7
time = 8
ampl = 60
freq = 170
phase = 0

[State 3020, U]
type = EnvShake
triggerall = AnimElem = 8
trigger1 = movehit
time = 20
ampl = 40
freq = 140
ignorehitpause = 1
persistent = 0



[State 2400, 0]
type = TargetState
trigger1 = numtarget(3022) && movehit && p2movetype = H
value = 3022
ignorehitpause = 0
persistent = 0

[State -2,PlayerPush]
type = PlayerPush
trigger1 = Movehit
trigger1 = NumTarget(3022)
value = 0
ignorehitpause = 1

[State Idle]
type=statetypeset
triggerall=anim=1702
trigger1= animelemtime(9)>=0
movetype=I

[State 3900, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------

; golpe do joelho

[Statedef 1704]
type    = S
movetype= A
physics = S
juggle  = 15
poweradd= 72*!var(33)
velset = 0,0
anim = 1703
ctrl = 0
sprpriority = 2

[State 405, UCantHitMe]
type = NotHitBy
trigger1 = stateno = 1704
value = SCA

[State 200, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 7




[State 3000, dust]
type=explod
trigger1= pos y =0
trigger1=animelem=1
vel=0,0
anim=2710
ID=2710
sprpriority=3
postype=p1
pos=40,0
ownpal=1
scale=.3,.3


[State 1200, 5]
type = ChangeState
trigger1 = time = 6
value = 1705

;---------------------------------------------------------------------------

[Statedef 1705]
type    = A
movetype= A
physics = N
velset =0
anim = 1704
juggle=ifelse((p2movetype=H&&p2statetype=A),7,8)
poweradd=72*!var(33)


[State 0, velset]
type = velset
trigger1 = time = 0
x=11
y=-11.8


[State 1050, 4]
type = HitDef
trigger1 = time = 1 || time = 3  || time = 7 || time = 15 
attr = A, SA
animtype  = heavy
damage    = 30, 7
priority  = 5,hit
hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkno = s2554+(random%4)
guard.sparkno = S8035
sparkxy = -7, -64
hitsound = S1, 12
guardsound = S1, 15
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -9,-4
guard.velocity = -9
air.velocity = -3,-7
envshake.time = 5
envshake.ampl = 5
ground.cornerpush.veloff = -25
air.cornerpush.veloff = -25
getpower = ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36 , 36


[State 330, 4]
type = VelMul
trigger1 = Time >= 5
x = .9

[State 330, 5]
type = VelAdd
trigger1 = 1
y = .6


[State 0,]
type = ChangeState
triggerall=var(12)<=0
triggerall=stateno=1705&&animelemtime(3)>=0
trigger1 = command = "bite3" || command = "bite2"
value = 39998


[State 5040, 6]
type = ChangeState
triggerall = command="holddown" && command="a"
trigger1 = time>=17
value = 1033

[State Idle]
type=statetypeset
triggerall=anim=1704
trigger1= animelemtime(3)>=0
movetype=I

[State 1051, 3]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1706

;---------------------------------------------------------------------------

[Statedef 1706]
type    = S
movetype= I
physics = S
anim = 10
sprpriority = 1
velset = 0,0

[State 1706, 1] 
type = PosSet
trigger1 = Time = 0
y = 0

[State 1706, 2] 
type = PlaySnd
trigger1 = Time = 0
value = 40, 0

[State 1052, 3]
type = CtrlSet
trigger1 = AnimElem = 1, -1
value = 1

[State 1052, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------



;[Statedef 1707]
;type=S
;anim=9741
;velset=0,0
;ctrl=0

;[State 7243, Bind]
;type=bindtoroot
;trigger1= !(time%4)
;pos=ceil(-90+(random/6.25)),ceil(20-(random/6.25))

;[State 7243, Particle]
;type=explod
;trigger1= (time%4)=1
;anim=8783
;;sprpriority=ifelse(random<750,5,-1)
;postype=p1
;vel=((rootdist x-10)/16.0),((rootdist y-60)/16.0)
;scale=ifelse(random<500,1,-1),ifelse(random<500,1,-1)
;removetime=16
;pausemovetime=-1
;supermovetime=-1
;ownpal=1

;[State 7243, End]
;type=removeexplod
;trigger1= (root,stateno!=820) || (root,anim!=820) || (root,movetype=H)
;[State 7243, End]
;type=destroyself
;trigger1= (root,stateno!=820) || (root,anim!=820) || (root,movetype=H)

;---------------------------------------------------------------------

[Statedef 1731];ai cancel
type    = S
physics = S
movetype= I
anim = 1731
ctrl = 0
velset = 0,0
sprpriority = 0
poweradd= ifelse((prevstateno = [200,2999]),-300,18*!var(33))

[State 5201, flash]
type=palfx
trigger1= stateno=1731
trigger1= (gametime%4) = 1
mul= 256, 250, 0
add= 150,150,150
time=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S9,5
volume = -50
channel = 7
freqmul = 2.0

[State 1052, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1732
ctrl = 0



[Statedef 1732];ai cancel
type    = S
physics = S
movetype= I
anim = 101
ctrl = 0
velset = 0,0
sprpriority = 0
poweradd=0


[State 102, Vel]
type=velset
trigger1= animelem=2
x= -1.53 * const(velocity.run.back.x)
y= const(velocity.run.back.y)


[State 102, Vel]
type=velset
trigger1= animelem=3
x= ifelse( power>=1500, -1.6, ifelse (power>=1000 && power<1500, -.3, -1.7))* const(velocity.run.back.x)


[State 1052, 5]
type = ChangeState
trigger1= AnimTime = 0
value =ifelse( power>=1500, 3055, ifelse (power>=1000 && power<1500, 3013, 1331))
ctrl = 0



[Statedef 1733];ai cancel enemy tras
type    = S
physics = S
movetype= I
anim = 1733
ctrl = 0
velset = 0,0
sprpriority = 0
poweradd= -300

[State 5201, flash]
type=palfx
trigger1= stateno=1733
trigger1= (gametime%4) = 1
mul= 256, 250, 0
add= 150,150,150
time=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S9,5
volume = -50
channel = 7
freqmul = 2.0

[State 1052, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1734
ctrl = 0



[Statedef 1734];ai cancel
type    = S
physics = S
movetype= I
anim = 1732
ctrl = 0
velset = 0,0
sprpriority = 0
poweradd=0


[State 100, 1]
type = VelSet
trigger1 = AnimElemTime(1) >= 0
x = 6

[State 1052, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 100
ctrl = 0






[Statedef 1735];ai cancel tras
type    = S
physics = S
movetype= I
anim = 1733
ctrl = 0
velset = 0,0
sprpriority = 0
poweradd= -300

[State 5201, flash]
type=palfx
trigger1= stateno=1735
trigger1= (gametime%4) = 1
mul= 256, 250, 0
add= 150,150,150
time=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S9,5
volume = -50
channel = 7
freqmul = 2.0

[State 1052, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 105
ctrl = 0



[Statedef 2000]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 50
ctrl = 0
sprpriority = 2

[State 2000, AfterImage]
type = AfterImage
trigger1 = Time= 0
time = 15
trans = add1
palbright = 0,0,0
palcontrast = 128,128,128
PalAdd=0,0,0
PalMul=1,1,1
length = 20
timegap = 1


[State 100, 5]
type = Explod
trigger1 = (time%4) = 1
ID = 2221
anim = 2221
postype = p1
facing = 1
vfacing = 1
pos = 3,-40
bindtime = 1
removetime = 6
ontop = 1
vel = 0,0
ownpal = 1
random = 12,57
sprpriority = 3
scale = .36,.14
removeongethit = 1
ignorehitpause = 1
persistent = 1

[State 100, 6]
type = Explod
trigger1 = (time%4) = 1
ID = 2221
anim = 2221
postype = p1
facing = 1
vfacing = 1
pos = 2,-60
bindtime = 1
removetime = 6
ontop = 1
ownpal = 1
random = 22, 66
sprpriority = 3
scale = .32,.12
removeongethit = 1
ignorehitpause = 1
persistent = 1


[State 2000, 5]
type = AfterImageTime
trigger1 = Time >= 0
time = 15

[State 920, 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,0

[State 0, ]
type                = PlaySnd
trigger1            = Time = 0
value               = 2, 9
channel             = -1
persistent          = 0

[State 105, 1]
type = VelSet
trigger1 = time >= 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)


[State 404, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


[State 2000, 8]
type = ChangeState
trigger1 = BackEdgeDist <= 10
value = 2001
ctrl = 1
;------------------------------------------------------------------------------------------

[Statedef 2001]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
ctrl = 0
sprpriority = 2
anim = 57

[State 2001, 5]
type = turn
trigger1 = 1
persistent = 0

[State 2001, 5]
type = VelSet
trigger1 = 1
x = -1

[State 2001, 5]
type = PosAdd
trigger1 = time = 0
x = (P2Dist X) - 400

[State 2001, 5]
type = Changestate
trigger1=var(12)<=0
trigger1 = command = "c"
value = 1200

[State 2001, 5]
type = Changestate
trigger1 = command != "x+z"
trigger1=var(12)<=0
trigger1 = command = "z"
value = 1210


[State 2001, 5]
type = Changestate
trigger1=var(12)<=0
trigger1= power>=500
trigger1 = command = "x+z"
value = 1211

[State 3005,hitby]
type = nothitby
trigger1= stateno=2001
time = 1
value = SCA,NP,SP
ignorehitpause  = 1


[State 2001, 8]
type = ChangeState
trigger1 = animelem=4
value = 0
ctrl = 1


;------------------------------------------------------------------------------------------

[Statedef 2002]
type  = S
movetype = I
physics= N
juggle = 4
poweradd= -300
ctrl = 0
facep2 = 1
velset= 0,0
anim = 2000
sprpriority = -1



[State 3875, Slow Motion]
type = Pause
triggerall = (GameTime%1) = 0
trigger1 = time = [1,38]
time = 10
movetime = 5
pausebg = 1
endcmdbuftime=10



[State 0, ]
type = PlayerPush
trigger1 = animelem = 5
value = 0

[State 0: ]
Type = VelSet
Trigger1 = AnimElem = 5
X = 7

[State 0, ]
type = Turn
trigger1 = p2dist x <= 0
persistent = 0

[State 0, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 99999
TimeGap = 1
FrameGap = 6
length  = 20
PalBright= 1,1,1
PalContrast = 100, 100, 100
PalAdd = 0,0,0
PalMul  = 1,1,1
trans   = add1
ignorehitpause = 1

[State 0, AfterImage]
type = AfterImageTime
trigger1 = animelem = 5, 35
time = 2

[State 0, ]
type  = PlaySnd
trigger1  = animelem = 5
value     = 2, 8
channel = -1



[State 0, ]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl= 1


;------------------------------------------------------------------------------------------



[Statedef 2003]
type  = S
movetype = I
physics= N
juggle = 4
poweradd= 0
ctrl = 0
facep2 = 1
velset= 0,0
anim = 2000
sprpriority = -1



[State 0, ]
type = PlayerPush
trigger1 = animelem = 5
value = 0

[State 0: ]
Type = VelSet
Trigger1 = AnimElem = 5
X = -7

[State 0, ]
type = Turn
trigger1 = p2dist x <= 0
persistent = 0

[State 0, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 99999
TimeGap = 1
FrameGap = 6
length  = 20
PalBright= 1,1,1
PalContrast = 100, 100, 100
PalAdd = 0,0,0
PalMul  = 1,1,1
trans   = add1
ignorehitpause = 1

[State 0, AfterImage]
type = AfterImageTime
trigger1 = animelem = 5, 35
time = 2

[State 0, ]
type  = PlaySnd
trigger1  = animelem = 5
value     = 2, 8
channel = -1



[State 0, ]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl= 1

;------------------------------------------------------------------------------------------


;alpha counter
[Statedef 2010]
type=S
physics=S
movetype=I
poweradd= ifelse (var(12),  0,-500)
ctrl=0
velset=0,0
juggle=0
anim = 2010
sprpriority = 2
facep2=1


[State 750, strengthvar]
type=varset
trigger1= !time && var(12)<=0
var(5)=ifelse (Command = "alphacabe", 0, ifelse (Command = "alphabanda", 1, ifelse (Command = "alphashoryu", 2,1)))
ignorehitpause=1

[State 750, strengthvarAI]
type=varset
trigger1= !time && var(12)>=1
var(5)=ifelse((p2statetype=A),2,ifelse((p2statetype=C),1,ifelse(random<100,0,2)))
ignorehitpause=1


[State 750, superpause]
type=superpause
trigger1= !time
time=20
movetime=20
anim=-1
p2defmul=1
darken=0


[State 750, Super Pause FX]
type=helper
trigger1= !time
helpertype=normal
stateno=7250
ID=7250
postype=p1
pos=16,-79
ownpal=1
persistent=0
supermovetime=999

[State 1100, efeito]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,23


[State 750, End]
type=changestate
trigger1= time>=20
value=ifelse(var(5)=0,2011,ifelse(var(5)=1,405,1010))


;------------------------------------------------------------------------------------------


[Statedef 2011]
type=S
physics=S
movetype=A
poweradd= 0
ctrl=0
juggle=0
anim = 2011
sprpriority = 5

[State 0, VelAdd]
type = Velset
trigger1 = animelem = 2
x = 5

[State 1300, hit]
type=hitdef
trigger1=AnimELem = 3
attr=S,SA 
damage=85,20
animtype=Hard
air.animtype=Hard
fall.animtype=Hard
guardflag=MA
hitflag=MAF 
priority=4,Hit 
pausetime=12,12
sparkno = s2554+(random%4)
guard.sparkno = S8035
sparkxy = -18, -65
hitsound = S1, 14
guardsound = S1, 1
ground.type=Low
ground.slidetime=16
ground.hittime=16
ground.velocity=-7,-6
air.type=Low
air.velocity=-7,-5
air.cornerpush.veloff=0
getpower=0
envshake.time=16
envshake.freq=60
envshake.ampl=6
fall=1
fall.recovertime = 32
;fall.recover=0
yaccel=.5

[State 1300, end]
type=changestate
trigger1=!animtime
value=0
ctrl=1

;----------------------------------------------------------------------

[Statedef 7250]
physics=N
velset=0,0
anim=9741

[State 7250, BG PalFX]
type=bgpalfx
trigger1= !time
time=20
add=-255,-128,-64
sinadd=255,128,64,80
persistent=0

[State 7250, palfx]
type=palfx
trigger1= !time
time=20
sinadd=-255,-255,-255,80

[State 7250, Dust]
type=explod
trigger1= !time
anim=7104
ID=7104
sprpriority=-2
postype=p1
pos=0,-ceil(pos y)
supermovetime=30
ownpal=1

[State 7250, thunder]
type=explod
trigger1= !time
anim=2711
ID=7250
sprpriority=-2
postype=p1
pos=0,-ceil(pos y)
removetime=-2
supermovetime=30
ownpal=1

[State 7250, Circle]
type=explod
trigger1= !time
anim=7251
ID=7251
sprpriority=3
postype=p1
removetime=20
supermovetime=30

[State 7250, Shrink]
type=modifyexplod
trigger1= numexplod(7251)
ID=7251
scale=.2+(.09*time),.2+(.09*time)

[State 7250, No Shadow]
type=assertspecial
trigger1= 1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State 7250, End]
type=destroyself
trigger1= time>=20

;--------------------------------------------------------------------

; exploso gethit
[Statedef 2220]
type    = S
movetype= A
physics = S
poweradd= -1000
ctrl = 0
anim = 2220
facep2 = 1
sprpriority = 2
velset = 0,0

[State 720, wp[o]
type = Helper
triggerall = (NumHelper(2223) = 0)
trigger1 = Time = 1
name = "Impact-Aura"
stateno = 2223
ID = 2223
pos = 0,0
keyctrl = 0
postype = p1
;supermovetime = 99999999
;pausemovetime = 99999999
ownpal = 1
size.xscale = 0.375
size.yscale = 0.375
IgnoreHitPause = 1
Persistent = 0

[State 720, ]
type = AssertSpecial
trigger1 = 1
flag = GlobalNoShadow
flag2= NoBG
flag3= NoFG
IgnoreHitPause = 1
Persistent = 1


[State 0]
type = PlaySnd
trigger1 = time = 11
value = s3,2
volume = 90

[State 0]
type = PlaySnd
trigger1 = time = 8
value = s3,5


[State 0]
type = EnvShake
trigger1 = time = 9
ampl = 4
time = 12

[State 2220, Unblockable]
type = AssertSpecial
trigger1 = stateno=2220
flag = UnGuardable


[State 2200, 1]
type = Projectile
trigger1 = Time = 9
projanim = 6011
projremovetime = 15
projpriority = 7
projsprpriority = 3
attr = S, SA
animtype = high
damage = 0
guardflag = M-
pausetime = 0,4
sparkno = -1
sparkxy = -11,-85
hitsound = S1, 13
guardsound = S1, 15
ground.type = high
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -11,-7
air.velocity = -11,-5.5
guard.velocity = -22
fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 100,100,100
getpower = 0


[State 2200, 2]
type = ChangeState
trigger1 = AnimTime=0
value = 0
ctrl = 1

;---------------------------------------------------------------------

; anticombo (ar)
[Statedef 2221]
type    = A
movetype= A
physics = A
poweradd= -1000
anim = 2222
facep2 = 1
ctrl = 0
sprpriority = 2


[State 720, wp[o]
type = Helper
triggerall = (NumHelper(2223) = 0)
trigger1 = Time = 1
name = "Impact-Aura"
stateno = 2223
ID = 2223
pos = 0,0
keyctrl = 0
postype = p1
;supermovetime = 99999999
;pausemovetime = 99999999
ownpal = 1
size.xscale = 0.375
size.yscale = 0.375
IgnoreHitPause = 1
Persistent = 0




[State 0]
type = VelSet
trigger1 = Time < 40
x = 0
y = 0

[State 0]
type = VelSet
trigger1 = Time = [14,20]
y = -4

[State 803, Vel]
type = Gravity
trigger1 = animelem=10


[State 0]
type = PlaySnd
trigger1 = time = 11
value = s3,2

[State 0]
type = PlaySnd
trigger1 = time = 8
value = s3,5


[State 0]
type = EnvShake
trigger1 = time = 9
ampl = 4
time = 12

[State 2221, Unblockable]
type = AssertSpecial
trigger1 = stateno=2221
flag = UnGuardable

[State 2200, 1]
type = Projectile
trigger1 = Time = 9
projanim = 6011
projremovetime = 15
projpriority = 3
projsprpriority = 3
attr = A, SA
animtype = high
damage = 0
guardflag = M-
pausetime = 0,4
sparkno = -1
sparkxy = -11,-85
hitsound = S1, 13
guardsound = S1, 15
ground.type = high
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -11,-6
air.velocity = -11,-5.5
guard.velocity = -22
fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 100,100,100
getpower = 0

[State 720, ]
type = AssertSpecial
trigger1 = 1
flag = GlobalNoShadow
flag2= NoBG
flag3= NoFG
IgnoreHitPause = 1
Persistent = 1]

[State 0, 2]
type = ChangeState
trigger1 = pos y= 0
ctrl = 1
value =52 

;---------------------------------------------------------------------


[Statedef 2223]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 2235
velset   = 0,0
sprpriority = 4

[State 2250, ];g
type = VarSet
trigger1 = Time = 0
trigger2 = (Time > 29)
fv = 0
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 2250, ]
type = VarAdd
trigger1 = Time = [0,29]
fv = 0
value = 0.01
IgnoreHitPause = 1
Persistent = 1

[State 2250, ];tF[hAEg
type = VarSet
trigger1 = Time = 0
trigger2 = (Time > 29)
v = 0
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 2250, ]
type = VarAdd
trigger1 = Time = [20,29]
v = 0
value = 1
IgnoreHitPause = 1
Persistent = 1

;+++++++++++++++++++++++++++++++++++++
[State 2250, {tu]
type = BindToRoot
trigger1 = 1
pos = 0,0
IgnoreHitPause = 1
Persistent = 1

;+++++++++++++++++++++++++++++++++++++
[State 2250, G]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2


[State 2250, ]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
IgnoreHitPause = 1
Persistent = 1

[State 2250, ]
type = PlayerPush
trigger1 = 1
value = 0
IgnoreHitPause = 1
Persistent = 1

;+++++++++++++++++++++++++++++++++++++
[State 2250, pxL]
type = AngleDraw
trigger1 = Time = [0,29]
scale = 1+(fvar(0)*1.05),1+(fvar(0)*1.05)

[State 2250, ]
type = Trans
trigger1 = Time = [0,29]
Trans = AddAlpha
Alpha = ceil(256-(var(0)*25)),256
IgnoreHitPause = 1
Persistent = 1

;+++++++++++++++++++++++++++++++++++++ S
[State 2250, GtFNg]
type = Explod
trigger1 = Time = [0,29]
anim = 4027
postype = p1
pos = 0,-60
sprpriority = -1
ownpal = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
ID = 4027

[State 2250, GtFNg]
type = ModifyExplod
trigger1 = Time = [0,29]
scale = 1-(fvar(0)*1.375),1-(fvar(0)*1.375)
supermovetime = 99999999
pausemovetime = 99999999
Trans = AddAlpha
Alpha = ceil(256-(var(0)*24)),256
ID = 4027

[State 2250, GtFNg]
type = RemoveExplod
trigger1 = (Time > 29)
ID = 4027

;+++++++++++++++++++++++++++++++++++++ O
[State 2250, GtFNg]
type = Explod
trigger1 = Time = [0,29]
anim = 4028
postype = p1
pos = 0,-60
sprpriority = 5
ownpal = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
ID = 4028

[State 2250, GtFNg]
type = Explod
trigger1 = Time = [0,29]
anim = 4029
postype = p1
pos = 0,-60
sprpriority = -3
ownpal = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
ID = 4028

[State 2250, GtFNg]
type = ModifyExplod
trigger1 = Time = [0,29]
scale = 0.2+(fvar(0)*2.25),0.2+(fvar(0)*1.25)
supermovetime = 99999999
pausemovetime = 99999999
Trans = AddAlpha
Alpha = ceil(256-(var(0)*24)),256
ID = 4028

[State 2250, GtFNg]
type = RemoveExplod
trigger1 = (Time > 29)
ID = 4028


[State 2250, gh]
type = DestroySelf
trigger1 = (Time > 29)

;---------------------------------------------------------------------

[Statedef 2700]
type = S
movetype = A
physics = S
juggle = 2
poweradd = -500
ctrl = 0
velset = 0, 0
anim = 310

[State 1010, strengthvar]
type=varset
trigger1= var(8)!=4
var(8)=4

[State 200, voz]
type = PlaySnd
trigger1 = AnimElem = 3 
value = 5, 8
channel = 0

[State 3000, efeito]
type = PlaySnd
trigger1 = animelem = 2
value = 1,8

[State 3000, efeito]
type = PlaySnd
trigger1 = animelem = 1
value = 1,19
volume = 10


[State 0, Explod]
type = Explod
trigger1 = time=25
anim = 4152
ID = 4152
pos = 0,40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 2,.8
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 0
;persistent =

[State 7260, shrinkcircle]
type=modifyexplod
trigger1= animelem=9
ID=4152
scale=1.8-(.2*time),.8-(.2*time)

[State 2200, PlaySnd]
type = PlaySnd
trigger1 = time=25
value = 5,7


[State 7260, bgpalfx]
type=bgpalfx
trigger1= !time
time=40
add=-255,-255,-128
sinadd=255,255,128,120


[State 2700, Shadows]
type = AfterImage
trigger1 = AnimElem = 1, 1
time = 2
trans = add1

[State 2700, ShadowTime]
type = AfterImageTime
trigger1 = AnimElemTime(1) >= 1 && Time < 50
time = 2

[State 2700, Unblockable]
type = AssertSpecial
trigger1 = AnimElem = 7
flag = UnGuardable

[State 700, Velocity]
type = PosAdd
trigger1 = AnimElem = 1
x = 3.8


[State 2700, Hit]
type = HitDef
trigger1 = AnimElem = 8
ID = 1
attr = S, SA
damage = 80, 0
animtype = Heavy
hitflag = MAFD
getpower = 0
givepower = 35 ,35
priority = 2, Hit
pausetime = 14,14
sparkno = s2554+(random%4)
guard.sparkno = S8035
sparkxy = -32, -101
hitsound = S1, 12
guardsound = S1, 15
ground.type = Low
ground.hittime = 12
ground.velocity = -1
air.velocity = -3, 28
air.type = High
air.hittime = 12
air.fall = 1
envshake.time = 16
p2stateno = 7696


[State 2700, Change]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------


[Statedef 7696]
type=U
physics=N
movetype=H
ctrl=0
velset=0,0

[State 7696, sts]
type=statetypeset
trigger1= !time
trigger1= pos y<0
statetype=A

[State 7696, sts]
type=statetypeset
trigger1= !time
trigger1= pos y>=0
statetype=S

[State 7696, pos]
type=posset
trigger1= pos y>=0
y=0

[State 7696, var]
type=varset
trigger1= !time
trigger1= gethitvar(hitcount)<=2
sysfvar(4)=0
ignorehitpause=1

[State 7696, var]
type=varadd
trigger1= !time
sysfvar(4)=45
ignorehitpause=1


[State 7696, anim]
type=changeanim
trigger1= !time
value=ifelse(statetype!=A,5002,5030)

[State 7696, end]
type=changestate
trigger1= alive && hitshakeover
value=ifelse(statetype=A,1115020,5300)

[State 7696, end]
type=selfstate
trigger1= !alive && hitshakeover
value=5030


;---------------------------------------------------------------------

[Statedef 1115020]
type=A
movetype=H
physics=N
velset=0,0

[State 1115020, anim]
type=changeanim
trigger1= 1
value=5030

[State 1115020, end]
type=changestate
trigger1= hitshakeover
value=1115030

[Statedef 1115030]
type=A
movetype=H
physics=N
ctrl=0

[State 1115030, grav]
type=veladd
trigger1= 1
y=gethitvar(yaccel)

[State 1115030, vel]
type=hitvelset
trigger1= !time
x=1
y=1

[State 1115030, end]
type=changestate
trigger1= hitover
trigger2= vel y>0 && pos y>=10
value=1115050

[State 1115030, end]
type=changestate
trigger1= !animtime
value=1115035

[Statedef 1115035]
type=A
movetype=H
physics=N

[State 1115035, anim]
type=changeanim
trigger1= !time && selfanimexist(5035)
value=5035

[State 1115035, grav]
type=veladd
trigger1= 1
y=gethitvar(yaccel)

[State 1115035, end]
type=changestate
trigger1= hitover
trigger2= !animtime
trigger3= vel y>0 && pos y>=10
trigger4= !time && anim!=5035
value=1115050

[Statedef 1115050]
type=A
movetype=H
physics=N

[State 1115050, anim]
type=changeanim
trigger1= anim=5035 && !animtime
trigger2= anim!=5035 && !time
value=5050

[State 1115050, anim]
type=changeanim
trigger1= anim=[5050,5059]
trigger1= vel y>=ifelse(anim=5050,1,-2)
trigger1= selfanimexist(anim+10)
value=anim+10
persistent=0

[State 1115050, grav]
type=veladd
trigger1= 1
y=gethitvar(yaccel)

[State 1115050, end]
type=changestate
trigger1= vel y>0
trigger1= pos y>=ifelse((anim=[5051,5059]) || (anim=[5061,5069]),0,25)
value=1115100

[Statedef 1115100]
type=L
movetype=H
physics=N

[State 1115100,1]
type=velset
trigger1= !time && gethitvar(fall.yvel)=0 && vel x>1
x=1

[State 1115100, shake]
type=fallenvshake
trigger1= !time

[State 1123, 6]
type = EnvShake
trigger1 = !time
time = 10
ampl = 5


[State 1115100, var]
type=varset
trigger1= !time
sysvar(1)=floor(vel y)



[State 1115100, anim]
type=ChangeAnim
trigger1= !time
value=5100

[State 1115100, pos]
type=posset
trigger1= !time
y=0

[State 1115100, vel]
type=velset
trigger1= !time
y=0

[State 1115100, vel]
type=velmul
trigger1= !time
x=0.75

[State 1115100, end]
type=changestate
trigger1= !time
trigger1= gethitvar(fall.yvel)=0
value=1115110

[State 1115100, fx]
type=gamemakeanim
trigger1= time=1
value=60+(sysvar(1)>5)+(sysvar(1)>14)
pos=0,0
under=sysvar(1)<=14

[State 1115100, hurt]
type=hitfalldamage
trigger1= time=3

[State 1115100, snd]
type=playsnd
trigger1= Time=1
value=F7,(sysvar(1)>5)+(sysvar(1)>14)

[State 1115100, freeze]
type=posfreeze
trigger1= 1

[State 1115100, end]
type=changestate
trigger1= !animtime
value=1115101

[Statedef 1115101]
type=L
movetype=H
physics=N

[State 1115101, anim]
type=changeanim
trigger1= !time
value=5160

[State 1115101, vel]
type=hitfallvel
trigger1= !time

[State 1115101, pos]
type=posset
trigger1= !time
y=20

[State 1115101, accel]
type=veladd
trigger1= 1
y=.4

[State 1115101, end]
type=changestate
trigger1= vel y>0 && pos y>=12
value=1115110

[Statedef 1115110]
type=L
movetype=H
physics=N

[State 1115110, shake]
type=fallenvshake
trigger1= !time

[State 1115110,2]
type=changeanim
trigger1= !time
value=5170

[State 1115110, hurt]
type=hitfalldamage
trigger1= !time

[State 1115110, pos]
type=posset
trigger1= !time
y=0

[State 1115110, var]
type=varset
trigger1= !time
trigger1= gethitvar(fall.yvel)!=0
sysvar(1)=floor(vel y)

[State 1115110, snd]
type=playsnd
trigger1= !time && !sysvar(0)
value=F7,(sysvar(1)>5)+(sysvar(1)>14)

[State 1115110, fx]
type=gamemakeanim
trigger1= !time && !sysvar(0)
value=60+(sysvar(1)>5)+(sysvar(1)>14)
pos=0,0
under=sysvar(1)<=14

[State 1115110, vel]
type=velset
trigger1= !time
y=0

[State 1115110, anim]
type=changeanim
persistent=0
triggerall= anim!=[5111,5119]
trigger1= !animtime
trigger2= sysvar(0)
value=5110

[State 1115110, ko]
type=selfstate
triggerall= !alive
trigger1= !animtime
trigger2= sysvar(0)
trigger3= anim=[5110,5119]
value=5150

[State 1115110, var]
type=varset
trigger1= sysvar(0)
trigger1= !time
sysvar(0)=0

[State 1115110, vel]
type=velmul
trigger1= 1
x=.85

[State 1115110, getup]
type=changestate
trigger1= alive && time>=9;const(data.liedown.time)
value=1115120
persistent=0

[Statedef 1115120]
type=L
movetype=H
physics=N

[State 1115120, anim]
type=changeanim
trigger1= !time
value=5120

[State 1115120, vel]
type=velset
trigger1= !time
x=0

[State 1115120, nhb]
type=nothitby
trigger1= 1
value=SCA

time=1
[State 1115120, hitfall]
type=hitfallset
trigger1= !animtime
value=1

[State 1115120, nhb]
type=nothitby
trigger1=1
value=SCA
time=1

[State 1115120, dizzy]
type=changestate
trigger1= !animtime
value=5300


;--------------------------------------------------------------------


;Shoryu Reppa
[Statedef 3000]
type = S
movetype = A
physics = S
juggle=ifelse((prevstateno=[1000,4999]),0,6)*!var(33)
anim = 3751
sprpriority = 2
velset = 0,0
ctrl = 0


[State 3050, ChangeAnim]
type = ChangeAnim
trigger1 = !time && var(12)<=0 
value = ifelse ((Command = "reppa2" && Power >= 2000) || (Command = "reppa3" && (Power >= 2000 && Power < 3000)), 3000, ifelse (Command = "reppa3" && Power >= 3000, 3001, 3000))
persistent = 0


[State 1015, flames]
type=helper
trigger1= movehit && numtarget && numhelper(7180)<1
trigger1= !(target,time) && (target,movetype=H)
trigger1= Var(5) = 2 && AnimElemTime(18) >= 0
helpertype=normal
stateno=7180
ID=7180
name="flames"
postype=p2
bindtime=1000
ownpal=1
facing=-1
size.ground.front=0
size.ground.back=0
ignorehitpause=1


[State 3000, VarSet]
type = VarSet
trigger1 = !time && var(12)<=0
var(5) = ifelse ((Command = "reppa2" && Power >= 2000) || (Command = "reppa3" && (Power >= 2000 && Power < 3000)), 1, ifelse (Command = "reppa3" && Power >= 3000, 2, 0))



[State 1200, strengthvarAI]
type=varset
trigger1= !time && var(12)>=1
var(5)= ifelse((power>=3000  && random<300 ), 2, ifelse((Power >= 2000 && Power < 3000  && random<100 ), 1, 0))

[State 3050, ChangeAnim]
type = ChangeAnim
trigger1 = !time && var(12)>=1 
value = ifelse (var(5)=0, 3000, ifelse (var(5)=2, 3001, 3000))
persistent = 0

[State 3050, Superpause]
type = SuperPause
trigger1 = Time = 1 
time = ifelse (Var(5) = 0, 45, ifelse (Var(5) = 1, 50, 55))
movetime = ifelse (Var(5) = 0, 45, ifelse (Var(5) = 1, 40, 35))
anim = -1
sound = S1, 21
poweradd = ifelse (Var(5) = 0, -1000, ifelse (Var(5) = 1, -2000, -3000))
darken = 0



[State 3000, strengthvar]
type=varset
trigger1= var(54)!=5 || var(54)!=6 || var(54)!=7
var(54)=ifelse (Var(5) = 0, 5, ifelse (Var(5) = 1, 6, 7))

[State 3000, superchargehelper]
type=helper
trigger1= animelem=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos = 14, -25
ownpal=1
persistent=0
supermovetime=9999


[State 300, Width]
type = Width
trigger1 = 1
value = 3,-3



[State 3000, PalFX]
type = PalFX
trigger1 = PrevStateNo = [1000,4000]
trigger1 = Time < 42
time = 1
color = 12+(time*3)
add = 180-(time*3),180-(time*3),180-(time*3)
ignorehitpause = 1



[State 3000, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
TimeGap  = 2
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifelse (!Var(5), 128, 40*Var(5)),ifelse(!Var(5), 128, ifelse(Var(5) = 1, 40, 25)),ifelse(!Var(5), 128, ifelse(Var(5) = 1, 40, 25))
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1




[State 3000, efeito]
type = PlaySnd
trigger1 = AnimElem = 3 || AnimElem = 11 || AnimElem = 19
value = 1, 8


[State 3000, efeito]
type = PlaySnd
trigger1 = (Anim = 3000 && AnimElem = 12) || (Anim = 3001 && AnimElem = 20) 
value = 1,1


[State 3000, voz]
type = PlaySnd
trigger1 = Time = 0 || (Anim != 1013 && AnimElem = 2)
value = 0,ifelse (Time = 0, 18, 19)


[State 3000, Muteki]
type = NotHitBy
trigger1 = Anim != 1013 && ((!Var(5) && AnimElemTime(5) < 0) || (Var(5) && AnimElemTime(12) < 0))
value = SCA

[State 3000, StateType]
type = StateTypeSet
trigger1 = Anim != 1013 && ((Anim = 3000 && AnimElem = 12) || (Anim = 3001 && AnimElem = 20))
StateType = A
physics = N

[State 3000, Velocity]
type = VelSet
trigger1 = Anim = 3000 && (AnimElemTime(2) = 0 || AnimElemTime(10) = 0 || AnimElemTime(12) = 0)
x = ifelse (AnimElemTime(2) = 0 || AnimElemTime(10) = 0, 11+ Var(5), 4 + (9*Var(5)))
y = ifelse (AnimElemTime(2) = 0 || AnimElemTime(10) = 0, 0, -(5.5+Var(5)) )

[State 3000, Velocity]
type = VelSet
trigger1 = Anim = 3001 && (AnimElemTime(2) = 0 || AnimElemTime(10) = 0 || AnimElemTime(18) = 0 || AnimElemTime(20) = 0)
x = ifelse (AnimElemTime(2) = 0 || AnimElemTime(10) = 0 || AnimElemTime(18) = 0, 9.50, 9)
y = ifelse (AnimElemTime(2) = 0 || AnimElemTime(10) = 0 || AnimElemTime(18) = 0, 0, -12)

[State 3000, Velocity]
type = VelSet
trigger1 = Anim = 3001 && (AnimElemTime(17) = 0 || AnimElemTime(18) = 0 || AnimElemTime(19) = 0)
x =  18

[State 3000, Vel X]
type = VelMul
trigger1 = Time > ifelse (Var(5) = 0, 67, ifelse (Var(5) = 1, 69, 71)) && Vel X
x = ifelse (Var(5) = 2, 0.9, 0.8)
y = ifelse (Var(5) = 2, 1, 1.05)

[State 3000, Gravity]
type = VelAdd
trigger1 = Time > ifelse (Var(5) = 0, 69, ifelse (Var(5) = 1, 71, 71)) && Vel Y
y = ifelse (Var(5) = 0, .42, ifelse(Var(5) = 1, .51, .48))



[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = Time > 12 && Vel Y > 0
value = 1013
persistent = 0


[State 1010, Fire1]
type = Explod
trigger1 = (Anim = 3001 && AnimElemTime(17) = 0)
Anim = 1016
pos = 0, 0
postype = p1
ontop = 1
ownpal = 1
bindtime = 9
supermove = 1

[State 1010, Fire2]
type = Explod
trigger1 = (Anim = 3001 && AnimElemTime(20) = 0) && !NumExplod(1017)
Anim = 1017
pos = 0, 0
postype = p1
ontop = 1
ownpal = 1
bindtime = -1
ignorehitpause = 1
removetime = -1
supermove = 1
id=14378



[State 3000, Fire2]
type = Explod
trigger1 = (Anim = 3001 && AnimElemTime(20) >= 0) && !NumExplod(1017)
Anim = 1017
pos = 17, -140
postype = p1
ontop = 1
ownpal = 1
bindtime = -1
ignorehitpause = 1
removetime = -1
supermove = 1
ID = 1017

[State 2200, PlaySnd]
type = PlaySnd
trigger1 = AnimElem =19
value = 5,7

[State 3000, HitDef]
type = HitDef
trigger1 = AnimElem = 3 || AnimElem = 4 || AnimElem = 11 || (Var(5) = 2 && AnimElem = 12)
attr = S, HA
animtype  = Heavy
air.animtype = Back
damage    = ifelse (Var(5) = 2, 50, 60),8
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 8, 9
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 14
ground.hittime  = 15
guard.ctrltime = 15
ground.velocity = -3
air.velocity = -4,-5
ground.cornerpush.veloff = 0
getpower=0
air.fall = 1
air.recover = 0
envshake.time = 15
envshake.freq = 50
envshake.ampl = 5
forcestand = 1

[State 3000, HitDef]
type = HitDef
trigger1 = Var(5) && (AnimElem = 2 || AnimElem = 10 || AnimElem = 18)
attr = S, HA
animtype  = Heavy
air.animtype = Back
damage    = ifelse (Var(5) = 2, 40, 50),8
priority  = 4, Hit
hitflag = MA
guardflag = M
pausetime = 8,9 
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -36
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
guard.ctrltime = 15
ground.velocity = -3
air.velocity = -4,-4
ground.cornerpush.veloff = 0
air.fall = 1
air.recover = 0
getpower=0
envshake.time = 15
envshake.freq = 50
envshake.ampl = 5
palfx.time = ifelse (Var(5) = 2 && AnimElemTime(18) >= 0, 20, 0)
palfx.mul = 100,60,60
forcestand = 1

[State 3000, HitDef]
type = HitDef
trigger1 = (Var(5) != 2 && AnimElem = 12) || AnimElem = 19 || AnimElem = 20
attr = A, HA
animtype  = Up
air.animtype  = Up
damage = ifelse (Var(5) = 2, 50, 60),10
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 11, 11
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -85
hitsound   = S1,14
guardsound = S1,15
ground.slidetime = 14
ground.hittime  = 15
guard.ctrltime = 15
ground.velocity = -3, -(10 +Var(5))
guard.velocity = -11
air.velocity = -3,-(10 + Var(5))
getpower=0
envshake.time = 15
envshake.freq = 60
envshake.ampl = 5
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
palfx.time = ifelse (Var(5) = 2, 60, 0)
palfx.mul = 5,2,0
palfx.add = 255,0,0
forcestand = 1

[State Idle]
type=statetypeset
trigger1= anim=1013
movetype=I


[State 3000, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1015

;------------------------------------------------------------------------------------------

[Statedef 3002]
type = S
movetype = A
physics = S
juggle = 6
anim = 3002
ctrl = 0
velset = 0,0
facep2 = 1
poweradd =-3000


[State 3000, strengthvar]
type=varset
trigger1= var(54)!=7
var(54)=7


[State 3000, NotHitBy]
type = NotHitBy
trigger1 = Time < 60
value = SCA
time = 1


[State 3000, efeito]
type = PlaySnd
trigger1 = AnimElem = 3 || AnimElem = 11 || AnimElem = 19
value = 1, 8


[State 3000, efeito]
type = PlaySnd
trigger1 = AnimElem = 12
value = 1,1


[State 3000, voz]
type = PlaySnd
trigger1 = Time = 0
value = 0,18


[State 3000, voz]
type = PlaySnd
trigger1 = animelem=3
value = 0, 19


[State 3000, PossSet]
type = PosSet
trigger1 = Time = 0
y = 0


[State 3000, superchargehelper]
type=helper
trigger1= animelem=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos = 14, -25
ownpal=1
persistent=0
supermovetime=9999

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 60
anim = -1
sound = S1, 21
pos = 9999999999999999,9999999999
movetime = 60
darken = 0
p2defmul = 1
unhittable = 1


[State 3000, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 2
timegap = 1
framegap = 8
length = 21
paladd = 0,0,0
palmul = .75,.75,.75
palcontrast = 128,128,128
palpostbright = 0,0,0
trans = add1
persistent = 0

[State 3000, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 3000, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(4) < 0
x = 6

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElemTime(12) >= 0 && AnimElemTime(15) < 0
x = 6.8

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElemTime(23) >= 0 && AnimElemTime(26) < 0
x = 6.8


[State 3000, VelMul]
type = VelMul
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(11) < 0
trigger2 = (AnimElemTime(15) >= 0 && AnimElemTime(22) < 0)
trigger3 = AnimElemTime(26) >= 0 && AnimElemTime(33) < 0
x = .95

[State 3000, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
animtype = Heavy
air.animtype = Back
damage = 28,5
priority  = 8, Hit
hitflag = MAF
guardflag = M
pausetime = 6,7
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -4.2,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
envshake.time = 12
envshake.ampl = 4

[State 3000, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
animtype = Heavy
air.animtype = Up
damage = 28,5
priority  = 8, Hit
hitflag = MAF
guardflag = M
pausetime = 6,7
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -4.2,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
sparkno = S8020+(random%7)
guard.sparkno = S8061
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
envshake.time = 12
envshake.ampl = 4

[State 3000, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
animtype = Heavy
air.animtype = Up
damage = 28,5
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,7
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -4.2,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
envshake.time = 12
envshake.ampl = 4

[State 3000, HitDef]
type = HitDef
trigger1 = AnimElem = 13
attr = S, HA
animtype = Heavy
air.animtype = Back
damage = 28,5
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,7
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -4.2,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
envshake.time = 12
envshake.ampl = 4

[State 3000, HitDef]
type = HitDef
trigger1 = AnimElem = 14
attr = S, HA
animtype = Heavy
air.animtype = Up
damage = 28,5
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,7
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -4.2,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
sparkno = S8020+(random%7)
guard.sparkno = S8061
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
envshake.time = 12
envshake.ampl = 4

[State 3000, HitDef]
type = HitDef
trigger1 = AnimElem = 15
attr = S, HA
animtype = Heavy
air.animtype = Up
damage = 28,5
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,7
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -4.2,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
envshake.time = 12
envshake.ampl = 4


[State 3000, HitDef]
type = HitDef
trigger1 = AnimElem = 24
attr = S, HA
animtype = Heavy
air.animtype = Back
damage = 28,5
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,7
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -4.2,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
envshake.time = 12
envshake.ampl = 4

[State 3000, HitDef]
type = HitDef
trigger1 = AnimElem = 25
attr = S, HA
animtype = Heavy
air.animtype = Up
damage = 28,5
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,7
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -4.2,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
sparkno = S8020+(random%7)
guard.sparkno = S8061
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
envshake.time = 12
envshake.ampl = 4

[State 3000, HitDef]
type = HitDef
trigger1 = AnimElem = 26
attr = S, HA
animtype = Heavy
air.animtype = Up
damage = 28,5
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,7
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -4.2,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
envshake.time = 12
envshake.ampl = 4


[State 3000, ChangeState]
type = ChangeState
trigger1 = Animtime=0
value = 3003




[Statedef 3003]
type = S
movetype = A
physics = S
juggle = 0
anim = 3003
ctrl = 0
velset = 0,0

[State 1010, Fire2]
type = Explod
trigger1 = (Anim = 3003 && AnimElemTime(3) = 0) && !NumExplod(27321)
Anim = 3090
pos = 0, 0
postype = p1
ontop = 1
ownpal = 1
bindtime = -1
ignorehitpause = 1
removetime = 45
supermove = 1
id=27321

[State 1015, flames]
type=helper
trigger1= movehit && numtarget && numhelper(7180)<1
trigger1= !(target,time) && (target,movetype=H)
trigger1= AnimElemTime(3) >= 0
helpertype=normal
stateno=7180
ID=7180
name="flames"
postype=p2
bindtime=1000
ownpal=1
facing=-1
size.ground.front=0
size.ground.back=0
ignorehitpause=1


[State 3001, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S5,7


[State 3001, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 2
timegap = 1
framegap = 8
length = 21
paladd = 0,0,0
palmul = .75,.75,.75
palcontrast = 128,128,128
palpostbright = 0,0,0
trans = add1
persistent = 0

[State 3001, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 3001, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 3001, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(3) = 2
StateType = A
physics = N

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 3001, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) < 0
x = 12

[State 3001, VelSet]
type = VelMul
trigger1 = AnimElemTime(3) >= 0
x = .88

[State 3001, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) = 2
y = -12

[State 3001, VelMul]
type = Veladd
trigger1 = AnimElemTime(3) > 2
y = .45


[State 3001, HitDef]
type = HitDef
trigger1 = AnimElem = 1
attr = S, HA
animtype = Heavy
air.animtype = Up
damage = 28,5
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 11,11
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 13
ground.hittime  = 20
guard.ctrltime = 13
ground.velocity = -0.8,0
guard.velocity = -8
air.velocity = -0.8,0
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 4
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
id = 3000

[State 3001, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, HA
animtype = Heavy
air.animtype = Up
damage = 28,5
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 11,11
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 13
ground.hittime  = 22
guard.ctrltime = 22
ground.velocity = -1.8,0
guard.velocity = -8
air.velocity = -1.8,0
airguard.velocity = -6.67,0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 4
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
id = 3001


[State 1100, HitDef]
type = HitDef
trigger1 = AnimElemtime(3) = [0,4]
attr = A, HA
animtype = Heavy
air.animtype = Up
damage=30,1
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 6,6
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.8,-11
guard.velocity = -8
air.velocity = -2.8,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
palfx.color=32
palfx.sinadd=80,25,0,8
palfx.mul=512,256,128
palfx.time=32

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElemtime(3) = [5,8]
attr = A, HA
animtype = Heavy
air.animtype = Up
damage=35,1
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 6,6
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.8,-11
guard.velocity = -8
air.velocity = -2.8,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
palfx.color=32
palfx.sinadd=80,25,0,8
palfx.mul=512,256,128
palfx.time=32

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElemtime(3) = [9,12]
attr = A, HA
animtype = Heavy
air.animtype = Up
damage=37,1
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 6,6
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.8,-11
guard.velocity = -8
air.velocity = -2.8,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent =0
getpower = 0,0
givepower = 35, 35
forcestand = 1
palfx.color=32
palfx.sinadd=80,25,0,8
palfx.mul=512,256,128
palfx.time=32


[State 1100, HitDef]
type = HitDef
trigger1 = AnimElemtime(3) = [13,16]
attr = A, HA
animtype = Heavy
air.animtype = Up
damage=40,1
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 8,8
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.8,-11
guard.velocity = -8
air.velocity = -2.8,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
palfx.color=32
palfx.sinadd=80,25,0,8
palfx.mul=512,256,128
palfx.time=32


[State 1100, HitDef]
type = HitDef
trigger1 = AnimElemtime(3) = [17,20]
attr = A, HA
animtype = Heavy
air.animtype = Up
damage=40,1
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 0,0
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -80
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -6,-11
guard.velocity = -8
air.velocity = -6,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 20
envshake.ampl = 10
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
palfx.color=32
palfx.sinadd=80,25,0,8
palfx.mul=512,256,128
palfx.time=60


[State 3001, ChangeState]
type = ChangeState
trigger1= vel y > 0
trigger1= pos y > -vel y
value = 1015



;-------------------------------------------------------------------

; hadou rain
[Statedef 3020]
type    = A
movetype= A
physics = N
juggle=ifelse((prevstateno=[1000,4999]),0,6)*!var(33)
velset = 0,0
anim = 3020
ctrl = 0
sprpriority = 2
poweradd=-1000


[State 3000, strengthvar]
type=varset
trigger1= var(54)!=5
var(54)=5

[State 3000, superchargehelper]
type=helper
trigger1= animelem=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos = 47, -55
ownpal=1
persistent=0
supermovetime=9999

[State 3020, Super A]
type = SuperPause
trigger1 = AnimElem = 2
time = 45
movetime = 0
anim = -1
darken=0




[State 3020, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 21
channel = 0



[State 3000, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
TimeGap  = 2
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifelse (!Var(5), 128, 40*Var(5)),ifelse(!Var(5), 128, ifelse(Var(5) = 1, 40, 25)),ifelse(!Var(5), 128, ifelse(Var(5) = 1, 40, 25))
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 3020, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1000, 0


[State 3020, hadouken]
type=helper
trigger1=animelem=5||animelem=11||animelem=17||animelem=23||animelem=29
helpertype=normal
stateno=3021
ID=3021
name="Hadouken"
postype=p1
pos=77,-58
ownpal=1
size.xscale=.5;.7
size.yscale=.5;.7

[State 3020, hadouken]
type=helper
trigger1=animelem=5||animelem=11||animelem=17||animelem=23||animelem=29
helpertype=normal
stateno=3021
ID=3021
name="Hadouken"
postype=p1
pos=57,-38
ownpal=1
size.xscale=.5;.7
size.yscale=.5;.7

[State 3020, hadouken]
type=helper
trigger1=animelem=8||animelem=14||animelem=20||animelem=26
helpertype=normal
stateno=3021
ID=3021
name="Hadouken"
postype=p1
pos=64,-58
ownpal=1
size.xscale=.5;.7
size.yscale=.5;.7

[State 3020, hadouken]
type=helper
trigger1=animelem=8||animelem=14||animelem=20||animelem=26
helpertype=normal
stateno=3021
ID=3021
name="Hadouken"
postype=p1
pos=44,-38
ownpal=1
size.xscale=.5;.7
size.yscale=.5;.7

[State 3020, snd]
type=playsnd
trigger1=animelem=5||animelem=11||animelem=17||animelem=23||animelem=29
trigger2=animelem=8||animelem=14||animelem=20||animelem=26
value = 1, 18
channel=0

[State 3070, snd]
type=playsnd
trigger1=animelem=5||animelem=11||animelem=17||animelem=23||animelem=29
trigger2=animelem=8||animelem=14||animelem=20||animelem=26
value = 1, 18

[State 3020, vel]
type=velset
trigger1=animelem=5||animelem=11||animelem=17||animelem=23||animelem=29
trigger2=animelem=8||animelem=14||animelem=20||animelem=26
x=-2
y=-2.4

[State 3020, vel]
type=velmul
trigger1=animelemtime(5)>=0&&animelemtime(29)<0
x=.75
y=.75

[State 3020, 7]
type=statetypeset
trigger1=animelemtime(32)>=0
physics=A

[State 3020, 7]
type = ChangeState
triggerall = power>=1000
trigger1 = command="cometa"&&time>=40
value = 1451
ctrl = 0


;------------------------------------------------------------------------------------------


[Statedef 3021]
type=A
physics=N
movetype=A
anim=1958;1001
ctrl=0
velset=0,0
sprpriority=4

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3021, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1056
ignorehitpause=1

[State 3021,hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1



[State 3021, vel]
type=velset
trigger1=!time&&(rootdist y>48)
x=7+random/333.3
y=3.5+random/666.7

[State 3021, vel]
type=velset
trigger1=!time&&(rootdist y<=48)
x=4+random/333.3
y=5+random/666.7


[State 3021, hit]
type=hitdef
trigger1=1
priority=7,Hit
attr=A,HP
damage=15,5
animtype=Hard
fall.animtype=Back
hitflag=MAFD
guardflag=HA
pausetime=4,4
sparkno=-1
sparkxy=-10,0
guard.sparkno=s1005
hitsound = S1,25
guardsound = S1,15
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-4,0
ground.cornerpush.veloff=0
air.velocity=-1,-.5
down.hittime=20
down.velocity=0,0
air.fall=1
fall.recover=0
getpower=0
envshake.time=11
envshake.freq=90
envshake.ampl=3
sprpriority=4


[State 3021, sparks]
type=explod
trigger1=movehit&&numtarget
trigger1=!(target,time)&&target,movetype=H
anim=2558+(random%4)
ID=2704
sprpriority=5
postype=left
pos=ceil((target,pos x)-((target,const(size.ground.front)-10)*facing)+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 3021, end]
type=changestate
trigger1=movecontact
value=1011
ignorehitpause=1

[State 3021, end]
type=changestate
trigger1=pos y>=0
value=1011
ignorehitpause=1

[State 3021, end]
type=destroyself
trigger1=frontedgedist<-120||backedgedist<-120

;------------------------------------------------------------------------------------------

[Statedef 3022];P2State socao
type    = A
movetype= H
physics = N
velset = 0,0

[State 3022, 0]
type = SelfState
trigger1 = isHelper
value = PrevStateNo
ignorehitpause = 1

[State 3022,NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,AA,AT,AP
time = 160
ignorehitpause = 1

[State -2,PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1


[State 3022, ]
type = PalFX
trigger1 = time = 0
time = 60;
add = 30,30,30
mul = 120,80,90
;invertall = 1
ignorehitpause = 1
persintent = 0

[State 3022, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 3022, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 3022, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 3022, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 3022, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 3023



;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 3023]
type    = A
movetype= H
physics = N
ctrl = 0


[State 3023, 1]
type = VelAdd;Gravity
trigger1 = 1
y = 0.05

[State 3023, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1


[State 3023, 5]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = Time > 10
trigger3 = BackEdgeBodyDist <= 20
trigger4 = FrontEdgeBodyDist <= 20
value = 3024 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 3024]
type    = A
movetype= H
physics = N


[State 3024, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 3024, 2]
type = VelAdd
trigger1 = 1
y = 0.05


[State 3024, 4]
type = ChangeState
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
trigger5 = time > 10
trigger6 = BackEdgeBodyDist <= 20
trigger7 = FrontEdgeBodyDist <= 20
value = 3025 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 3025]
type    = A
movetype= H
physics = N


[State 3025, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 3025, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 3025, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = 0.05


[State 3025, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 15100 ;HIT_BOUNCE


[State 3025, Xe[gX];Xe[g
type = ChangeState
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 3026


;---------------------------------------------------------------------------
;ij
[Statedef 3026]
type    = A
movetype= H
physics = N

[State 3016, U]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 3026, u]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 3026, u]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 3026, GtFNg]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor(screenpos y) - 50
postype = back
ownpal = 1
sprpriority = 3

[State 3026, AjX]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 3026, ]
type = PlaySnd
trigger1 = Time = 0
value = F7,0
volume = 255


[State 3026, Xe[gX]
type = ChangeState
trigger1 = AnimTime = 0
value = 3027

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;ioEhj
[Statedef 3027]
type    = A
movetype= H
physics = N

[State 3027, G]
type = HitBy
trigger1= time = 1
value = SCA,AA,AT,AP
time = 1
ignorehitpause = 1

[State 3027, G]
type = HitBy
trigger1= time = 1
value2 = SCA,AA,AT,AP
time = 1
ignorehitpause = 1


[State 3027, x]
type = VelSet
trigger1 = Time = 0
y = -15

[State 3027, x]
type = VelSet
trigger1 = Time = 0
x = 6.5

[State 3027, U]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 3027, xZ]
type = VelAdd
trigger1 = Vel Y < 0
y = .5


[State 3027, xZ]
type = VelAdd
trigger1 = time = [68, 80]
y = -.5


[State 3027, xZ];d
type = VelAdd
trigger1 = Vel Y >= 0
x = 0.1
y = .2



[State 3735,  Slow Motion ]
type = Pause 
triggerall = (GameTime%1) = 0 && roundstate = 2
trigger1 = time = [15,40]
time = 2
movetime = 0
ignorehitpause = 0 
endcmdbuftime=2


[State 3027, AjX]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 3027, AjX]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 3027, AjX]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 3027, AjX]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 3027, noEhXe[g]
type = ChangeState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 15100

; HIT_BOUNCE (hit ground)
[Statedef 15100]
type    = L
movetype= H
physics = N



[State 5100, HitBy]
type = HitBy
trigger1 = 1
value = SCA,AA,AT,AP
time = 1

[State 5100, HitBy]
type = HitBy
trigger1 = 1
value2 = SCA,AA,AT,AP
time = 1


[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 15110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 15101


;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 15101]
type    = L
movetype= H
physics = N


[State 5101, HitBy]
type = HitBy
trigger1 = 1
value = SCA,AA,AT,AP
time = 1

[State 5101, HitBy]
type = HitBy
trigger1 = 1
value2 = SCA,AA,AT,AP
time = 1


[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value =15110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 15110]
type    = L
movetype= H
physics = N



[State 5110, HitBy]
type = HitBy
trigger1 = 1
value = SCA,AA,AT,AP
time = 1

[State 5110, HitBy]
type = HitBy
trigger1 = 1
value2 = SCA,AA,AT,AP
time = 1

;_E
[State 5110, HitBy]
type = NotHitBy
trigger1 = PrevStateNo = 895
value = ,AA,AT
time = 20

;_E
[State 5110, HitBy]
type = NotHitBy
trigger1 = PrevStateNo = 895
value = ,AA,AT
time = 20

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, Xe[g]
type = selfstate;ChangeState
trigger1 = time > 6
value = 5110




[State 5110, 11] ;If just died
type =selfstate ;ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85


;------------------------------------------------------------------------------------------

[Statedef 3030]
type=S
physics=S
movetype=A
anim=3751
ctrl=0
velset=0,0
juggle=ifelse((prevstateno=[1000,4999]),0,6)
facep2=1
sprpriority=1


[State 3050, ChangeAnim]
type = ChangeAnim
trigger1 = !time && var(12)<=0 
value = ifelse ((Command = "supcotryu2" && Power >= 2000) || (Command = "supcotryu3" && (Power >= 2000 && Power < 3000)), 3030, ifelse (Command = "supcotryu3" && Power >= 3000, 3035, 3032))
persistent = 0



[State 3050, VarSet]
type = VarSet
trigger1 = !time && var(12)<=0
var(5) = ifelse ((Command = "supcotryu2" && Power >= 2000) || (Command = "supcotryu3" && (Power >= 2000 && Power < 3000)), 1, ifelse (Command = "supcotryu3" && Power >= 3000, 2, 0))


[State 1200, strengthvarAI]
type=varset
trigger1= !time && var(12)>=1
var(5)= ifelse((power>=3000 ), 2, ifelse((Power >= 2000 && Power < 3000 ), 1, 0))

[State 3050, ChangeAnim]
type = ChangeAnim
trigger1 = !time && var(12)>=1 
value = ifelse (var(5)=0, 3032, ifelse (var(5)=2, 3035, 3030))
persistent = 0


[State 3050, Superpause]
type = SuperPause
trigger1= anim=3030 && animelem=4
trigger2= anim=3032 && animelem=4
trigger3= anim=3035 && animelem=4
time = ifelse (Var(5) = 0, 45, ifelse (Var(5) = 1, 50, 55))
anim = -1
sound = S1, 21
poweradd = ifelse (Var(5) = 0, -1000, ifelse (Var(5) = 1, -2000, -3000))
darken = 0



[State 3000, strengthvar]
type=varset
trigger1= var(54)!=5 || var(54)!=6 || var(54)!=7
var(54)=ifelse (Var(5) = 0, 5, ifelse (Var(5) = 1, 6, 7))


[State 3000, superchargehelper]
type=helper
trigger1= animelem=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos=15,-66
ownpal=1
persistent=0
supermovetime=9999


[State 3160, Dust]
type=explod
trigger1= anim=3030 && animelemtime(5)>=0 && vel x>.5 && !(time%2)
trigger2= anim=3032 && animelemtime(5)>=0 && vel x>.5 && !(time%2)
trigger3= anim=3035 && animelemtime(5)>=0 && vel x>.5 && !(time%2)
anim=7103
ID=7103
sprpriority=3
postype=p1
pos=45,0
vel=-2,0
ownpal=1
pausemovetime=-1
supermovetime=-1

[State 3160, nhb]
type=nothitby
trigger1= anim=3030 && animelemtime(7)<1
trigger2= movehit && (anim=3030 || (anim=3030 && animelemtime(12)<0))
trigger3= anim=3032 && animelemtime(7)<0
trigger4= movehit && (anim=3032 || (anim=3032 && animelemtime(12)<0))
trigger5= anim=3035 && animelemtime(7)<1
trigger6= movehit && (anim=3035 || (anim=3035 && animelemtime(12)<0))
time=1
value=SCA



[State 3160, Dust]
type=helper
trigger1= anim=3031 && animelem=12
trigger2= anim=3033 && animelem=6
helpertype=normal
stateno=3125
ID=3125
name="B&W Dust"
postype=p1
pos=0,0
ownpal=1
ignorehitpause=1
persistent=0
size.xscale=2
size.yscale=2


[State 3160, width]
type=width
trigger1= anim=3030 && animelemtime(4)>=0 && animelemtime(9)<0
player=25,0

;[State 3160, Snd]
;type=playsnd
;trigger1= anim=3030 && animelem=4
;trigger2= anim=3035 && animelem=4
;value=5,14
;channel=0
;volume=200


[State 3160, Vel]
type=velset
trigger1= anim=3032 && animelemtime(5)>=0 && animelemtime(7)<0
x=9

[State 3100, Vel]
type=velset
trigger1= anim=3030 && animelemtime(5)>=0 && animelemtime(7)<0
x=12

[State 3160, Vel]
type=velset
trigger1= anim=3035 && animelemtime(5)>=0 && animelemtime(7)<0
x=15

[State 3160, Snd]
type=playsnd
trigger1= anim=3030 && animelem=5
trigger2= anim=3032 && animelem=5
trigger3= anim=3035 && animelem=5
value=5,9



;[State 3160, Snd]
;type=playsnd
;trigger1= anim=3030 && animelem=6
;value=5,15
;channel=0

[State 3100, elbowhit]
type=hitdef
trigger1= animelem=7 && anim=3032
ID=3100
attr=S,HA
damage=115,14
animtype=Hard
air.animtype=Hard
fall.animtype=Hard
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime=12,24
guard.pausetime=12,12
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy=-10,-64
hitsound   = S1,14
guardsound = S1,15
p2facing=1
ground.type=Low
ground.slidetime=16
ground.hittime=16
ground.velocity=0,0
guard.velocity=-10.52
guard.cornerpush.veloff = 0
air.type=Low
air.velocity=-.5,-3
getpower=0
givepower=36,36
envshake.time=18
envshake.freq=120
envshake.ampl=9
forcestand=1
yaccel=.5
forcestand=1


[State 3160, elbowhit]
type=hitdef
trigger1= anim=3030 && animelem=7
trigger2= anim=3035 && animelem=7
attr=S,HA 
damage=80,20
animtype=Hard 
fall.animtype=Hard 
guardflag=M 
hitflag=MAF
priority=4,Hit
pausetime=0,62
guard.pausetime=12,12
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy=-10,-64
hitsound   = S1,14
guardsound = S1,15
p2facing=1
ground.type=Low
ground.slidetime=16
ground.hittime=16
guard.hittime=16
p2facing=1
ground.velocity=0,0
ground.cornerpush.veloff = 0
air.type=Low
air.velocity=0,0
getpower=0
givepower=36,36
envshake.time=18
envshake.freq=120
envshake.ampl=9
forcestand=1
yaccel=.5
ID=3160
forcestand=1


[State 3160, p2state]
type=targetstate
trigger1= anim=3030 && animelemtime(7)>=0 && animelemtime(8)<0
trigger1= movehit=1 && numtarget(3030)
value=3031
ID=3160
ignorehitpause=1

[State 3160, switch]
type=changeanim
trigger1= anim=3030 && animelemtime(8)>=0 && animelemtime(9)<0 && movehit
value=3031
ignorehitpause=0
persistent=0


[State 3100, switch]
type=changeanim
trigger1= anim=3032
trigger1= animelemtime(7)>=0 && animelemtime(8)<0 && movehit

trigger2= anim=3035
trigger2= animelemtime(8)>=0 && animelemtime(9)<0 && movehit
value=3033
ignorehitpause=0

[State 3100, Vel]
type=velset
trigger1= anim=3033 && animelemtime(5)>=0 && animelemtime(7)<0 && p2bodydist x>0
x=5

[State 3100, Vel]
type=velset
trigger1= anim=3033 && animelem=7
x=12
y=-11

[State 3160, Vel]
type=velset
trigger1= anim=3031 && animelemtime(4)>=0 && animelemtime(9)<0 && p2bodydist x>5
x=3

[State 3160, Vel]
type=velset
trigger1= anim=3031 && animelem=13
x=18
y=-11

[State 3160, Vel]
type=velmul
trigger1= 1
x=.88

[State 3160, Vel]
type=velmul
trigger1= vel y>0
x=0

[State 3160, Snd]
type=playsnd
trigger1= anim=3031 && animelem=13
value=5,10


[State 3160, statetype]
type=statetypeset
trigger1= anim=3031 && animelemtime(13)>=0
trigger2= anim=1013
trigger3= anim=3033 && animelemtime(7)>=0
statetype=A
physics=A

[State 3160, Anim]
type=changeanim
trigger1= anim=3031 && animelemtime(13)>0 && vel y>-4
trigger2= anim=3033 && animelemtime(7)>0 && vel y>-5
value=1013
persistent=0

[State 3160, Snd]
type=playsnd
trigger1= anim=3031 && animelem=13
value=5,16
channel=0

[State 3160, Snd]
type=playsnd
trigger1= anim=3033 && animelem=7
value=0,16
channel=0


[State 3160, fire]
type=helper
trigger1= anim=3031 && animelem=13 && !numhelper(3165)
helpertype=normal
stateno=3165
ID=3165
name="Metsu Shoryuu Fire"
postype=p1
ownpal=1
ignorehitpause=1
persistent=0

[State 3160, Snd]
type=playsnd
trigger1= anim=3031 && animelem=9
value=5,11

[State 3160, Snd]
type=playsnd
trigger1= anim=3031 && animelem=13
value=5,12

[State 3160, focus]
type=explod
trigger1= anim=3031 && animelem=9
anim=3167
sprpriority=3
postype=p1
pos=12,-25
removeongethit=1

[State 3160, BG PalFX]
type=bgpalfx
trigger1= anim=3031 && animelem=9
sinadd=25,-150,-150,32
time=16


;fraco
[State 3100, lowhit]
type=hitdef
trigger1= anim=3033 && animelem=6
ID=3033
attr=S,HA
damage=58,7
animtype=Back
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime=ifelse(Var(5) = 2, 40, 16), ifelse(Var(5) = 2, 40, 16)
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy=-10,-75
hitsound   = S1,14
guardsound = S1,15
ground.type=Low
ground.slidetime=16
ground.hittime=16
ground.velocity= .5, -6
air.type=Low
air.velocity= .5, -4
ground.cornerpush.veloff = 0
guard.velocity= -10.52
guard.cornerpush.veloff = 0
getpower=0
givepower=36,36
envshake.time=18
envshake.freq=120
envshake.ampl=6
fall=1
fall.recover=0
fall.animtype=Medium
yaccel=.5
forcestand=1

;fraco
[State 3100, shoryuuhit]
type=hitdef
trigger1= anim=3033 && animelem=7
ID=3033
attr=A,HA
damage=58,7
animtype=Up
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime=6,6  
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy=-10,-75
hitsound   = S1,14
guardsound = S1,15
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-4,-12
air.type=Low
air.velocity=-4,-12
ground.cornerpush.veloff = 0
guard.velocity= -10.52
guard.cornerpush.veloff = -12.74
getpower=0
givepower=36,36
envshake.time=18
envshake.freq=120
envshake.ampl=6
fall=1
fall.recover=0
yaccel=.5
forcestand=1

;medio
[State 3160, lowhit]
type=hitdef
trigger1= anim=3031 && animelem=12
attr=S,HA
damage=80,4
animtype=Back 
guardflag=M 
hitflag=MAF
priority=4,Hit
pausetime=50,50
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy=-10,-75
hitsound   = S1,14
guardsound = S1,15
p2facing=1
ground.type=Low
ground.slidetime=16
ground.hittime=16
p2facing=1
ground.velocity=.5,-7.5
air.type=Low
air.velocity=.5,-7.5
ground.cornerpush.veloff = 0
guard.velocity= -10.52
guard.cornerpush.veloff = 0
getpower=0
givepower=36,36
envshake.time=24
envshake.freq=120
envshake.ampl=9
fall=1
fall.recover=0
fall.animtype=Medium
yaccel=.5
forcestand=1

;medio
[State 3160, shoryuuhit]
type=hitdef
trigger1= anim=3031 && !(animelemtime(13)%3)
attr=A,HA 
damage=35,4
animtype=Diagup
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime=4,4
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy=-10,-106
hitsound   = S1,14
guardsound = S1,15
p2facing=1
ground.type=High
ground.slidetime=16
ground.hittime=16
p2facing=1
ground.velocity=-3,-12
air.type=Low
air.velocity=-3,-12
ground.cornerpush.veloff = 0
guard.velocity= -10.52
guard.cornerpush.veloff = 0
getpower=0
givepower=36,36
envshake.time=18
envshake.freq=120
envshake.ampl=6
fall=1
fall.recover=0
yaccel=.5
forcestand=1

[State 3160, Sparks]
type=helper
triggerall= movehit=1 && numtarget
triggerall= (target,movetype=H) && !(target,time)
trigger1= anim=3030 && animelemtime(7)>=0 && animelemtime(8)<0
trigger2= anim=3031 && animelemtime(12)>=0 && animelemtime(13)<0
helpertype=normal
stateno=7050
ID=7050
name="Shin Shoryuken Spark"
postype=p2
pos=(target,const(size.ground.front)-10),(ifelse(anim=3161,-75,-64)-floor(p2dist y))
ownpal=1
facing=-1
ignorehitpause=1
pausemovetime=255
supermovetime=255

[State Idle]
type=statetypeset
trigger1= anim=3030 && animelemtime(8)>=0
trigger2= anim=3032 && animelemtime(8)>=0
trigger3= anim=1013
movetype=I

[State 3160, End]
type=changestate
trigger1= anim=3030 && !animtime
trigger2= anim=3032 && !animtime
trigger3= anim=3035 && !animtime
value=0
ctrl=1

[State 3100, shinshoryuken]
type=changestate
trigger1= anim=3033 && animelem=7 && Var(5) = 2
value=3035





;-----TARGET-----
[Statedef 3031]
type=S
physics=S
movetype=H
ctrl=0
velset=0,0

[State 3162, Pos]
type=posset
trigger1= 1
y=0

[State 3162, fall]
type=hitfallset
trigger1= 1
value=0

[State 3162, Anim]
type=changeanim
trigger1=1
value=5002

[State 3162, shake]
type=posadd
trigger1=1
x=ifelse((time%2),1,-1)

[State 3162, End]
type=selfstate
trigger1=time>=90
value=5001

;------------------------------------------------------------------------------------------


;SHIN SHORYUU KEN
[Statedef 3035]
type=S
physics=S
movetype=A
anim=3036
ctrl=0
velset=0,0
sprpriority=1
poweradd= 0
juggle=0
0

[State 3120, strengthvar]
type=varset
trigger1= var(54)!=5
var(54)=7


;[State 3120, Snd]
;type=playsnd
;trigger1= anim=3036 && animelem=2
;value=0,20
;channel=0
;volume=200



[State 3120, nhb]
type=nothitby
trigger1= anim=3036 && animelemtime(5)<0
trigger2= (anim=3036 && animelemtime(2)>=0 && animelemtime(5)<0) && movehit
trigger3= (anim=3037 && animelemtime(4)<0) && movehit
time=1
value=SCA
ignorehitpause=1

[State 3120, width]
type=width
trigger1= anim=3036 && animelemtime(4)>=0 && animelemtime(5)<0 && movehit
trigger2= anim=3037 && animelemtime(4)<0
player=-28,0
ignorehitpause=1

[State 3120, width]
type=width
trigger1= anim=3037 && animelemtime(4)>=0
player=-10,0
edge=const(size.air.front)
ignorehitpause=1

[State 3120, switch]
type=changeanim
;trigger1= anim=3036 && animelemtime(4)>0 && animelemtime(5)<0 && ;movehit
;trigger1= var(12)>=1 || (var(12)<=0 && command!="holdup")
trigger1= !time;prevstateno=3100
value=3037
ignorehitpause=0
persistent=0

[State 3120, Vel]
type=velset
trigger1= anim=3036 && animelem=5
trigger2= anim=3037 && animelem=4
x=ifelse(anim=3037,2,12)
y=ifelse(anim=3037,-14,-12)

[State 3120, Vel]
type=velmul
trigger1= 1
x=.88
[State 3120, Vel]
type=velmul
trigger1= vel y>0
x=0

[State 3120, Snd]
type=playsnd
trigger1= anim=3036 && animelem=5
trigger2= anim=3037 && animelem=4
value=5,10

;[State 3120, Dust]
;type=helper
;trigger1= anim=3036 && animelem=5
;trigger2= anim=3037 && animelem=4
;helpertype=normal
;stateno=7100
;ID=7100
;name="Dust"
;postype=p1
;ownpal=1




[State 3120, lowhits]
type=hitdef
trigger1= animelem=4 && anim=3036
trigger2= animelem=3 && anim=3037
ID=3120
attr=S,HA
damage= ifelse(anim=3036, 192, 74), ifelse(anim=3036, 24, 9)
animtype=Hard
air.animtype=Hard
fall.animtype=Hard
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime=ifelse(anim=3036,60,45),ifelse(anim=3036,50,45)
guard.pausetime=12,12
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy=-10,ifelse((anim=3036),-79,-90)
hitsound   = S1,14
guardsound = S1,15
p2facing=1
ground.type=Low
ground.slidetime=16
ground.hittime=16
ground.velocity= .77, -6
ground.cornerpush.veloff = 0
air.type=Low
air.velocity= .77, -6
guard.velocity= -10.52
guard.cornerpush.veloff = -12.74
getpower=0
givepower=36,36
envshake.time=24
envshake.freq=120
envshake.ampl=8
fall=1
fall.recover=0
kill= ifelse(anim=3036, (numenemy>1), (numtarget!=numenemy))
yaccel=.6
forcestand=1


[State 3120, shoryuuhits]
type=hitdef
trigger1= anim=3036 && animelemtime(5)>=0 && !(animelemtime(5)%3)
attr=A,HA
damage=28,7
animtype=Up
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime=6,6
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy=-10,-106
hitsound   = S1,14
guardsound = S1,15
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-3,-10
air.type=Low
air.velocity=-3,-10
ground.cornerpush.veloff = 0
guard.velocity= -10.52
guard.cornerpush.veloff = -12.74
getpower=0
givepower=36,36
envshake.time=18
envshake.freq=120
envshake.ampl=6
fall=1
fall.recover=0
yaccel=.5
forcestand=1

[State 3120, shinshoryuuhits]
type=hitdef
trigger1= (animelem=4 || animelem=5) && anim=3037
ID= 100000
attr=A,HA
damage=114,9
animtype=Up
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime=ifelse((animelem=5),36,12),ifelse((animelem=5),36,12)
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy=-15,-103
hitsound   = S1,14
guardsound = S1,15
p2facing=1
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity= ifelse((animelem=4),0,-2), ifelse((animelem=4),-12,-30)
air.type=Low
air.velocity= ifelse((animelem=4),0,-2), ifelse((animelem=4),-12,-30)
ground.cornerpush.veloff = 0
guard.velocity= -10.52
guard.cornerpush.veloff = -12.74
getpower=0
givepower=36,36
envshake.time=24
envshake.freq=120
envshake.ampl=8
fall=1
fall.recover=0
fall.envshake.time=18
fall.envshake.freq=120
fall.envshake.ampl=6
kill= 1;(numtarget!=numenemy) || (animelem=5)
yaccel=.6
forcestand=1




[State 1310, fatality]
type=targetstate
triggerall= enemynear, life<=0
triggerall= roundstate!=2
trigger1= anim=3037 && animelem=5
value=100000
ID=100000
ignorehitpause=1

[state 1051, fatality]
type = helper
triggerall= enemynear, life<=0
triggerall= roundstate!=2
trigger1=  anim=3037 && animelem=5
name = "P01"
id = 1000000
stateno = 1000000
postype = p1
pos = 60,5
sprpriority = -1
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 3120, fix]
type=targetbind
trigger1= numtarget(3120)=1
trigger1= (target,stateno!=[120,155]) && !(target(3120),hitshakeover)
trigger1= anim=3036 && animelemtime(4)>=0 && animelemtime(5)<0
ID=3120
pos= 38+target(3120),const(size.mid.pos.x), -88-target(3120),const(size.mid.pos.y)
ignorehitpause=1

[State 3120, fix]
type=targetbind
trigger1= numtarget(3120)=1
trigger1= (target,stateno!=[120,155]) && !(target(3120),hitshakeover)
trigger1= anim=3037 && animelemtime(3)>=0 && animelemtime(4)<0
ID=3120
pos= 24+target(3120),const(size.mid.pos.x), -98-target(3120),const(size.mid.pos.y)
ignorehitpause=1

[State 3120, Sparks]
type=helper
triggerall= movehit && numtarget
triggerall= (target,movetype=H) && !(target,time)
trigger1= anim=3036 && animelemtime(4)>=0 && animelemtime(5)<0
trigger2= anim=3037
helpertype=normal
stateno=7050
ID=7050
name="Shin Shoryuken Spark"
postype=p1
pos= ifelse(anim=3037, 26, 36), ifelse((anim=3037 && animelem=5), -128, ifelse((anim=3037 && animelem=4), -109, ifelse((anim=3037 && animelem=3), -90, -80)))
ownpal=1
facing=-1
ignorehitpause=1
pausemovetime=255
supermovetime=255

;[State 3120, Snd]
;type=playsnd
;trigger1= movehit=1
;trigger1= anim=3036 && animelemtime(5)<0
;value=3,4
;channel=0
;ignorehitpause=1
;persistent=0

;[State 3120, Snd]
;type=playsnd
;trigger1= anim=3036 && animelem=5
;value=4,1
;channel=0
;ignorehitpause=1
;persistent=0

[State 3120, Snd]
type=playsnd
trigger1= anim=3037 && animelem=1
value=5,15
channel=0
ignorehitpause=1
persistent=0

[State 3120, Snd]
type=playsnd
trigger1= anim=3037 && animelem=4
value=5,16
channel=0
ignorehitpause=1
persistent=0

[State 3120, Dust]
type=helper
triggerall= movehit && numtarget
triggerall= (target,movetype=H) && !(target,time)
trigger1= anim=3036 && animelemtime(4)>0 && animelemtime(5)<0
trigger2= anim=3037 && animelemtime(5)<0
helpertype=normal
stateno=3125
ID=3125
name="B&W Dust"
postype=p1
pos=0,0
ownpal=1
ignorehitpause=1
size.xscale=2
size.yscale=2

[State 3120, statetype]
type=statetypeset
trigger1= anim=3036 && animelemtime(5)>=0
trigger2= anim=3037 && animelemtime(4)>=0
trigger3= anim=1013 || anim=3039
statetype=A
physics=N

[State 3120, grav]
type=gravity
trigger1= anim=3036 && animelemtime(5)>0
trigger2= anim=3037 && animelemtime(4)>0
trigger3= anim=1013 || anim=3039

[State 3120, Anim]
type=changeanim
trigger1= anim=3036 && animelemtime(5)>0 && vel y>-5
trigger2= anim=3037 && animelemtime(4)>0 && vel y>-4
value=ifelse(anim=3037,3039,1013)
persistent=0

[State 3120, Anim]
type=changeanim
trigger1= pos y>=-10 && (anim=1013 || anim=3039)
value=ifelse(anim=1013,1015,3038)
persistent=0

[State 3120, Vel]
type=velset
trigger1= anim=1015 || anim=3038
y=0

[State 3120, Pos]
type=posset
trigger1= anim=1015 || anim=3038
y=0

[State 3120, Snd]
type=playsnd
trigger1= anim=1015 || anim=3038
value=0,52
persistent=0

[State 3120, Dust]
type=explod
trigger1= anim=1015 || anim=3038
anim=7102
ID=7102
sprpriority=-2
postype=p1
pos=0,0
vel=0,0
ownpal=1
scale=.5,.5
persistent=0
pausemovetime=-1
supermovetime=-1

[State Idle]
type=statetypeset
trigger1= anim=1013 || anim=3039 || anim=1015 || anim=3038
movetype=I

[State 3120, End]
type=changestate
trigger1= anim=3100 && !animtime
value=0
ctrl=1




[State 3120, End]
type=changestate
trigger1= (anim=1015 || anim=3038) && !animtime
value=ifelse(anim=3038,11,0)
ctrl=1

;---------------------------------------------------------------------

[Statedef 3125]
physics=N
anim=9741

[State 3125, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause=1

[State 3125, Dust]
type=explod
trigger1= !time
anim=3130
ID=3125
sprpriority=-2
postype=p1
removetime=16

[State 3125, Fade]
type=palfx
trigger1= !time
color=0
mul=384,384,384
sinadd=-255,-255,-255,64
time=16

[State 3125, Shrink]
type=modifyexplod
trigger1= 1
ID=3125
scale=.2+(.05*time)*const(size.xscale),.05+(.0125*time)*const(size.yscale)
[State 3125, End]
type=destroyself
trigger1= time>=17

[Statedef 3165]
physics=N
velset=0,0
anim=3165
sprpriority=3

[State 3165, Assert]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 3165, Bind]
type=bindtoroot
trigger1= 1

[State 3165, image]
type=afterimage
trigger1= !time && !prevstateno
time=999
timegap=1
framegap=1
length=3
palcontrast=120,30,30
trans=add

[State 3165, End]
type=destroyself
trigger1= !animtime


[Statedef 7050]
physics=N
velset=0,0
anim=9741

[State 7050, palfx]
type=palfx
trigger1= time=5
time=10
add=0,0,0
sinadd=-255,-255,-255,40

[State 7050, Circle]
type=explod
trigger1= !time
anim=7051
ID=7051
sprpriority=5
postype=p1
removetime=15
pausemovetime=-1
supermovetime=-1

[State 7050, Circle]
type=explod
trigger1= !time
anim=7050
ID=7050
sprpriority=5
postype=p1
removetime=15
pausemovetime=-1
supermovetime=-1

[State 7050, Shrink]
type=modifyexplod
trigger1= 1
ID=7051
scale=.15*time,.15*time

[State 7050, Shrink]
type=modifyexplod
trigger1= 1
ID=7050
scale=.05*time,.05*time

[State 7050, No Shadow]
type=assertspecial
trigger1= 1
flag=invisible
ignorehitpause=1

[State 7050, Safety]
type=removeexplod
trigger1= time>=15
ID=7050

[State 7050, End]
type=destroyself
trigger1= time>=15

;--------------------------------------------------------------------

; tatsu ar
[Statedef 3045]
type = A
movetype = A
physics = N
poweradd = -1000
velset = 0, 0
ctrl = 0
juggle=ifelse((prevstateno=[1000,4999]),0,6)*!var(33)
anim = 1710

[State 0, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,21
channel = 0

[State 1050, efeito]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,1


[State 0, 1]
type = SuperPause
trigger1 = AnimElem = 1
time = 45
anim = -1
movetime = 45
darken = 0
poweradd = 0
unhittable = 1
ignorehitpause = 1



[State 3000, strengthvar]
type=varset
trigger1= var(54)!=5
var(54)=5

[State 3000, superchargehelper]
type=helper
trigger1= animelem=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos =  1, -48
ownpal=1
persistent=0
supermovetime=9999


[State 0, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 3046

;---------------------------------------------------------------------

[Statedef 3046]
type = A
movetype = A
physics = N
velset = 0, -1.6
ctrl = 0
anim = 1711


[State 0, Helper]
type = Helper
trigger1 = animelem=1
helpertype = normal ;player
name = "kick flame"
ID = 1159
stateno = 1159
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermove
pausemove
size.xscale =.5
size.yscale =.6



[State 1500, 1]
type = HitBy
trigger1 = time <= 10
value = SCA, HA, HP
time = 1

[State 0, ]
type = PlayerPush
trigger1 = 1
value = 0




[State 1030, voz]
type = PlaySnd
trigger1 = time=0
value = 0,17



[State 0, ]
type = Width
trigger1 = 1
edge = 50,50



[State 0, 1]
type = VelAdd
triggerall = (Vel X <= 2.5) && (Time >= 5)
trigger1 = Command = "holdfwd"
x = 0.35

[State 0, 2]
type = VelAdd
triggerall = (Vel X >= -2.7) && (Time >= 5)
trigger1 = Command = "holdback"
x = -0.35

[State 0, 2]
type = VelAdd
triggerall = (Vel Y >= -2.0) && (Time >= 5)
trigger1 = Command = "holdup"
y = -0.35

[State 0, 2]
type = VelAdd
trigger1 = (Pos Y >= 0) && (Time >= 5)
y = 0.17

[State 0, 2]
type = PosSet
trigger1 = Pos Y > 0
y = 0




[State 0, 1]
type = VelAdd
trigger1 = 1
y = .03




[State 1061, 4]
type = HitDef
trigger1 = AnimElem = 3 
attr = A, SA
damage    = 13, 2
getpower  = 0
givepower = 35 ,35
guardflag = MA
pausetime = 5,ifelse(time >76,10,3)
sparkxy = -5,-62
sparkno = s2558+(random%4)
guard.sparkno = S8035
hitsound   = S1,13
guardsound = S1,15
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = 15,-1
air.velocity = 15,-1
p2facing = 1
getpower=0
snap = 45,-10
envshake.time = 5
fall.envshake.time = 10
fall = 1
fall.recover = 0
yaccel = .5


[State 1061, 4]
type = HitDef
trigger1 = AnimElem = 6 
attr = A, SA
damage    = 13, 2
getpower  = 0
givepower = 35 ,35
guardflag = MA
pausetime = 5,ifelse(time >76,10,3)
sparkxy = -5,-62
sparkno = s2558+(random%4)
guard.sparkno = S8035
hitsound   = S1,13
guardsound = S1,15
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -15,-1
air.velocity = -15,-1
p2facing = -1
getpower=0
snap = -45,-10
envshake.time = 5
fall.envshake.time = 10
fall = 1
fall.recover = 0
yaccel = .5



[State 0, 1]
type = ChangeState
trigger1 = time = 68
value =1069




;------------------------------------------------------------------------------------------


[Statedef 1159]
ctrl = 0
sprpriority = 5
anim=4150

[State 1225, Bind]
type = BindToParent
trigger1 = Time = 0
time = -1
pos = 0,-50
;ignorehitpause = 0
;persistent = 1

[State 1225, Shadowless]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 2200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 5,6



[State 1225, Eliminate]
type = DestroySelf
trigger1 = parent, stateno != 3046


;---------------------------------------------------------------------

[Statedef 3039]
type = S
movetype = A
physics = N
poweradd =-3000
velset = 0, 0
ctrl = 0
anim = 817

[State 740, fx]
type=helper
trigger1= !numhelper(3040)
helpertype=normal
stateno=3040
ID=3040
name="leech"
postype=p1
pausemovetime=65535
supermovetime=65535



[State 3000, efeito]
type = PlaySnd
trigger1 = animelem = 2
value = 9,6
volume = 10

[State 7260, main]
type=explod
trigger1= !time
anim=2716
ID=2716
sprpriority=5
pos = -3,-60
postype=p1
removetime=20
supermovetime=300
ownpal = 1

[State 7260, shrinkcircle]
type=modifyexplod
trigger1= 1
ID=2716
scale=2-(.1*time),2-(.1*time)



[State 817, superpause]
type=superpause
trigger1= !time
time=33
anim=-1
sound=-1
darken=0
movetime=33*(anim=817)



[State 0, 1]
type = Explod
trigger1 = animelem = 4
anim = 998
scale = 1,1
postype = p1
pos = 0,0
sprpriority = 5
supermove = 1
ownpal = 1


[State 750, Left Timer]
Type = Explod
Trigger1 = !Time
Anim = 8800
ID =  8800
PosType = Left
Pos = 25,210
BindTime = -1
RemoveTime = -1
SprPriority = 6
OwnPal = 1


[State 750, Left Meter]
Type = Explod
Trigger1 = !Time
Anim = 8801
ID =  8801
PosType = Left
Pos = 25,210
BindTime = -1
RemoveTime = -1
SprPriority = 7
OwnPal = 1



[State 750, timer countdown]
type = varset
trigger1 = !time
var(18) = 900




[State 1000, ChangeState]
type = ChangeState
trigger1 = animTime =0
value = 0
ctrl = 1



; Gou Hadou
[Statedef 1957]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd=72*!var(33)
ctrl = 0
anim = 1957


[State 1050, Hadouken]
type=helper
trigger1= animelem = 4
helpertype=normal
name = "hadouken"
ID = 1958
stateno = 1958
postype=p1
pos=50,-61
ownpal=1
size.xscale=.5
size.yscale=.5

[State 620, 4]
type = velset
trigger1 = animelem = 4
x = -1.8
y = -7.5


[State 0, PosFreeze]
type = PosFreeze
trigger1 = time = [10,15]
value = 1


[State 0, PlaySnd]
type = PlaySnd
trigger1=animelem = 3
value = S1,18
volume = 0


[State 1100, ChangeState]
type = ChangeState
triggerall = var(12)<=0
triggerall = roundstate = 2
triggerall = time >= 27
triggerall = Pos Y <= -35
trigger1 = command = "x"
value = 1959


[State 1100, ChangeState]
type = ChangeState
triggerall = var(12)>=1
triggerall = roundstate = 2
triggerall = Pos Y <= -40
trigger1 = time = [28,50]
value = 1959


[Statedef 1958]
type=A
physics=N
movetype=A
anim=1958
ctrl=0
velset=0,0
sprpriority=4

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3021, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1011
ignorehitpause=1

[State 3021,hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1




[State 3021, vel]
type=velset
trigger1=!time
x=4.3
y=3.8

[State 3021, hit]
type=hitdef
trigger1=1
priority=7,Hit
attr=A,SP
damage=40,5
animtype=Hard
fall.animtype=Back
hitflag=MAFD
guardflag=HA
pausetime=4,4
sparkno=-1
sparkxy=-10,0
guard.sparkno=s1005
hitsound = S1,25
guardsound = S1,15
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-4,0
ground.cornerpush.veloff=0
air.velocity=-1,-.5
down.hittime=20
down.velocity=0,0
air.fall=1
fall.recover=0
getpower= ifelse(p2movetype=H,72,144)*!var(33), 36*!var(33)
givepower=36,36
envshake.time=11
envshake.freq=90
envshake.ampl=3
sprpriority=4


[State 3021, sparks]
type=explod
trigger1=movehit&&numtarget
trigger1=!(target,time)&&target,movetype=H
anim=2554+(random%4)
ID=2704
sprpriority=5
postype=left
pos=ceil((target,pos x)-((target,const(size.ground.front)-10)*facing)+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 3021, end]
type=changestate
trigger1=movecontact
value=1011
ignorehitpause=1

[State 3021, end]
type=changestate
trigger1=pos y>=0
value=1011
ignorehitpause=1

[State 3021, end]
type=destroyself
trigger1=frontedgedist<-120||backedgedist<-120





; Gou Hadou
[Statedef 1959]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd=72*!var(33)
ctrl = 0
anim = 1959


[State 1050, Hadouken]
type=helper
trigger1= animelem = 2
helpertype=normal
name = "hadouken"
ID = 1958
stateno = 1958
postype=p1
pos=50,-61
ownpal=1
size.xscale=.5
size.yscale=.5


[State 620, 4]
type = velset
trigger1 = animelem = 2
x = -2
y = -5.5


[State 0, PlaySnd]
type = PlaySnd
trigger1=animelem = 2
value = S1,18
volume = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelemtime(10) >=2
value = 1



;------------------------------------------------------------------------------------------


;hadouleecher
[Statedef 3040]
type=A
physics=N
movetype=I
poweradd =250
sprpriority=2
ctrl=0


[State 77, anim]
type=changeanim
trigger1= selfanimexist(root,anim)
value=(root,anim)
elem=(root,animelemno(0))

[State 75, hitoverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=3040
ignorehitpause=1

[State 75,hitby]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1


[State 75, bind]
type=bindtoroot
trigger1= 1
facing=1
time=-1



[State 75, noshadow]
type=assertspecial
trigger1= 1
flag=invisible
flag2=noshadow




[State 75, end]
type=destroyself
trigger1 = !root,var(18)
trigger2= roundstate!=2
;trigger3= root,movetype=H




;Non-Intrusive Armor_ShinRa358
[Statedef 3041]
type = U
movetype = I
physics = N
ctrl = 0

[State 9393, ]
type = BindToRoot
trigger1 = 1
ignorehitpause = 1



[State 9393, ChangeAnim]
type = ChangeAnim
trigger1 = selfanimexist(root,anim)
elem = root,animelemno(0)
value = root,anim

[State 9393, ]
type = HitBy
trigger1 = 1
value = SCA,AA,AP

[State 9393, ]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = noshadow 

[State 9393, ]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP
stateno = 3042
time = -1
slot = 0

[State 9393, ]
type = DestroySelf
trigger1 = root,var(39)!=1



;Excel Armor End
[Statedef 3042]
type = U
movetype = H 
physics = N
ctrl = 0


[State 9394, ]
type = BindToRoot
trigger1 = 1
ignorehitpause = 1

[State 9394, ChangeAnim]
type = ChangeAnim
trigger1 = selfanimexist(root,anim)
elem = root,animelemno(0)
value = root,anim

[State 9394, ]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9394, ]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = noshadow

[State 9394, ]
type = ChangeState 
trigger1 = 1  
value = 3041

[State 9394, ]
type = DestroySelf
trigger1 = !(enemynear,movehit)
trigger2 = (root,var(39)!=1)




;voadora expecial
[Statedef 3060]
type = A
movetype = A
physics = N
poweradd = -1000
velset = 0, 0
ctrl = 0
anim = 1454
juggle=ifelse((prevstateno=[1000,4999]),0,6)*!var(33)

[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 45
anim = 0
sound = -1
movetime =  45
darken = 0
p2defmul = 1
unhittable = 1

[State 3100, BGInvert]
type = BGPalFX
trigger1 = Time < 39
time = 2
invertall = 0
mul = 0, 0, 0
ignorehitpause = 1



[State 0, PosFreeze]
type = PosFreeze
trigger1 = time = [1,45]
value = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 3491

[State 0, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,21
channel = 0

[State 0, ]
type = VelSet
trigger1 = AnimElem = 3
x = 10
y = 11


[State 3000, Effect]
type = Explod
trigger1 = AnimElem = 2
Anim = 3068
pos = -30, -5
postype = p1
ownpal = 1
bindtime = -1
ignorehitpause = 1
scale = .7,.7
sprpriority = 3
removetime = -1
removeongethit = 1
ID = 3069




[State 3000, strengthvar]
type=varset
trigger1= var(54)!=5
var(54)=5

[State 3000, superchargehelper]
type=helper
trigger1= animelem=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos =  23, -85
ownpal=1
persistent=0
supermovetime=9999



[State 3000, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = A, HA
hitflag=MAFD   
guardflag = H
priority = 5, Hit
damage = 20, 3
pausetime = 0, 0
guard.pausetime = 8, 8
sparkxy = -15, -25
sparkno = -1
guard.sparkno = S8036
hitsound   = S1,14
guardsound = S1,15
guard.velocity = -8
p2facing = 1
fall = 1 
fall.recover = 0
ID = 999
getpower = 0, 0

[State 3000, 5]
type = TargetState
trigger1 = numtarget(999) && movehit
value = 3063
persistent = 0


[State 3000, 5]
type = NotHitBy
trigger1 = numtarget(999) && movehit
value = SCA
persistent = 1
ignorehitpause = 1

[State 3000, Hitspark]
type = Explod
trigger1 = p2stateno = 3063 && movehit
Anim = 2558+(random%4)
pos = 46, -25
postype = p1
ownpal = 1
sprpriority = 10
ontop = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
persistent = 0


[State 3000, Width]
type = Width
trigger1 = animelemtime(5) >= 0
edge = 40, 0

[State 3000,TargetBind]
type = TargetBind
trigger1 = p2stateno = 3063 && movehit
pos = 46, -25

[State 3000, 4]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = ifelse((p2stateno = 3063 && movehit),3061, 1452)


;---------------------------------------------------------------------

;Guillotine: Running
[Statedef 3061]
type    = S
movetype =  A
physics = N
anim = 3061
velset = 0, 0
sprpriority = 1

[State 3010, Pos]
type = PosSet
trigger1 = time = 0
y = 0



[State 3010, 5]
type = TargetState
trigger1 = Time = 0
value = 3064

[State 3010, 8]
type = EnvShake
trigger1 = Time = 0 || animelem = 2 || animelem = 5 
time = 8
ampl = 6

[State 3010, 1]
type = VelSet
trigger1 = animelem = 2
x = 5

[State 3010, 1]
type = Playerpush
trigger1 = 1
value = 0

[State 3010, TargetBind]
type = TargetBind
trigger1 = animelem = 1 || animelem = 3 || animelem = 4 || animelem = 6
pos = 42, -13
time = 3

[State 3010, TargetBind]
type = TargetBind
trigger1 = animelem = 2 || animelem = 5 
pos = 42, -11
time = 3

[State 3010, Effect]
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = 1,12
channel = 19
persistent = 1

[State 3010, Effect]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = 1,12
channel = 20
persistent = 1



[State 3010, Effect]
type = Explod
trigger1 = Time = 0
Anim = 3067
pos = 35, 0
postype = p1
ownpal = 1
bindtime = -1
ignorehitpause = 1
scale = .5,.5
sprpriority = 3
ID = 3067
removetime = -1



[State 3010, Width]
type = Width
trigger1 = 1
edge = 40, 0

[State 3010, Hitspark]
type = Explod
trigger1 = animelem = 2 || animelem = 5 
Anim = 2558+(random%4)
pos = 42, -11
postype = p1
ownpal = 1
sprpriority = 10
ontop = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1

[State 3010, 9]
type = HitAdd
trigger1 = animelem = 2 || animelem = 5 
value = 1

[State 3010, 9]
type = TargetLifeAdd
trigger1 = time = 0
value = -50
kill = 0

[State 3010, 9]
type = TargetLifeAdd
trigger1 = animelem = 2 || animelem = 5 
value = -20
kill = 0

[State 3010, 5]
type = ChangeState
trigger1 = Time = 36
value = 3065


;Hit By Guillotine: Going Down
[Statedef 3063]
type    = A
movetype =  H
physics = N
velset = 0,0
sprpriority = -1

[State 3005, screenbound]
type = screenbound
trigger1 = 1
movecamera = 0
value = 1

[State 3005, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 3063

[State 3005, 10]
type = SelfState
trigger1 = Pos Y >= 0
value = 5110

;p2 arrastando
[Statedef 3064]
type    = A
movetype =  H
physics = N
velset = 0,0
sprpriority = -1

[State 3015, screenbound]
type = screenbound
trigger1 = 1
movecamera = 0
value = 1


[State 3015, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 3064



[State 5110, 11] 
type = SelfState
trigger1 = time=36
value = ifelse(alive, 5110, 5150)




[StateDef 3065]
type = A
movetype= A
physics = A
juggle  = 0
velset = 0,0
anim = 3065
ctrl = 0
poweradd = 20
sprpriority = 2

[State 3020, Effect]
type = RemoveExplod
trigger1 = Time = 0
ID = 3067

[State 3020, 5]
type = TargetState
trigger1 = Time = 0
value = 3066

[State 3010, 8]
type = EnvShake
trigger1 = Time = 0
time = 8
ampl = 6

[State 0, Velset]
type = VelSet
trigger1 = 1
x = -2.9

[State 0, VelAdd]
type = VelAdd
trigger1 = animelem = 1
y = -7

[State 0, VelAdd]
type = VelAdd
trigger1 = animelem = 2
y = -3

[State 0, VelAdd]
type = VelAdd
trigger1 = animelem = 3
y = -1




;[State 0, ctrlset]
;type = ctrlset
;trigger1 = time>=17
;value=1






[Statedef 3066]
type    = A
movetype =  H
physics = N
velset = 0,0
sprpriority = -1


[State 803, Vel]
type = posset
trigger1 = pos y<=0
y=0

[State 3015, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 5110


[State 5110, 11] 
type = SelfState
trigger1 = time=59
value = ifelse(alive, 5120, 5150)


;--------------------------------------------------------------------

;super shinryuken 
[Statedef 3055]
type = S
movetype = A
physics = S
juggle = 8
anim = 3055
poweradd= -3000
sprpriority = 2
velset = 0,0
ctrl = 0

[State 1010, Nullify]
type = NotHitBy
trigger1 = time > 2
value = S,AP

[State 1040, efeito]
type = PlaySnd
trigger1 = Time = 0
value = 9,8


[State 3050, PalFX]
type = PalFX
trigger1 = PrevStateNo = [1000,4000]
trigger1 = Time < 42
time = 1
color = 12+(time*3)
add = 180-(time*3),180-(time*3),180-(time*3)
ignorehitpause = 1

[State 3000, Muteki]
type = NotHitBy
trigger1 = time >= 1
value = SCA



[State 3050, Superpause]
type = SuperPause
trigger1 = Time = 1 
time = 60
movetime = 60
anim = -1
sound = S1, 21
poweradd = -3000
darken = 0

[State 3000, strengthvar]
type=varset
trigger1= var(54)!=7
var(54)=7

[State 3000, superchargehelper]
type=helper
trigger1= animelem=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos = 20,-25
ownpal=1
persistent=0
supermovetime=9999

[State 3000, AfterImage]
type = AfterImage
trigger1 = time = 1
time = 20
TimeGap  = 2
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifelse (!Var(5), 128, 40*Var(5)),ifelse(!Var(5), 128, ifelse(Var(5) = 1, 40, 25)),ifelse(!Var(5), 128, ifelse(Var(5) = 1, 40, 25))
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 3000, Spark 2]
type = Explod
trigger1 = Time = 1
anim = 1889
postype = p1
pos = 14, -25
ontop = 1
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1
scale = .9,.9


[State 3700, ChargeSpecial]
type = PlaySnd
trigger1 = time = 1
persistent = 0
value = 1,21

[State 820, Spark]
type = Explod
trigger1 = Anim = 820 && AnimElemTime(1) >= 0 && (!NumExplod(8000) && !NumExplod(8005))
Anim = 8001
pos = 0, 0
postype = p1
sprpriority = 4
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ID = 8000

[State 820, Spark]
type = Explod
trigger1 = Anim = 820 && AnimElemTime(1) >= 0 && !NumExplod(8001) && NumExplod(8000)
Anim = 8010
pos = 0, 0
postype = p1
ontop = 0
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ID = 8001


[State 820, StateChange]
type = ChangeState
trigger1 = AnimTime = 0
value = 3999
ctrl = 0

;------------------------------------------------------------------------------------------

;Dragon's Bite
[Statedef 39998]
type    = A
movetype = A
physics = N
juggle = 0
anim = 39998
velset = 0,0
ctrl = 0
poweradd=60*!var(33)


[State 1040, efeito]
type = PlaySnd
trigger1 = Time = 0
value = 1,1
channel = 20

[State 1040, efeito]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1, 10
channel = 1

[State 1040, voz]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,13
channel = 0


[State 1040, Velocity]
type = VelSet
trigger1 = Time = 1
x = 1
y = -12

[State 1040, Velocity]
type = VelSet
trigger1 = Time = 3
x = 2
y = -1

[State 1040, Velocity]
type = VelAdd
trigger1 = Time > 1
y = .65

[State 1040, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Up
air.animtype = up
damage  = 49,0
hitflag = MAF
guardflag = MA
pausetime = 13, 7
sparkno = s2554+(random%4)
guard.sparkno = S8036
sparkxy = -17, -60
hitsound   = S1,13
guardsound = S1,15
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 16
ground.velocity = -5, 13
guard.velocity = -12
air.velocity = -5, 13
ground.cornerpush.veloff = 0
envshake.time = 15 + (Var(5)*2)
envshake.ampl = 5 + (Var(5)*2)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
id=2400

[State 1050, ChangeState]
type = ChangeState
triggerall = var(12)<=0
trigger1 = movecontact
trigger1 = command = "chuva"
trigger1 = statetype=A
value = 3020
ctrl = 0


[State 2400, 0]
type = TargetState
trigger1 = time > 1 && numtarget(2400) && movehit && p2movetype = H
value = 2405
ignorehitpause = 0
persistent = 0

[State 1050, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52
ctrl = 1

;------------------------------------------------------------------------------------------

[Statedef 2405]
type    = A
movetype= H
physics = N
velset = 0,0


[State 2405, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2405, Anim]
type = ChangeAnim2
trigger1 = 1
value = 5030

[State 2405, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 2406

;---------------------------------------------------------------------------
;p2
[Statedef 2406]
type    = A
movetype= H
physics = N


[State 2406, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2406, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 2406, Gravity]
type = VelAdd
trigger1 = 1
y = .35


[State 2406, Hit ground]
type = Changestate
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 2407

;---------------------------------------------------------------------------
; P2 
[Statedef 2407]
type    = A
movetype= H
physics = N


[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14


[State 1123, 6]
type = EnvShake
trigger1 = time =1
time = 20
ampl = 5

[State 2407, Pos]
type = PosSet
trigger1 = time = 0
y = 0

[State 2407, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2407, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 2407, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 2407

[State 2407, State]
type = changestate
trigger1 = random<390
value = 2408


[State 2407, State]
type = selfstate
trigger1 = random<610
value = 5100

;---------------------------------------------------------------------------
; P2 
[Statedef 2408]
type    = A
movetype= H
physics = N


[State 2408, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2408, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 2408, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 2407

[State 2408, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 2409

;---------------------------------------------------------------------------
; P2 
[Statedef 2409]
type    = A
movetype= H
physics = N


[State 2409, Vel]
type = VelSet
trigger1 = Time = 0
y = -11.4
x = -1.4

[State 2409, Gravity]
type = VelAdd
trigger1 = 1
y = .4

[State 2409, Anim 2409]
type = ChangeAnim2
trigger1 = Time = 0
value = 2409

[State 2409, Anim 2407]
type = ChangeAnim2
trigger1 = Vel Y > 0
trigger1 = Anim = 2409
persistent = 0
value = 2407

[State 2409, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

[State 1123, 6]
type = EnvShake
trigger1 = time > 5
trigger1 = backedgedist <= 16
time = 10
ampl = 5

[State 1123, 7]
type = ChangeState
trigger1 = time > 5
trigger1 = backedgedist <= 15
value = 1111302


;---------------------------------------------------------------------------

;super shinryuken
[Statedef 3999]
type = S
movetype = A
physics = S
juggle = 8
anim = 3999
sprpriority = 2
velset = 0,0
ctrl = 0


[State 2700, Unblockable]
type = AssertSpecial
trigger1 = p2statetype=A
flag = unguardable


[State 3010, VA]
type = Explod
trigger1 = movehit
id = 2722
anim = 2722
ownpal = 1
pos = 160,52
postype = left
bindtime = -1
supermovetime = -1
sprpriority = 9
removetime = 75
scale = .8,.8
ontop = 1
ignorehitpause = 1

[State 1010, Nullify]
type = NotHitBy
trigger1 = time > 2
value = S,AP

[State 3700, Shinryuken!]
type = PlaySnd
trigger1 = animelem = 1
lowpriority = 3
persistent = 1
channel = 0
value = 2,2

[State 3000, Muteki]
type = NotHitBy
trigger1 = time >= 1
value = SCA

[State 3700, Explosion]
type = PlaySnd
trigger1 = time = 1
persistent = 1
channel = 1
value = 2,3

[State 3700, Flames]
type = PlaySnd
trigger1 = time = 3
persistent = 1
channel = 3
value = 2,4

[State 3710, 7]
type = HitDef
trigger1 = AnimElem = 1 
p2facing = 1
p2turn = 1
attr = S, SA
damage = 23, 10
animtype = Hard
priority = 4, Hit
hitflag = MAF
guardflag = MA
getpower=  (Var(10)=0)* 0
pausetime = 35,35
hitsound = S1,13
sparkxy = var(55), var(56)
sparkno = -1
guard.sparkno = S9300
guardsound = S0,100
ground.type = Low
air.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = 6, -1
air.velocity = 5, 2
down.velocity = -1,-7
palfx.time = 80
palfx.mul = 256,256,256
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.invertall = 0
palfx.color = 0
guard.pausetime = 2,0
guard.hittime = 0
guard.velocity = -8
envshake.time = 20


[State 3160, Dust]
type=helper
trigger1= movehit
helpertype=normal
stateno=3125
ID=3125
name="B&W Dust"
postype=p1
pos=0,0
ownpal=1
ignorehitpause=1
persistent=0
size.xscale=2
size.yscale=2


[State 3160, Sparks]
type=helper
triggerall= movehit=1 && numtarget
triggerall= (target,movetype=H) && !(target,time)
trigger1= anim=3999
helpertype=normal
stateno=7050
ID=7050
name="Shin Shoryuken Spark"
postype=p2
pos=(target,const(size.ground.front)-10),(ifelse(anim=3161,-75,-64) -floor(p2dist y))
ownpal=1
facing=-1
ignorehitpause=1
pausemovetime=255
supermovetime=255


[State 820, StateChange]
type = ChangeState
trigger1 = AnimTime = 0
value = 3058
ctrl = 0

;-------------------------------------------------------------------------------------------


; super Shinryuken 
[Statedef 3058]
type = A
movetype = A
juggle = 0
anim = 3058
velset = 0,0
ctrl = 0
sprpriority = 2

[State 2200, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 5,6

[State 1015, flames]
type=helper
trigger1= movehit && numtarget && numhelper(7180)<1
trigger1= !(target,time) && (target,movetype=H)
helpertype=normal
stateno=7180
ID=7180
name="flames"
postype=p2
bindtime=1000
ownpal=1
facing=-1
size.ground.front=0
size.ground.back=0
ignorehitpause=1

[State 2700, Unblockable]
type = AssertSpecial
trigger1 = p2statetype=A
flag = unguardable

[State 0, Explod]
type = Explod
trigger1 = time = 1
anim =3192
ID = 3192
pos = 8,-140
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
supermovetime = 0
pausemovetime = 9999
scale = 1,.9
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1


[State 0, Explod]
type = Explod
trigger1 = animelem = 18
anim =3191
ID = 3191
pos = 8,-140
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 0
pausemovetime = 99999
scale = 1,.9
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = anim=3095
id = 3192


[State 1010, Nullify]
type = NotHitBy
trigger1 = time >= 1
value = S,AP

[State 181, Randomizer]
type = VarRandom
trigger1 = 1
v = 36
range = -5,5

[State 181, Randomizer3]
type = VarRandom
trigger1 = 1
v = 35
range = 4, 10


[State 1000, Fire1]
type = Explod
trigger1 = movehit && pos y < - 100
persistent = 1
anim = 39996
id = 39996
postype= p2
pos= 14,-45
removetime = 48
sprpriority = 1
random = 20,40
ownpal = 1

[State 4110, start-effect_dust]
type = Helper
trigger1 = AnimElem = 2
name = "st-ef(dust)"
ID = 4117
stateno = 4117
postype = P1
pos = 0,0
vel = 0,0
facing  = -1
bindtime = 1
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
ignorehitpause = 1
persistent = 0


[State 181, Randomizer4]
type = VarRandom
trigger1 = 1
v = 38
range = -10,10

[State 181, Randomizer5]
type = VarRandom
trigger1 = 1
v = 37
range = 4, 10


[State 3710, 2]
type = velset
trigger1 = 1
x = 0

[State 3700,  shinryuken]
type = PlaySnd
trigger1 = MoveHit
persistent = 0
value = 11,13
volume = 30


[State 3700,  shinryuken]
type = PlaySnd
trigger1 = MoveHit
persistent = 0
value = 1,13
volume = 30



[State 3710, 1]
type = VelSet
trigger1 = Time = 1
y = -11

[State 3710, 1]
type = palfx
trigger1 = Time = 1
ignorehitpause = 1
time = 51
add = 0,0,0
sinadd = 110,50,0,100

[State 1500, 0]
type = Varset
trigger1 = p2bodydist X < -25
v = 7
value = 1

[State 1500, 0]
type = Varset
trigger1 = p2bodydist X > -5
v = 7
value = 0

[State 181, Randomizer]
type = VarRandom
trigger1 = 1
v = 55
range = -20,20

[State 181, Randomizer]
type = VarRandom
trigger1 = 1
v = 56
range = -120,-80

[State 3710, 7]
type = HitDef
triggerall = hitcount < 20
triggerall = var(7) = 0
trigger1 = AnimElem = 1 || AnimELem = 2 || AnimElem = 3 || AnimElem = 4 || AnimElem = 5 || AnimELem = 6
p2facing = 1
p2turn = 1
attr = S, SA
damage = 22, 9
animtype = Hard
priority = 4, Hit
hitflag = MAF
guardflag = MA
getpower=  (Var(10)=0)* 0
pausetime = 2,0
sparkxy = var(55), var(56)
sparkno = -1
guard.sparkno = S9300
guardsound = S0,100
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = 3, -5
air.velocity = 3, -7
fall = 1
fall.animtype = Hard
down.velocity = -1,-7
palfx.time = 80
palfx.mul = 256,256,256
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.invertall = 0
palfx.color = 0
guard.pausetime = 2,0
guard.hittime = 0
guard.velocity = -8
airguard.velocity = -1,-7
fall.recover = 0
air.recover = 0
envshake.time = 20

[State 3710, 7]
type = HitDef
triggerall = var(7) = 1
triggerall = hitcount < 20
trigger1 = AnimElem = 1 || AnimELem = 2 || AnimElem = 3 || AnimElem = 4 || AnimElem = 5 || AnimELem = 6
p2facing = -1
p2turn = 1
attr = S, SA
damage = 21, 9
animtype = Hard
priority = 4, Hit
hitflag = MAF
guardflag = MA
getpower=  (Var(10)=0)* 0
pausetime = 2,0
sparkxy = var(55), var(56)
sparkno = -1
guard.sparkno = S9300
guardsound = S0,100
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -3, -5
air.velocity = -3, -5
fall = 1
fall.animtype = Hard
down.velocity = -1,-7
palfx.time = 80
palfx.mul = 256,256,256
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.invertall = 0
palfx.color = 0
guard.pausetime = 2,0
guard.hittime = 0
guard.velocity = -8
airguard.velocity = -1,-7
fall.recover = 0
air.recover = 0
envshake.time = 20


[State 3710, 9]
type = HitDef
triggerall = hitcount >= 20
trigger1 = AnimElem = 1 || AnimELem = 2 || AnimElem = 3 || AnimElem = 4 || AnimElem = 5 || AnimELem = 6
attr = S, SA
damage = 31, 5
animtype = Hard
priority = 4, Hit
hitflag = MAF
guardflag = MA
pausetime = 2,0
sparkxy = var(55), var(56)
sparkno = -1
guard.sparkno = S9300
guardsound = S0,100
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -3, -9
air.velocity = -3, -9
fall = 1
fall.animtype = Hard
down.velocity = -1,-7
getpower=  0,0
palfx.time = 80
palfx.mul = 256,256,256
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.invertall = 0
palfx.color = 0
guard.pausetime = 2,0
guard.hittime = 0
guard.velocity = -8
airguard.velocity = -1,-7
fall.recover = 0
air.recover = 0
envshake.time = 25


[State 3710, apertar botao!]
type = HitDef
triggerall = Hitcount < 20
triggerall = var(7) = 0
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = Var(30) = 59 && p2life > 0
p2facing = 1
p2turn = 1
attr = S, SA
damage   = 26,5
guardflag = MA
hitflag = MAF
getpower=  (Var(10)=0)* 0
pausetime = 2,1
guardsound = S0,100
sparkxy = var(55), var(56)
sparkno = -1
guard.sparkno = S9300
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = 0,-4
fall = 1
fall.animtype = Hard
air.velocity = 3,-7
air.juggle = 0
air.fall = 1
down.velocity = 0,-7
down.hittime = 30
down.bounce = 1
palfx.time = 80
palfx.mul = 256,256,256
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.invertall = 0
palfx.color = 0
guard.pausetime = 2,0
guard.hittime = 0
guard.velocity = -8
airguard.velocity = -1,-7
fall.recover = 0
air.recover = 0
envshake.time = 15
envshake.freq = 70
envshake.ampl = 5

[State 3710, apertar botao! sugar]
type = HitDef
triggerall = Hitcount < 20
triggerall = var(7) = 1
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = Var(30) = 59 && p2life > 0
p2facing = -1
p2turn = 1
attr = S, SA
damage   = 26,5
guardflag = MA
getpower=  (Var(10)=0)* 0
hitflag = MAF
pausetime = 2,1
guardsound = S0,100
sparkxy = var(55), var(56)
sparkno = -1
guard.sparkno = S9300
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = 0,-4
fall = 1
fall.animtype = Hard
air.velocity = -3,-7
air.juggle = 0
air.fall = 1
down.velocity = 0,-7
down.hittime = 30
down.bounce = 1
palfx.time = 80
palfx.mul = 256,256,256
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.invertall = 0
palfx.color = 0
guard.pausetime = 2,0
guard.hittime = 0
guard.velocity = -8
airguard.velocity = -1,-7
fall.recover = 0
air.recover = 0
envshake.time = 15
envshake.freq = 70
envshake.ampl = 5


[State 3710, Button Mashing!]
type = HitDef
triggerall = Hitcount >= 20
triggerall = Hitcount < 25
triggerall = P2BodyDist X < 10
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = Var(30) = 59 && p2life > 0
attr = S, SA
getpower=  (Var(10)=0)* 0
damage   = 15,5
guardflag = MA
hitflag = MAF
pausetime = 2,1
guardsound = S0,100
sparkxy = var(55), var(56)
sparkno = -1
guard.sparkno = S9300
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -3,-7
fall = 1
fall.animtype = Hard
air.velocity = -3,-9
air.juggle = 0
air.fall = 1
down.velocity = 0,-7
down.hittime = 30
down.bounce = 1
palfx.time = 80
palfx.mul = 256,256,256
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.invertall = 0
palfx.color = 0
guard.pausetime = 2,0
guard.hittime = 0
guard.velocity = -8
airguard.velocity = -1,-7
fall.recover = 0
air.recover = 0
envshake.time = 15
envshake.freq = 80
envshake.ampl = 5


[State 3710, Button Mashing! suck in]
type = HitDef
triggerall = Hitcount >= 20
triggerall = Hitcount < 25
triggerall = P2BodyDist X > 10
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = Var(30) = 59 && p2life > 0
attr = S, SA
damage   = 15,5
getpower=  (Var(10)=0)* 0
guardflag = MA
hitflag = MAF
pausetime = 2,1
guardsound = S0,100
sparkxy = var(55), var(56)
sparkno = -1
guard.sparkno = S9300
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -3,-7
fall = 1
fall.animtype = Hard
air.velocity = -5,-9
air.juggle = 0
air.fall = 1
down.velocity = 0,-5
down.hittime = 30
down.bounce = 1
palfx.time = 80
palfx.mul = 256,256,256
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.invertall = 0
palfx.color = 0
guard.pausetime = 2,0
guard.hittime = 0
guard.velocity = -8
airguard.velocity = -1,-7
fall.recover = 0
air.recover = 0
envshake.time = 15
envshake.freq = 80
envshake.ampl = 5


[State 3710, 4]
type = VelAdd
trigger1 = Time > 5
y = .44


[State 3880, 9]
type = EnvShake
triggerall = vel y < 0
trigger1 = timemod = 3,2
Trigger1 = movehit
ignorehitpause = 1
time = 10
ampl = 3
freq = 100
phase = 1



[State 3450, Spark] 
type = Explod
triggerall = vel y < 0
trigger1 = timemod = 4,3
trigger1 = movehit
anim = ifelse(random>500,10421,10420)
pos = 0,-50
ignorehitpause = 1
sprpriority = -1
postype = p2
supermove = 1
bindtime = 1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
random = 5,5
scale = 0.7,0.7

[State 3880, 1]
type = envcolor
triggerall = vel y < 0
trigger1 = Hitcount > 18
trigger1 = movehit
value = 255, 10, 10
under = 1
time = 1

[State 3710, 5]
type = ChangeAnim
trigger1 = vel y > -1
trigger1 = time > 1
value = 3095
persistent = 0

[State 1500, 0]
type = Varset
trigger1 = vel y > 0
trigger1 = pos y >= 0
v = 28
value = 0

[State 3120, fatality]
type=hitdef
trigger1= animelem=5 && anim=3058
attr=A,HA
damage=0,0
animtype=Up
hitflag=MAF
priority=7,Hit
pausetime=0,0
sparkno = -1
guard.sparkno = -1
sparkxy=0,0
hitsound   = S1,14
guardsound = S1,15
p2facing=1
ground.type=High
ground.slidetime=0
ground.hittime=0
ground.velocity= 0,0
air.type=Low
air.velocity= 0
ground.cornerpush.veloff = 0
guard.velocity= 0
guard.cornerpush.veloff = 0
getpower=0
givepower=0,0
envshake.time=24
envshake.freq=120
envshake.ampl=8
ID=100000

[State 1310, fatality]
type=targetstate
triggerall= enemynear, life<=0
triggerall= roundstate!=2
trigger1=  anim=3058 ;&& animelem=5
value=100000
ID=100000
ignorehitpause=1

[state 1051, fatality]
type = helper
triggerall= enemynear, life<=0
triggerall= roundstate!=2
trigger1= anim=3058 ;&& animelem=5
name = "P01"
id = 1000000
stateno = 1000000
postype = p1
pos = 60,5
sprpriority = -1
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State Idle]
type=statetypeset
triggerall=anim=3095
trigger1= animelemtime(3)>=0
movetype=I

[State 3710, 7]
trigger1 = vel y > 0
trigger1 = pos y >= 0
type = ChangeState
value = 1015

;--------------------------------------------------------------------

[Statedef 7400]
type=A
physics=N
anim=9741


[State 7400, slow]
type=pause
trigger1= time<8
time=1

[State 7400, End]
type=destroyself
trigger1= time>=8

;------------------------------------------------------------------------------------------

;Shinryuken
[Statedef 3050]
type = S
movetype = A
physics = S
juggle=ifelse((prevstateno=[1000,4999]),0,8)*!var(33)
anim = 3050
sprpriority = 2
velset = 0,0
ctrl = 0



[State 3050, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = ifelse ((Command = "shinryu2" && Power >= 2000) || (Command = "shinryu3" && (Power >= 2000 && Power < 3000)), 1, ifelse (Command = "shinryu3" && Power >= 3000, 2, 0))

[State 3050, PalFX]
type = PalFX
trigger1 = PrevStateNo = [1000,4000]
trigger1 = Time < 42
time = 1
color = 12+(time*3)
add = 180-(time*3),180-(time*3),180-(time*3)
ignorehitpause = 1


[State 3050, Superpause]
type = SuperPause
trigger1 = Time = 1 
time = ifelse (Var(5) = 0, 45, ifelse (Var(5) = 1, 50, 55))
movetime = ifelse (Var(5) = 0, 45, ifelse (Var(5) = 1, 40, 35))
anim = -1
sound = S1, 21
poweradd = ifelse (Var(5) = 0, -1000, ifelse (Var(5) = 1, -2000, -3000))
darken = 0



[State 3000, strengthvar]
type=varset
trigger1= var(54)!=5 || var(54)!=6 || var(54)!=7
var(54)=ifelse (Var(5) = 0, 5, ifelse (Var(5) = 1, 6, 7))


[State 3050, AfterImage]
type = AfterImage
trigger1 = Anim != 1013 && AnimElem = 4
time = 999
TimeGap  = 2
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifelse (!Var(5), 128, 40*Var(5)),ifelse(!Var(5), 128, ifelse(Var(5) = 1, 40, 25)),ifelse(!Var(5), 128, ifelse(Var(5) = 1, 40, 25))
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 3000, superchargehelper]
type=helper
trigger1= animelem=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos = 14, -25
ownpal=1
persistent=0
supermovetime=9999

[State 3050, efeito]
type = PlaySnd
trigger1 = Anim != 1013 && (AnimElem = 6 || AnimElem = 12)
value = 1, 8


[State 3050, efeito]
type = PlaySnd
trigger1 = Anim != 1013 && AnimElem = 7 
value = 1,1


[State 3050, voz]
type = PlaySnd
trigger1 = Time = 0 || (Anim != 1013 && AnimElem = 5)
value = 0,ifelse (Time = 0, 20, 21)


[State 3050, Muteki]
type = NotHitBy
trigger1 = Anim != 1013 && AnimElemTime(7) < 0
value = SCA

[State 3050, StateType]
type = StateTypeSet
trigger1 = Anim != 1013 && AnimElem = 7
StateType = A
physics = N

[State 3050, Velocity]
type = VelSet
trigger1 = Anim != 1013 && AnimElem = 7
y = -(9.4 + Var(5))

[State 3050, Gravity]
type = VelAdd
trigger1 = Time > 49 && Vel Y
y = ifelse (Var(5) = 0, .45, ifelse(Var(5) = 1, .46, .47))

[State 3050, ChangeAnim]
type = ChangeAnim
trigger1 = Time > 49 && Vel Y > (0 + Var(5))
value = 1013
persistent = 0

[State 3050, VarSet]
type = VarSet
trigger1 = Anim != 1013 && AnimElemTime(7) >= 0
var(6) = ifelse ((Var(5) = 0 && Command = "a" || Command = "b") || (Var(5) = 1 && Command = "c" || Command = "c") || (Var(5) = 2 && Command = "a" || Command = "b"), 1, 0)

[State 3050, Regular]
type = HitDef
triggerall = p2statetype != A
trigger1 = Anim != 1013 && (AnimElem = 5 || AnimElem = 6)
attr = S, HA
animtype  = U
air.animtype  = Up
damage = 70,4
priority  = 4,Hit
hitflag = MAF
guardflag = M
pausetime = 8, 5
guard.pausetime = 8, 8
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = 8, ifelse (AnimElemTime(6) < 0, -36, -79)
hitsound   = S1,14
guardsound = S1,15
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
guard.ctrltime = 11
ground.velocity = ifelse(AnimElemTime(6) < 0, 5, 0), ifelse(AnimElemTime(6) < 0, 0, -7)
getpower=0
guard.velocity = 5
air.velocity = 0,-5
ground.cornerpush.veloff = 0
air.fall = 1
air.recover = 0
envshake.time = 20

[State 3050, RegularAir]
type = HitDef
triggerall = p2statetype = A
trigger1 = Anim != 1013 && (AnimElem = 5 || AnimElem = 6)
attr = S, HA
animtype  = U
air.animtype  = Up
damage = 75,4
priority  = 4,Hit
hitflag = MAF
guardflag = M
pausetime = 8, 7
guard.pausetime = 8, 8
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = 8, ifelse (AnimElemTime(6) < 0, -36, -79)
hitsound   = S1,14
guardsound = S1,15
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
guard.ctrltime = 11
getpower=0
ground.velocity = ifelse(AnimElemTime(6) < 0, 5, 0), ifelse(AnimElemTime(6) < 0, 0, -7)
guard.velocity = 5
air.velocity = 0,.90
ground.cornerpush.veloff = 0
air.fall = 1
air.recover = 0
envshake.time = 20



[State 3050, Mash1]
type = HitDef
trigger1 = Anim != 1013 && (AnimElemTime(7) >= 0 && TimeMod = 3, 0) && UniqHitCount < (8+Var(5))
attr = A, HA
animtype = DiagUp
damage = ifelse (!Var(5), 10, ifelse (Var(5) = 1, 15, 20)),ifelse (!Var(5), 4, ifelse (Var(5) = 1, 5, 6))
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 9, 5
guard.pausetime = 6, 5
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = 8, -115
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
guard.ctrltime = 15
ground.velocity = -1, -10
guard.velocity = -6
air.velocity = 0,-8
ground.cornerpush.veloff = 0
envshake.time = ifelse (AnimElemTime(7) = 0, 20, 0)
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
envshake.time = 20


[State 3050, Mash2]
type = HitDef
trigger1 = (Anim != 1013 && AnimElemTime(7) >= 0) && Var(6)
attr = A, HA
animtype = DiagUp
damage = ifelse (!Var(5), 10, ifelse (Var(5) = 1, 15, 20)),ifelse (!Var(5), 5, ifelse (Var(5) = 1, 6, 7))
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 5, 3
guard.pausetime = 6, 5
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = 8, -115
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
guard.ctrltime = 15
ground.velocity = -1, -10
guard.velocity = -6
air.velocity = 0,-10
ground.cornerpush.veloff = 0
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
envshake.time = 20


[State 3010, VA]
type = Explod
trigger1 = animelem = 6  && movehit
id = 2722
anim = 2722
ownpal = 1
pos = 160,52
postype = left
bindtime = -1
supermovetime = -1
sprpriority = 9
removetime = 75
scale = .8,.8
ontop = 1
ignorehitpause = 1

[State Idle]
type=statetypeset
trigger1= anim=1013
movetype=I


[State 3050, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1015



;------------------------------------------------------------------------------------------

;shinhadou
[Statedef 3013]
type=S
physics=S
movetype=A
anim=3015
ctrl=0
velset=0,0
sprpriority=1


[State 3050, VarSet]
type = VarSet
trigger1 = !time && var(12)<=0
var(5) = ifelse ((Command = "hadocao2" && Power >= 2000) || (Command = "hadocao3" && (Power >= 2000 && Power < 3000)), 1, ifelse (Command = "hadocao3" && Power >= 3000, 2, 0))


[State 1200, strengthvarAI]
type=varset
trigger1= !time && var(12)>=1
var(5)= ifelse((power>=3000 && random<200 ), 2, ifelse((Power >= 2000 && Power < 3000 && random<300), 1, 0))


[State 3050, Superpause]
type = SuperPause
trigger1 = animelem=4
time = ifelse (Var(5) = 0, 45, ifelse (Var(5) = 1, 55, 60))
;movetime = ifelse (Var(5) = 0, 45, ifelse (Var(5) = 1, 40, 35))
anim = -1
sound = S1, 21
poweradd = ifelse (Var(5) = 0, -1000, ifelse (Var(5) = 1, -2000, -3000))
darken = 0



[State 3000, strengthvar]
type=varset
trigger1= var(54)!=5 || var(54)!=6 || var(54)!=7
var(54)=ifelse (Var(5) = 0, 5, ifelse (Var(5) = 1, 6, 7))

[State 3050, VarSet]
type = VarSet
triggerall = Var(5) = 0
trigger1 = Command = "holdup" && animelemtime(5)<=0
v = 35
value = 1

[State 3020, varreset]
type=varset
trigger1= animelem=7
var(35)=0

[State 3010, VA]
type = Explod
triggerall = Var(5) = 0
trigger1 = time=2 && p2statetype=A
id = 2717
anim = 2717
ownpal = 1
pos = 160,52
postype = left
bindtime = -1
supermovetime = -1
sprpriority = 9
removetime = 80
scale = .9,.9
ontop = 1
ignorehitpause = 1


[State 3000, superchargehelper]
type=helper
trigger1= animelem=4
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos = -12, -77
ownpal=1
persistent=0
supermovetime=9999

[State 3050, AfterImage]
type = AfterImage
trigger1 = AnimElem = 2
time = 54
TimeGap  = 2
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifelse (!Var(5), 128, 40*Var(5)),ifelse(!Var(5), 128, ifelse(Var(5) = 1, 40, 25)),ifelse(!Var(5), 128, ifelse(Var(5) = 1, 40, 25))
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 3000, width]
type=width
trigger1=animelemtime(7)<0
value=30,0


[State 0, Helper]
type = Helper
triggerall = Var(5) = 0
trigger1 = (animelem = 7)
helpertype = normal
name = "shin hadouken"
ID = 3015
stateno = 3015
pos = 60,-70
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 5
supermove = 9999
pausemove =9999
size.xscale=.5
size.yscale=.5



[State 0, Helper]
type = Helper
triggerall = Var(5) = 1
trigger1 = (animelem = 7)
helpertype = normal
name = "shin hadouken"
ID = 3015
stateno = 3018
pos = 55,-70
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 5
supermove = 9999
pausemove =9999
size.xscale=.56
size.yscale=.56


[State 0, Helper]
type = Helper
triggerall = Var(5) = 2
trigger1 = (animelem = 7)
helpertype = normal
name = "shin hadouken"
ID = 3019
stateno = 3019
pos = 55,-70
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 5
supermove = 9999
pausemove =9999
size.xscale=.57
size.yscale=.57




[State 3000, dust]
type=explod
trigger1=anim=3015&&animelem=6
vel=0,0
anim=2710
ID=2710
sprpriority=3
postype=p1
pos=40,0
ownpal=1
scale=.75,.75




[State 0, ]
type   = PlaySnd
trigger1  = !time
value   = 2, 7
channel    = 3

[State 0, ]
type  = PlaySnd
trigger1  = AnimElem = 6
value    = 0, 15 
channel  = 4


[State 0, ChangeState]
type 	= ChangeState
triggerall=var(12)<=0
triggerall = Var(5) = 0
trigger1 = var(35)=1 && AnimElem=6
value = 3016
ctrl = 0


[State 3000, end]
type=changestate
trigger1=!animtime
value=0
ctrl=1


;------------------------------------------------------------------------------------------

[Statedef 3014]
type=S
physics=S
movetype=A
anim=3014
ctrl=0
velset=0,0
poweradd=72*!var(33)
sprpriority=1
facep2=1

[State 3050, Superpause]
type = SuperPause
trigger1 = anim=3014 && animelem=4
time = 60
;movetime = ifelse (Var(5) = 0, 45, ifelse (Var(5) = 1, 40, 35))
anim = -1
sound = S1, 21
poweradd = -3000
darken = 0

[State 3000, superchargehelper]
type=helper
trigger1= anim=3014 && animelem=4
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos = -12, -77
ownpal=1
persistent=0
supermovetime=9999


[State 3000, strengthvar]
type=varset
trigger1= var(54)!=7
var(54)=7



[State 3020, width]
type=width
trigger1= 1
value=30,0

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 22
value = 2


[State 3020, denjinvarreset]
type=varset
trigger1= anim=3014 && animelemtime(6)<0
trigger2= anim=3016 && animelemtime(2)>0
var(35)=0

[State 3020, denjinvar]
type=varadd
triggerall= anim=3014 && animelemtime(6)>=0
trigger1= var(12)<=0 && command="holdz"  && var(35)<150
var(35)=1


[State 3040, shake]
type=envshake
trigger1= anim=3014 && animelemtime(6)>=0 && !(time%4)
time=4
freq=120
ampl=1+ceil(var(35)/70)

[State 3020, Anim]
type=changeanim
triggerall= anim=3014 && animelemtime(6)>=0
trigger1= var(35)>=150
trigger2= var(12)<=0 && command!="holdz"
value=3016



[State 3020, hadouken]
type=helper
trigger1= anim=3016 && animelem=2
helpertype=normal
stateno=3019
ID=1081
name="Denjin1"
postype=p1
pos=73,-73
size.xscale=.6
size.yscale=.6
ownpal=1



[State 3020, poeiraaa]
type=explod
trigger1= anim=3016 && animelem=1
vel=0,0
anim=2710
sprpriority=3
postype=p1
pos=30,0
ownpal=1
scale=.75,.75
pausemovetime=-1
supermovetime=-1


[State 0, Explod]
type = Explod
trigger1 = animelem = 6
anim = 1084
ID = 1084
pos = -10,-77
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 158
scale = .8,.8
sprpriority = 5
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 1
persistent = 1

[State 4303, modifyexplod]
type=modifyexplod
triggerall = time <= 150
trigger1=1
ID=1084
scale=.005*time,.005*time

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = anim != 3014
id =1084


[State 0, ]
type   = PlaySnd
trigger1  = !time
value   = 2, 7
channel    = 3

[State 0, ]
type  = PlaySnd
trigger1  = anim=3016 && AnimElem = 2
value    = 0, 15 
channel  = 4

[State 3020, End]
type=changestate
trigger1= anim=3016 && !animtime
value=0
ctrl=1

;---------------------------------------------------------------------

;shin hadoken helper
[Statedef 3015,ShinkuuHadouken]
type = A
physics = N
movetype = A
ctrl = 0
velset = 0,0
sprpriority = 5
poweradd = 0
anim = 1004

[State 3005, movehitvar]
type=varset
trigger1= movecontact && numtarget
trigger1= !(target,ishelper)
var(25)=1
ignorehitpause=1

[State 3005, strengthvar]
type=varset
trigger1= !time && !prevstateno
var(5)=5



[State 3005, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=ifelse(var(22)<5,3015,1011)
ignorehitpause=1

[State 3005, hitvar]
type=varadd
trigger1= !time
var(22)=1


[State 3005,hitby]
type = hitby
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1


[State 3005, vel]
type = velset
trigger1 = 1
x = 9

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3005, sparks]
type=explod
trigger1=movehit&&numtarget
trigger1=(target,movetype=H)&&!(target,time)
anim=2558+(random%4)
ID=2724
sprpriority=5
postype=left
pos=ceil((target,pos x)-(target,const(size.ground.front)-10)*facing+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 3005, hit]
type=hitdef
trigger1=1
priority=4,Hit
attr=S,HP
damage=38,12
animtype=Back
hitflag=MAF
guardflag=M
pausetime=4*(var(22)<5),8
sparkno=-1
guard.sparkno=S8035
sparkxy=-10,0
guardsound = S1,15
hitsound = S1,25
guard.velocity=-10.52
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=ifelse(var(22)<5, -10.52, -6), ifelse(var(22)<5, 0, -4)
ground.cornerpush.veloff=0
air.velocity=-6,-4
fall=(var(22)>=5)
fall.recover=0
air.fall=1
getpower=0
forcestand=1
envshake.time=16
envshake.freq=100
envshake.ampl=6
sprpriority=4
yaccel=.5
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32


[State 0, PosFreeze]
type = PosFreeze
trigger1 = movecontact =1
value = 1

[State 3005, Assert]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1


[State 3005, End]
type=changestate
trigger1= movecontact
value=ifelse(var(22)<5,3015,1011)

[State 3005, end]
type=destroyself
trigger1=frontedgedist<-140||backedgedist<0


;------------------------------------------------------------------------------------------


;hadouken cima
[Statedef 3016]
type = S
movetype = A
physics= S
juggle = 4
poweradd = 0
ctrl = 0
velset = 0,0
anim = 3019
sprpriority = 2

[State 3020, denjinvarreset]
type=varset
trigger1= !time
var(35)=0

[State 0, Helper]
type = Helper
trigger1 = (animelem = 1)
helpertype = normal
name = "shin hadouken"
ID = 3017
stateno = 3017
pos = 16,-72
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 5
supermove = 9999
pausemove =9999
size.xscale=1
size.yscale=1

[State 3000, dust]
type=explod
trigger1=anim=3019&&animelem=1
vel=0,0
anim=2710
ID=2710
sprpriority=3
postype=p1
pos=40,0
ownpal=1
scale=.75,.75

[State 0, ]
type = PlaySnd
trigger1 = !time;AnimElem = 1
value = 0, 15 
channel = 0

[State 0, ChangeState]
type 	= ChangeState
trigger1 = AnimTime = 0
value  = 0
ctrl = 1

;------------------------------------------------------------------------------------------


;helper shinhadouken cima
[Statedef 3017]
type = S
movetype = A
physics= S
juggle = 0
poweradd = 0
ctrl = 0
velset = 0,0
anim = 3018
sprpriority = 3


[State 3005, hitvar]
type=varadd
trigger1= !time
var(22)=1


[State 3005, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=ifelse(var(22)<5,3017,1011)
ignorehitpause=1

[State 3005,hitby]
type = hitby
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1



[State 3005, vel]
type = velset
trigger1 = 1
x = 5
y = -2.8

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3005, sparks]
type=explod
trigger1=movehit&&numtarget
trigger1=(target,movetype=H)&&!(target,time)
anim=2558+(random%4)
ID=2724
sprpriority=5
postype=left
pos=ceil((target,pos x)-(target,const(size.ground.front)-10)*facing+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100


[State 3005, hit]
type=hitdef
trigger1=1
priority=4,Hit
attr=S,HP
damage=38,12
animtype=Back
hitflag=MAF
guardflag=M
pausetime=4*(var(22)<5),8
sparkno=-1
guard.sparkno=S8035
sparkxy=-10,0
guardsound = S1,15
hitsound = S1,25
guard.velocity=-10.52
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=ifelse(var(22)<5, -10.52, -6), ifelse(var(22)<5, 0, -4)
ground.cornerpush.veloff=0
air.velocity=-6,-4
fall=(var(22)>=5)
fall.recover=0
air.fall=1
getpower=0
forcestand=1
envshake.time=16
envshake.freq=100
envshake.ampl=6
sprpriority=4
yaccel=.5
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32




[State 0, PosFreeze]
type = PosFreeze
trigger1 = movecontact =1
value = 1


[State 3005, End]
type=changestate
trigger1= movecontact
value=ifelse(var(22)<5,3017,1011)

[State 3005, end]
type=destroyself
trigger1=frontedgedist<-140||backedgedist<0


;------------------------------------------------------------------------------------------

;shin hadoken helper lv2
[Statedef 3018,ShinkuuHadouken]
type = A
physics = N
movetype = A
ctrl = 0
velset = 0,0
sprpriority = 5
poweradd = 0
anim = 1004

[State 3005, movehitvar]
type=varset
trigger1= movecontact && numtarget
trigger1= !(target,ishelper)
var(25)=1
ignorehitpause=1

[State 3005, strengthvar]
type=varset
trigger1= !time && !prevstateno
var(5)=5

[State 3005, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=ifelse(var(22)<5,3018,1011)
ignorehitpause=1

[State 3005,hitby]
type = hitby
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1

[State 3005, hitvar]
type=varadd
trigger1= !time
var(22)=1


[State 3005, vel]
type = velset
trigger1 = 1
x = 10

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3005, sparks]
type=explod
trigger1=movehit&&numtarget
trigger1=(target,movetype=H)&&!(target,time)
anim=2558+(random%4)
ID=2724
sprpriority=5
postype=left
pos=ceil((target,pos x)-(target,const(size.ground.front)-10)*facing+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100




[State 3005, hit]
type=hitdef
trigger1=1
priority=5,Hit
attr=S,HP
damage=41,9
animtype=Back
hitflag=MAF
guardflag=M
pausetime=4*(var(22)<7),8
sparkno=-1
guard.sparkno=S8035
sparkxy=-10,0
guardsound = S1,15
hitsound = S1,25
guard.velocity=-10.52
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=ifelse(var(22)<7, -10.52, -6), ifelse(var(22)<7, 0, -4)
ground.cornerpush.veloff=0
air.velocity=-6,-4
fall=(var(22)>=7)
fall.recover=0
air.fall=1
getpower=0
forcestand=1
envshake.time=16
envshake.freq=100
envshake.ampl=6
sprpriority=4
yaccel=.5
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32



[State 0, PosFreeze]
type = PosFreeze
trigger1 = movecontact
value = 1

[State 3005, Assert]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1


[State 3005, End]
type=changestate
trigger1= movecontact
value=ifelse(var(22)<7,3018,1011)

[State 3005, end]
type=destroyself
trigger1=frontedgedist<-140||backedgedist<0

;--------------------------------------------------------------------

;shin hadoken helper lv3
[Statedef 3019,ShinkuuHadouken]
type = A
physics = N
movetype = A
ctrl = 0
velset = 0,0
sprpriority = 5
poweradd = 0
anim = 1004

[State 3005, movehitvar]
type=varset
trigger1= movecontact && numtarget
trigger1= !(target,ishelper)
var(25)=1
ignorehitpause=1

[State 3005, strengthvar]
type=varset
trigger1= !time && !prevstateno
var(5)=5

[State 3005, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=ifelse(var(22)<5,3019,1011)
ignorehitpause=1

[State 3005,hitby]
type = hitby
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1

[State 3005, hitvar]
type=varadd
trigger1= !time
var(22)=1


[State 3005, vel]
type = velset
trigger1 = 1
x = 11

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3005, sparks]
type=explod
trigger1=movehit&&numtarget
trigger1=(target,movetype=H)&&!(target,time)
anim=2558+(random%4)
ID=2724
sprpriority=5
postype=left
pos=ceil((target,pos x)-(target,const(size.ground.front)-10)*facing+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100


[State 3005, hit]
type=hitdef
trigger1=1
priority=6,Hit
attr=S,HP
damage=45,9
animtype=Back
hitflag=MAF
guardflag=M
pausetime=4*(var(22)<10),8
sparkno=-1
guard.sparkno=S8035
sparkxy=-10,0
guardsound = S1,15
hitsound = S1,25
guard.velocity=-10.52
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=ifelse(var(22)<10, -10.52, -6), ifelse(var(22)<10, 0, -4)
ground.cornerpush.veloff=0
air.velocity=-6,-4
fall=(var(22)>=10)
fall.recover=0
air.fall=1
getpower=0
forcestand=1
envshake.time=16
envshake.freq=100
envshake.ampl=6
sprpriority=4
yaccel=.5
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32


[State 0, PosFreeze]
type = PosFreeze
trigger1 = movecontact
value = 1

[State 3005, Assert]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 3005, End]
type=changestate
trigger1= movecontact
value=ifelse(var(22)<10,3019,1011)

[State 3005, end]
type=destroyself
trigger1=frontedgedist<-140||backedgedist<0




;------------------------------------------------------------------------------------------

;pisadao especial
[Statedef 3201]
type    = A                      
movetype = A                     
physics = N                      
juggle=ifelse((prevstateno=[1000,4999]),0,6)*!var(33)
velset = 0,0                     
ctrl = 0                         
sprpriority = 4
anim=1002
poweradd=-1000

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 3491

[State 3100, BGInvert]
type = BGPalFX
trigger1 = Time < 38
time = 2
invertall = 0
mul = 0, 0, 0
ignorehitpause = 1

[State 4100, push]
type=playerpush
trigger1= stateno=3201
value=0
ignorehitpause=1

[State 700, asserts]
type=assertspecial
trigger1=1
flag=unguardable


[State 3000, strengthvar]
type=varset
trigger1= var(54)!=5
var(54)=5

[State 3000, superchargehelper]
type=helper
trigger1= animelem=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos = 5, -90
ownpal=1
persistent=0
supermovetime=9999



[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 45
anim = 0
sound = -1
movetime = 45
darken = 0
p2defmul = 1
unhittable = 1

[State 0, PosFreeze]
type = PosFreeze
trigger1 = time = [1,45]
value = 1

[State 3200, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1



[State 3200, a7x] 
type = Explod
trigger1 = anim=1002 && animelem=2
anim = 1232
id = 3202
postype = p1
pos = 0, -85
bindtime = -1
sprpriority = 7
removeongethit = 1
removetime = 60
scale = 0.8,0.8

[State 4100, statetype]
type=statetypeset
trigger1= anim!=1002
statetype=S
physics=S

[State 4100, statetype]
type=statetypeset
trigger1= anim=1002
statetype=A
physics=N


[State Idle]
type=statetypeset
trigger1= anim= 1511033
movetype=I


[State 3201, a1]
type = Width
trigger1 = 1
player = -25,-25


[State 3201,a3]
type = VelSet
trigger1 = anim=1002 && animelem = 1
x = 0
y = 12


[state 3201, a5]
type = VelAdd
trigger1 = anim=1002 &&  animelem = 2
x = 0
y = .1

[State 0, 1]
type = PlaySnd
trigger1 = anim=1002 && AnimElem = 1
value = 1,21
channel = 0


[State 4100, Hit]
type=hitdef
trigger1= anim=1002 && animelem=2
attr=A,HA
damage=200,15
animtype=Hard 
guardflag=MA
hitflag=MAF
priority=4,Hit
pausetime=0,0
guard.pausetime=0,30
sparkno = s2558+(random%4)
sparkxy = 0,-80
guard.sparkno = S8036
hitsound   = S1,13
guardsound = S1,15
ground.type=High
air.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-2,0
guard.velocity=-10
air.velocity=0,20
ground.cornerpush.veloff = 0
guard.velocity= -12.52
ground.cornerpush.veloff = 0
getpower=0
givepower=36,36
envshake.time=8
envshake.freq=60
envshake.ampl=10
fall=1
fall.recover=0
sprpriority=-1
ID=3201
airguard.ctrltime= 16
airguard.velocity= -4,-8
forcestand=1



[State 4100, p2state]
type=targetstate
trigger1= movehit && numtarget(3201)
value=1411022
ID=3201
ignorehitpause=1


[State 3200 , a9]
type = removeexplod
trigger1 = Pos Y >= 110 && Vel Y > 0
id = 3202

[State 4100, shake]
type=envshake
trigger1= Pos Y >= 100 && Vel Y > 0
time = 14
ampl = -6


[State 2210, b3 ]
type = PlaySnd
trigger1 = Pos Y >= 100 && Vel Y > 0
value =9,1


[State 3200 , a9]
type = Changeanim
trigger1 =Pos Y >= 110 && Vel Y > 0
value = 1511033

[State 4100, stop]
type=posset
trigger1= anim!=1002
y=-12.1000

[State 4100, stop]
type=posset
trigger1= anim=1511033 && !animtime
y=0

[State 4100, Dust]
type=explod
trigger1=anim= 1511033 && animelem=1
anim=1888
ID=1888
sprpriority=5
postype=p1
pos=0,7
scale = 0.7,0.7
vel=0,0
ownpal=0

[State 4100, End]
type=changestate
trigger1= anim=1511033 && !animtime
value=0
ctrl=1


;------------------------------------------------------------------------------------------

;shinkuu hadouken air
[StateDef 3300]
type = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 3300
poweradd = -1000
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 22
value = 2

[State 3000, strengthvar]
type=varset
trigger1= var(5)!=5
var(5)=5

[State 0, 1]
type = PlaySnd
trigger1 = time=10
value = 1,21
channel = 0

[State 1000, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 9


[State 1000, efeito]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1, 18


[State 3735,  Slow Motion ]
type = Pause 
triggerall = (GameTime%1) = 0 && roundstate = 2
triggerall = power>=1000
trigger1 = time = [50,60]
time = 3
movetime = 0
ignorehitpause = 0 
endcmdbuftime=3

[State 0, Helper]
type = Helper
trigger1 = time=10
helpertype = normal
name = "carga"
ID = 3128
stateno = 3128
pos = -24,-63
postype = p1   
facing = 1
keyctrl = 0
ownpal = 0
supermove =999
pausemove =999

[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 2
time = 45
anim = 0
sound = s3000,0
pos = 0,10000
movetime = 45
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 1


[State 0, Helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "shin hadouken"
ID = 3305
stateno = 3305
pos = 52,-75
postype = p1
facing = 1
keyctrl = 0
ownpal = 0
sprpriority = 5
supermove = 9999
pausemove =9999
size.xscale=.55
size.yscale=.55

[State 0, VelAdd]
type = Velset
trigger1 = time <=45
x = 0
y = 0

[State 0, VelAdd]
type = Veladd
trigger1 = animelem = 5
y = -3.4

[State 0, VelAdd]
type = Veladd
trigger1 = animelem = 5
x = -5.4

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 55
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = A


[State 1000, end]
type = ChangeState
trigger1 = command = "holddown"
trigger1 = command = "holdfwd"
trigger1 = Time = 47
value = 3301
ctrl = 1


[State 1000, end]
type = ChangeState
trigger1 = command = "holddown"
trigger1 = Time = 47
value = 3302
ctrl = 1


[State 1000, end]
type = ChangeState
trigger1 = command = "holdback"
trigger1 = Time = 47
value = 3303
ctrl = 1

[State 1200, 22]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52
;-----------------------------------------------------------------------
;shinkuu hadouken diagonal frente
[StateDef 3301]
type = A
movetype= A
physics = A
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3301
poweradd = 0


[State 3735,  Slow Motion ]
type = Pause 
triggerall = (GameTime%1) = 0 && roundstate = 2
triggerall = power>=1000
trigger1 = time = [6,12]
time = 3
movetime = 0
ignorehitpause = 0 
endcmdbuftime=3

[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 22
value = 2

[State 3000, strengthvar]
type=varset
trigger1= var(5)!=5
var(5)=5



[State 1000, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 9


[State 1000, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 18


[State 0, VelAdd]
type = Velset
trigger1 = time <= 5
x = -4.5
y = -5


[State 3000, AfterImage]
type = AfterImage
trigger1 = animelem = 3
time = 30
length = 15
framegap = 3
trans = add1 ;"none","add1","sub"
PalContrast = 120,90,100

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
helpertype = normal ;player
name = "dejin hadouken"
ID = 3306
stateno = 3306
pos = 15,-78
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
sprpriority = 5
supermove = 9999
pausemove =9999
size.xscale=.6
size.yscale=.6

;-----------------------------------------------------------------------
;shinkuu hadouken air baixo
[StateDef 3302]
type = A
movetype= A
physics = A
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3302
poweradd = 0

[State 3735,  Slow Motion ]
type = Pause 
triggerall = (GameTime%1) = 0 && roundstate = 2
triggerall = power>=1000
trigger1 = time = [13,23]
time = 3
movetime = 0
ignorehitpause = 0 
endcmdbuftime=3


[State 1000, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 9


[State 1000, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 18

[State 0, PosFreeze]
type = PosFreeze
trigger1 = time <= 12
value = 1


[State 0, VarSet]
type = VarSet
trigger1 = time = 1
v = 22
value = 2

[State 3000, strengthvar]
type=varset
trigger1= var(5)!=5
var(5)=5


[State 0, PosFreeze]
type = PosFreeze
trigger1 = time <= 12
value = 1

[State 0, VelAdd]
type = Velset
trigger1 = time = 13
x = -2
y = -11

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S7,8
channel = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id =  3007

[State 0, Helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal ;player
name = "dejin hadouken"
ID = 3307
stateno = 3307
pos = 15,-66
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
sprpriority = 5
supermove = 9999
pausemove =9999
size.xscale=.55
size.yscale=.55

;-----------------------------------------------------------------------

;shinkuu hadouken air atras
[StateDef 3303]
type = A
movetype= A
physics = A
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3303
poweradd = 0


[State 1000, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 9


[State 1000, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 18


[State 0, PlayerPush]
type = PlayerPush
triggerall = movehit
trigger1 != time
value = 0

[State 0, VelAdd]
type = Velset
trigger1 = time <= 5
x = 4.5
y = -5

[State 3735,  Slow Motion ]
type = Pause 
triggerall = (GameTime%1) = 0 && roundstate = 2
triggerall = power>=1000
trigger1 = time = [5,16]
time = 3
movetime = 0
ignorehitpause = 0 
endcmdbuftime=3


[State 0, Helper]
type = Helper
trigger1 = animelem = 1
helpertype = normal
name = "shin hadouken"
ID = 3308
stateno = 3308
pos = -32,-75
postype = p1
facing = 1
keyctrl = 0
ownpal = 0
sprpriority = 5
supermove = 9999
pausemove =9999
size.xscale=.55
size.yscale=.55


;-----------------------------------------------------------------------

;shin hadoken helper frente
[Statedef 3305,ShinkuuHadouken]
type = A
physics = N
movetype = A
ctrl = 0
velset = 0,0
sprpriority = 5
poweradd = 0
anim = 2004


[State 3005, hitoverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA,NP,SP,HP
stateno = 3305
ignorehitpause = 1

[State 3005,hitby]
type = hitby
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1

[State 3005, vel]
type = velset
trigger1 = 1
x = 9

[State 3005, hitvar]
type = varadd
trigger1 = !time
var(23) = 1

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3005, sparks]
type=explod
trigger1=movehit&&numtarget
trigger1=(target,movetype=H)&&!(target,time)
anim=2558+(random%4)
ID=2724
sprpriority=5
postype=left
pos=ceil((target,pos x)-(target,const(size.ground.front)-10)*facing+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 3005, hit]
type=hitdef
trigger1=1
priority=7,Hit
attr=S,HP
damage=38,14
animtype=Back
hitflag=MAF
guardflag=M
pausetime=4,6
sparkno=-1
guard.sparkno=S1005
sparkxy=-10,0
guardsound = S1,15
hitsound = S1,25
guard.velocity=-13
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=ifelse(time<=6,-6,-4),-4
ground.cornerpush.veloff=0
air.velocity=ifelse(time<=6,-6,-4),-3
fall=1
fall.recover=0
getpower=0
envshake.time=16
envshake.freq=100
envshake.ampl=6
sprpriority=4
yaccel=.5
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32


[State 0, PosFreeze]
type = PosFreeze
trigger1 = movecontact
value = 1

[State 3005, end]
type=changestate
trigger1=movecontact
value=ifelse(var(23)<(ifelse(parent,var(22)=0,3,ifelse(parent,var(22)=1,4,5))),3305,1011)


[State 3005, end]
type=destroyself
trigger1=frontedgedist<-140||backedgedist<0


;-------------------------------------------------------------------



;shin hadoken helper diagonal frente
[Statedef 3306,ShinkuuHadouken]
type = A
physics = N
movetype = A
ctrl = 0
velset = 0,0
sprpriority = 5
poweradd = 0
anim = 3306


[State 3005, hitoverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA,NP,SP,HP
stateno = 3306
ignorehitpause = 1

[State 3005,hitby]
type = hitby
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1

[State 3055, Vel]
type=velset
trigger1= 1
x=6.4
y=4.2

[State 3005, hitvar]
type = varadd
trigger1 = !time
var(23) = 1

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3005, sparks]
type=explod
trigger1=movehit&&numtarget
trigger1=(target,movetype=H)&&!(target,time)
anim=2558+(random%4)
ID=2724
sprpriority=5
postype=left
pos=ceil((target,pos x)-(target,const(size.ground.front)-10)*facing+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 3005, hit]
type=hitdef
trigger1=1
priority=7,Hit
attr=S,HP
damage=38,14
animtype=Back
hitflag=MAFD
guardflag=M
pausetime=4,6
sparkno=-1
guard.sparkno=S1005
sparkxy=-10,0
guardsound = S1,15
hitsound = S1,25
guard.velocity=-13
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=ifelse(time<=6,-6,-4),-4
ground.cornerpush.veloff=0
air.velocity=ifelse(time<=6,-6,-4),-3
fall=1
fall.recover=0
getpower=0
envshake.time=16
envshake.freq=100
envshake.ampl=6
sprpriority=4
yaccel=.5
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32


[State 0, PosFreeze]
type = PosFreeze
trigger1 = movecontact
value = 1

[State 1424, 6]
type = EnvShake
trigger1 = (Pos y >= 0)
time = 14
ampl = 5


[State 3005, end]
type=changestate
trigger1=movecontact
trigger2= pos y >=0
value=ifelse(var(23)<(ifelse(parent,var(22)=0,3,ifelse(parent,var(22)=1,4,5))),3306,1011)


[State 3005, end]
type=destroyself
trigger1=frontedgedist<-140||backedgedist<0




;shin hadoken helper baixo
[Statedef 3307,ShinkuuHadouken]
type = A
physics = N
movetype = A
ctrl = 0
velset = 0,0
sprpriority = 5
poweradd = 0
anim = 3307

[State 3005, hitvar]
type = varadd
trigger1 = !time
var(23) = 1


[State 3005, hitoverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA,NP,SP,HP
stateno = 3307
ignorehitpause = 1

[State 3005,hitby]
type = hitby
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1

[State 3055, Vel]
type=velset
trigger1= 1
x=0
y=7

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3005, sparks]
type=explod
trigger1=movehit&&numtarget
trigger1=(target,movetype=H)&&!(target,time)
anim=2558+(random%4)
ID=2724
sprpriority=5
postype=left
pos=ceil((target,pos x)-(target,const(size.ground.front)-10)*facing+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 3005, hit]
type=hitdef
trigger1=1
priority=7,Hit
attr=S,HP
damage=38,14
animtype=Back
hitflag=MAFD
guardflag=M
pausetime=4,6
sparkno=-1
guard.sparkno=s1005
sparkxy=-10,0
guardsound = S1,15
hitsound = S1,25
guard.velocity=-13
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=ifelse(time<=6,-6,-4),-4
ground.cornerpush.veloff=0
air.velocity=ifelse(time<=6,-6,-4),-3
fall=1
fall.recover=0
getpower=0
envshake.time=16
envshake.freq=100
envshake.ampl=6
sprpriority=4
yaccel=.5
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32



[State 0, PosFreeze]
type = PosFreeze
trigger1 = movecontact
value = 1


[State 3005, end]
type=changestate
trigger1=movecontact
trigger2= pos y >=0
value=ifelse(var(23)<(ifelse(parent,var(22)=0,3,ifelse(parent,var(22)=1,4,5))),3307,1011)

[State 1424, 6]
type = EnvShake
trigger1 = (Pos y >= -10)
time = 14
ampl = 5



[State 3005, end]
type=destroyself
trigger1=frontedgedist<-140||backedgedist<0




;shin hadoken helper tras
[Statedef 3308,ShinkuuHadouken]
type = A
physics = N
movetype = A
ctrl = 0
velset = 0,0
sprpriority = 5
poweradd = 0
anim = 3308


[State 3005, hitoverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA,NP,SP,HP
stateno = 3015
ignorehitpause = 1

[State 3005,hitby]
type = hitby
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1

[State 3005, vel]
type = velset
trigger1 = 1
x = -8

[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3005, sparks]
type=explod
trigger1=movehit&&numtarget
trigger1=(target,movetype=H)&&!(target,time)
anim=2558+(random%4)
ID=2724
sprpriority=5
postype=left
pos=ceil((target,pos x)-(target,const(size.ground.front)-10)*facing+160),ceil(screenpos y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 3005, hit]
type=hitdef
trigger1=1
priority=7,Hit
attr=S,HP
damage=180,44
animtype=Back
hitflag=MAF
guardflag=M
pausetime=4,6
sparkno=S1005
guard.sparkno=s1005
sparkxy=-10,0
guardsound = S1,15
hitsound = S1,25
guard.velocity=-13
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=ifelse(time<=6,-6,-4),-4
ground.cornerpush.veloff=0
air.velocity=ifelse(time<=6,-6,-4),-3
fall=1
fall.recover=0
getpower=0
envshake.time=16
envshake.freq=100
envshake.ampl=6
sprpriority=4
yaccel=.5
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32


[State 0, PosFreeze]
type = PosFreeze
trigger1 = movecontact
value = 1


[State 3005, end]
type=changestate
trigger1=movecontact
value=1011

[State 3005, end]
type=destroyself
trigger1=frontedgedist<-140||backedgedist<-60



;--------------------------------------------------------------------


[Statedef 3400]
type    = S
movetype = A
physics = N
juggle = 0
velset = 0,0
ctrl = 0
anim = 3400

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 60
anim = -1
sound = S1, 21
pos = 9999999999999999,9999999999
movetime = 60
darken = 0
p2defmul = 1
poweradd = -3000
unhittable = 1


[State 3000, strengthvar]
type=varset
trigger1= var(54)!=7
var(54)=7

[State 3000, superchargehelper]
type=helper
trigger1= animelem=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos = 3,-85
ownpal=1
persistent=0
supermovetime=9999




[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 2710
ID = 2710
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1


[State 3000, AfterImage]
type = AfterImage
trigger1 = Time = 4
time = 3
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast =  150,50,50
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 8
movetype = I

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time >=45
time = 1
mul = 150,10,10
color = 256
ignorehitpause =1
persistent = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause =1

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 7
value = 5,10

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 9
value = 1,1

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 7
x = 15

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 9
x = 0

[State 1100, Velocity]
type = VelMul
trigger1 = AnimElemTime(8) > 0
x = .85

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
animtype = Heavy
air.animtype = Back
damage = 0,0
priority = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 7,8
sparkno = s3411
guard.sparkno=s8105
sparkxy = -25, -67
hitsound = S1,8
guardsound = S2,1
ground.type = Low
ground.slidetime = 36
ground.hittime = 36
guard.ctrltime = 36
ground.velocity = -6
guard.velocity = -8
air.velocity = -4.5,-6
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
getpower = 0,0
givepower = 35, 35
forcestand = 1


[State 901,1]
type = targetBind
trigger1 = time > 1 && movehit && numtarget
pos =60, 0
postype = P1
time = -1

[State 901, Throw]
type = TargetState
trigger1 = time > 1 && movehit && numtarget
value = 3805
ignorehitpause = 1
persistent = 0

[State 1200, 2]
type = ChangeState
trigger1 = time > 1 && movehit && numtarget
value = 3401
persistent = 0

[State 1100, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;------------------------------------------------------------------------------------------
;combo
[Statedef 3401]
type    = S
movetype = A
physics = N
juggle = 0
ctrl = 0
velset = 0,0
anim = 3401

[State 0, ]
type = Bgpalfx
trigger1   = animelem = 2
trigger2  = animelem = 7
trigger3   = animelem = 13
trigger4   = animelem = 19
trigger5 = animelem = 25
trigger6  = animelem = 32
trigger7  = animelem = 40
trigger8 = animelem = 50
trigger9 = animelem = 64
trigger10 = animelem = 59
trigger11 = animelem = 68
trigger12 = animelem = 91
trigger13 = animelem = 76
trigger14 = animelem = 105
time                = 1
add                 = 256,-255,-255
persistent          = 1
color               = 256

[State 0, ]
type  = HitAdd
trigger1  = animelem = 32
value  = 5



[State 3000, AfterImage]
type = AfterImage
trigger1 = Time = 1
time = 3
TimeGap  = 3
FrameGap = 4
length = 11
PalBright = 1,1,1
PalContrast =  180,50,50
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1


[State 1000, 0]
type = TargetFacing
trigger1 = time = 0
value = -1

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 901,1]
type = targetBind
trigger1 = animelem = 1
pos = 60,0
postype = P1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 15
value = 5,23
channel = 0


[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 6
trigger3 = AnimElem = 11
value = 1,7
channel = 1

[State 1100, Effect]
type = PlaySnd
trigger1 = AnimElem = 42
trigger2 = AnimElem = 68
trigger3 = AnimElem = 77
value = 1,8
channel = 1

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 17
value = 1,10
channel = 1

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 24
value = 1,9
channel = 1

[State 1100, Effect]
type = PlaySnd
trigger1 = AnimElem = 32
trigger2 = AnimElem = 51
trigger3 = AnimElem = 60
value = 1,10
channel = 1


[State 3001, Width]
type = Width
trigger1 = time = 1
edge = 40,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0


[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = time > 160
time = 0
ignorehitpause = 1


[State 1100, Voice]
type = PlaySnd
trigger1 = time =148
value = 2000,3
volume = 200
channel = -1


[State 11001, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=22,2
priority  = 7, Hit
hitflag = MAF
guardflag = LA
pausetime = 2,3
sparkno = s3411 +(random%2)
guard.sparkno=s8105
sparkxy = -25 , -84
hitsound   = S1,14
guardsound = S1,15
ground.type = High
ground.slidetime = 36
ground.hittime  = 36
guard.ctrltime = 36
ground.velocity = 0,0
guard.velocity = -8
air.velocity = -3,-4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
envshake.time=10
envshake.freq=60
envshake.ampl=5
fall = 0
fall.recover = 0
air.fall = 0
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
p2stateno = 3800
kill = 0

[State 11002, HitDef]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=20,2
priority  = 7, Hit
hitflag = MAF
guardflag = LA
pausetime = 2,3
sparkno = s3411 +(random%2)
guard.sparkno=s8105
sparkxy = -25 ,-84
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 36
ground.hittime  = 36
guard.ctrltime = 36
ground.velocity = 0,0
guard.velocity = -8
air.velocity = -3,-4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
envshake.time=10
envshake.freq=60
envshake.ampl=5
fall = 0
fall.recover = 0
air.fall = 0
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
p2stateno = 3805
kill = 0

[State 11003, HitDef]
type = HitDef
trigger1 = AnimElem = 13
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=20,2
priority  = 7, Hit
hitflag = MAF
guardflag = LA
pausetime = 2,3
sparkno = s3411 +(random%2)
guard.sparkno=s8105
sparkxy = -25 , -60
hitsound   = S1,14
guardsound = S1,15
ground.type = High
ground.slidetime = 36
ground.hittime  = 36
guard.ctrltime = 36
ground.velocity = 0,0
guard.velocity = -8
air.velocity = -3,-4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
envshake.time=10
envshake.freq=60
envshake.ampl=5
fall = 0
fall.recover = 0
air.fall = 0
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
p2stateno = 3800
kill = 0

[State 11004, HitDef]
type = HitDef
trigger1 = AnimElem = 19
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=20,2
priority  = 7, Hit
hitflag = MAF
guardflag = LA
pausetime = 2,3
sparkno = s3411 +(random%2)
guard.sparkno=s8105
sparkxy = -25 , -89
hitsound   = S1,14
guardsound = S1,15
ground.type = High
ground.slidetime = 36
ground.hittime  = 36
guard.ctrltime = 36
ground.velocity = 0,0
guard.velocity = -8
air.velocity = -3,-4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
envshake.time=10
envshake.freq=60
envshake.ampl=5
fall = 0
fall.recover = 0
air.fall = 0
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
p2stateno = 3800
kill = 0

[State 11005, HitDef]
type = HitDef
trigger1 = AnimElem = 25
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=20,2
priority  = 7, Hit
hitflag = MAF
guardflag = LA
pausetime = 2,3
sparkno = s3411 +(random%2)
guard.sparkno=s8105
sparkxy = -25 , -93
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 36
ground.hittime  = 36
guard.ctrltime = 36
ground.velocity = 0,0
guard.velocity = -8
air.velocity = -3,-4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
envshake.time=10
envshake.freq=60
envshake.ampl=5
fall = 0
fall.recover = 0
air.fall = 0
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
p2stateno = 3805
kill = 0

[State 11006, HitDef]
type = HitDef
trigger1 = AnimElem = 32
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=20,2
priority  = 7, Hit
hitflag = MAF
guardflag = LA
pausetime = 2,3
sparkno = s3411 +(random%2)
guard.sparkno=s8105
sparkxy = -25 , -41
hitsound   = S1,14
guardsound = S1,15
ground.type = High
ground.slidetime = 36
ground.hittime  = 36
guard.ctrltime = 36
ground.velocity = 0,0
guard.velocity = -8
air.velocity = -3,-4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
envshake.time=10
envshake.freq=60
envshake.ampl=5
fall = 0
fall.recover = 0
air.fall = 0
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
p2stateno = 3800
kill = 0

[State 11007, HitDef]
type = HitDef
trigger1 = AnimElem = 40
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=20,2
priority  = 7, Hit
hitflag = MAF
guardflag = LA
pausetime = 2,3
sparkno = s3411 +(random%2)
guard.sparkno=s8105
sparkxy = -25 , -58
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 36
ground.hittime  = 36
guard.ctrltime = 36
ground.velocity = 0,0
guard.velocity = -8
air.velocity = -3,-4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
envshake.time=10
envshake.freq=60
envshake.ampl=5
fall = 0
fall.recover = 0
air.fall = 0
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
p2stateno = 3805
kill = 0

[State 11008, HitDef]
type = HitDef
trigger1 = AnimElem = 50
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=20,2
priority  = 7, Hit
hitflag = MAF
guardflag = LA
pausetime = 2,3
sparkno = s3411 +(random%2)
guard.sparkno=s8105
sparkxy = -25 , -83
hitsound   = S1,14
guardsound = S1,15
ground.type = High
ground.slidetime = 36
ground.hittime  = 36
guard.ctrltime = 36
ground.velocity = 0,0
guard.velocity = -8
air.velocity = -3,-4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
envshake.time=10
envshake.freq=60
envshake.ampl=5
fall = 0
fall.recover = 0
air.fall = 0
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
p2stateno = 3800
kill = 0

[State 11009, HitDef]
type = HitDef
trigger1 = AnimElem = 59
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=20,2
priority  = 7, Hit
hitflag = MAF
guardflag = LA
pausetime = 2,3
sparkno = s3411 +(random%2)
guard.sparkno=s8105
sparkxy = -25 , -83
hitsound   = S1,14
guardsound = S1,15
ground.type = High
ground.slidetime = 36
ground.hittime  = 36
guard.ctrltime = 36
ground.velocity = 0,0
guard.velocity = -8
air.velocity = -3,-4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
envshake.time=10
envshake.freq=60
envshake.ampl=5
fall = 0
fall.recover = 0
air.fall = 0
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
p2stateno = 3800
kill = 0

[State 11010, HitDef]
type = HitDef
trigger1 = AnimElem = 68
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=25,2
priority  = 7, Hit
hitflag = MAF
guardflag = LA
pausetime = 2,3
sparkno = s3411 +(random%2)
guard.sparkno=s8105
sparkxy = -25 ,-71
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 36
ground.hittime  = 36
guard.ctrltime = 36
ground.velocity = 0,0
guard.velocity = -8
air.velocity = -3,-4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
envshake.time=10
envshake.freq=60
envshake.ampl=5
fall = 0
fall.recover = 0
air.fall = 0
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
p2stateno = 3805
kill = 0

[State 11011, HitDef]
type = HitDef
trigger1 = AnimElem = 91
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=25,2
priority  = 7, Hit
hitflag = MAF
guardflag = LA
pausetime = 2,50
sparkno = s3411 +(random%2)
guard.sparkno=s8105
sparkxy = -25 , -60
hitsound   = S1,14
guardsound = S1,15
ground.type = High
ground.slidetime = 36
ground.hittime  = 36
guard.ctrltime = 36
ground.velocity = 0,0
guard.velocity = -8
air.velocity = -3,-4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
envshake.time=10
envshake.freq=60
envshake.ampl=5
fall = 0
fall.recover = 0
air.fall = 0
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
p2stateno = 3805
kill = 0


[State 11013, HitDef]
type = HitDef
trigger1 = AnimElem = 76
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=25,2
priority  = 7, Hit
hitflag = MAF
guardflag = LA
pausetime = 2,3
sparkno = s3411 +(random%2)
guard.sparkno=s8105
sparkxy = -25 , -67
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 36
ground.hittime  = 36
guard.ctrltime = 36
ground.velocity = 0,0
guard.velocity = -8
air.velocity = -3,-4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
envshake.time=10
envshake.freq=60
envshake.ampl=5
fall = 0
fall.recover = 0
air.fall = 0
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 35, 35
forcestand = 1
p2stateno = 3805
kill = 0


[State 3120, lowhits]
type=hitdef
trigger1= animelem=105 && anim=3401
ID=3401
attr=S,HA
damage= 74, 9
animtype=Hard
air.animtype=Hard
fall.animtype=Hard
guardflag=M
hitflag=MAF
priority=4,Hit
pausetime=60,50
guard.pausetime=12,12
sparkno=-1
guard.sparkno=s8105
sparkxy=-10,-90
hitsound   = S1,14
guardsound = S1,15
p2facing=1
ground.type=Low
ground.slidetime=16
ground.hittime=16
ground.velocity= .77, -8
ground.cornerpush.veloff = 0
air.type=Low
air.velocity= .77, -6
guard.velocity= -10.52
guard.cornerpush.veloff = -12.74
getpower=0
givepower=36,36
envshake.time=24
envshake.freq=120
envshake.ampl=8
fall=1
fall.recover=0
kill= 0
yaccel=.6
forcestand=1

[State 3160, Snd]
type=playsnd
trigger1= anim=3401 && animelem=105
value=0,20
channel=0



[State 3160, Dust]
type=helper
trigger1= anim=3401 && animelem=105
helpertype=normal
stateno=3125
ID=3125
name="B&W Dust"
postype=p1
pos=0,0
ownpal=1
ignorehitpause=1
persistent=0
size.xscale=2
size.yscale=2


[State 3160, Sparks]
type=helper
triggerall= movehit=1 && numtarget
triggerall= (target,movetype=H) && !(target,time)
trigger1= anim=3401 && animelemtime(105)>=0 && animelemtime(106)<0
helpertype=normal
stateno=7050
ID=7050
name="Shin Shoryuken Spark"
postype=p2
pos=(target,const(size.ground.front)-10),(ifelse(anim=3161,-75,-64) -floor(p2dist y))
ownpal=1
facing=-1
ignorehitpause=1
pausemovetime=255
supermovetime=255


[State 3160, focus]
type=explod
trigger1= anim=3401 && animelem=102
anim=3167
sprpriority=3
postype=p1
pos=12,-25
removeongethit=1


[State 1100, ChangeState]
type = ChangeState
trigger1 = animtime =0
value = 3402

;---------------------------------------------------------------------

[Statedef 3402];shinryu
type = A
movetype = A
physics = N
anim = 3402
poweradd = 0
velset = 0,0
juggle = 0
ctrl = 0
sprpriority = 1
HitCountPersist = 0

[State 4110, start-effect]
type = Helper
trigger1 = Time = 0
name = "st-ef"
ID = 4115
stateno = 4115
postype = P1
pos = 8,-83
vel = 0,0
bindtime = 1
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
ignorehitpause = 1
persistent = 0

[State 3160, Snd]
type=playsnd
trigger1= animelem=1
value=0,21

[State 0, ]
type  = HitAdd
trigger1  = animelem = 3
value  = 4


[State 4110, effect]
type = Helper
trigger1 = AnimElem = 2
name = "shinryu-effect"
ID = 4116
stateno = 4116
postype = P1
pos = 8,-132
vel = 0,0
bindtime = 1
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
ignorehitpause = 1
persistent = 0

[State 4110, start-effect_hado]
type = Helper
triggerall = Anim =3402
trigger1 = AnimElemTime(3) = 1
trigger2 = AnimTime = 0
name = "st-ef(hado)"
ID = 4118+GameTime
stateno = 4118
postype = P1
pos = 0,-80
vel = 0,0
facing  = -1
bindtime = 1
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
ignorehitpause = 1
persistent = 1

[State 4110, start-shake]
type = EnvShake
trigger1 = AnimELem = 2
time = 42
freq = 70
ampl = 3
phase = 0
ignorehitpause = 1
persistent = 0

[State 4110, vel]
type = VelSet
trigger1 = AnimElem = 2
X = 3.2
Y = -10.8
persistent = 0



[State 4110, grav]
type = VelAdd
trigger1 = AnimElem = 2, >= 0
X = ifelse(Vel X > 0, -0.12, 0)
Y = 0.38

[State 8900, Start-effect]
type = Explod
trigger1 = AnimElemTime(1) = 1
ID = 2465
anim = 2465
postype = P1
pos = 0,ceil(Pos Y)
vel = 0,0
accel = 0,0
pausemovetime = 99999
supermovetime = 99999
sprpriority = 0
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0
scale = 0.68,0.65

[State 4110, start-effect_dust]
type = Helper
trigger1 = AnimElem = 2
name = "st-ef(dust)"
ID = 4117
stateno = 4117
postype = P1
pos = 0,0
vel = 0,0
facing  = -1
bindtime = 1
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
ignorehitpause = 1
persistent = 0

[State 4110, start-snd(dragon)]
type = PlaySnd
trigger1 = AnimElem = 2
value = 5,20
IgnoreHitPause = 1
supermovetime = 0
persistent = 0



[State 4110, debug]
type = PlayerPush
trigger1 = Anim = 3402
value = 0
ignorehitpause = 1



[State 4110, hitdef]
type = Hitdef
trigger1 = 1
persistent = 2
ID=100000
;ID = 4110
attr = A, HA
animtype = Heavy
air.animtype = Up
damage = 22,2
getpower = 0
hitflag = MAF
guardflag = M
priority = 5, Hit
pausetime = 2,2
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -13,-74
hitsound   = S1,14
guardsound = S1,15
ground.type = High
air.type    = Low
ground.slidetime = 14
ground.hittime   = 8
ground.velocity  = 1.2 , -8.82
air.velocity     = -3 , -10.50
ground.cornerpush.veloff = -6.4
fall     = 1
air.fall = 1
fall.recover = 0
envshake.time=16
envshake.freq=120
envshake.ampl=4
envshake.phase = 90




[State 1310,fatality]
type=targetstate
triggerall= enemynear, life<=0
triggerall= roundstate!=2 && anim=3402
trigger1= animelemtime(3)>=0 
value=100000
ID=100000
ignorehitpause=1

[state 1051, fatality]
type = helper
triggerall= enemynear, life<=0
triggerall= roundstate!=2 && anim=3402
trigger1= animelemtime(3)>=0 
name = "P01"
id = 1000000
stateno = 1000000
postype = p1
pos = 60,5
sprpriority = -1
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 4110, anim]
type = ChangeAnim
trigger1 = Anim = 3402 && AnimTime = 0
value = 1013
ignorehitpause = 1

[State 4110, bg]
type = BGPalFx
triggerall = Anim = 3402
trigger1 = AnimElem = 2
time = 45
sinadd = -150,-150,-150, 90
ignorehitpause = 1


[State 3050, ChangeState]
type = ChangeState
trigger1= Pos Y >= 0 && Vel Y > 0
value = 3009


;--------------------------------------------------------------------


[Statedef 4115]
type = A
movetype = I
physics = N
anim = 9741
velset = 0,0
ctrl = 0
sprpriority = 1

[State 4115, effect]
type = Explod
trigger1 = Time = 0
ID = 4115
anim = 4115
postype = P1
pos = 0,0
vel = 0,0
accel = 0,0
bindtime = 1
ownpal = 0
sprpriority = 4
removetime = 20
supermovetime = 99999
pausemovetime = 99999
ignorehitpause = 1
persistent = 0
scale = 0.5 , 0.5

[State 4115, scale++]
type = ModifyExplod
trigger1 = Time >= 1
scale = 0.5+(Time/5.00) , 0.5+(Time/5.00)
IgnoreHitpause = 1

[State 4115, pal]
type = PalFx
trigger1 = Time >= 1
time = 1
add = -(Time*20),-(Time*15),-(Time*18)
ignorehitpause = 1

[State 4115, eof]
type = DestroySelf
trigger1 = Time >= 20
ignorehitpause = 1



[Statedef 4116];flames helper
type     = A
movetype = I
physics  = N
anim     = 4116
velset = 0,0
ctrl = 0
sprpriority = 4

[State 4116, noshadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 4116, bind]
type = BindToRoot
trigger1 = Root,Anim = 3402
trigger1 = 1
time = 1
pos = 8,-132
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 4116, shadows]
type = AfterImage
trigger1 = Time = 0
time = 99999
Trans = add
length   = 12
FrameGap = 2
timegap  = 3
PalBright = 1,0,1
PalContrast = 90,50,90
PalAdd = -10,-10,-10
PalMul =  .5,.5,.5
IgnoreHitPause = 1
Persistent = 1

[State 4116, pal]
type = PalFx
trigger1 = !Root,Anim = 3402
trigger1 = 1
time = 1
add = -(Time*20),-(Time*20),-(Time*20)
ignorehitpause = 1

[State 4116, eof]
type = DestroySelf
trigger1 = !(Root,StateNo = 3402)
trigger2 = Root,Vel Y >= 2
ignorehitpause = 1


[Statedef 4117]
type     = A
movetype = I
physics  = N
anim     = 4117
velset = 0,0
ctrl = 0
sprpriority = 4

[State 4117, noshadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 4117, shadows]
type = AfterImage
trigger1 = Time = 0
time = 99999
Trans = add
length = 4
FrameGap = 1
PalBright = 1,0,1
PalContrast = 90,90,90
PalAdd = -10,-10,-10
PalMul =  .8,.8,.8
IgnoreHitPause = 1
Persistent = 1

[State 4117, circle-effect]
type = Explod
trigger1 = Time = 0
ID = 4117+GameTime
anim = 2465
postype = P1
pos = 0,0
vel = 0,0
accel = 0,0
bindtime = 1
ownpal = 1
sprpriority = 1
supermovetime = 99999
pausemovetime = 99999
scale = 0.95 , 0.95

[State 4117, eof]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause = 1



[Statedef 4118]
type = A
movetype = I
physics = N
anim = 9741
velset = 0,0
ctrl = 0
sprpriority = -1

[State 8162, effect]
type = Explod
trigger1 = Time = 0
ID = 4118
anim = 4118
postype = P1
pos = 0,0
vel = 0,0
accel = 0,0
bindtime = 1
ownpal = 0
removetime = 20
sprpriority = 4
supermovetime = ifelse(Parent,StateNo = 4202, 0, 99999)
pausemovetime = ifelse(Parent,StateNo = 4202, 0, 99999)
ignorehitpause = 1
persistent = 0
scale = 0.2 , 0.2

[State 8162, effect]
type = Explod
trigger1 = Time = 0
ID = 4119
anim = 4119
postype = P1
pos = 0,0
vel = 0,0
accel = 0,0
bindtime = 1
ownpal = 0
removetime = 20
sprpriority = -4
supermovetime = ifelse(Parent,StateNo = 4202, 0, 99999)
pausemovetime = ifelse(Parent,StateNo = 4202, 0, 99999)
ignorehitpause = 1
persistent = 0
scale = 0.2 , 0.2

[State 8162, scale++]
type = ModifyExplod
trigger1 = Time >= 1
ID = 4118
postype = P1
pos = 0,0
scale = 0.20+(Time/6.00) , 0.20+(Time/6.00)
supermovetime = ifelse(Parent,StateNo = 4202, 0, 99999)
pausemovetime = ifelse(Parent,StateNo = 4202, 0, 99999)

[State 8162, scale++]
type = ModifyExplod
trigger1 = Time >= 1
ID = 4119
postype = P1
pos = 0,0
scale = 0.20+(Time/6.00) , 0.20+(Time/6.00)
supermovetime = ifelse(Parent,StateNo = 4202, 0, 99999)
pausemovetime = ifelse(Parent,StateNo = 4202, 0, 99999)

[State 8162, pal]
type = PalFx
trigger1 = 1
time = 1
add = -(Time*20),-(Time*20),-(Time*20)
	;mul = 400,400,400
supermovetime = 0	;99999
pausemovetime = 0	;99999

[State 8162, eof]
type = DestroySelf
trigger1 = Time >= 20
supermovetime = 99999
pausemovetime = 99999


; HITG_SHAKE_High
[Statedef 3800]
type    = S
movetype= H
physics = N
velset = 0,0

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
value = 5002

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 3801 ;HITG_SLIDE


; HITG_SLIDE_High
[Statedef 3801]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5007

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITG_SHAKE_Low
[Statedef 3805]
type    = S
movetype= H
physics = N
velset = 0,0

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
value = 5012

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 3806 ;HITG_SLIDE

; HITG_SLIDE_Low
[Statedef 3806]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5017

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;power geyser
[Statedef 4200]
type=S
physics=S
movetype=A
anim=4200
ctrl=0
velset=0,0
sprpriority=-1
facep2=1

[State 3050, VarSet]
type = VarSet
trigger1 = !time && var(12)<=0
var(5) = ifelse ((Command = "geyser2" && Power >= 2000) || (Command = "geyser3" && (Power >= 2000 && Power < 3000)), 1, ifelse (Command = "geyser3" && Power >= 3000, 2, 0))


[State 1200, strengthvarAI]
type=varset
trigger1= !time && var(12)>=1
var(5)= ifelse((power>=3000 && random<200 ), 2, ifelse((Power >= 2000 && Power < 3000 && random<300), 1, 0))


[State 4200, Super Pause]
type=superpause
trigger1= animelem=2
time=63
anim=-1
sound=S1, 21
p2defmul=1
darken=0
movetime=63
poweradd = ifelse (Var(5) = 0, -1000, ifelse (Var(5) = 1, -2000, -3000))



[State 3000, strengthvar]
type=varset
trigger1= var(54)!=5 || var(54)!=6 || var(54)!=7
var(54)=ifelse (Var(5) = 0, 5, ifelse (Var(5) = 1, 6, 7))

[State 4200, ECreset]
type=palfx
trigger1= !time
trigger1= !(var(33):=0)
time=1

[State 4200, Super Pause FX]
type=helper
trigger1= animelem=2
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos=-18,-126
ownpal=1
persistent=0
supermovetime=9999



[State 4200, nhb]
type=nothitby
trigger1= animelemtime(16)<0
time=1
value=SCA

[State 4200, push]
type=playerpush
trigger1= animelemtime(17)<0
value=0
ignorehitpause=1

[State 4200, Aura]
type=helper
trigger1= animelem=4
helpertype=normal
stateno=4203
ID=4203
name="KKZ Aura"
postype=p1
ownpal=1
supermovetime=46


[State 1200, ound]
type = PlaySnd
trigger1 = animelem = 15
value = 9,1
volume = 50


[State 4200, imageoff]
type=afterimagetime
trigger1= animelemtime(17)>=0
time=0

[State Idle]
type=statetypeset
trigger1= animelemtime(17)>=0
movetype=I

[State ,Super]
type = Helper
trigger1 = AnimElemtime(15) = 0
id = 4206
name = "geyser1"
pos = 70,0
postype = P1
stateno = 4206
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
size.xscale = .5
size.yscale = .5

[State ,Super]
type = Helper
triggerall = Var(5) = 1 || Var(5) = 2
trigger1 = AnimElemtime(15) = 15
id = 4206
name = "geyser2"
pos = 110,0
postype = P1
stateno = 4206
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
size.xscale = .5
size.yscale = .5

[State ,Super]
type = Helper
triggerall = Var(5) = 2
trigger1 = AnimElemtime(16) = 15
id = 4206
name = "geyser3"
pos = 150,0
postype = P1
stateno = 4206
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
size.xscale = .6
size.yscale = .6

[State 903, EnvShake]
type = EnvShake
trigger1 = AnimElemtime(15) = 0
trigger2 = Var(5) = 1
trigger2 = AnimElemtime(15) = 15
trigger3 = Var(5) = 2
trigger3 = AnimElemtime(16) = 15
time = 15
ampl = 8

[State 1200, ound]
type = PlaySnd
trigger1 = AnimElemtime(15) = 0
trigger2 = Var(5) = 1
trigger2 = AnimElemtime(15) = 15
trigger3 = Var(5) = 2
trigger3 = AnimElemtime(16) = 15
value = 31,3
volume = 50


[State 4200, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1

;--------------------------------------------------------------------

[Statedef 4203]
physics=N
velset=0,0
anim=4203
sprpriority=0

[State 4203, Trans]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 4203, image]
type=afterimage
trigger1= !time
time=999
timegap=1
framegap=1
length=2
palcontrast=100,100,100
trans=add

[State 4203, Bind]
type=bindtoroot
trigger1= 1
time=-1

[State 4203, End]
type=destroyself
trigger1= root,stateno!=4200 || root,anim!=4200
trigger2= root,stateno=4200 && root,animelemtime(19)>=0
trigger3= !animtime


;---------------------------------------------------------------------------
; Flame Explosion
[Statedef 4206]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 4206
sprpriority = 7

[State 1005, strengthvar]
type=varset
trigger1= !time
var(5)=root,var(5)

[State 1005, movehitvar]
type=varset
trigger1= movecontact && numtarget
trigger1= !(target,ishelper)
var(25)=1
ignorehitpause=1

[State -2, Debug]
type=displaytoclipboard
trigger1= 1
text= "var5=%d var25=%d Damage=%f var54=%d"
params= var(5), var(25), fvar(12), var(54)
ignorehitpause=1


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible


[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 4206
ID = 3090
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
scale = .85,.85
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = parent,AnimElemtime(15) = 0
anim = 4207
ID = 3090
pos = -75,0
postype = p1
bindtime = -1
removetime = -2
scale = .85,.85
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 1


[State 0, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, HP
damage=128,8
animtype = heavy
hitflag = MAF
guardflag = MA
pausetime = 0,10
sparkno = S4207
guard.sparkno = S4207
sparkxy = 0, ceil(enemy,Pos Y)-30
guardsound = S1,15
hitsound = S1,25
ground.type = Low
ground.slidetime = 18
ground.hittime = 30
air.hittime = 30
guard.ctrltime = 18
ground.velocity = -3, -8.5
guard.velocity = -8
air.velocity = -3, -8
yaccel = .6
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 15
envshake.ampl = 5
fall.envshake.time = 15
fall.envshake.ampl = 5
getpower = 0,0
givepower = 24, 24
forcestand = 1
;persistent = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.color=32
palfx.sinadd=80,25,0,8
palfx.mul=512,256,128
palfx.time=32


[State 3005, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=4208
ignorehitpause=1


[State 3005,hitby]
type = hitby
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1


[State 1015, flames]
type=helper
trigger1= movehit && numtarget && numhelper(7180)<1
trigger1= !(target,time) && (target,movetype=H)
helpertype=normal
stateno=7180
ID=7180
name="flames"
postype=p2
bindtime=1000
ownpal=1
facing=-1
size.ground.front=0
size.ground.back=0
ignorehitpause=1


[State 1205, ChangeState]
type = destroyself
trigger1 = animtime = 0
;--------------------------------------------------------------------

; Flame Explosion
[Statedef 4208]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 4208
sprpriority = 7

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 4208
ID = 3090
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
scale = .85,.85
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 1

[State 1205, ChangeState]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------

[Statedef 4210]
physics=N
anim=9741

[State 4210, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause=1

[State 4210, Dust]
type=explod
trigger1= !time
anim=7501
ID=4210
sprpriority=-2
postype=p1
removetime=25

[State 4210, Fade]
type=palfx
trigger1= !time
mul=384,384,384
sinadd=-255,-255,-255,100
time=25

[State 4210, Shrink]
type=modifyexplod
trigger1= 1
ID=4210
scale=.5+(.1*time),.1+(.02*time)

[State 4210, End]
type=destroyself
trigger1= time>=26



;--------------------------------------------------------------------


[Statedef 1066]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 0
ctrl = 0
velset = 0,0
anim = 6015
sprpriority = 2
p2facing=1

[State Idle]
type=statetypeset
trigger1= animelemtime(3)>=0
movetype=I

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0


[State 0, Helper]
type = Helper
trigger1 = time = 9 
helpertype = normal ;player
name = "lifeball"
ID = 6016
stateno = 6016
pos = ifelse(p2statetype=L, -35, -5),  ifelse (p2statetype=L, 0, -80)
postype = p2  
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .35
size.yscale = .35



[State 0, PlaySnd]
type = PlaySnd
trigger1 = numhelper (6016) = 4
value = S800,7
volume = 100
channel = -1
freqmul = 1.0
loop = 0
pan = 0
persistent = 0


[State 240, 4] 
type = ChangeState
trigger1 = time > 40 && NumHelper (6016) < 1 && anim = 6015
value = 0
ctrl = 1



[Statedef 6016]
type    = S
movetype= H
physics = N
juggle  = 1
poweradd= 0
ctrl = 0
anim = 6016
sprpriority = 3



[State 3005,hitby]
type = nothitby
trigger1= (root,Numhelper(1111))
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1


[State 3005, hitoverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA,NP,SP,HP
stateno = 1011
ignorehitpause = 1

[State 3005,hitby]
type = hitby
triggerall= !(root,Numhelper(1111))
trigger1 = 1
time = -1
value = SCA,NP,SP,HP
ignorehitpause  = 1



[State 0, PalFX]
type = PalFX
trigger1 = time = 0
time = 60
add = 0,0,0
mul = 0,50,6
invertall = 0
color = 256



[State 0, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 4
range = 0,75


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0 && var (4) = [0,45]
value = S800,1
volume = 100
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0 && var (4) = [46,75]
value = S800,4
volume = 100
channel = -1



[State 0, VelSet]
type = VelSet
trigger1 = time > 5 && parentdist x > 0
x = 1.1

[State 0, VelSet]
type = VelSet
trigger1 = time > 5 && parentdist x < 0
x = -1.1

[State 0, VelAdd]
type = Veladd
trigger1 = time > 0 && var (4) = [0,30]
y = -.5

[State 0, VelAdd]
type = Veladd
trigger1 = time > 0 && var (4) = [20,50]
y = .7


[State 0, VelAdd]
type = Veladd
trigger1 = time > 10 && var (4) = [46,75]
y = -.5

[State 0, VelAdd]
type = Veladd
trigger1 = time > 30 && var (4) = [46,70]
y = .5


[State 0, VelAdd]
type = Veladd
trigger1 = pos Y < -100
y = .8


[State 0, VelAdd]
type = Veladd
trigger1 = pos Y > -50
y = -7


[State 0, VelAdd]
type = Velset
trigger1 = vel Y < -7.7
y = 1


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;----------

[State 200, 1]
type = HitDef
trigger1 = !movecontact && time<10
attr = S, NA
damage = 50,0
animtype = light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 30
sparkno = -1
sparkxy = -10, -76
guard.sparkno = -1
hitsound = S31, 6
guardsound = S1, 15
ground.type = High
ground.slidetime = 15
ground.hittime  = 0
ground.velocity = 0
airguard.velocity = 0,0
air.type = High
air.velocity =0 ,0
air.hittime = 0
fall.recover = 0
envshake.time = 5
envshake.freq = 50
envshake.ampl = 3
envshake.phase = 3
kill = 0



[State 200, 1]
type = HitDef
trigger1 = time>50
attr = S, NA
damage = 0,0
animtype = light
;guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = -1
sparkxy = -10, -76
guard.sparkno = -1
hitsound = S9, 6
guardsound = S1, 15
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
airguard.velocity = 0,0
air.type = High
air.velocity =0 ,0
air.hittime = 0
fall= 0
affectteam=B
kill = 0
palfx.time = 20
palfx.add = 0,50,0
palfx.mul = 256,256,256
palfx.sinadd = 0,50,0,30
palfx.invertall = 0
palfx.color = 256



[State 0, LifeAdd]
type = targetLifeAdd
trigger1 = movecontact && time>50
value = 50
kill = 0

[State 1020, Afterimage]
type = AfterImage
trigger1 = Time = 0
trigger2 = Time = 1
trigger3 = Time = 2
length = 30
palcolor = 256
palinvertall = 0
PalBright   =  30, 30,  30
palpostbright = 0,0,0
PalContrast =  120, 120, 120
PalAdd      = -1,-1,-1
PalMul      = .90,.90,.90
TimeGap  = 1
FrameGap = 1
Trans = Add
time = 3


[State 1020, Afterimage]
type = AfterImageTime
trigger1 = 1
time = 10



[State 240, 4]
type = Destroyself
trigger1 = parentdist x <= -10 && time > 50
trigger2 = moveguarded
trigger3= movecontact && time>50  && numtarget 
trigger3= !(target,ishelper)
trigger4= roundstate!=2
trigger5= root, anim!=6015
;---------------------------------------------------------------------


[Statedef 6990]
type=A
physics=N
movetype=I
anim=5070
sprpriority=-1
ctrl=0

[State 0, LifeAdd]
type = Lifeset
trigger1 = 1
value = 1
kill = 0


[State 1200, ound]
type = PlaySnd
trigger1 = AnimElem= 1
value = 31,4


[State 6990]
type=varset
trigger1= 1
var(53)=1

[State 405, UCantHitMe]
type = NotHitBy
trigger1 = stateno = 6990
value = SCA

[State 0, VelAdd]
type = Velset
trigger1 = anim=5070
trigger1 = animelem=1 || animelem=2
x = -8
y=-6


[State 0, VelAdd]
type = Velset
trigger1 = anim=5070 && animelemtime(3)>=0
x = -8
y=5


[State 6990, end]
type=changestate
trigger1=(Pos Y>=0) && (Vel Y>0)
value=6992
ctrl=0


[Statedef 6992]
type=A
physics=N
movetype=H
anim=6992
sprpriority=-1
ctrl=0


[State 0, Helper]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "carga"
ID = 3128
stateno = 3128
pos = 0,-10
postype = p1   
facing = 1
keyctrl = 0
ownpal = 0
supermove =999
pausemove =999

[State 3050, Superpause]
type = SuperPause
trigger1 = animelem=4
time = 30
;movetime = ifelse (Var(5) = 0, 45, ifelse (Var(5) = 1, 40, 35))
anim = -1
sound = S1, 21
poweradd = -2000
darken = 0

[State 895, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, VelAdd]
type = Velset
trigger1 = 1
x = 0


[State 405, UCantHitMe]
type = NotHitBy
trigger1 = stateno = 6992
value = SCA

[State 1008, 1]
type = Helper
trigger1 = AnimElemTime(4) >18
helpertype = normal
name = "deadkenbody"
stateno = 6996
ID = 6996
pos = 0, 0
postype = p1
ownpal = 1


[State 6990, end]
type=changestate
trigger1=animtime=0
value=6993
ctrl=0


;ai resurrection

[Statedef 6993]
type=A
physics=N
movetype=I
anim=6990
sprpriority=2
ctrl=0
facep2=1
power=-2000

[State 405, UCantHitMe]
type = NotHitBy
trigger1 = stateno = 6993
value = SCA, AT

[State 9741, armourvar]
type=varset
trigger1= !time
var(39)=1

[State 0, 0]
type = VelSet
trigger1 = animelemtime(16)<=0
y = -1.3
x=0

[State 200, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 31, 7


[State 0, 0]
type = VelSet
trigger1 = animelemtime(16)>=1
y = 1.3

[State 0, 0]
type = Veladd
trigger1 = animelemtime(23)>=1
y = 3

[State 2200, 1]
type = Projectile
trigger1 = animelem=1
trigger2 = animelem=5
projanim = 6011
projremovetime = 15
projpriority = 7
projsprpriority = 3
attr = S, NA
animtype=Light
air.animtype = Back
fall.animtype = Back
guardflag=M
hitflag=MAF
damage = 0
pausetime = 0,4
sparkno = -1
sparkxy = -11,-85
hitsound = S1, 13
guardsound = S1, 15
ground.type = high
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -9,0
air.velocity = -8,-0.5
guard.velocity = -10
fall = 0
fall.recover = 1
getpower = 0

[State 8900, Start-effect]
type = Explod
trigger1 = AnimElemTime(1) = 1
ID = 2465
anim = 2465
postype = P1
pos = 0,ceil(Pos Y)
vel = 0,0
accel = 0,0
pausemovetime = 99999
supermovetime = 99999
sprpriority = 0
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0
scale = 0.68,0.65

[State 4110, start-effect_hado]
type = Helper
trigger1 = AnimElemTime(4) = 1
name = "st-ef(hado)"
ID = 4118+GameTime
stateno = 4118
postype = P1
pos = 0,-50
vel = 0,0
facing  = -1
bindtime = 1
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
ignorehitpause = 1
persistent = 1



[State 6990]
type=playsnd
trigger1= animelem=2
value=5,20
channel=0

[State 6990]
type=playsnd
trigger1= !time
value=7,1




[State 6990]
type=bgpalfx
trigger1= random<50
time=10
add=128,128,128
sinadd=-128,-128,-128,40


[State 6990, end]
type=changestate
trigger1= (Pos Y>=0) && (Vel Y>0)
value=6994
ctrl=0

[Statedef 6994]
type=A
physics=N
movetype=I
anim=197
facep2=1
sprpriority=2
ctrl=0

[State 3050, Superpause]
type = SuperPause
trigger1 = animelem=1
time = 64
movetime = 64
anim = -1
sound = -1
poweradd = 0
darken = 0

[State 1200, ound]
type = PlaySnd
trigger1 = AnimElem= 1
value = 31,5


[State 405, UCantHitMe]
type = NotHitBy
trigger1 = stateno = 6994
value = SCA

[State 895, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 6990, end]
type=changestate
trigger1= animtime=0
value=0
ctrl=1



;dead ken
[Statedef 6996]
type    = A
movetype= I
anim = 5110
sprpriority = -1

[State 5081, 2]
type = VelSet
trigger1 = time=0
x = 0

[State 0, Sangue]
type = Explod
trigger1 = NumExplod(100156) <= 1
trigger1 = time = 220
anim = 10015
ID = 100156
pos = 0,3
postype = p1
bindtime = 1
sprpriority = 599
ownpal = 1
removetime = -1
shadow = -1,-1,-1

[State 815, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 3005,hitby]
type = hitby
trigger1 = 1
time = -1
value = SCA,AA
ignorehitpause  = 1


[State 3005, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1



[State 2004, hitoverride]
type=hitoverride
trigger1 = 1
time=-1
attr=SCA,AA
stateno=6997
ignorehitpause=1



[Statedef 6997]
type    = A
movetype= H
anim = 6997
sprpriority = -1

[State 5201, flash]
type=palfx
trigger1 = time = 0
add=0,0,200
sinadd=0,0,-200,40
time=10
time=1

[State 815, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 5081, 1]
type = hitvelset
trigger1 = !time
x = -1

 
[State 3000, 4]
type = ChangeState
trigger1 = animtime=0
value = 6996





;---RED---
[Statedef 7180]
physics=N
velset=0,0
anim=9741
sprpriority=4

[State 7180, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause=1

[State 7180, flames]
type=explod
trigger1= 1
anim=2705
ID=7180
sprpriority=3
postype=p2
vel=-.2,-.75
pos= (enemynear,const(size.mid.pos.x)), ifelse((enemynear,statetype=L), 0, (enemynear,const(size.mid.pos.y) + 10))
random=40,40
scale=.5,.5
ownpal=1

[State 7180, Pos]
type=posadd
trigger1= 1
x=ceil(p2dist x)
y=ceil(p2dist y)

[State End]
type=destroyself
triggerall= numenemy
trigger1= enemynear,ctrl
trigger2= enemynear,movetype!=H || enemynear,stateno=5300
trigger3= enemynear,statetype=L && (enemynear,stateno!=[5080,5081])

[State End]
type=destroyself
trigger1= !numenemy || time>=120

;--------------------------------------------------------------------

; fatality
[Statedef 100000]
type    = S
movetype= H
physics = S
juggle  = 2
ctrl = 0
velset = 0,0

[State 5210, nhb]
type=nothitby
trigger1= 1
value=SCA
time=2


[State 007, 2]
type = PosSet
trigger1 = time = 0
y = 9999


[State 007, 2]
type = SelfState
trigger1 = life = 0
value = 5150


;---------------------------------------------------------------------
[Statedef 1000000]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600


[State 4110, slack]
type = PlaySnd
trigger1 = !time
value = 31,1



[State 9530, Blood]
type = Explod
trigger1 = !time
anim = 10016
id = 10016
pos = 0,-45
postype = p1
sprpriority = 7
ontop = 1
ownpal = 1

[state 1051, pedao 01]
type = helper
trigger1 = !time
trigger1 = NumHelper(10000) = 0
name = "P01"
id = 10000
stateno = 10000
postype = p1
pos = 0,-65
sprpriority = -1
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1051, pedao 02]
type = helper
trigger1 = !time
trigger1 = NumHelper(10001) = 0
name = "P02"
id = 10001
stateno = 10001
postype = p1
pos = 0,-65
sprpriority = -1
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1051, pedao 03]
type = helper
trigger1 = !time
trigger1 = NumHelper(10002) = 0
name = "P03"
id = 10002
stateno = 10002
postype = p1
pos = 0,-65
sprpriority = -1
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1051, pedao 04]
type = helper
trigger1 = !time
trigger1 = NumHelper(10003) = 0
name = "P04"
id = 10003
stateno = 10003
postype = p1
pos = 0,-65
sprpriority = -1
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1051, pedao 05]
type = helper
trigger1 = !time
trigger1 = NumHelper(10004) = 0
name = "P05"
id = 10004
stateno = 10004
postype = p1
pos = 0,-65
sprpriority = -1
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1051, pedao 06]
type = helper
trigger1 = !time
trigger1 = NumHelper(10005) = 0
name = "P06"
id = 10005
stateno = 10005
postype = p1
pos = 0,-65
sprpriority = -1
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1051, pedao 07]
type = helper
trigger1 = !time
trigger1 = NumHelper(10006) = 0
name = "P07"
id = 10006
stateno = 10006
postype = p1
pos = 0,-65
sprpriority = -1
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1051, pedao 08]
type = helper
trigger1 = !time
trigger1 = NumHelper(10007) = 0
name = "P08"
id = 10007
stateno = 10007
postype = p1
pos = 0,-65
sprpriority = -1
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, ]
type = DestroySelf
trigger1 = time = 1

;--------------------------------------------------------------------

[statedef 10000]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600

[State 0, ]
type = Explod
trigger1 = time =0
anim = 10000
ID = 10000
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1

[State 0, 0]
type = VelSet
trigger1 = time = 0
x = -3*ifelse(random <500,1,-1)
y = -2

[State 0, ]
type = Gravity
trigger1 = time > 20


[State 0, ]
type = ChangeState
trigger1 = pos Y > 0 && Vel Y > 0
value = 10010

;------------------
[statedef 10010]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600
velset = 0,0

[State 0, ]
type = RemoveExplod
trigger1 = time = 0
ID = 10000

[State 0,]
type = Explod
trigger1 = time = 0
anim = 10007
ID = 10007
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1
shadow = 10,10,10

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 1
value = 29,ceil(random/400)

[State -3, 1]
type = EnvShake
trigger1 = Time = 0
time = 2
ampl = -5

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 0, ]
type = DestroySelf
trigger1 = time = 2

;---------------------------------------------------------------------------------------
;Pedao 02 (coxa)

[statedef 10001]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600

[State 0, ]
type = Explod
trigger1 = time =0
anim = 10001
ID = 10001
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1

[State 0, 0]
type = VelSet
trigger1 = time = 0
x = -1*ifelse(random <500,1,-1)
y = -9

[State 0, ]
type = Gravity
trigger1 = time > 20


[State 0, ]
type = ChangeState
trigger1 = pos Y > 0 && Vel Y > 0
value = 10011

;------------------
[statedef 10011]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600
velset = 0,0

[State 0, ]
type = RemoveExplod
trigger1 = time = 0
ID = 10001

[State 0, ]
type = Explod
trigger1 = time = 0
anim = 10008
ID = 10008
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1
shadow = 10,10,10

[State 0, Sangue]
type = Explod
trigger1 = time = 2
anim = 10015
ID = 10015
pos = 0,3
postype = p1
bindtime = -1
sprpriority = 599
ownpal = 1
removetime = -1
shadow = -1,-1,-1

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 1
value = 29,ceil(random/400)

[State -3, 1]
type = EnvShake
trigger1 = Time = 0
time = 2
ampl = -5

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 0, ]
type = DestroySelf
trigger1 = time = 2

;---------------------------------------------------------------------------------------
;Pedao 03 (bacia)

[statedef 10002]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600

[State 0, ]
type = Explod
trigger1 = time =0
anim = 10002
ID = 10002
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1

[State 0, 0]
type = VelSet
trigger1 = time = 0
x = -1.5*ifelse(random <500,1,-1)
y = -5

[State 0, ]
type = Gravity
trigger1 = time > 10


[State 0, ]
type = ChangeState
trigger1 = pos Y > 0 && Vel Y > 0
value = 10012

;------------------
[statedef 10012]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600
velset = 0,0

[State 0, ]
type = RemoveExplod
trigger1 = time = 0
ID = 10002

[State 0, ]
type = Explod
trigger1 = time = 0
anim = 10009
ID = 10009
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1
shadow = 10,10,10

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 1
value = 29,ceil(random/400)

[State -3, 1]
type = EnvShake
trigger1 = Time = 0
time = 2
ampl = -5

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 0, ]
type = DestroySelf
trigger1 = time = 2

;---------------------------------------------------------------------------------------
;Pedao 04 (mo)

[statedef 10003]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600

[State 0, ]
type = Explod
trigger1 = time =0
anim = 10003
ID = 10003
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1

[State 0, 0]
type = VelSet
trigger1 = time = 0
x = -2*ifelse(random <500,1,-1)
y = -3

[State 0, ]
type = Gravity
trigger1 = time > 30


[State 0, ]
type = ChangeState
trigger1 = pos Y > 0 && Vel Y > 0
value = 10013

;------------------
[statedef 10013]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600
velset = 0,0

[State 0, ]
type = RemoveExplod
trigger1 = time = 0
ID = 10003

[State 0, ]
type = Explod
trigger1 = time = 0
anim = 10010
ID = 10010
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1
shadow = 10,10,10

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 1
value = 29,ceil(random/400)

[State -3, 1]
type = EnvShake
trigger1 = Time = 0
time = 5
ampl = -5

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 0, ]
type = DestroySelf
trigger1 = time = 2

;---------------------------------------------------------------------------------------
;Pedao 05 (osso)

[statedef 10004]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600

[State 0, ]
type = Explod
trigger1 = time =0
anim = 10004
ID = 10004
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1

[State 0, 0]
type = VelSet
trigger1 = time = 0
x = -2.5*ifelse(random <500,1,-1)
y = -5

[State 0, ]
type = Gravity
trigger1 = time > 20


[State 0, ]
type = ChangeState
trigger1 = pos Y > 0 && Vel Y > 0
value = 10014

;------------------
[statedef 10014]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600
velset = 0,0

[State 0, ]
type = RemoveExplod
trigger1 = time = 0
ID = 10004

[State 0, ]
type = Explod
trigger1 = time = 0
anim = 10011
ID = 10011
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1
shadow = 10,10,10

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 1
value = 29,ceil(random/400)

[State -3, 1]
type = EnvShake
trigger1 = Time = 0
time = 5
ampl = -5

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 0, ]
type = DestroySelf
trigger1 = time = 2


;---------------------------------------------------------------------------------------
;Pedao 06 (Custelas)

[statedef 10005]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600

[State 0, ]
type = Explod
trigger1 = time =0
anim = 10005
ID = 10005
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1

[State 0, 0]
type = VelSet
trigger1 = time = 0
x = -3.2*ifelse(random <500,1,-1)
y = -10

[State 0, ]
type = Gravity
trigger1 = time > 20


[State 0, ]
type = ChangeState
trigger1 = pos Y > 0 && Vel Y > 0
value = 10015

;------------------
[statedef 10015]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600
velset = 0,0

[State 0, ]
type = RemoveExplod
trigger1 = time = 0
ID = 10005

[State 0, ]
type = Explod
trigger1 = time = 0
anim = 10012
ID = 10012
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1
shadow = 10,10,10

[State 0, Sangue]
type = Explod
trigger1 = time = 2
anim = 10015
ID = 10015
pos = 0,5
postype = p1
bindtime = -1
sprpriority = 599
ownpal = 1
removetime = -1
shadow = -1,-1,-1

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 1
value = 29,ceil(random/400)

[State -3, 1]
type = EnvShake
trigger1 = Time = 0
time = 5
ampl = -5

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 0, ]
type = DestroySelf
trigger1 = time = 2


;---------------------------------------------------------------------------------------
;Pedao 07 (perna)

[statedef 10006]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600

[State 0, ]
type = Explod
trigger1 = time =0
anim = 10006
ID = 10006
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1

[State 0, 0]
type = VelSet
trigger1 = time = 0
x = -2.2*ifelse(random <500,1,-1)
y = -10

[State 0, ]
type = Gravity
trigger1 = time > 20


[State 0, ]
type = ChangeState
trigger1 = pos Y > 0 && Vel Y > 0
value = 10016

;------------------
[statedef 10016]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600
velset = 0,0

[State 0, ]
type = RemoveExplod
trigger1 = time = 0
ID = 10006

[State 0, ]
type = Explod
trigger1 = time = 0
anim = 10013
ID = 10013
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1
shadow = 10,10,10

[State 0, Sangue]
type = Explod
trigger1 = time = 2
anim = 10015
ID = 10015
pos = 0,3
postype = p1
bindtime = -1
sprpriority = 599
ownpal = 1
removetime = -1
shadow = -1,-1,-1

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 1
value = 29,ceil(random/400)

[State -3, 1]
type = EnvShake
trigger1 = Time = 0
time = 5
ampl = -5

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 0, ]
type = DestroySelf
trigger1 = time = 2


;---------------------------------------------------------------------------------------
;Pedao 08 ( Cranio)

[statedef 10007]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600

[State 0, ChangeAnim]
type = explod
trigger1 = !time
anim = 10019
pos = 50,-35
removetime = 300
ontop = 1
ownpal = 1
scale = .4,.4

 [State 0, ChangeAnim]
type = explod
trigger1 = !time
anim = 10018
removetime = 300
pos = 10,-10
ontop = 1
ownpal = 1
scale = .5,.5

 [State 0, ChangeAnim]
type = explod
trigger1 = !time
anim = 10020
removetime = 300
ontop = 1
ownpal = 1
scale = .4,.4

[State 0, ]
type = Explod
trigger1 = time =0
anim = 10017
ID = 10017
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1

[State 0, 0]
type = VelSet
trigger1 = time = 0
x = 0
y = -20

[State 0, ]
type = Gravity
trigger1 = time > 20


[State 0, ]
type = ChangeState
trigger1 = pos Y > 0 && Vel Y > 0
value = 10018

;------------------
[statedef 10018]
type = a
movetype = i
physics = N
anim = 9741
sprpriority = 600
velset = 0,0

[State 0, ]
type = RemoveExplod
trigger1 = time = 0
ID = 10017

[State 0, ]
type = Explod
trigger1 = time = 0
anim = 10014
ID = 10014
pos = 0,-20
postype = p1
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1
shadow = 10,10,10

[State 0, Sangue]
type = Explod
trigger1 = time = 2
anim = 10015
ID = 10015
pos = 0,-18
postype = p1
bindtime = -1
sprpriority = 559
ownpal = 1
removetime = -1
shadow = -1,-1,-1

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 1
value = 29,ceil(random/400)

[State -3, 1]
type = EnvShake
trigger1 = Time = 0
time = 5
ampl = -5

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 4110, slack]
type = PlaySnd
trigger1 = !time
value = 31,0

[State 0, ]
type = DestroySelf
trigger1 = time = 2





;--------------------------------------------------------------------


[Statedef 1411022]
type=A
physics=N
movetype=H
ctrl=0
velset=0,gethitvar(yvel)
sprpriority=-1

[State 1114110, nhb]
type=nothitby
trigger1= 1
time=1
value=SCA

[State 1114110, anim]
type=changeanim2
trigger1= !time
value=1411022

[State 1114110, grav]
type=gravity
trigger1= animelemtime(5)<0

[State 1114110, stop]
type=posset
trigger1= pos y>=0
y=0

[State 1114110, stop]
type=velset
trigger1= pos y>=0
y=0

[State 1114110, sts]
type=statetypeset
trigger1= pos y>=0
type=L
physics=C

[State 1114110, anim]
type=changeanim2
trigger1= pos y>=0
value=1411022
elem=5
persistent=0



[State 1114110, end]
type=selfstate
trigger1= animelemtime(7)>=50
value=ifelse(alive,5120,5150)

;----------------------------------------------------------------------

;runback
[Statedef 3700]
type = S
movetype = A
physics = S
juggle = 0
anim = 3700
sprpriority = 2
velset = 0,0
ctrl = 0
poweradd= 72*!var(33)


[State 105, 1]
type = VelSet
trigger1 = time >= 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 1]
type = VelSet
trigger1 = animelem = 7
x = 0
y = 0


[State 404, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 3701
ctrl = 0

[State 404, 4]
type = ChangeState
trigger1 = backedgebodydist < 28
value = 3710
ctrl = 0

[State 404, 4]
type = ChangeState
triggerall = time >= 3
trigger1 = command = "fwd" 
value = 105
ctrl = 0


;-------------------------------------------------------

[Statedef 3701]
type = S
movetype = A
physics = S
juggle = 0
anim = 3701
sprpriority = 2
velset = 0,0
ctrl = 0

[State 105, 1]
type = VelSet
trigger1 = time >= 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State , Correr]
type   = PlaySnd
trigger1  = !time
value     = 9,4
channel  = 9



[State 105: Explod ]
type    = Explod
trigger1   = !time
Anim    = 2714
id   = 2714
pos    = 0,4
postype  = p1
ownpal   = 1
bindtime    = 1
ignorehitpause    = 1
sprpriority  = 5
scale     = .5,.5

[State 404, 4]
type = ChangeState
triggerall = stateno!=3710
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------

;Wall Cling
[Statedef 3710]
type = A
movetype = I
physics = N
anim = 3710
velset = 0, 0
ctrl = 0
poweradd = 72

[State 920, 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,0

[State 405, UCantHitMe]
type = NotHitBy
trigger1 = time< 3
value = SCA


[State 105, 1]
type = VelSet
trigger1 = time = 0
x = -5
y = -4.50

[State 105, 1]
type = VelSet
trigger1 = animelem = 7
x = 0
y = 0

[State -3,PlaySnd1]
type = PlaySnd
trigger1 = Time = 0
value = 1,3

[State 4600,10]
type = ChangeState
trigger1 = command="c" && time = [5,14]
value = 3731
ctrl = 0

[State 4600,10]
type = ChangeState
trigger1 = command="y" && time = [5,14]
value = 3750
ctrl = 0

[State 4600,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 3730
ctrl = 0


;-----------------------------------------------------------------------------------------

;Air Drop
[Statedef 3730]
type = A
movetype = I
physics = N
anim = 3733
velset = 0, 0
ctrl = 0
poweradd = 72

[State 3735,  Slow Motion ]
type = Pause 
triggerall = (GameTime%1) = 0 && roundstate = 2
trigger1 = time = [1,17]
time = 2
movetime = 0
ignorehitpause = 0 
endcmdbuftime=2

[State 710, push]
type=playerpush
trigger1=1
value=0


[State 105, 1]
type = VelSet
trigger1 = time = 0
x = 8
y = -2


[State 803, Vel]
type = Gravity
trigger1 = 1



[State 3000, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1015

;-----------------------------------------------------------------------------------------

;wall kick
[Statedef 3731]
type = A
movetype = A
physics = N
anim = 208
velset = 0, 0
ctrl = 0

[State 1000, 1]
type = Explod
trigger1 = time=7
ID = 1007
anim = 8700
pos = 50,-48
vel = 0,0
scale = 0.4,0.4
ownpal = 1
bindtime = 20
sprpriority = 3

[State 2200, PlaySnd]
type = PlaySnd
trigger1 = time=7
value = 5,7

[State 405, UCantHitMe]
type = NotHitBy
trigger1 = stateno = 3731 && animelem=4
value = SCA


[State 0, ]
type   = SuperPause
triggerall  = p2bodydist x < 128 && p2statetype=S
trigger1  = time=5
time = 33
anim  = -1
darken  = 0
ignorehitpause= 0
persistent  = 0


[State 200, voz]
type = PlaySnd
triggerall  = p2bodydist x < 128 && p2statetype=S
trigger1  = time=5
value = 9,14
channel = 0

[State 700, asserts]
type=assertspecial
trigger1=1
flag=unguardable

[State 1015, flames]
type=helper
trigger1= movehit && numtarget && numhelper(7180)<1
trigger1= !(target,time) && (target,movetype=H)
helpertype=normal
stateno=7180
ID=7180
name="flames"
postype=p2
bindtime=1000
ownpal=1
facing=-1
size.ground.front=0
size.ground.back=0
ignorehitpause=1


[State 208, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 4,Hit
damage = 100, 0
pausetime = 8,8
guard.pausetime = 9, 8
sparkno = s2550+(random%4)
guard.sparkno = S8035
sparkxy = -18, -65
hitsound = S1, 13
guardsound = S1, 15
ground.type = Low
air.type = High
ground.slidetime = 16
ground.hittime = 40
air.hittime = 20
guard.ctrltime = 18
ground.velocity = -7
guard.velocity = -11.5
air.velocity = -5, -5
sprpriority = 2
getpower = ifelse(p2movetype=H,72,216)*!var(33), 36*!var(33)
givepower = 36 ,36        
envshake.time=5
envshake.freq=60
envshake.ampl=5
id=3732

[State 105, 1]
type = VelSet
trigger1 = time = 0
x = 5
y = -3


[State 803, Vel]
type = Gravity
trigger1 = 1




[State 2400, 0]
type = TargetState
trigger1 = numtarget(3732) && movehit && p2movetype = H
value = 3732
ignorehitpause = 0
persistent = 0

[State 3000, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1015



[Statedef 3732]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 2002:  posset]
type = Posset
trigger1  = !time
y  = 10




[State 1044:       palfx]
type                = palfx
trigger1            = !time
time                = 50             
add                 = -155,-155,-155
sinadd              = -90,-90,-90,10                             
color               = 0                                               
invertall           = 0


[State 1123, 0]
type = PlayerPush
trigger1 = 1
value = 0

[State 1123, 0]
type = ChangeAnim
trigger1 = 1
value = 5017

[State 1123, 1]
type = VelSet
trigger1 = time = 1
x = -9



[State 1123, 6]
type = EnvShake
trigger1 = time =0
time = 25
ampl = 8


[State 1124, 7]
type = changestate
trigger1 = time > 5
trigger2 = backedgedist <= 15
value = 118936



; HIT_LIEDOWN
[Statedef 118936]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = !Time

[State 1123, 6]
type = EnvShake
trigger1= !Time
time = 25
ampl = 8


[State 5110, 1]
type = ChangeAnim2
trigger1 = !Time
value = 1199

[State 5110, 4]
type = HitFallDamage
trigger1 = !Time

[State 5110, 5]
type = PosSet
trigger1 = !Time
y = 0

[State 5110, 5]
type = VelSet
trigger1 = !Time
y = 0

[State 5110, 5]
type = VelSet
trigger1 = !Time
x = -12


[State 5110, 7]
type = GameMakeAnim
trigger1 = !Time
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14


[State 5110, 7]
type = Makedust
trigger1 = vel X < -1
trigger2 = vel X > 1
spacing = 3



[State 5110, 11] 
type = SelfState
trigger1 = !AnimTime
value = ifelse(alive, 5120, 5150)

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = !Time
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.96

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = !Time
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = !Time
ampl = 200, 7, -.467
time = 30
waveform = sine



;impulso na parede (atras)
[Statedef 3750]
type = A
movetype = I
physics = N
anim = 3750
velset = 0,0
poweradd = 72
sprpriority = 2
ctrl = 0


[State 52, efeito]
type = PlaySnd
trigger1 = Time = 0
value = 1, 2
channel = 20


[State 2580, 3]
type = GameMakeAnim
trigger1 = time = 0
persistent = 0
ignorehitpause = 1
value = 72
pos = -30,-65
postype = p1
bindtime = -1

[State 2580, Screen]
type = turn
trigger1 = time = 0
trigger1 = frontedgebodydist <= 15



[State 2580, Screen]
type = ScreenBound
trigger1 = 1
movecamera = 0

[State 2580, 1]
type = Width
trigger1 = 1
edge = 20,20

[State 2580, 0]
type = PosSet
trigger1 = Facing = 1
trigger1 = time > 0
trigger1 = backedgebodydist <= 20
x = -129

[State 2580, 0]
type = PosSet
trigger1 = time > 0
trigger1 = Facing = -1
trigger1 = backedgebodydist <= 20
x = 128


[State 2580, 6]
type = ChangeState
trigger1 = animelem = 1, >= 5
trigger1 = command != "holdy" 
trigger2 = Animelem = 1, >= 70
value = 3751
ctrl = 1

[State 2580, 6]
type = ChangeState
triggerall = animelem = 1, >= 5
trigger1 = command = "holddown" 
value = 50
ctrl = 0

[State 2580, 6]
type = ChangeState
triggerall = animelem = 1, >= 5
trigger1 = command = "c" 
value = 1704
ctrl = 0


[State 2580, 6]
type = ChangeState
trigger1 = time=200
value=50

;------------------------------------------------------------------------------------------

;impulso na parede (ar)
[Statedef 3751]
type    = A
movetype= I
physics = A
anim = 44
ctrl = 1
velset=2.5,-6

[State 2585, 6]
type = veladd
trigger1 = command = "holdfwd"
trigger2 = var(16) = 1
trigger2 = p2bodydist x >= 30
x = .11

[State 2585, 6]
type = veladd
trigger1 = command = "holdup"
trigger2 = var(16) = 1
y = -.19



[State 3751, 0]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -8
value = 52

;---------------------------------------------------------------------

;agarro da sombra
[Statedef 3010]
type   = S
movetype = A
physics  = N
juggle  =0
poweradd  = -1501
ctrl = 0
facep2   = 1
velset  = 0,0
anim = 3010
sprpriority  = 2

[State 4000, nhb]
type=nothitby
trigger1= stateno=3010
value=SCA


[State -2, ]
type  = RemoveExplod
trigger1 = !time
ID    = 6032

[State 0: PosSet]
type   = PosSet
trigger1 = !time && pos y < 0
y   = 0

[State 0: ]
Type  = VelSet
Trigger1  = AnimElem = 1
X = 5


[State 0, ]
type    = PlaySnd
trigger1  = Time = 0
value  = 2, 8
channel  = -1
persistent  = 0



[State 0, ]
type   = SuperPause
trigger1  = animelem = 1
time = 55
anim  = -1
darken  = 0
ignorehitpause= 0
persistent  = 1

[State 3000, strengthvar]
type=varset
trigger1= var(54)!=6
var(54)=6

[State 3000, superchargehelper]
type=helper
trigger1= animelem=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos = 10, -106
ownpal=1
persistent=0
supermovetime=9999

[State 0: ]
Type   = HitDef
Trigger1  = !Time
attr    = S, HT
guardflag  = -N
numhits   = 0
P2Facing  = 1
P1Facing  = 1
HitFlag  = MAF
Priority  = 7, Hit
SparkNo  = -1
HitSound  = S1, 11
P1StateNo  = 3011
P2StateNo = 3012
Fall = 1
Fall.recover = 0
ID  = 3010


[State 0, ]
type = ChangeState
trigger1  = animtime = 0
value  = 3009
ctrl  = 0

;---------------------------------------------------------------------------

;orochi
[Statedef 3009]
type=S
physics=N
movetype=H
velset=0,0
anim  = 3009
ctrl=0

[State 0, ]
type    = PlaySnd
trigger1  = !Time
value  = 5, 19
persistent  = 0

[State 1015, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, ]
type = ChangeState
trigger1  = animtime = 0
value  = 0
ctrl  = 1


;---------------------------------------------------------------------------

;Shungokusatsu 
[Statedef 3011]
type   = S
movetype = A
physics = N
juggle = 4
poweradd = 0
ctrl = 0
velset = 0,0
anim  = 3011
sprpriority = 1



[State 4001, snd]
type=playsnd
trigger1=!time
value=4,10
channel=0

[State 4001, grabsound]
type=playsnd
trigger1=!time
value=0,800

[State 4001, snd]
type=playsnd
trigger1=!time
value=5,8


[State 4001, pause]
type=pause
trigger1=animelemtime(35)<0
time=2
movetime=2

[State 4001, push]
type=playerpush
trigger1=animelemtime(35)>=0
value=0

[State 4001, nothitby]
type=nothitby
trigger1=stateno=3011
value=SCA



[State 4001, imageoff]
type=afterimagetime
trigger1=animelemtime(5)>0
time=0

[State 4001, fadeout]
type=allpalfx
trigger1=animelemtime(1)=10
time=30
sinadd=-255,-255,-255,120

[State 3011, black]
type=envcolor
trigger1=animelemtime(2)>=0&&animelemtime(35)<0
time=4
value=0,0,0

[State 3011, assert]
type=assertspecial
trigger1=animelemtime(2)>=0&&animelemtime(35)<0
flag=nobardisplay

[State 4001, spr]
type=sprpriority
trigger1=animelemtime(35)>=0
value=1

[State 4001, bind]
type=targetbind
trigger1=animelemtime(35)<0
pos=45,0

[State 0, ]
type   = PlaySnd
trigger1=animelem=2||animelem=4||animelem=6||animelem=8
trigger2=animelem=10||animelem=12||animelem=14 || animelem=16||animelem=18
trigger3=animelem=20||animelem=21||animelem=22||animelem=23||animelem=24
value   = 1,12
channel = 6

[State 3011, sparks]
type=explod
trigger1=animelem=2||animelem=4||animelem=6||animelem=8
trigger2=animelem=10||animelem=12||animelem=14 ||animelem=16||animelem=18
trigger3=animelem=20||animelem=21||animelem=22||animelem=23||animelem=24
anim=2712
ID=2713
sprpriority=5
postype=p2
pos=0,(target,const(size.mid.pos.y))
random=120,120
facing=-1
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300



[State 3011, shake]
type=envshake
trigger1=animelem=2||animelem=4||animelem=6||animelem=8
trigger2=animelem=10||animelem=12||animelem=14 || animelem=16||animelem=18
time=2
freq=90
ampl=-3


[State 3011, shake]
type=envshake
trigger1=animelem=20||animelem=21||animelem=22||animelem=23||animelem=24
time=16
freq=300
ampl=9

[State 0, ]
type  = TargetLifeAdd
trigger1  = (time = [30, 125]) && timemod = 7, 0
value= -13
absolute  = 1
kill = 0

[State 0, ]
type  = TargetLifeAdd
trigger1  = (time = [125, 135]) && timemod = 7, 0
absolute  = 1
value   = -13


[State 0, ]
type  = HitAdd
trigger1=animelem=2||animelem=4||animelem=6||animelem=8
trigger2=animelem=10||animelem=12||animelem=14 ||animelem=16||animelem=18
trigger3=animelem=20||animelem=21||animelem=22||animelem=23||animelem=24
absolute  = 1
value  = 1



[State 181:     SGS Sign]
type = Explod
trigger1  = animelem=35 && !P2Life
anim = 2701
ID = 2701
pos   = 167, 120
postype   = left
facing  = ifelse(teamside = 1, 1, 1)
vfacing   = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove = 0
pausemovetime   = 0
scale = 1, 1
sprpriority  = -10
ontop = 0
shadow  = 0,0,0
ownpal = 1
removeongethit = 1
persistent = 0

[State 181:     SGS Sign]
type  = Explod
trigger1 = animelem=35 && !P2Life
anim  = 2702
ID  = 2702
pos  = 167, 120
postype = left
facing = ifelse(teamside = 1, 1, 1)
vfacing = 1
bindtime = 1
vel  = 0,0
accel  = 0,0
random  = 0,0
removetime = -2
supermove   = 0
pausemovetime = 0
scale  = 1, 1
sprpriority = 1
ontop = 0
shadow = 0,0,0
ownpal  = 1
removeongethit = 1
persistent = 0


[State 0:     Kanji]
type   = Explod
trigger1  = animelem=35 && P2Life
anim  = IfElse(facing = -1, 2721, 2719)
ID   = 2719
pos = IfElse(facing = -1, 47, 0),0
postype   = p1
facing  = IfElse(facing = -1, -1, 1)
vfacing  = 1
bindtime  = -1
vel  = 0,0
accel = 0,0
random  = 0,0
removetime  = 78
supermove       = 0
pausemovetime   = 0
scale  = 0.65, 0.65
sprpriority  = 3
ontop  = 0
shadow = 0,0,0
ownpal    = 0
removeongethit = 1
ignorehitpause  = 1
persistent  = 0



[State 3011, target]
type=targetstate
trigger1=animelemtime(34)>=0&&numtarget(3010)
value=30145621
ID=3010
persistent=0



[State 4001, end]
type=changestate
trigger1=!animtime
value=0
ctrl=1

;------------------------------------------------------------------------------------------

;p2
[Statedef 3012]
type=S
physics=N
movetype=H
velset=0,0
ctrl=0

[State 3012, anim]
type=changeanim2
trigger1=!time
value=3012



;---------------------------------------------------------------------------



[Statedef 5300]
type=S
movetype=I
physics=S
velset=0,0
anim=5300

[State 5300, Timer]
type=varadd
trigger1= time
sysfvar(4)=-1

[State 5300, Timer]
type=varadd
trigger1= sysfvar(4)>0
trigger1= command="up" || command="down" || command="back" || command="fwd"
sysfvar(4)=-2

[State 5300, Timer]
type=varadd
trigger1= sysfvar(4)>0
trigger1= command="x" || command="y" || command="z" || command="a" || command="b" || command="c"
sysfvar(4)=-1

[State 5300, Skip]
type=varset
trigger1= !time
sysfvar(3)=0

[State 5300, Skip]
type=varadd
trigger1= command="up" || command="down" || command="back" || command="fwd"
trigger2= command="a" || command="b" || command="c" || command="x" || command="y" || command="z"
sysfvar(3)=1

[State 5300, Skip]
type=changeanim
trigger1= animelemtime(animelemno(0))>0 && animelemtime(animelemno(0)+1)<0
trigger1= animelemtime(animelemno(0)+1)>=-sysfvar(3)
value=5300
elem=animelemno(0)+1

[State 5300, Skip]
type=varset
trigger1= animelemtime(1)>=0 && !animelemtime(animelemno(0))
sysfvar(3)= 0

[State 5300, End]
type=varset
trigger1= sysfvar(4)<0
sysfvar(4)=0

[State 5300, End]
type=selfstate
trigger1= sysfvar(4)<=0 || time>=300 || roundstate!=2
value=0
ctrl=1

;------------------------------------------------------------------

[Statedef 30145621]
type=S
physics=N
movetype=H
velset=0,0
ctrl=0

[State 5300, Change]
type = ChangeAnim2
trigger1 = Time = 0
value = 5012

[State 5300, Change]
type = ChangeAnim
trigger1 = (Anim = 5012) && (Time = 0) && AnimExist(5300)
value = 5300

[State 5300, Change]
type = ChangeAnim
trigger1 = (Anim = 5012) && (Time = 0) && !AnimExist(5300)
value = 5012

[State 5300, 0]
type = ChangeState
trigger1 = (Life = 0) && ((Anim = 5300) || (Anim = 5012))
value = 5050


[State 5300, Change]
type = selfstate
trigger1 = Time >= 140
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;combo do chute especial
[Statedef 3100]
type = S
movetype = A
physics = S
juggle=ifelse((prevstateno=[1000,4999]),0,6)*!var(33)
anim = 3100
sprpriority = 2
poweradd=-1000
velset = 0,0
ctrl = 0

[State 300, Width]
type = Width
trigger1 = 1
value = 6,-15


[State 3100, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 105
TimeGap  = 2
FrameGap = 4
length = 10
PalBright = 0,0,0
PalContrast = 60, 120
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1


[State 3000, strengthvar]
type=varset
trigger1= var(54)!=5
var(54)=5

[State 3000, superchargehelper]
type=helper
trigger1= animelem=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos = -23, -10
ownpal=1
persistent=0
supermovetime=9999

[State 3100, Superpause]
type = SuperPause
trigger1= animelem=1 
time = 45
movetime = 45
anim = -1
sound = S1, 21
poweradd = 0
darken = 0
p2defmul = 1


[State 3100, efeito]
type = PlaySnd
trigger1 = AnimElem = 3 || AnimElem = 12 || AnimElem = 22 || AnimElem = 34
value = 1, 8


[State 3100, efeito]
type = PlaySnd
trigger1 =  AnimElem = 41
value = 1,1


[State 3100, voz]
type = PlaySnd
trigger1 = Time = 0 || AnimElem = 2
value = 0,ifelse (Time = 0, 13, 22)


[State 3100, Muteki]
type = NotHitBy
trigger1 = AnimElemTime(45) < 0
value = C

[State 3100, Pos]
type = PosAdd
trigger1 = AnimElem = 2 || AnimElem = 20 || AnimElem = 20 || AnimElem = 27 || AnimElem = 34 || AnimElem = 43|| AnimElem = 44
x = 23


[State 3100, Vel]
type = VelMul
trigger1 = AnimElemTime(46) > 0
x = 0.9

[State 3100, Velocity]
type = VelSet
trigger1 = AnimElemTime(44) = 0
x = 0
y = 0


[State 3100, HitDef]
type = HitDef
trigger1 = AnimElem = 4 || AnimElem = 21 || AnimElem = 29
attr = S, HA
animtype  = Heavy
air.animtype = Back
damage = 25,6
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 3, 2
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, ifelse(AnimElemTime(4) < 0, -73, -67)
hitsound   = S1,13
guardsound = S1,15
ground.type = Low
ground.slidetime = 14
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2,0
air.velocity = -3,-5
ground.cornerpush.veloff = 0
getpower=0
air.fall = 1
air.recover = 0
envshake.time = 10
envshake.ampl = 4

[State 3100, HitDef]
type = HitDef
trigger1 = AnimElem = 12 || AnimElem = 37
attr = S, HA
animtype  = Heavy
air.animtype = Back
damage = 25,8
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 7, 3
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -85
hitsound   = S1,14
guardsound = S1,15
ground.type = High
ground.slidetime = 14
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2, 0
air.velocity = -3,-7
ground.cornerpush.veloff = 0
getpower=0
air.fall = 1
air.recover = 0
envshake.time = 10
envshake.ampl = 4

[State 3100, HitDef]
type = HitDef
trigger1 = AnimElem = 11 || AnimElem = 36 
attr = S, HA
animtype  = Heavy
air.animtype = Back
damage = 22,5
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 3, 2
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -85
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
ground.slidetime = 14
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2, 0
getpower=0
air.velocity = -3,-7
ground.cornerpush.veloff = 0
air.fall = 1
air.recover = 0
envshake.time = 10
envshake.ampl = 4


[State 3100, tasumakisem]
type = HitDef
trigger1 = AnimElem = 45
attr = A, HA
animtype  = Heavy
air.animtype  = Heavy
damage    = 22,5
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 13, 10
guard.pausetime = 8, 9
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = -8, -67
hitsound   = S1,14
guardsound = S1,15
ground.type = Low
air.type = Low
ground.slidetime = 5
ground.hittime  = 25
air.hittime  = 25
guard.ctrltime = 15
ground.velocity = -3, -7
guard.velocity = -6
air.velocity = -.50, -3.20 
ground.cornerpush.veloff = -1
fall.recover = 0
air.recover = 0
envshake.time = 10
envshake.ampl = 4
p1stateno = 3101
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0

[State Idle]
type=statetypeset
trigger1= animelemtime(47)>=0
movetype=I

[State 3100, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;========================<ORIGINAL COMBO CHARGE>=============================
[Statedef 7260]
physics=N
velset=0,0
anim=9741

[State 7260, BG PalFX]
type=bgpalfx
trigger1= !time
time=30
add=-255,-255,-128
sinadd=255,255,128,120

[State 7260, palfx]
type=palfx
trigger1= time=20
time=11
sinadd=-255,-255,-255,40
persistent=0

[State 7260, main]
type=explod
trigger1= !time
anim=3128
ID=7260
sprpriority=5
postype=p1
removetime=20
supermovetime=300

[State 7260, sphere]
type=explod
trigger1= !time
anim=7500
ID=7261
sprpriority=5
postype=p1
removetime=-1
supermovetime=300

[State 7260, Circle]
type=explod
trigger1= time=20
anim=7501
ID=7262
sprpriority=5
postype=p1
removetime=-1
supermovetime=300

[State 7260, shrinkcircle]
type=modifyexplod
trigger1= 1
ID=7260
scale=2-(.1*time),2-(.1*time)

[State 7260, shrinkcircle]
type=modifyexplod
trigger1= 1
ID=7261
scale=.017*time,.017*time

[State 7260, shrinkcircle]
type=modifyexplod
trigger1= time>=20
ID=7262
scale=.1+(.1*(time-20)),.1+(.1*(time-20))

[State 7260, No Shadow]
type=assertspecial
trigger1= 1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State 7260, bound]
type=screenbound
trigger1= 1
value=0

[State 7260, Safety]
type=removeexplod
trigger1= time>=30

[State 6110, End]
type=destroyself
trigger1= time>=30


;------------------------------------------------------------------------------------------


;Super Charge
[Statedef 7500]
physics=N
velset=0,0
anim=9741

[State 7500, Lv1]
type=bgpalfx
trigger1= time<=10 && root,var(54)=5
time=1
add=256-ceil(25.6*time),256-ceil(25.6*time),256-ceil(25.6*time)
mul=256-floor(25.6*time),256-floor(25.6*time),256
color=256-floor(25.6*time)

[State 7500, Lv1]
type=bgpalfx
trigger1= (time=[11,39])  && root,var(54)=5
time=1
mul=0,0,256
color=0

[State 7500, Lv1]
type=bgpalfx
trigger1= time>=40 && root,var(54)=5
time=1
mul=ceil(51.2*(time-40)),ceil(51.2*(time-40)),256
color=floor(51.2*(time-40))

[State 7500, Lv2]
type=bgpalfx
trigger1= time<=15 && root,var(54)=6
time=1
add=256-ceil(17.07*time),256-ceil(17.07*time),256-ceil(17.07*time)
mul=256-floor(17.07*time),256-floor(17.07*time),256
color=256-floor(17.07*time)

[State 7500, Lv2]
type=bgpalfx
trigger1= (time=[16,47]) && root,var(54)=6
time=1
mul=0,0,256
color=0

[State 7500, Lv2]
type=bgpalfx
trigger1= time>=48 && root,var(54)=6
time=1
mul=ceil(51.2*(time-48)),ceil(51.2*(time-48)),256
color=floor(51.2*(time-48))

[State 7500, Lv3]
type=bgpalfx
trigger1= time<=20 && root,var(54)=7
time=1
add=256-ceil(12.8*time),256-ceil(12.8*time),256-ceil(12.8*time)
mul=256-floor(12.8*time),256-floor(12.8*time),256-floor(12.8*time)
color=256-floor(12.8*time)

[State 7500, Lv3]
type=bgpalfx
trigger1= (time=[21,54])  && root,var(54)=7
time=1
mul=0,0,0
color=0

[State 7500, Lv3]
type=bgpalfx
trigger1= time>=55 && root,var(54)=7
time=1
mul=ceil(51.2*(time-55)),ceil(51.2*(time-55)),ceil(51.2*(time-55))
color=floor(51.2*(time-55))

[State 7500, spiral]
type=helper
trigger1= !time && root,var(54)>=6
helpertype=normal
stateno=7509
ID=7509
name="Super Charge Spiral"
postype=p1
pausemovetime=255
supermovetime=255
ownpal=1

[State 7500, Main]
type=explod
trigger1= !time
anim=7500
ID=7500
sprpriority=5
postype=p1
removetime=-1
pausemovetime=-1
supermovetime=-1

[State 7500, Large Circle]
type=explod
trigger1= !time
anim=3130
ID=7501
sprpriority=5
postype=p1
pausemovetime=-1
supermovetime=-1

[State 7500, Portrait]
type=explod
trigger1= time=1 && root,var(54)=7
anim=7510
ID=7510
postype=back
pos=160,120
under=1
bindtime=-1
pausemovetime=-1
supermovetime=-1

[State 7500, Circle]
type=explod
trigger1= !time
anim=7502
ID=75021
sprpriority=5
postype=p1
pausemovetime=-1
supermovetime=-1

[State 7500, Circle]
type=explod
trigger1= time=7
anim=7502
ID=75022
sprpriority=5
postype=p1
pausemovetime=-1
supermovetime=-1

[State 7500, Circle]
type=explod
trigger1= time=14
anim=7502
ID=75023
sprpriority=5
postype=p1
pausemovetime=-1
supermovetime=-1

[State 7500, Circle]
type=explod
trigger1= time=21
anim=7502
ID=75024
sprpriority=5
postype=p1
pausemovetime=-1
supermovetime=-1

[State 7500, Circle]
type=explod
trigger1= time=28
anim=7502
ID=75025
sprpriority=5
postype=p1
pausemovetime=-1
supermovetime=-1

[State 7500, scale]
type=modifyexplod
trigger1= root,var(54)=5
ID=7500
scale=1.5-(.0333*time),1.5-(.0333*time)

[State 7500, scale]
type=modifyexplod
trigger1= root,var(54)=6
ID=7500
scale=1.5-(.0283*time),1.5-(.0283*time)

[State 7500, scale]
type=modifyexplod
trigger1= root,var(54)=7
ID=7500
scale=1.5-(.025*time),1.5-(.025*time)

[State 7500, scale]
type=modifyexplod
trigger1= numexplod(7501)
ID=7501
scale=.25+(.075*time),.25+(.075*time)
trans=addalpha
alpha=ceil(256-6.4*time),256

[State 7500, scale]
type=modifyexplod
trigger1= numexplod(7510) && time<8
ID=7510
postype=back
pos=-160+(40*time),120
scale=.5,.5
trans=addalpha
alpha=(32*time),256

[State 7500, scale]
type=modifyexplod
trigger1= numexplod(7510) && (time=[8,50])
ID=7510
postype=back
pos=160,120
scale=.5,.5
trans=addalpha
alpha=256,256

[State 7500, scale]
type=modifyexplod
trigger1= numexplod(7510) && time>=50 && root,var(1)!=2
ID=7510
postype=back
pos=160-(20*(time-50)),120+(40*(time-50))
scale=.5+(.25*(time-50)),.5+(.25*(time-50))
trans=addalpha
alpha=256-ceil(25.6*(time-50)),256

[State 7500, scale]
type=modifyexplod
trigger1= numexplod(7510) && time>=50 && root,var(1)=2
ID=7510
postype=back
pos=160-(18*(time-50)),120+(32*(time-50))
scale=.5+(.25*(time-50)),.5+(.25*(time-50))
trans=addalpha
alpha=256-ceil(25.6*(time-50)),256

[State 7500, scale]
type=modifyexplod
trigger1= numexplod(75021)
ID=75021
scale=.25+(.0375*time),.25+(.0375*time)

[State 7500, scale]
type=modifyexplod
trigger1= numexplod(75022)
ID=75022
scale=.25+(.0375*(time-7)),.25+(.0375*(time-7))

[State 7500, scale]
type=modifyexplod
trigger1= numexplod(75023)
ID=75023
scale=.25+(.0375*(time-14)),.25+(.0375*(time-14))

[State 7500, scale]
type=modifyexplod
trigger1= numexplod(75024)
ID=75024
scale=.25+(.0375*(time-21)),.25+(.0375*(time-21))

[State 7500, scale]
type=modifyexplod
trigger1= numexplod(75025)
ID=75025
scale=.25+(.0375*(time-28)),.25+(.0375*(time-28))

[State 7500, Safety]
type=assertspecial
trigger1= 1
flag=noshadow
flag2=invisible

[State 7500, No bars]
type=assertspecial
trigger1= root,var(54)=7
flag=nobardisplay
flag2=noFG

[State 7500, Safety]
type=removeexplod
trigger1= root,var(54)=5 && time>=45
trigger2= root,var(54)=6 && time>=53
trigger3= time>=60

[State 7500, End]
type=destroyself
trigger1= root,var(54)=5 && time>=45
trigger2= root,var(54)=6 && time>=53
trigger3= time>=60


;---Spiral---
[Statedef 7509]
physics=N
anim=7509
sprpriority=5

[State 7509, assert]
type=assertspecial
trigger1= 1
flag=noshadow

[State 7509, Spin]
type=angleset
trigger1= 1
value=-6*(random%60)

[State 7509, Spin]
type=angleadd
trigger1= 1
value=-6

[State 7509, Angle]
type=angledraw
trigger1= root,var(54)=6
scale=1-(time/53.0),1-(time/53.0)

[State 7509, Trans]
type=trans
trigger1= root,var(54)=6
trans=addalpha
alpha=floor(4.83*time),256

[State 7509, Angle]
type=angledraw
trigger1= root,var(54)=7
scale=1-(time/60.0),1-(time/60.0)

[State 7509, Trans]
type=trans
trigger1= root,var(54)=7
trans=addalpha
alpha=floor(4.267*time),256

[State 7509, end]
type=destroyself
trigger1= root,var(54)=6 && time>=53
trigger2= time>=60



;--------------------------------------------------------------------

;combo do chute especial
[Statedef 3101]
type = S
movetype = A
physics = S
juggle = 8
anim = 3101
sprpriority = 2
ctrl = 0

[State 3100, StateType]
type = StateTypeSet
trigger1 = animelem = 26
StateType = A
physics = A

[State 300, Width]
type = Width
trigger1 = 1
value = 6,-15

[State 3100, Velocity]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = 8.30
y = -6

[State 3100, Velocity]
type = VelSet
trigger1 = AnimElemTime(23) = 0
y = 0
x = 0

[State 3100, HitDef]
type = HitDef
trigger1 = AnimElemTime(5) = 0 || AnimElemTime(7) = 0 || AnimElemTime(11) = 0 || AnimElemTime(13) = 0 || AnimElemTime(17) = 0 || AnimElemTime(19) = 0
attr = A, HA
animtype  = Light
damage  = 20
priority = 4,Hit
hitflag = MAF
guardflag = M
pausetime = 2,1
sparkno = s2558+(random%4)
guard.sparkno = S8036
sparkxy = 8, -67
hitsound   = S1,13
guardsound = S1,15
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime  = 15
guard.ctrltime = 16
ground.velocity = 5, -10
guard.velocity = -7
air.velocity = -1, -6.20
getpower=0
ground.cornerpush.veloff = -1
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0

[State 207, 1]
type = Hitdef
trigger1 = AnimElem = 25
attr = S, NA
hitflag = MAF
guardflag = H
animtype = Up
air.animtype = Up
air.animtype = up
fall.animtype = up
priority = 4,Hit
damage = 20, 5
pausetime = 15, 15
guard.pausetime = 12, 12
sparkno = s2558+(random%4)
guard.sparkno = S8035
sparkxy = 8, -80
hitsound = S1, 14
guardsound = S1, 15
ground.type = High
air.type = High
ground.slidetime = 13
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 15
ground.velocity = -10, 10
guard.velocity = -9.5
air.velocity = -5,10.50
sprpriority = 2
givepower = 35 ,35
air.fall = 1
fall = 1
air.recover = 0
fall.recover = 0
envshake.time=9
envshake.freq=90
envshake.ampl=10

[State Idle]
type=statetypeset
trigger1= animelemtime(27)>=0
movetype=I

[State 3100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0 
value = 52
ctrl = 1


;---------------------------------------------------------------------------
;kamehameha
[Statedef 3120]
type=S
physics=S
movetype=A
anim=3120
ctrl=0
velset=0,0
sprpriority=1

[State 9741, uglyhack]
type=varset
trigger1= !time
var(39)=1


[State 3040, kamevar]
type=varset
trigger1= anim=3120 && animelemtime(5)<0
var(36)=0

[State 3040, kamevar]
type=varadd
trigger1= anim=3120 && animelemtime(5)>=0
var(36)=1



[State 1080,solo]
type	= Explod
trigger1 = animelem = 2
anim = 889
id = 889
pos	= 10,0
postype	= p1
facing= 1
vfacing	= 1
bindtime= -1
vel= 0,0
accel	= 0,0
random	= 0,0
removetime= 220
scale	= .5,.5
sprpriority= 2
ontop	= 1
shadow	= 0,0,0
ownpal	= 1
removeongethit	= 1

[State 3000, width]
type=width
trigger1=animelemtime(5)<0
value=30,0

[State 0, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 5,4



[State 0, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 5,5



[State 0, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 9,16
channel = 5

[State 0, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9,18
channel = 9

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
helpertype = normal
name = "carga"
ID = 3128
stateno = 3128
pos = -15,-73
postype = p1   
facing = 1
keyctrl = 0
ownpal = 0
supermove =999
pausemove =999

[State 3020, electricity]
type=explod
trigger1= !numexplod(3126)
trigger1= anim=3120 && animelemtime(1)>=0
anim=3126
ID=3126
sprpriority=3
postype=p1
pos=-15,-72
bindtime=-1
removetime=-1
ownpal=1
scale=.25,.25
removeongethit=1
supermove = 1

[State 3020, grow]
type=modifyexplod
trigger1= numexplod(3126)
ID=3126
scale=.25+(.00375*var(36)),.25+(.00375*var(36))



[State 3020, lv1indicator]
type=explod
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)>=30
anim=3127
ID=3127
sprpriority=4
postype=p1
pos=-15,-72
ownpal=1
persistent=0

[State 3020, lv2indicator]
type=explod
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)>=80
anim=3127
ID=3127
sprpriority=4
postype=p1
pos=-15,-72
ownpal=1
persistent=0

[State 3020, lv3indicator]
type=explod
trigger1= (anim=3120 && animelemtime(4)>=0) 
trigger1= var(36)>=140
anim=3127
ID=3127
sprpriority=4
postype=p1
pos=-15,-72
ownpal=1
persistent=0

[State 3020, lv4indicator]
type=explod
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)>=180
anim=3127
ID=3127
sprpriority=4
postype=p1
pos=-15,-72
ownpal=1
persistent=0

[State 3020, lv1flash]
type=palfx
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)>=30
time=6
add=0,128,255
sinadd=0,-128,-255,24
persistent=0
[State 3020, lv2flash]
type=palfx
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)>=80
time=6
add=0,128,255
sinadd=0,-128,-255,24
persistent=0
[State 3020, lv3flash]
type=palfx
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)>=140
time=6
add=0,128,255
sinadd=0,-128,-255,24
persistent=0
[State 3020, lv4flash]
type=palfx
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)>=180
time=6
add=0,128,255
sinadd=0,-128,-255,24
persistent=0



[State 3020, lv1snd]
type=playsnd
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)>=30
value=5,0+(random%2)
persistent=0

[State 3020, lv2snd]
type=playsnd
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)>=80
value=5,0+(random%2)
persistent=0

[State 3020, lv3snd]
type=playsnd
trigger1= (anim=3120 && animelemtime(4)>=0) 
trigger1= var(36)>=140
value=5,0+(random%2)
persistent=0

[State 3020, lv4snd]
type=playsnd
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)>=180
value=5,0+(random%2)
persistent=0

[State 3040, shake]
type=envshake
trigger1= anim=3120 && animelemtime(5)>=0 && !(time%4)
time=4
freq=120
ampl=1+ceil(var(36)/40)


[State 3040, bgpal]
type=bgpalfx
trigger1= anim=3120 && animelemtime(5)>=0 && (var(36)=[0,200])
mul=256+ceil(2*var(36)),256-ceil(2*var(36)),256-ceil(2*var(36))
add=-ceil(var(36)/2),-ceil(var(36)/2),-ceil(var(36)/2)
color=256-ceil(var(36)*.5)
time=2

[State 7250, Dust]
type=explod
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)=90
anim=7104
ID=7104
sprpriority=-2
postype=p1
pos=80,-ceil(pos y)
supermovetime=30
ownpal=1

[State 7250, thunder]
type=explod
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)=90
anim=2711
ID=7250
sprpriority=-2
postype=p1
pos=80,-ceil(pos y)
removetime=-2
supermovetime=30
ownpal=1

[State 3020, lv1snd]
type=playsnd
triggerall= (anim=3120 && animelemtime(4)>=0)
trigger1=  var(36)=90
trigger2= var(36)=160
value=3,6
persistent=0

[State 7250, Dust]
type=explod
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)=160
anim=7104
ID=7104
sprpriority=-2
postype=p1
pos=130,-ceil(pos y)
supermovetime=30
ownpal=1

[State 7250, thunder]
type=explod
trigger1= (anim=3120 && animelemtime(4)>=0)
trigger1= var(36)=160
anim=2711
ID=7250
sprpriority=-2
postype=p1
pos=130,-ceil(pos y)
removetime=-2
supermovetime=30
ownpal=1

[State 3040, beam]
type=changestate
trigger1= anim=3120 && animelemtime(5)>=0 && var(36)>=200
value=3121


;---------------------------------------------------------------------------


[Statedef 3121]
type=S
physics=S
movetype=A
anim=3121
ctrl=0
velset=0,0
sprpriority=1
facep2=1
poweradd=-3000

[State 3050, width]
type=width
trigger1= anim=3121
value=30,0

[State 9741, armor var]
type=varset
trigger1= !time
var(39)=1

[State 3050, shake]
type=envshake
trigger1= anim=3121 && animelemtime(2)>=0 && !(time%4)
time=4
freq=120
ampl=6

[State 3050, hadouken]
type=helper
trigger1= anim=3121 && animelemtime(2)>=0
helpertype=normal
stateno=3122
ID=3122
name="kameha"
postype=p1
ownpal=1
persistent=0
size.xscale=1
size.yscale=.6



[State 3050, Anim]
type=changeanim
trigger1= anim=3121 && animelemtime(2)>=0 && !numhelper(3122)
value=3123


[State 3000, dust]
type=explod
trigger1=anim=3121&&animelem=2
vel=0,0
anim=2710
ID=2710
sprpriority=3
postype=p1
pos=40,0
ownpal=1
scale=.75,.75



[State 3050, End]
type=changestate
trigger1= anim=3123 && !animtime
value=0
ctrl=1


;---------------------------------------------------------------------------

;raio
[Statedef 3122]
type=S
physics=N
movetype=A
ctrl=0
velset=0,0
sprpriority=4

[State 3055, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=3122
ignorehitpause=1

[State 3055,hitby]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1


[State 3055, Bind]
type=bindtoroot
trigger1= 1
pos=83,-72


[State 3055, Anim]
type=changeanim
trigger1= !time && !prevstateno
value=3122


[State 191, 2] 
type = AssertSpecial
trigger1 = time >= 0
flag = noShadow

[State 0, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 9,19
channel = 8

[State 3040, stopsnd]
type=stopsnd
trigger1= AnimElem = 17
channel=8



[State 3055, HitSound]
type=playsnd
trigger1= movehit && numtarget
trigger1= !(target,time) && target,movetype=H
value=9,17
channel=1
ignorehitpause=1

[State 3055, Hit]
type=hitdef
trigger1= animelem=1 || animelem=2 || animelem=3 || animelem=4 || animelem=5 || animelem=6
trigger2= animelem=7 || animelem=8 || animelem=9 || animelem=10 || animelem=11
trigger3= animelem=12 || animelem=13 || animelem=14 || animelem=15 || animelem=16
attr=S,HP
damage=35,7
animtype=Hard
fall.animtype=Hard
hitflag=MAFD
priority=4,Hit
pausetime=2,2
guard.dist=320
sparkno=-1
guard.sparkno=-1
guardsound=s2,0
ground.type=Low
ground.slidetime=16
ground.hittime=16
ground.velocity=-20,0
ground.cornerpush.veloff=0
guard.velocity= -10.52
air.velocity=-20,-.5
down.velocity=-20,-.5
getpower=0
givepower=36,36
fall=1
fall.recover=0
sprpriority=4
yaccel=.5
forcestand=1

[State 3055, Hit]
type=hitdef
trigger1= animelem=18
attr=S,HP 
damage=30,7
animtype=Diagup
fall.animtype=Diagup
hitflag=MAFD
priority=4,Hit 
pausetime=2,2
guard.dist=320
sparkno=-1
guard.sparkno=-1
guardsound=s2,0
ground.type=Low
ground.slidetime=16
ground.hittime=16
ground.velocity=-20,0
ground.cornerpush.veloff=0
guard.velocity= -10.52
air.velocity=-20,-9
down.velocity=-20,-9
getpower=0
givepower=36,36
fall=1
fall.recover=0
sprpriority=4
yaccel=.5
forcestand=1

[State 3055, Sparks]
type=explod
trigger1= movecontact=1 && numtarget
trigger1= (target,movetype=H) && !(target,time)
anim=ifelse(moveguarded,8036,2558+(random%4))
ID=7000
sprpriority=5
postype=p2
pos=(target,const(size.ground.front)-10),(target,const(size.mid.pos.y))
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
pausemovetime=100
supermovetime=100

[State 3055, End]
type=changestate
trigger1= !animtime || root,stateno!=3121 || root,anim!=3121
value=3124


;---------------------------------------------------------------------------------



[Statedef 3124]
type=A
physics=N
movetype=I
anim=3124
ctrl=0
velset=0,0
sprpriority=4

[State 3056, Assert]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1


[State 3056, End]
type=destroyself
trigger1= !animtime


;---------------------------------------------------------------------------------

[Statedef 3128]
physics=N
velset=0,0
anim=9741

[State 4303, palfx]
type=palfx
trigger1=time=20
time=11
sinadd=-255,-255,-255,40
persistent=0

[State 4303, raios]
type=explod
trigger1=!time
anim=3128
ID=3128
sprpriority=5
postype=p1
removetime=20
supermovetime=999

[State 4303, shrinkcircle]
type=modifyexplod
trigger1=1
ID=3128
scale=2-(.1*time),2-(.1*time)

[State 4303, sphere]
type=explod
trigger1=!time
anim=7500
ID=3129
sprpriority=5
postype=p1
removetime=-1
supermovetime=9999


[State 4303, shrinkcircle]
type=modifyexplod
trigger1=1
ID=3129
scale=.017*time,.017*time

[State 4303, circle]
type=explod
trigger1=time=20
anim=3130
ID=3130
sprpriority=5
postype=p1
removetime=-1
supermovetime=300

[State 4303, shrinkcircle]
type=modifyexplod
trigger1=time>=20
ID=3130
scale=.1+(.1*(time-20)),.1+(.1*(time-20))

[State 4303, noshadow]
type=assertspecial
trigger1=1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State 4303, bound]
type=screenbound
trigger1=1
value=0

[State 3100, Superpause]
type = SuperPause
trigger1 = Time = 0 
time = 35
movetime = 35
anim = -1
darken = 0

[State 4303, safety]
type=removeexplod
trigger1=time>=30

[State 6110, end]
type=destroyself
trigger1=time>=30



;==========<PARRY>==========
;---STANDING---
[Statedef 700]
type=S
physics=S
movetype=I
anim=700
velset=0,0
ctrl=0
sprpriority=2
poweradd=72*!var(33)
facep2=1

[State 700, hb]
type=hitby
trigger1=1
value=SCA,AT
time=1

[State 700, stop]
type=posfreeze
trigger1=1
value=1

[State 700, pause]
type=pause
trigger1=!time
time=15
movetime=15
endcmdbuftime=15
pausebg=0

[State 700, pause]
type=pause
trigger1= !time && numenemy
trigger1= (enemynear,movehit=1)
time= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
movetime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
endcmdbuftime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
pausebg=0

[State 700, blueflash]
type=palfx
trigger1= !time
add=0,50,255
sinadd=0,-50,-255,60
time=15

[State 700, Snd]
type=playsnd
trigger1= !time
value=5,18

[State 700, Spark]
type=explod
trigger1= animelem=2
anim=7200
ID=7200
sprpriority=5
postype=p1
pos=31,-69
pausemovetime=60
ownpal=1
scale=.5,.5

[State 700, nowalk]
type=assertspecial
trigger1=1
flag=nowalk

[State 700, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1


;---CROUCHING---
[Statedef 701]
type=C
physics=C
movetype=I
anim=701
velset=0,0
ctrl=0
sprpriority=2
poweradd=78*!var(33)
facep2=1

[State 701, hb]
type=hitby
trigger1=1
value=SCA,AT
time=1

[State 701, stop]
type=posfreeze
trigger1=1
value=1

[State 701, pause]
type=pause
trigger1=!time
time=15
movetime=15
endcmdbuftime=15
pausebg=0

[State 701, pause]
type=pause
trigger1= !time && numenemy
trigger1= (enemynear,movehit=1)
time= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
movetime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
endcmdbuftime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
pausebg=0

[State 701, blueflash]
type=palfx
trigger1= !time
add=0,50,255
sinadd=0,-50,-255,60
time=15

[State 701, Snd]
type=playsnd
trigger1= !time
value=5,18

[State 701, Spark]
type=explod
trigger1= animelem=2
anim=7200
ID=7200
sprpriority=5
postype=p1
pos=25,-22
pausemovetime=60
ownpal=1
scale=.5,.5

[State 701, nowalk]
type=assertspecial
trigger1=1
flag=nowalk

[State 701, End]
type=changestate
trigger1= !animtime
value=11
ctrl=1


;---AERIAL---
[Statedef 702]
type=A
physics=A
movetype=I
anim=702
ctrl=0
sprpriority=2
poweradd=78*!var(33)
facep2=1

[State 702, hb]
type=hitby
trigger1=time<15
value=SCA,AT
time=1

[State 702, pause]
type=pause
trigger1=!time
time=15
movetime=15
endcmdbuftime=15
pausebg=0

[State 702, pause]
type=pause
trigger1= !time && numenemy
trigger1= (enemynear,movehit=1)
time= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
movetime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
endcmdbuftime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
pausebg=0

[State 702, Type]
type=statetypeset
trigger1= time<15
physics=N

[State 702, stop]
type=posfreeze
trigger1= time<15
value=1

[State 702, Vel]
type=velset
trigger1= time=15
x=ifelse(vel x>2,2,ifelse(vel x<-2,-2,vel x))
y=ifelse(vel y<-2,vel y,-2)

[State 702, Type]
type=statetypeset
trigger1= time>=15
physics=A

[State 702, ctrl]
type=ctrlset
trigger1= time>=15
value=1

[State 702, blueflash]
type=palfx
trigger1= !time
add=0,64,255
sinadd=0,-64,-255,60
time=15


[State 702, Snd]
type=playsnd
trigger1= !time
value=5,18

[State 702, Spark]
type=explod
trigger1= animelem=2
anim=7200
ID=7200
sprpriority=5
postype=p1
pos=40,-66
pausemovetime=60
ownpal=1
scale=.5,.5

[State 702, asserts]
type=assertspecial
trigger1= 1
flag=noairguard

[State 702, ctrl]
type=ctrlset
trigger1= time>10
value=1



;------------------------------------------------------------------------------------------
; Override common states (use same number to override) :
;------------------------------------------------------------------------------------------

;===================<JUMPING>================
[Statedef 40]
type=S
physics=S
anim=40
ctrl=0
sprpriority=1
facep2=1

[State 40, var]
type=varset
trigger1= !time && var(12)>=1
var(9)=ifelse((p2dist x>240 || p2dist y>180 || random<70),3,1)

[State 40, var]
type=varset
trigger1= var(12)>=1
sysvar(1)=ifelse((enemynear,movetype!=A || backedgebodydist<=10),1,ifelse((enemynear,movetype=A),-1,0))

[State 40, var]
type=varset
trigger1= !time && var(12)<=0
var(9)=ifelse(command="highjump",3,1)

[State 40, var]
type=varset
trigger1= var(12)<=0
sysvar(1)=ifelse(!time,0,ifelse(command="holdfwd",1,ifelse(command="holdback",-1,sysvar(1))))

[State 40, var]
type=varset
trigger1= var(12)<=0 && var(9)!=3 && command!="holdup"
trigger2= var(12)>=1 && var(9)!=3 && random<70
var(9)=2


[State 40, Vel]
type=velset
trigger1= !animtime && var(9)!=3
x=ifelse(!sysvar(1),const(velocity.jump.neu.x),ifelse(sysvar(1)=1,const(velocity.jump.fwd.x),const(velocity.jump.back.x)))
y=ifelse(var(9)=2,.75,1)*const(velocity.jump.y)

[State 40, Vel]
type=velset
trigger1= !animtime && var(9)=3
x=ifelse(!sysvar(1),const(velocity.jump.neu.x),ifelse(sysvar(1)=1,1.5*const(velocity.jump.fwd.x),1.5*const(velocity.jump.back.x)))
y=ifelse(!sysvar(1),1.15,1)*const(velocity.jump.y)

[State 40, Vel]
type=velset
trigger1= !animtime && var(9)=3 && sysvar(1)
x=ifelse(!sysvar(1),const(velocity.jump.neu.x),ifelse(sysvar(1)=1,1.5*const(velocity.jump.fwd.x),1.5*const(velocity.jump.back.x)))
y=const(velocity.jump.y)

[State 40, Vel]
type=velset
trigger1= !animtime && prevstateno=100 && sysvar(1)=1
trigger1= var(9):=3
x=const(velocity.runjump.fwd.x)

[State 40, End]
type=changestate
trigger1= !animtime
value=50
ctrl=1

[Statedef 50]
type=A
physics=A

[State 50, Snd]
type=playsnd
trigger1= !time
value=1,ifelse(var(9)=3,41,1)

[State 50, Anim]
type=changeanim
trigger1= var(9)!=2
value=ifelse(!(vel x), 41, ifelse((vel x)>0, 42, 43))
persistent=0

[State 50, Anim]
type=changeanim
trigger1= var(9)=2
value=ifelse(!(vel x), 51, ifelse((vel x)>0, 52, 53))
elem=animelemno(0)
persistent=0

[State 50, No Guard]
type=assertspecial
trigger1= var(9)=2
flag=noairguard


[Statedef 51]
type=A
physics=A

[State 51, null]
type=null
trigger1= 1


[Statedef 52]
type=S
physics=S
ctrl=0
anim=ifelse(vel y>11,48,47)
movehitpersist=1

[State 52, stop]
type=velset
trigger1= 1
x=0
y=0

[State 52, Pos]
type=posset
trigger1= 1
y=0


[State 52, Snd]
type=playsnd
trigger1= !time
value=1,2

[State 52, Dust]
type=explod
trigger1= !time
anim=8090
ID=8090
sprpriority=-2
postype=p1
scale=.5,.5
ownpal=1
pausemovetime=-1
supermovetime=-1

[State 52, ctrl]
type=ctrlset
trigger1= !time
trigger1= prevstateno!=[200,4999]
value=1

[State 52, ctrl]
type=ctrlset
trigger1= time>=1
trigger1= prevstateno<1000
value=1

[State 52, guard]
type=changestate
trigger1= command="holdback"
trigger1= inguarddist && (prevstateno!=[200,4999])
value=120

[State 52, nowalk]
type=assertspecial
trigger1= time<=2 || (prevstateno=[200,4999])
flag=nowalk

[State 52, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1

;------------------------------------------------------------------------------------------

[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 2
velset = 0,0

[State 100, 1]
type = VelSet
trigger1 = AnimElemTime(2) >= 0
x = const(velocity.run.fwd.x)

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 102, Dust]
type=explod
trigger1= animelem=2
anim=7103
ID=7103
sprpriority=3
postype=p1
vel=1,0
removetime=-2
ownpal=1
pausemovetime=-1
supermovetime=-1


[State 100, efeito]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0 || AnimElemTime(6) = 0
value = 1,3
channel = 20

[State 100, 5]
type = ChangeState
trigger1 = command != "holdfwd"
value = 0
ctrl = 1

;---------------------------------------------------------------------------

[Statedef 101]
type    = S
physics = S
anim = 101
sprpriority = 2
velset = 0,0




[State 0, LifeAdd]
type = LifeAdd
triggerall = prevstateno != 792
triggerall = var(37) >= var(28)
trigger1 = time = 2
trigger2 = time = 4
value = 1*(var(28))
kill = 0

[State 0, LifeAdd]
type = LifeAdd
triggerall = prevstateno != 792
triggerall = var(37) < var(28)
trigger1 = time = 2
value = (var(37))-1
kill = 0


[State 102, Vel]
type=velset
trigger1= animelem=2
x= -1.33 * const(velocity.run.back.x)
y= const(velocity.run.back.y)


[State 100, 5]
type = ChangeState
trigger1 = animtime=0
value = 0
ctrl = 1


[Statedef 102]
type    = S
physics = S
anim = 102
sprpriority = 2
velset = 0,0

[State 0, LifeAdd]
type = LifeAdd
triggerall = prevstateno != 792
triggerall = var(37) >= var(28)
trigger1 = time = 2
trigger2 = time = 4
value = 1*(var(28))
kill = 0

[State 0, LifeAdd]
type = LifeAdd
triggerall = prevstateno != 792
triggerall = var(37) < var(28)
trigger1 = time = 2
value = (var(37))-1
kill = 0


[State 105, Vel]
type=velset
trigger1= animelem=1 || animelem=2
x= const(velocity.run.back.x)
y= const(velocity.run.back.y)

[State 100, 5]
type = ChangeState
trigger1 = animtime=0
value = 0
ctrl = 1



[Statedef 105]
type = S
physics = S
ctrl = 0
anim = 105

[State 105, 1]
type = VelSet
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(2) < 7
x = const(velocity.run.back.x)


[State , Correr]
type   = PlaySnd
trigger1  = !time
value     = 9,4



[State 105, Dust]
type=explod
trigger1= animelem=2
anim=7103
ID=7103
sprpriority=3
postype=p1
pos=-17,0
vel=-1,0
removetime=-2
ownpal=1
pausemovetime=-1
supermovetime=-1

[State 105, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------

[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------

;==========<WIN POSE DECIDER>==========
[Statedef 180]
type=S


[State 180, 1]; Win Screen
type = Helper
trigger1 = !NumHelper(9998)
trigger1 = MatchOver
Trigger1 = !Numpartner
stateno = 9998
postype = left
pos = 0,0
name = "Win Screen"
id = 9998



[State 180, win]
type=changestate
trigger1= !time
value=ifelse(var(53)>=1, 183, ifelse ( random<500,181,182))



;---------------------------------------------------------------------------

[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, voz]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, ifelse (Random < 550, 8, 9)
channel = 0

;---------------------------------------------------------------------------

[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, voz]
type = PlaySnd
trigger1 = AnimElem = 2
value = 9, 15
channel = 0

;--------------------------------------------------------------------------

[Statedef 183]
type=A
physics=N
movetype=I
anim=6990
sprpriority=2
facep2=1

[State 1111301, screen]
type=screenbound
trigger1=1
value=0
movecamera=1,0

[State 0, 0]
type = VelSet
trigger1 = animelemtime(2)>=0
y = -1.3
x=0

[State 200, efeito]
type = PlaySnd
trigger1 = AnimElem = 2
value = 31, 7

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


[State 6990]
type=playsnd
trigger1= animelem=2
value=5,20
channel=0

[State 6990]
type=playsnd
trigger1= !time
value=7,1



[State 6990]
type=bgpalfx
trigger1= random<50
time=10
add=128,128,128
sinadd=-128,-128,-128,40


;---------------------------------------------------------------------------

[Statedef 190]
type = S

[State 190, 1]
type = VarRandom
trigger1 = 1
v = 31
range = 191,192 ;191

[State 190, 2]
type = ChangeState
trigger1 = Time = 0
value = var (31)



;---------------------------------------------------------------------------

[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, voz]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, ifelse (Random < 500, 4, 5)
channel = 0

[State 191, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------

[Statedef 192]
type = S
ctrl = 0
anim = 191
velset = 0,0
sprpriority = 2

[State 192, VarSet]
type = VarSet
trigger1 = Time = 0
var(7) = Ceil(P2Dist X)


[State 191, voz]
type = PlaySnd
trigger1 = AnimElem = 10
trigger2 = AnimElem = 12
value = 1, 7
channel = 1

[State 191, voz]
type = PlaySnd
trigger1 = AnimElem = 15
value = 1, 9
channel = 2


[State 191, voz]
type = PlaySnd
trigger1 = AnimElem = 22
value = 0, 10
channel = 0

[State 192, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 191

[State 192, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 105, 1]
type = VelSet
trigger1 = AnimElemTime(7) = 0 || (AnimElemTime(7) >= 0 && P2Dist X >= Var(7))
x = ifelse (AnimElemTime(7) = 0, -(Var(7)/40), 0)

[State 192, efeito]
type = PlaySnd
trigger1 = AnimElemTime(7) = 0 || AnimElemTime(8) = 0
value = 1,ifelse (AnimElemTime(7) = 0, 4, 3)
channel = 20
volume = 10

[State 192, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------


[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 
value = 5050

[State 5050, 2] 
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] 
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200

[State 5050, 5] 
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100

;---------------------------------------------------------------------------
[Statedef 5200]
type=A
movetype=H
physics=N


[State 5200, Vel]
type=veladd
trigger1= 1
y=gethitvar(yaccel)

[State 5200, End]
type=selfstate
trigger1= vel y>0 && pos y>=-10
value=5201

;---------------------------------------------------------------------

[Statedef 5201]
type=S
movetype=I
physics=N
anim=5200
ctrl=0
facep2=1

[State 5201, Pos]
type=posset
trigger1= 1
y=0

[State 5201, Vel]
type=velset
trigger1= !time
x=-8
y=0

[State 5201, Vel]
type=velmul
trigger1= 1
x=.9

[State 5201, voz]
type = PlaySnd
trigger1 = AnimElem = 1 
value = 0, 24
channel = 0

[State 5201, flash]
type=palfx
trigger1= !time
add=255,255,255
sinadd=-255,-255,-255,40
time=10


[State 5201, Dust]
type=explod
trigger1= !(time%6) && abs(vel x)>=1
anim=8015
sprpriority=3
postype=p1
pos=0,0
vel=1,0
scale=1,1
pausemovetime=-1
supermovetime=-1
ownpal=1

[State 5201, nhb]
type=nothitby
trigger1= 1
value=SCA
time=1

[State 5201, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1

;---------------------------------------------------------------------------

[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0

[State 5210, voz]
type = PlaySnd
trigger1 = AnimElem = 1 
value = 0, 24
channel = 0

[State 5210, 2] 
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20



[State 5210, flash]
type=palfx
trigger1= !time
add=255,255,255
sinadd=-255,-255,-255,40
time=10

[State 5210, Accel]
type=veladd
trigger1= 1
y=.6


[State 5210, Vel]
type=velset
trigger1= !time
x= ifelse((command="holdfwd" && command!="holdback"), 0, ifelse((command!="holdfwd" && command="holdback"), -4, -2))
y= -7.55


[State 5210, nhb]
type=nothitby
trigger1= time<14
value=SCA
time=1

[State 5210, ctrl]
type=ctrlset
trigger1= animelemtime(6)>=0
value=1

[State 5210, Land]
type=changestate
trigger1= vel y>0 && pos y>=0
value=52




;---------------------------------------------------------------------------

[Statedef 9000]
ctrl = 0
anim = 8900

[State 9000, Assert]
type = AssertSpecial
trigger1 = Time < 62
flag = NoFG
flag2 = NoBarDisplay
flag3 = GlobalNoShadow

[State 3460, efeito]
type = PalFX
trigger1 = Time >= 0
add = -1000, -1000, -1000
persistent = 0
time = 35

[State 3460, efeito]
type = BGPalFX
trigger1 = Time >= 0
add = 1000, 1000, 1000
persistent = 0
time = 49

[State 9000, PalFX]
type = EnvColor
trigger1 = Time < 12
value = 0,0,0
under = 1
ignorehitpause = 1

[State 9000, PalFX]
type = AllPalFX
trigger1 = Time >= 11 && Time < 62
time = 1
color = 12+(time*3)
add = 310-(time*5),310-(time*5),310-(time*5)
ignorehitpause = 1

[State 9000, efeito]
type = Playsnd
trigger1 = Time = 0
value = 1,22
channel = 2

;--------------------------------
; Win the Match
;--------------------------------
[Statedef 9998]
type = S
movetype = I
anim = 9741

[State 2000, Time for win screen]
type = AssertSpecial
trigger1 = time = [0,500]
flag = RoundNotOver

[State 2000, Silence]
type = AssertSpecial
trigger1 = time = [110,520]
flag = NoMusic

[State 9990, Bg]
type = AssertSpecial
trigger1 = Time >= 100
flag = NoBarDisplay

[State 9000, BG]
type = BGPalFx
trigger1 = Time >= 100
time = 1
Add = -40,-40,120
Color = 0
ignorehitpause = 1

[State 9990, BG]
trigger1 = time = 100
type = Explod
ownpal = 1
anim = 9998
postype = left
pos = 160,240
bindtime = -1
ID = 9998
ontop =1

[State 9990, portrait]
trigger1 = time = 100
type = Explod
ownpal = 1
anim = 9999
postype = left
pos = 160,240
bindtime = -1
ID = 9999
ontop =1

[State 9990, TEXT]
type = Explod
trigger1 = time = 130
ownpal = 1
anim =ifelse(random<500,9997,2723)
postype = left
pos = 160,240
bindtime = -1
ID = 9997
ontop =1

;==========<FORCED P2 RECOVERY>==========
;[Statedef 5025]
;type=A
;movetype=H
;physics=N
;velset=0,0
;facep2=1

;[State 5025, hfs]
;type=hitfallset
;trigger1=1
;value=0

;[State 5025, End]
;type=selfstate
;trigger1=1
;value= ifelse(pos y, 5020, 5000)

;---Tech Flip---
[Statedef 5205]
type=A
movetype=H
physics=N

[State 5205, Vel]
type=velset
trigger1= !time
trigger1= pos y<-20 && vel y<-7
y=-7

[State 5205, End]
type=selfstate
trigger1=1
value= ifelse(pos y>=-20, 5200, 5210)


;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------

[Statedef -2]

[State -2, Stop AI]
type=varset
trigger1= var(12)!=0
trigger1= roundstate!=2 || !alive
var(12)=0
ignorehitpause=1


[State -2, 8]
type = VarAdd
trigger1 = Var(39)
trigger1 = StateNo != 3120
trigger1 = StateNo != 1701 
trigger1 = StateNo !=1702
trigger1 = StateNo !=6993
trigger1 = StateNo !=3121
var(39) = -1
ignorehitpause = 1

[State -2, 8]
type = VarAdd
trigger1 = Var(18)
trigger1 = StateNo != 3039
var(18) = -1
ignorehitpause = 1

[State -2, 8]
type = VarSet
trigger1 = Var(18) < 0
trigger1 = StateNo != 3039
var(18) = 0
ignorehitpause = 1



[State -2, powerbar]
type = ModifyExplod
trigger1 = Var(18)
ID = 8801
scale = (Var(18)) / 900.0,1
ignorehitpause = 1

[State -2, powerbar]
type = removeExplod
trigger1 = NumExplod(8801)
trigger1 = !Var(18)
;trigger2= movetype=H
ID = 8800
ignorehitpause = 1


[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim!=1080
id =888


[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim!=3120
id =889

[State -2, powerbar]
type = removeExplod
trigger1 = !Var(18)
;trigger2= movetype=H
ID = 8801
ignorehitpause = 1


[State 3020, removeelectricity]
type=removeexplod
trigger1= anim!=3120
ID=3126


[State -2, VarSet]
type = VarSet
trigger1 = 1
var(47) = 0


[State -2, VarSet]
type = VarSet
trigger1 = (EnemyNear, StateNo = [150,155])
trigger2 = (EnemyNear, MoveType = H && EnemyNear, StateType != A) && !var(33)
trigger3 = (EnemyNear, StateNo = [5020,5040]) && !(EnemyNear, HitFall)
trigger4 = ((EnemyNear, StateNo = 0) || (EnemyNear, StateNo = 52)) && (EnemyNear, PrevStateNo = [5000,5040]) && ((EnemyNear, Time<=0) || !(EnemyNear, Ctrl))
trigger5 = (EnemyNear, StateNo = 0) && (EnemyNear, PrevStateNo = 52) && ((EnemyNear, Time<=0) || !(EnemyNear, Ctrl))
trigger6 = (EnemyNear, StateNo = 40) && (EnemyNear, Time>=1 || EnemyNear, PrevStateNo = 0 || EnemyNear, PrevStateNo = 52)
var(47) = 1


[State -2, 11]
type = PalFX
;trigger1 = MoveType != H
trigger1 = (GameTime%2)=0
trigger1 = var(18)
time = 1
add = 70,70,70
ignorehitpause = 1


;[State -2, P2 Recovery]
;type=targetstate
;trigger1= !var(33)
;trigger1= (stateno=[200,407])
;trigger1= movehit=1 && numtarget
;trigger1= (target,stateno=5020) && (target,alive) && (target,hitfall)
;value=5025
;ignorehitpause=1

[State -2, P2 Facing]
type=targetfacing
trigger1= movecontact=1 && numtarget
trigger1= !(target,hitshakeover) && !(target,hitfall) && (target,time<=1)
value= ifelse(p2dist x>=0, -1, 1)
ignorehitpause=1

[State -2, P2 Tech Flip]
type= varset
trigger1= movehit=1
var(24)= (stateno=[195,2999]) && stateno!=1030 && stateno!=1055 && stateno!=1110 && stateno!=1405 && stateno!=214
ignorehitpause=1


[State -2, P2 Tech Flip]
type= targetstate
trigger1= var(24)
trigger1= roundstate=2 && (ctrl || movetype=H)
trigger1= numtarget
trigger1= target,command="recovery"
trigger1= target,alive && target,hitfall
trigger1= target,stateno=5030 || target,stateno=5035 || target,stateno=5050 || target,stateno=5071
value= 5205 + 0*(var(24):=0)
ignorehitpause=1

[State -2, P2 Tech Flip]
type= varset
triggerall= var(24)
trigger1= !numtarget || var(33)>0
trigger2= numenemy=1
trigger2= enemy,statetype!=A
trigger3= numenemy>=2
trigger3= enemynear(0),statetype!=A && enemynear(1),statetype!=A
trigger4= numhelper(3015)
trigger4= helper(3015),var(25)
var(24)= 0
ignorehitpause=1

[State -2,hitby]
type=nothitby
trigger1 =numhelper(3040)
time=power>20
value=SCA,NP,SP,HP
ignorehitpause=1

[State -2,hitby]
type=hitby
trigger1 =numhelper(3040)
time=numhelper(3040)
value=SCA,NA,SA,HA,AT
ignorehitpause=1


[State -2, stopsnd]
type=stopsnd
trigger1= PrevStateNo = 1080
channel=2

[State -2, stopsnd]
type=stopsnd
trigger1= PrevStateNo = 1080
channel=3

[State -2, P2 Facing]
type=targetfacing
trigger1= movecontact=1 && numtarget
trigger1= !(target,hitshakeover) && !(target,hitfall) && (target,time<=1)
value= ifelse(p2dist x>=0, -1, 1)
ignorehitpause=1


[State -2, Counter FX]
type=helper
trigger1= !numhelper(7400) && var(17)
trigger1= movehit=1 && numtarget && !(hitdefattr=SCA,AT)
helpertype=normal
stateno=7400
ID=7400
name="Counter"
postype=left
pausemovetime=255
supermovetime=255
ignorehitpause=1

[State -2, Counter Flag]
type=varset
trigger1= numenemy
var(17)=(enemynear,movetype=A)
ignorehitpause=1

[State -2, RemoveAfterImage]
type = AfterImageTime
trigger1 = MoveType = H || PrevStateNo = [3000, 4999]
time = 0

[State -2, Power Chage]
type = RemoveExplod
trigger1 = NumExplod(8005) || MoveType = H
ID = 8000

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Anim != 1012 || MoveType = H 
ID = 1017

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Anim != 3001 || MoveType = H 
ID =14378

[State -2, noJuggle]
type=assertspecial
trigger1=  numtarget(1211) || numtarget(2400) || p2stateno=1124 || p2stateno=1111303 || var(33)>0
trigger2= roundstate!=2
flag=nojugglecheck
ignorehitpause=1

[State -2, Original Combo End]
type=varset
trigger1= var(33)<0
trigger2= movetype=H
trigger3= roundstate!=2
var(33)=0
ignorehitpause=1

[State -2, Original Combo Time]
type=varadd
trigger1= var(33)>0
var(33)=-1
ignorehitpause=1

[State -2, Original Combo Guard]
type=assertspecial
trigger1= var(33)>0
flag= nostandguard
flag2=nocrouchguard
flag3=noairguard
ignorehitpause=1

[State -2, Original Combo PalFX]
type=palfx
trigger1= var(33)>60
time=2
add=32+ceil(sin(var(33)/16.0*pi)*32),32+ceil(sin(var(33)/16.0*pi)*32),32+ceil(sin(var(33)/16.0*pi)*32)
ignorehitpause=1

[State -2, Original Combo PalFX]
type=palfx
trigger1= var(33)=[1,60]
time=2
add=64+ceil(sin(var(33)/8.0*pi)*64),64+ceil(sin(var(33)/8.0*pi)*64),64+ceil(sin(var(33)/8.0*pi)*64)
ignorehitpause=1

[State -2,attackMulSet]
type = AttackMulSet
triggerall = var(12)>=1
trigger1 = Life<250
value = 1.3

[State -2,DefenceMulSet]
type = DefenceMulSet
triggerall = var(12)>=1
trigger1 = Life<200
value = 0.2

[state -2 , zoom]
type = angledraw
triggerall = animtime
trigger1 = stateno = 3055
time = -1
value = 0
scale = 1.20,1.20

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = stateno!=3060
id = 3069


[State -2, RESURRECTION]
type=assertspecial
triggerall=var(12)>=1 && power>=1000
trigger1= !var(53)
trigger1= GetHitVar(damage) >= life
flag=noko
ignorehitpause=1



[State -2, RESURRECTION]
type=varset
trigger1= roundstate<2
var(53)=0
ignorehitpause=1

[State -2, RESURRECTION!]
type=changestate
triggerall=var(12)>=1 && power>=1000
trigger1= !var(53)
trigger1= GetHitVar(damage) >= life 
value=6990
ignorehitpause=1

[State -2]
type=lifeadd
trigger1= stateno=6993 && animelemtime(1)>=0
trigger2= stateno=6992 && animelemtime(4)>=0
value= ifelse((p2life<=200),2,ifelse(p2life >200 && p2life<600,4,6))
ignorehitpause=1


[State -2, Assert]
type=trans
triggerall= stateno!=6990 && stateno!=6992 && stateno!=6993
trigger1= var(53)=1
trans=add1
ignorehitpause=1


[State 100, Assert]
type = AssertSpecial
triggerall= stateno!=6990 && stateno!=6992 && stateno!=6993
trigger1= var(53)=1 && stateno=5150 ;&& vel x = 0
trigger1= GetHitVar(damage) >= life
flag = Invisible
ignorehitpause=1


;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]



[State -3, AI]
type=varset
trigger1= alive && ishometeam
trigger1= teamside=2 || matchno>1
var(12)=1

[State -3, AI Helper]
type=helper
trigger1= !var(12) && !numhelper(9741)
trigger1= alive && roundstate=2
helpertype=normal
name="AI"
ID=9741
pos=99999,99999
stateno=9741
keyctrl=1
pausemovetime=65535
supermovetime=65535

[State -3, Gametime Var]
type=varset
trigger1= 1
var(58)=gametime
ignorehitpause=1


[State -3, PalFXWiz]
type = PalFX
trigger1 = var(33)>=1
trigger1 = Time % 9 = 0
add = 70,70,70
ignorehitpause = 1
time = 4
persistent = 1
ownpal=0


[State -3, Bounding Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = 5100 || StateNo = 5110
value = 1, ifelse (StateNo = 5110, 6, 5)
channel = 20

[State -3, GetHurt Sound]
type = PlaySnd
triggerall = Random < 130
triggerall = Time = 1
triggerall = Alive = 1
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5100
value = 0, ifelse (StateNo = 5100 || GetHitVar(animtype) = 2, 3, ifelse (GetHitVar(animtype) = 1, 2, 1))


[State -3, kamehha]
type = StopSnd
trigger1 = !var(39)
channel = 9

[State -3, kamehha]
type = StopSnd
trigger1 = !var(39)
channel = 5



[State -3, Jump Dust]
type = Explod
triggerall = prevstateno != 45
triggerall = MoveType != H && StateNo != 5040 && StateNo != 5210 && StateNo != 1050 && Anim != 1013&& NumExplod(8020) < 5
trigger1 = ((StateNo != [600,699]) && Vel Y < 0 && Time <= 5) || (StateNo = 1010 && (AnimElemTime(5) >= 0 && AnimElemTime(5) < 6)) || (StateNo = 1030 && (Time >= 1 && Time < 6))
trigger2 = (StateNo = 1040 && (Time >= 1 && Time < 6)) || (StateNo = 3000 && (Anim = 3000 && (AnimElemTime(12) >= 0 && AnimElemTime(12) < 6)) || (Anim = 3001 && (AnimElemTime(20) >= 0 && AnimElemTime(20) < 6)))
trigger3 = (StateNo = 3050 && (AnimElemTime(7) >= 0 && AnimElemTime(7) < 6)) || (StateNo = 3100 && (AnimElemTime(41) >= 0 && AnimElemTime(41) < 6)) 
Anim = 8020
pos = 0, Floor(-Pos Y) + 5
postype = p1
ontop = 1
ownpal = 1
bindtime = 1
vel = ifelse (NumExplod(8020) = 0, 0, ifelse (NumExplod(8020) = 1, 1, ifelse(NumExplod(8020) = 2, -1, ifelse (NumExplod(8020) = 3, 2, -2)))), -1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
ID = 8020

[State -3, Jump Dust]
type = Explod
triggerall = prevstateno != 45
triggerall = MoveType != H && StateNo != 5040 && StateNo != 5210 &&StateNo != 1050 && Anim != 1013 && NumExplod(8021) < 2
trigger1 = ((StateNo != [600,699]) && Vel Y < 0 && Time <= 2) || (StateNo = 1010 && (AnimElemTime(5) >= 0 && AnimElemTime(5) < 2)) || (StateNo = 1030 && (Time >= 1 && Time < 3))
trigger2 = (StateNo = 1040 && (Time >= 1 && Time < 3)) || (StateNo = 3000 && (Anim = 3000 && (AnimElemTime(12) >= 0 && AnimElemTime(12) < 2)) || (Anim = 3001 && (AnimElemTime(20) >= 0 && AnimElemTime(20) < 2)))
trigger3 = (StateNo = 3050 && (AnimElemTime(7) >= 0 && AnimElemTime(7) < 3)) || (StateNo = 3100 && (AnimElemTime(41) >= 0 && AnimElemTime(41) < 2)) 
Anim = ifelse (NumExplod(8021), 8022, 8021)
pos = 0, Floor(Pos Y - Vel Y) - 5 
postype = p1
ontop = 1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
ID = 8021



[State -3,def up]
type = DefenceMulSet
triggerall = var(12)>=1
trigger1 = Life <= const(data.life)/2
value = ifelse(life <= const(data.life)/4,.5,.6)
ignorehitpause = 1

[State -3, VarSet]
type = VarSet
trigger1 = stateno !=[790,794]
v = 37
value = 0

[State -3, VarSet]
type = VarSet
trigger1 = stateno !=[790,794]
v = 38
value = 0

[State -3, VarSet]
type = VarSet
trigger1 = stateno !=[790,794]
v = 28
value = 0


[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = stateno!=1700
id = 1709



[State -3, Moles-B-Gon]
type=targetbind
triggerall=p2stateno!=804
trigger1= movehit=1
trigger1= numtarget && numenemy
trigger1= (target,time<=1) && (target,ID = enemynear,ID)
trigger1= !(target,hitshakeover) && (target, hitfall) && (target, pos y>0)
pos= ceil(p2dist x), 0
ignorehitpause=1

[State -3, Prevent Crossup]
type=width
trigger1=1
edge=8,0
ignorehitpause=1

[State -3, ExFlash]
type=palfx
triggerall= (anim!=[1101,1103])
trigger1= stateno=1110 && movetype=A
trigger2= stateno=1001 && movetype=A
time=1
add=32+ceil(sin(gametime/1.5)*32),32+ceil(sin(gametime/1.5)*32),0
mul=300,300,200
ignorehitpause=1

[State -3, moveshadow]
type=afterimage
triggerall= time=1 && !var(33)
trigger1= stateno=50 && var(9)=3
trigger2= stateno=710 || stateno=810 || stateno=815 || stateno=816 || stateno=609
time=2
timegap=1
framegap=3
length=12
palbright=0,0,0
paladd=0,0,0
palmul=.9,.9,.9
palcontrast=120,120,120
palpostbright=0,0,0
trans=add1



[State -3, ExShadow]
type=afterimage
triggerall=  time=1 && movetype=A && var(8)=4
trigger1= stateno=1001
trigger2= stateno=1110 
trigger3= stateno=1211
trigger4= stateno=1200
trigger5= stateno=1040
trigger6= stateno=1055
trigger7= stateno=1335
trigger8= stateno=1405
trigger9= stateno=2700
trigger10= stateno=823
trigger11= stateno=824
trigger12= stateno=825 
trigger13= stateno=828

time=2
timegap=1
framegap=1
length=8
palbright=32,32,0
palcontrast=128,128,128
paladd=-10,-10,-10
palmul=1.1,1,.5
trans=add
ignorehitpause=1

[State -3, lv1supershadow]
type=afterimage
trigger1= stateno=3030  && anim=3032 && animelem=4
time=2
timegap=1
framegap=10
length=30
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=128,128,128
palpostbright=0,0,0
trans=add1

[State -3, lv2supershadow]
type=afterimage
trigger1= stateno=3030 && anim=3030 && animelem=4
time=2
timegap=1
framegap=10
length=30
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=32,32,160
palpostbright=0,0,0
trans=add1

[State -3, Variable Height]
type=playerpush
triggerall= statetype=A && movetype!=H && numenemy=1
triggerall= p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)) , 0]
trigger1= p2statetype=S
trigger1= p2dist y >= (enemynear,const(size.height) - 30)
trigger2= p2statetype=C
trigger2= p2dist y >= (enemynear,const(size.height) - 56)
trigger3= p2statetype=L
trigger3= p2dist y >= 12
value=0
ignorehitpause=1

[State -3, lv3supershadow]
type=afterimage
trigger1= stateno=3030  && anim=3035 && animelem=4
trigger2= stateno= 3010 && anim=3010 && animelem=2
time=2
timegap=1
framegap=10
length=30
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=160,32,32
palpostbright=0,0,0
trans=add1

[State -3, ExFlash]
type=palfx
trigger1= stateno=1001 && var(8)=4
trigger2= stateno=1110 && var(8)=4
trigger3= stateno=1211 && var(8)=4
trigger4= stateno=1200 && var(8)=4
trigger5= stateno=1040 && var(8)=4
trigger6= stateno=1055 && var(8)=4
trigger7= stateno=1335 && var(8)=4
trigger8= stateno=1405 && var(8)=4
trigger9= stateno=2700 && var(8)=4
trigger10= stateno=823 && var(8)=4
trigger11= stateno=824 && var(8)=4
trigger12= stateno=825 && var(8)=4
trigger13= stateno=828 && var(8)=4
time=1
add=32+ceil(sin(gametime/1.5)*32),32+ceil(sin(gametime/1.5)*32),0
mul=300,300,200
ignorehitpause=1

[State -3, AfterImagePersist]
type=afterimagetime
trigger1= stateno=1001 && var(8)=4
trigger2= stateno=1110 && var(8)=4
trigger3= stateno=1211 && var(8)=4
trigger4= stateno=1200 && var(8)=4
trigger5= stateno=1040 && var(8)=4
trigger6= stateno=1055 && var(8)=4
trigger7= stateno=1335 && var(8)=4
trigger8= stateno=1405 && var(8)=4
trigger9= stateno=2700 && var(8)=4
trigger10= stateno=823 && var(8)=4
trigger11= stateno=824 && var(8)=4
trigger12= stateno=825 && var(8)=4
trigger13= stateno=828 && var(8)=4

trigger14= stateno=3030
trigger15 = stateno=3010 
trigger16= stateno=50 && var(9)=3 && vel y<-1
trigger17= stateno=710 || stateno=810 || stateno=815 || stateno=816 || stateno=3400 || stateno=609
time=2

[State -3, AfterImage persist]
type=afterimagetime
trigger1= var(33)>=1
ignorehitpause=1
time=2

[State -3, ExSnd]
type=playsnd
triggerall= time=1 && movetype=A && var(8)=4
trigger1= stateno=1001
trigger2= stateno=1110 
trigger3= stateno=1211 
trigger4= stateno=1200
trigger5= stateno=1040
trigger6= stateno=1055
trigger7= stateno=1335
trigger8= stateno=1405
trigger9= stateno=823
value=3,14
ignorehitpause=1

[State -3, NoWalk after Parry]
type=assertspecial
trigger1= prevstateno=700
trigger1= stateno=0 && time<7
flag= nowalk

[State -3, Playsound]
type = Playsnd
trigger1= p2stateno=118936 && time =4
value = 9,2

[State -3, Cheap KO]
type=changestate
trigger1= !alive && (stateno=[5000,5010])
trigger1= (prevstateno=[130,131]) || (prevstateno=[140,141]) || (prevstateno=[150,153])
value=5130
ignorehitpause=1

[State -1]
type = Explod
triggerall = anim = 6990
triggerall = time >= 3
trigger1 = (GameTime%5) = 1
anim = 6998
ID = 6998
sprpriority = -1
postype = p1
pos = 0,-78
bindtime = -1
under = 0
ownpal = 1
persistent = 0
ignorehitpause = 0
scale =.9,.9


[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = Anim!=6990
id = 6998