;=====================================
;Ella (2.5)
;=====================================

;Ella carta d'identita'
[Data]
life = 1000             
attack = 100            
defence = 100           
fall.defence_up = 50    
liedown.time = 60       
airjuggle = 15         
sparkno = 1             
guard.sparkno = 40      
KO.echo = 0             
volume = 20
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = 1           
yscale = 1           
ground.back = 15     
ground.front = 22  
air.back = 12        
air.front = 12       
height = 60          
attack.dist = 160   
proj.attack.dist = 90
proj.doscale = 0      
head.pos = -5, -90   
mid.pos = -5, -60    
shadowoffset = 0     
draw.offset = 0,0   

[Velocity]
walk.fwd  = 2.1           
walk.back = -1.9          
run.fwd  = 5.5, 0         
run.back = -7.33,-2.8     
jump.neu = 0,-9.65           
jump.back = -3.21, -10.4     
jump.fwd = 3.21,-10.4       
runjump.fwd = 4.1,-9.7      
airjump.neu = 0,-9.7      
airjump.back = -2.55,-9.7
airjump.fwd = 2.5,-9.7    

[Movement]
airjump.num = 0       
airjump.height = 35   
yaccel = .50        
stand.friction = .85  
crouch.friction = .82 

;==================================================================================
;Corsa
[Statedef 100]
type    = S
movetype = I
physics = N
anim = 100

[State 100,0]
type = VelSet
trigger1 = AnimElem = 3
x = Const(velocity.run.fwd.x)

[State 100, SE]
type = PlaySnd
trigger1 = Timemod = 23,0;  time = 0
value = 100,0
channel = 20

[State 1220, Explod]
type = Explod
trigger1 = AnimElem = 11
anim = 8009
sprpriority = 5
pos = 0,3
bindtime = 1
supermovetime = -1
removeongethit = 1

[State 100, SE]
type = StopSnd
trigger1 = AnimElem = 5, >= 0
trigger1 = command != "holdfwd"
channel = 20;

[State 100, CG]
type = ChangeState
triggerall = var(7) != 1
trigger1 = Command != "holdfwd" && Time >= 10
value = 101
ctrl = 1

[State 100, CG]
type = ChangeState
trigger1 = Command = "holdupfwd" && Time >= 10
value = 40

[State 100, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

;------------------------ 
[Statedef 101]
type = S
movetype = I
physics = S
anim = 101
velset = 0, 0

[State 101, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
[Statedef 105]
type = S
movetype = I
physics = S
anim = 105
ctrl = 0
velset = 0, 0

[State 105, STS]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
physics = N

[State 105, Velset]
type = VelSet
trigger1 = AnimElem = 3
x = Const(velocity.run.back.x)
y = Const(velocity.run.back.y)

[State 105, VelAdd]
type = VelAdd
trigger1 = AnimElem = 2, > 0
y = .43

[State 105, CG]
type = ChangeState
trigger1 = AnimElem = 3, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 106

;---------------------------
[Statedef 106]
type = S
movetype = I
physics = S
anim = 106
velset = 0, 0

[State 106, Posset]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, Makedust]
type = MakeDust
trigger1 = Time >= 0
pos = -30, 0

[State 106, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Salti saltini Saltoni!
;=================================================================
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0

[State 40, VS]
type = VarSet
trigger1 = Time = 0
var(8) = 0

[State 40, VS]
type = VarSet
trigger1 = command = "holdfwd"
trigger1 = var(8) != 2
var(8) = 1

[State 40, VS]
type = VarSet
trigger1 = command = "holdback"
trigger1 = var(8) != -2
var(8) = -1

[State 40, VS]
type = VarSet
triggerall = Time = 0
triggerall = command = "holdfwd"
trigger1 = command = "longjump"
trigger2 = prevstateno = 100
var(8) = 2

[State 40, VS]
type = VarSet
trigger1 = Time = 0
trigger1 = command = "holdback"
trigger1 = command = "longjump"
var(8) = -2

[State 40, VS]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = var(8) != 0 && var(8) != 1 && var(8) != -1
trigger1 = command = "holdup"
trigger2 = command != "holdup"
value = 2041

[State 40, VS]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(var(8)=0, const(velocity.jump.neu.x), ifelse(var(8)>0, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Saltoni
[Statedef 2041]
type    = A
physics = A
velset = 0, -8.75
ctrl = 1

[State 2041, VelSet]
type = VelSet
trigger1 = Time = 0
trigger1 = command = "holdup"
y = -10.11 

[State 2041, Velset]         ;salto con simpatia
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = 1
x = 3.4                 


[State 2041, Velset]         ;avanti mazinga!
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = 2
x = 4.84   

[State 2041, Velset]         ;salto con simpatia, ma non troppa
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = -1
x = -3.4
              
[State 2041, Velset]         ;indietro tutta!
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = -2
x = -4.84                    


[State 2041, AfterImage]     ;e diamogli un tocco di colore
type = AfterImage
triggerall = Time = 0
trigger1 = var(8) = 2 || var(8) = -2
time = 10
trans = add1
timegap = 2
PalBright = 0,0,0
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
framegap = 2
length = 5
                         
[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X = 0
trigger1 = command = "holdup"
value = 41

[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = command != "holdup"
value = 2041

[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X > 0
trigger1 = command = "holdup"
value = 42

[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X < 0
trigger1 = command = "holdup"
value = 43

[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Vel y > -2 && pos Y < -70
trigger1 = Vel X > 0
trigger1 = SelfAnimExist(45)
persistent = 0
value = 45

[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Vel y > -2 && pos Y < -70
trigger1 = Vel X < 0
trigger1 = SelfAnimExist(46)
persistent = 0
value = 46

[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Vel y > -1 && pos Y >= -70
trigger1 = Anim != 45 && Anim != 46
persistent = 0
value = 2044

[State 2041, VelAdd]
type = VelAdd
trigger1 = Time >= 25
y = 0.1

;===========================================================================
;Me Paro
[Statedef 120]
type = U    
physics = U 

[State 120, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && p2stateno < 1000 && statetype != A
value = 2120 + (statetype = C) + (statetype = A)*2          ;mano davanti mano

[State 120, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = p2stateno >= 1000
trigger2 = statetype = A
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

;---------------------------------------------------------------------------
;Me Paro dritto
[Statedef 130]
type    = S
physics = S

[State 130, ChangeAnim]
type = ChangeAnim
trigger1 = p2stateno = [200,999]
value = 2130                      ;mano davanti mano ancora

[State 130, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 130 && Anim != 2130 
value = 130

;---------------------------------------------------------------------------
;Me paro abasso
[Statedef 131]
type    = C
physics = C

[State 131, ChangeAnim]
type = ChangeAnim
trigger1 = p2stateno = [200,999]
value = 2131                     ;in cerca delle rose

[State 131, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 131 && Anim != 2131 
value = 131

;---------------------------------------------------------------------------
;Me paro finisco
[Statedef 140]
type = U    
physics = U 
ctrl = 1

[State 140, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && p2stateno < 1000 && statetype != A
value = 2140 + (statetype = C) + (statetype = A)*2    ;mano e la mano

[State 140, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = p2stateno >= 1000
trigger2 = statetype = A
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

;---------------------------------------------------------------------------
;Me Paro ma tremo
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, ChangeA]
type = ChangeAnim
trigger1 = p2stateno < 1000 && Anim != 850
value = 2150             ; mano alza la mano

[State 150, ChangeA]
type = ChangeAnim
trigger1 = Anim != 2150 && Anim != 850
value = 150

[State 150, VarAdd]
type = VarAdd
trigger1 = time = 0
trigger1 = Anim = 2150
v = 4
value = 2

[State 150, VA]
type = VarAdd
trigger1 = time = 0
trigger1 = Anim = 150
v = 4
value = 3

[State 150, CA]
type = ChangeAnim
trigger1 = Var(4)  >= 99
value = 850

[State 150, BGPalfx]
type = BGPalfx
trigger1 = Var(4)  >= 99
trigger1 = time = 0
ignorehitpause = 1
time = 1
add = 255,255,255

[State 152, HitBy]
type = HitBy
trigger1 = Var(4)  >= 99
value = SCA

[State 150, Changestate]
type = ChangeState
trigger1 = Var(4)  >= 99
trigger1 = HitShakeOver
value = 10850

[State 150, Changestate]
type = ChangeState
trigger1 = HitShakeOver
value = 151

;---------------------------------------------------------------------------
;Me paro ma ritorno
[Statedef 151]
type    = S
movetype= H
physics = S

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)       ;lontanoooo
trigger2 = Time >= GetHitVar(hittime)
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, 4]
type = ChangeState
trigger1 = Time >= GetHitVar(hittime)
value = 130
ctrl = 1

;---------------------------------------------------------------------------
;Me paro ma basso
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 0]
type = ChangeAnim
trigger1 = p2stateno < 1000
value = 2151                 ;a coglier le rose

[State 152, 1]
type = ChangeAnim
trigger1 = Anim != 2151
value = 151

[State 152, VarAdd]
type = VarAdd
trigger1 = time = 0
trigger1 = Anim = 2151
v = 4
value = 2

[State 152, VarAdd]
type = VarAdd
trigger1 = time = 0
trigger1 = Anim = 151
v = 4
value = 3

[State 152,ChangeAnim]
type = ChangeAnim
trigger1 = Var(4)  >= 99
value = 850

[State 152, BGPalfx]
type = BGPalfx
trigger1 = Var(4)  >= 99
trigger1 = time = 0
ignorehitpause = 1
time = 1
add = 255,255,255

[State 152, HitBy]
type = HitBy
trigger1 = Var(4)  >= 99
value = SCA

[State 152, ChangeState]
type = ChangeState
trigger1 = Var(4)  >= 99
trigger1 = HitShakeOver
value = 10850

[State 152, ChangeState]
type = ChangeState
trigger1 = HitShakeOver
value = 153

;---------------------------------------------------------------------------
;Me paro ma le rose sono lontane
[Statedef 153]
type    = C
movetype= H
physics = C

[State 153, HitVelSet]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, VelSet]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = Time >= GetHitVar(hittime)
x = 0

[State 153, CtrlSet]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, CS]
type = ChangeState
trigger1 = Time >= GetHitVar(hittime)
value = 131
ctrl = 1

;-------------------------------------------------------------------------------
Se non torno e' perche' sono SCHIVOOOO
[Statedef 10850]
type = S
movetype = H
physics = S
anim = 850          ;SCHIVO

[State 10850, VarSet]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State 10850, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;================================================================================
;me cado!
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, HVS]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, Veladd]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, CS]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
value = 5100;

;================================================================================
;-Sconfitta per il tempo
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;-ESULTANZE
[Statedef 180]
type = S

[State 180, 1]
type = VarRandom
trigger1 = Time = 0
v = 1
range = 0,5

[State 180, 2]           ;piccione che esulta!
type = ChangeState
trigger1 = Var(1) = 0
value = 181             

[State 180, 3]           ;divento bimba
type = ChangeState
trigger1 = Var(1) = 1
value = 182              

[State 180, 5]           ;orso con maschera nightmare
type = ChangeState
trigger1 = Var(1) = 2
value = 185

[State 180, 5]           ;camminata all'incontrario
type = ChangeState
trigger1 = Var(1) = 3
value = 186

[State 180, 6]           ;mi pulisco il sangue
type = ChangeState
trigger1 = Var(1) = 4
value = 10097

[State 180, 6]           ;scolaretta
type = ChangeState
trigger1 = Var(1) = 5
value = 19004

;---------------------------------------------------------------------------
;-Piccione che esulta!
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, AS]
type = AssertSpecial
trigger1 = Time = [0,350]
flag = RoundNotOver

[State 181, SE]
type = PlaySnd
trigger1 = Animelem = 9
value = 10097, 0

[State 181, NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;-Divento Bimba
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 182, AS]
type = AssertSpecial
trigger1 = Time = [0,270]     
flag = RoundNotOver  

[State 182, Schermo Bianco]
type = EnvColor
trigger1 = AnimElem = 5, =18 
time = 2
value = 246,246,246

[State 182, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 5, =19
time = 27
value = 0,0,0

[State 182, 3]
type = EnvShake
trigger1 = AnimElem = 5, =18
ampl = 15
time = 28
freq = 185

[State 182, Explod]
type = Explod
trigger1 = AnimElem = 5, =20
anim = 8280
pos = 0,0
postype = p1
sprpriority = 5
ontop = 1
ownpal = 1
shadow = -1 

[State 182, polverone]        ;polverone explosivo
type = Explod
trigger1 = AnimElem = 5, =20
anim = 8008 
postype = p1
supermove = 1
ontop = 1
facing = -1
sprpriority = 7
ownpal = 1
shadow = -1
scale = 1,1
pausemovetime = 9999

[State 182, Explod]          ;punto interrogativo
type = Explod
trigger1 = AnimElem = 6, =60
trigger1 = facing = 1
anim = 8240
pos = 5,-65
postype = p1
sprpriority = 5
ontop = 1
ownpal = 1
shadow = -1 

[State 182, Explod]          ;punto interrogativo  reversato
type = Explod
trigger1 = AnimElem = 6, =60
trigger1 = facing = -1
anim = 8240
pos = -3,-65
postype = p1
sprpriority = 5
facing = -1
ontop = 1
ownpal = 1
shadow = -1 

[State 182, SE]     ;clap
type = PlaySnd
trigger1 = Animelem = 2
value = 17025, 0
volume = 255

[State 182, SE]        ;esplosione liquida
type = PlaySnd
trigger1 = AnimElem = 5, =20
value = S3000,2
volume = -50

[State 182, NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


;---------------------------------------------------------------------------
;Orso con maschera nightmare
[Statedef 185]
type = S
ctrl = 0
anim = 185
velset = 0,0

[State 185, AS]
type = AssertSpecial
trigger1 = Time = [0,250]     
flag = RoundNotOver          

[State 185, Explod]     ; da mettere il sangue       
type = Explod
trigger1 = AnimElem = 25
anim = 8000
pos = 80,-6
postype = p1
sprpriority = 7
ontop = 1
ownpal = 1
shadow = -1
random = 30,15

[State 185, SE]        ;Buh!
type = PlaySnd
trigger1 = Animelem = 3
value = 17027,0;

[State 185, SE]        ;effetto svuish
type = PlaySnd
trigger1 = Animelem = 6
value = 41,1;
volume = -150

[State 185, SE]        ;accordo inquietante
type = PlaySnd
trigger1 = Animelem = 15
value = 3165,0;
          
[State 185, SE]        ;sfx motosega
type = PlaySnd
trigger1 = Animelem = 23
value = 17010,0

[State 185, SE]        ;colpo di sega
type = PlaySnd
trigger1 = Animelem = 24
value = 210,2

[State 185, SE]        ;subimento orso
type = PlaySnd
trigger1 = Animelem = 25
value = 17028,0

[State 185, NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;Camminata all'incontrario
[Statedef 186]
type = S
movetype = I
physics = S
ctrl = 0
anim = 186
velset = 0,0

[State 186, AS]
type = AssertSpecial
trigger1 = Time = [0,800]
flag = RoundNotOver

[State 186, 1]
type = ScreenBound
trigger1 = Time = [0,800]
value = 0

[State 186, VelSet]
type = VelSet
triggerall = FrontEdgeBodyDist > 65
trigger1 = AnimElemTime(14) > 0 
x = 2

[State 186, SE]            
type = PlaySnd
trigger1 = Animelem = 4
value = 186,0
volume = -100

[State 186, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 186, CS]                      ;ella sale sul muro
type = ChangeState
trigger1 = FrontEdgeBodyDist <= 65
value = 187
ctrl = 0

;--------------------
;ella sale sul muro
[Statedef 187]
type = S
movetype = I
physics = N
ctrl = 0
anim = 187
velset = 0,0

[State 186, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0 
x = 0

[State 186, AS]
type = AssertSpecial
trigger1 = Time = [0,105]
flag = RoundNotOver

[State 186, SE]   ; risata dell'oltretomba
type = PlaySnd
trigger1 = Animelem = 9
value = 17026, 0
volume = 1

[State 186, CS]                     ;ella cammina sul muro
type = ChangeState
trigger1 = AnimTime = 0
value = 188
ctrl = 0
;--------------------
;ella cammina sul muro
[Statedef 188]
type = A
movetype = I
physics = N
ctrl = 0
anim = 188
velset = 0,0

[State 186, AS]
type = AssertSpecial
trigger1 = Time = [0,105]
flag = RoundNotOver
flag2 = NoShadow

[State 186, 1]
type = ScreenBound
trigger1 = Time = [0,105]
value = 0

[State 186, VelSet]
type = VelSet
trigger1 = 1 
Y = -2

;---------------------------------------------------
;Mi pulisco il sangue
[Statedef 10097]
type = S
ctrl = 0
anim = 10097
velset = 0,0

[State 10097, AS]
type = AssertSpecial
trigger1 = Time = [0,235]
flag = RoundNotOver


[State 10097, SE]   ; voce molto porca
type = PlaySnd
trigger1 = Animelem = 12
value = 17024, 0
volume = 100


[State 10097, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------
;-Divento scolaretta
[Statedef 19004]
type = S
ctrl = 0
anim = 19004
velset = 0,0

[State 19004, AS]
type = AssertSpecial
trigger1 = Time = [0,290]     
flag = RoundNotOver  

[State 182, Schermo Bianco]
type = EnvColor
trigger1 = AnimElem = 6, =18 
time = 2
value = 246,246,246

[State 182, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 6, =19
time = 27
value = 0,0,0

[State 182, 3]
type = EnvShake
trigger1 = AnimElem = 6, =18
ampl = 15
time = 28
freq = 185

[State 182, Explod]
type = Explod
trigger1 = AnimElem = 6, =20
anim = 8280
pos = 0,0
postype = p1
sprpriority = 5
ontop = 1
ownpal = 1
shadow = -1 

[State 182, polverone]        ;polverone explosivo
type = Explod
trigger1 = AnimElem = 6, =20
anim = 8008 
postype = p1
supermove = 1
ontop = 1
facing = -1
sprpriority = 7
ownpal = 1
shadow = -1
scale = 1,1
pausemovetime = 9999


[State 182, SE]     ;clap
type = PlaySnd
trigger1 = Animelem = 4
value = 10097, 2
volume = 255

[State 182, SE]        ;esplosione liquida
type = PlaySnd
trigger1 = AnimElem = 5, =20
value = S3000,2
volume = -50

[State 182, SE]     ;leone roar
type = PlaySnd
trigger1 = Animelem = 11
value = 17023, 0

[State 182, NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; PRESENTAZIONE 1
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191, vs Ubu]            ;presentaz. contro Ubu
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "UBU VAGRANTE"
trigger2 = p4name = "UBU VAGRANTE"
trigger3 = p2name = "UBU VAGRANTE 3.5"
trigger4 = p4name = "UBU VAGRANTE 3.5"
value = 193

[State 191, vs Kuando]            ;presentaz. contro Kuando
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "kuando"
trigger2 = p4name = "kuando"
trigger3 = p2name = "kuando 1.5"
trigger4 = p4name = "kuando 1.5"
value = 17015

[State 191, VR]           ;variabile random per la selezione presentazioni
type = VarRandom
trigger1 = Time = 0
v = 1
range = 0,3

[State 191, CG]
type = ChangeState
trigger1 = Var(1) = 1
value = 198            ;corvo e esplosione

[State 191, CG]
type = ChangeState
trigger1 = Var(1) = 2
value = 10095          ;Super mario grab

[State 191, CA]        
type = ChangeState
trigger1 = Var(1) = 3
value = 10096           ;Hitchcock

[State 191, CA]        
type = ChangeAnim
trigger1 = RoundState = 0
value = 190            ;tizia che esce dal televisore



[State 191, Explod]       
type = Explod
trigger1 = AnimElem = 61
anim = 11075
postype = p1
pos = 0,0
under = 1
bindtime = 1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 191, AS]
type = AssertSpecial
trigger1 = Time = [0,980]
flag = Intro

[State 191, SE]
type = PlaySnd
trigger1 = animelem = 2
value = 17007,0; 

[State 191, CG] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;Ma se la mia presenza non fosse gradita (DA ELIMINARE!)
[Statedef 192]
type = S
ctrl = 0
anim = 192
velset = 0,0

[State 192, CA] 
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 192, AS]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = Intro

[State 192, SE]
type = PlaySnd
trigger1 = animelem = 2
value = 195,0;

[State 192, SE]
type = PlaySnd
trigger1 = Animelem = 4
value = 190,2

[State 192, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;Presentazione Ella contro Ubu          
[Statedef 193]
type = S
ctrl = 0
anim = 193
sprpriority = 6
velset = 0,0

[State 193, AS]
type = AssertSpecial
trigger1 = Time = [0,650]
flag = Intro

[State 182, Explod]
type = Explod
trigger1 = AnimElem = 24, 80
anim = 8009
pos = 10,0
postype = p1
ontop = 1
ownpal = 1
shadow = -1 

[State 182, Explod]
type = Explod
trigger1 = AnimElem = 24, 80
anim = 8009
pos = 40,0
postype = p1
ontop = 1
ownpal = 1
facing = -1
shadow = -1 

[State 182, Explod]
type = Explod
trigger1 = AnimElem = 24, 80
anim = 8021
pos = -35,0
postype = p1
sprpriority = 7
ownpal = 1
shadow = -1 

[State 182, SE]     ;esplodi
type = PlaySnd
trigger1 = Animelem = 24, 80
value = 3100,0;

[State 182, Schermo Bianco]
type = EnvColor
trigger1 = AnimElem = 24, 80
time = 2
value = 246,246,246

[State 182, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 24, 81
time = 2
value = 0,0,0

[State 182, 3]
type = EnvShake
trigger1 = AnimElem = 24, 80
ampl = 15
time = 28
freq = 185

;[State 193, SE]
;type = PlaySnd
;trigger1 = animelem = 7
;value = 190,4;

[State 193, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;Presentazione Ella contro Kuando        
[Statedef 17015]
type = S
ctrl = 0
anim = 17015
sprpriority = 4
velset = 0,0

[State 193, AS]
type = AssertSpecial
trigger1 = Time = [0,450]
flag = Intro

[State 17015, SE]
type = PlaySnd
trigger1 = animelem = 1, =209
value = 1100,2;               esplosione

[State 17015, Explod]       ;explosione
type = Explod
trigger1 = AnimElem = 1, =209
anim = 11077
postype = p1
pos = 10,0
sprpriority = 6
bindtime = -1
ignorehitpause = 1
ownpal = 1
shadow = -1
persistent = 0
pausemovetime = 20
supermove = 1

[State 17015, polverone]        ;polverone explosivo
type = Explod
trigger1 = AnimElem = 1, =209
anim = 8008 
postype = p1
supermove = 1
ontop = 1
facing = -1
ownpal = 1
shadow = -1
scale = 1,1            ;.5, .5
pausemovetime = 9999

[State 198, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; PRESENTAzione speciale (da fare)
[Statedef 194]
type = S
ctrl = 0
anim = 194
velset = 0,0

[State 194, CA]             ; mi sa che me la sono scordata 
type = ChangeAnim
trigger1 = RoundState = 0
value = 194

[State 194, AS]
type = AssertSpecial
trigger1 = Time = [0,380]
flag = Intro

[State 194, SE]
type = PlaySnd
trigger1 = animelem = 2
value = 190,3;

[State 194, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;Presentaz. Corvo e esplosione
[Statedef 198]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 198, AS]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = Intro

[State 198, SE]
type = PlaySnd
trigger1 = animelem = 1, =100
value = 17006,0;              corvo che gracchia

[State 198, SE]
type = PlaySnd
trigger1 = animelem = 2
value = 1100,2;               esplosione


[State 850, BGPalfx]
type = BGPalfx
trigger1 = AnimElem = 2
ignorehitpause = 1
time = 1
add = 0,0,0

[State 198, Explod]       ;corvo fermo
type = Explod
trigger1 = AnimElem = 1
anim = 11078
postype = p1
pos = 0,0
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
pausemovetime = 200
supermove = 1

[State 198, Explod]       ;corvo che parte
type = Explod
trigger1 = AnimElem = 1, =100
anim = 11079
postype = p1
pos = 0,0
vel = -2, -2
ontop = 1
bindtime = 1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 200
supermove = 1

;[State 850, BGPalfx]
;type = BGPalfx
;trigger1 = AnimElem = 2
;ignorehitpause = 1
;time = 25
;add = 0,0,0

[State 3303, Schermo Bianco]
type = EnvColor
trigger1 = AnimElem = 2
time = 2
value = 246,246,246
under = 1

[State 3051, BGPalFX]    ;oscuramento 
type = BGPalFX
trigger1 = AnimElem = 2, =2
time = 37
ignorehitpause = 1
color = 0
mul = 30,30,30
sinadd = 0,0,0,3

[State 198, SE]
type = EnvShake
trigger1 = AnimElem = 2
ampl = 12
time = 20
freq = 175

[State 198, Explod]       ;explosione
type = Explod
trigger1 = AnimElem = 2
anim = 11077
postype = p1
pos = 10,0
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
shadow = -1
persistent = 0
pausemovetime = 20
supermove = 1

[State 198, polverone]        ;polverone explosivo
type = Explod
trigger1 = AnimElem = 2, =10
anim = 8008 
postype = p1
supermove = 1
ontop = 1
facing = -1
sprpriority = 3
ownpal = 1
shadow = -1
scale = 1,1            ;.5, .5
pausemovetime = 9999

[State 198, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------
;Super Mario fa una brutta fine
[Statedef 10095]
type = S
ctrl = 0
anim = 10095
velset = 0,0

[State 10095, AS]
type = AssertSpecial
trigger1 = Time = [0,930]
flag = Intro
flag2 = nomusic

[State 10095, SE]
type = PlaySnd
trigger1 = Animelem = 1, =50   ;mario intro
value = 17001,0;
volume = 50
channel = 0

[State 10095, SE]
type = PlaySnd
trigger1 = Animelem = 6    ;hyppie go
value = 17000,0;
volume = 50

[State 10095, SE]
type = PlaySnd
trigger1 = Animelem = 18    ;mario Uh!
value = 17002,0;
volume = 50

[State 10095, SE]
type = PlaySnd
trigger1 = Animelem = 24, =200    ;mamma mia!
value = 17003,0;
volume = 90

[State 10095, SE]
type = PlaySnd
trigger1 = Animelem = 24, =300    ;uscita ella
value = 17004,0;
volume = 50

[State 10095, SE]
type = PlaySnd
trigger1 = Animelem = 24, =102   
value = 17004,1;
volume = 50

[State 10095, SE]
type = PlaySnd
trigger1 = Animelem = 24, =137 
value = 17005,0;
volume = 50

[State 10095, explod] ;sangue di mario
type = Explod
trigger1 = Animelem = 24, =102
anim = 8001
sprpriority = 5
postype = p1
ontop = 1
pos = -50,-50
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 10095, explod] ;sangue di mario opposto
type = Explod
trigger1 = Animelem = 24, =137
anim = 8125
sprpriority = 5
postype = p1
ontop = 1
pos = -50,-50
facing = -1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 10095, explod] ;colpisco mario
type = Explod
trigger1 = Animelem = 24, =100
anim = 8141
sprpriority = 5
postype = p1
ontop = 1
pos = -50,-39
facing = -1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 10095, explod] ;colpisco mario due
type = Explod
trigger1 = Animelem = 24, =135
anim = 8141
sprpriority = 5
postype = p1
ontop = 1
pos = -50,-50
facing = 1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 198, SE]
type = EnvShake
trigger1 = Animelem = 24, =100
trigger2 = Animelem = 24, =135
ampl = 12
time = 20
freq = 175

[State 10095, explod]     ;il polverone di ella che atterra
type = Explod
trigger1 = Time = 699
anim = 8003
sprpriority = 7
postype = p1
ontop = 1
pos = 0,20
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 310, Afterimage]
type = AfterImage
trigger1 = Animelem = 40
length = 8                 
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub                     
time = 15

[State 10095, explod]     ;il pozzo
type = Explod
trigger1 = Animelem = 40
anim = 11080
sprpriority = 7
postype = p1
ontop = 1
pos = 0,0
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 198, SE]
type = EnvShake
trigger1 = Animelem = 57, =25
;trigger1 = Time = 821
ampl = 8
time = 96      ;10
freq = 192

[State 10095, explod]     ;il polverone del pozzo
type = Explod
trigger1 = Animelem = 57, =25
trigger2 = Animelem = 57, =50
trigger3 = Animelem = 57, =75
trigger4 = Animelem = 57, =90
anim = 8003
sprpriority = 7
postype = p1
ontop = 1
pos = -70,20
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 10095, explod]     ;il polverone del pozzo opposto
type = Explod
trigger1 = Animelem = 57, =25
trigger2 = Animelem = 57, =50
trigger3 = Animelem = 57, =75
trigger4 = Animelem = 57, =90
anim = 8003
sprpriority = 7
postype = p1
ontop = 1
pos = -70,20
facing = -1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 10095, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;----------------------------------------------
;Hitchcock vola via
[Statedef 10096]
type = S
ctrl = 0
anim = 10096
sprpriority = 7
velset = 0,0

[State 10096, AS]
type = AssertSpecial
trigger1 = Time = [0,655]
flag = Intro
flag2 = nomusic

[State 10096, SE]
type = PlaySnd
trigger1 = Time = 0
value = 17033,0;
volume = 100
channel = 0

[State 10096, explod]     ;ella cammina sul tetto
type = Explod
trigger1 = Time = 50
anim = 10098
ID = 10098
sprpriority = 6
postype = right
pos = 100,0
vel = -2
facing = -1
vfacing = -1

[State 10096, explod]     ;ella cammina
type = Explod
trigger1 = Time = 300
anim = 10098
ID = 10098
sprpriority = 6
postype = p1
pos = -250,0
vel = 1

[State 10096, Removeexplod]     
type = RemoveExplod
trigger1 = time = 519
ID = 10098

[State 10096, explod]     ;ella si alza
type = Explod
trigger1 = Time = 519
anim = 10099
ID = 10099
sprpriority = 6
postype = p1
;pos = -250,0

[State 10096, Removeexplod]     
type = RemoveExplod
trigger1 = AnimElem = 18
ID = 10099


[State 10096, SE]
type = PlaySnd
trigger1 = AnimElem = 21
value = 800,0;       presa di hitch
volume = -100

[State 10096, SE]
type = PlaySnd
trigger1 = AnimElem = 24
value = 41,1;          vento
volume = -100

[State 10096, SE]
type = PlaySnd
trigger1 = AnimElem = 24
value = 17035,0;       effetto sonoro stupido

[State 10096, SE]
type = PlaySnd
trigger1 = AnimElem = 25
value = 17034,0;       urlo hitch

[State 10096, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;Sfottimento
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 0]
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "perro"
trigger2 = p4name = "perro"
value = 196

[State 195, vs ]
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "evilryu"
trigger2 = p4name = "evilryu"
trigger3 = p2name = "evilken"
trigger4 = p4name = "evilken"
value = 197

[State 195, SE]
type = PlaySnd
trigger1 = animelem = 1
value = 195,2;
volume = 50

[State 195, CS]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 1110, Explod]      ; il cuore sopra ella
type = Explod
trigger1 = AnimElem = 2
anim = 8200
postype = p1
pos = -10,-110
;facing = -1
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
pausemovetime = 9999
removeongethit = 1

[State 195, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------
;Me te derido meno
[Statedef 196]
type = S
ctrl = 0
anim = 196
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 196, SE]
type = PlaySnd
trigger1 = animelem = 1
value = 195,1;

[State 196, CtrlSet]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 196, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------
;­sfotti ai tipi bassi
[Statedef 197]
type = S
ctrl = 0
anim = 196
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 197, SE]
type = PlaySnd
trigger1 = animelem = 3
value = 180,4;
volume = -10

[State 197, CS]
type = CtrlSet
trigger1 = Time = 38
value = 1

[State 197, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;================================================================================
;—pugnetto
[Statedef 200]
type    = S                      
movetype= A                      
physics = S                      
velset = 0,0                     
ctrl = 0                         
juggle  = 3
anim = 200                     
poweradd = 21                  
sprpriority = 2               

[State 200, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA                    
damage = 41, 0                  
animtype = Light                 
guardflag = MA                   
hitflag = MAF                    
priority = 3, Hit                
pausetime = 8, 8                
sparkno = 4        ;vediamo se mettere uno spark o no              
guard.sparkno = S8050
sparkxy = -10, -76               
hitsound = s200, 2;  
guardsound = 6, 0                
ground.type = High               
ground.slidetime = 5             
ground.hittime  = 12             
ground.velocity = -4             
airguard.velocity = -1.9,-.8     
air.type = High                  
air.velocity = -1.4,-3           
air.hittime = 12            

[State 200, Explod]
type = Explod
trigger1 = movehit      ;emorraggia piccola
anim = 8000
sprpriority = 5
postype = p2
pos = -10,-90
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 200, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 200, CtrlSet]
type = CtrlSet
trigger1 = Time = 8    ;ridurlo, forse si forse no, ma te lo tieni
value = 1

[State 200, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;—pugnone
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= 65
ctrl = 0
velset = 0,0
anim = 210

[State 210, HitDef]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6
trigger3 = AnimElem = 8
attr = S, NA
animtype  = Medium
damage = Ceil((42 / (2 ** HitCount))+5)
guardflag = MA
pausetime = 3,4
sparkno = S8141      ;S8002
guard.sparkno = S8060
sparkxy = 40,-20    ;-40
hitsound = S210,2
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -2.5,-4

[State 210, HitDef]      ;seconda ondata di colpi
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 7
trigger3 = AnimElem = 9
attr = S, NA
animtype  = Medium
damage = Ceil((41 / (2 ** HitCount))+5)
guardflag = MA
pausetime = 3,4
sparkno = 1
sparkxy = 0,-60
hitsound  = S210,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -2.5,-4

[State 210, EnvColor]
type = EnvColor
triggerall = MoveHit
trigger1 = Time = 12
trigger2 = Time = 18
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 210, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

;[State 210, Explod]
;type = Explod
;trigger1 = movehit
;trigger2 = HitCount = 1      
;anim = 8141
;sprpriority = 5
;postype = p2
;pos = -10,-65
;random = 5,5
;pausemovetime = 9999
;supermovetime = 9999
;bindtime = 1
;ownpal = 1
;ignorehitpause = 1

[State 210, Explod]
type = Explod
trigger1 = movehit
trigger2 = HitCount > 2      ;tanto sangue fa bene
anim = 8000
sprpriority = 5
postype = p2
pos = -10,-65
random = 5,5
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1


[State 210, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------
;-colpo forte da vicino
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 65
ctrl = 0
velset = 0,0
anim = 215
sprpriority = 2

[State 215, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = hard
damage = Ceil(42 / (2 ** HitCount))
guardflag = HA
pausetime = 7,15
sparkno = 6
guard.sparkno = S8060
sparkxy = 10,-70
hitsound   = s210,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5.5
air.velocity = -2.5,-4


[State 215, sangue]
type = Explod
trigger1 = movehit
anim = 8018
persist = 0
sprpriority = 5
postype = p2
pos = 0,-60
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1


[State 215, EnvColor] 
type = EnvColor
trigger1 = MoveHit && Time = 9
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 215, MHR]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 210, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;—calcetto
[Statedef 230]
type    = S
movetype= A
physics = S
poweradd= 22
ctrl = 0
juggle = 5
velset = 0,0
anim = 230

[State 230, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 33
guardflag = MA
pausetime = 8,8
sparkno = S8002
sparkxy = 30,-70
hitsound   = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 230, CtrlSet]    ;non lo elimino
type = CtrlSet
trigger1 = Time = 15
value = 1

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;—calcio forte
[Statedef 240]
type    = S
movetype= A
physics = S
poweradd= 65
ctrl = 0
juggle = 6
velset = 0,0
anim = 240
sprpriority = 2

[State 240, Hitdef]
type = HitDef
trigger1 = Time = 0
trigger2 = AnimElem = 8
attr = S, NA
animtype  = Medium
damage    = 78
guardflag = MA
pausetime = 15,15
sparkno = S8002
sparkxy = 30,-100
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6
air.velocity = -2.2,-3.2
envshake.ampl = 4            ;Parameters for shaking the screen on hit
envshake.freq = 178
envshake.time = 10

[State 240, Explod]
type = Explod
trigger1 = Time = 0
trigger1 = moveguarded
trigger2 = AnimElem = 8
trigger2 = moveguarded
anim = 8060
sprpriority = 5
postype = p2
pos = -10,-90
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 240, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------------------
;colpo a terra
[Statedef 245]
type = S
movetype = A
physics = S
poweradd = 50
anim = 245
ctrl = 0

[State 245, PosAdd]  
type = PosAdd
trigger1 = Time = [9, 14]
x = 2

[State 245, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S, SA
animtype = Hard
damage = 65
hitflag = MAF
guardflag = HA
pausetime = 8,15
sparkno = S8002
sparkxy = 5,-35
hitsound = S11000,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 15
ground.velocity = 0,15
air.velocity = 0,15
fall = 1

[State 245, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
animtype = Hard
damage = 75
hitflag = DF
guardflag = HA
pausetime = 10,10       
sparkno = 0             ;scegli se mettere S8100
sparkxy = 20,-85
hitsound = S8002
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 15
ground.velocity = 0,15
air.velocity = 0,15
fall = 1

[State 245, Explod]     ;esplos. davanti il piede
type = Explod
trigger1 = AnimElem = 6
anim = 3104
pos = 30, 0
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1

[State 245, Explod]     ;esplos. dietro il piede
type = Explod
trigger1 = AnimElem = 6
anim = 8100
pos = 30, 0
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1

[State 245, EnvShake]
type = EnvShake
trigger1 = MoveHit 
time = 30
persistent = 0
ignorehitpause = 1

[State 245, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------------------
;Telefono Folle Driin Driin!
[Statedef 300]
type = S
movetype = A
physics = S
poweradd = 5
anim = 300
ctrl = 0

[State 300, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype = Back
damage = 111
guardflag = M
pausetime = 12,12
sparkno = S8018
guard.sparkno = S8050
sparkxy = 0,-85
hitsound = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -5.0,-3.0
air.velocity = -5.5,-3.7
fall = 1

[State 300, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 300, 0

[State 300, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210, 1


[State 300, Envcolor]
type = EnvColor
trigger1 = MoveHit
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 300, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 300, Projcancel]          ;Ella cancella la fireball con il suo proj finto
type = Projectile
trigger1 = AnimElem = 5, >0
trigger1 = AnimElem = 12, <3
hitflag = P
attr = S, SP                     
persistent = 1
ignorehitpause = 1
persistent = 1
projanim = 301
projid = 301
projremovetime = 15
offset= 0, 0
postype = P1
bindtime = 1
Vel = .0001
projsprpriority = 2
projpriority = 9999
ownpal = 1
poweradd = 5

[State 300, Projeater]
type = Helper
trigger1 = AnimElem = 5, >0
trigger1 = AnimElem = 12, <3
name = "ProjEater"
id = 301
stateno = 301
pos = 0,0
postype = p1
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1110, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 8210
postype = p1
pos = 55,-110
;facing = -1
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
pausemovetime = 9999
removeongethit = 1

[State 300, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;Mi MANGIO LA FIREBALL!
[Statedef 301]
type = S
movetype = A
physics = S
sprpriority = 1
anim = 301
juggle = 10
velset = 0,0
ctrl = 0

[State 301, HitBy]
type = HitBy	
trigger1 = Time >= 0
value = SCA, AP

[State 301, HitOverride]
type = HitOverride
trigger1 = Time = 0
attr = SCA, NP, SP, HP
stateno = 301
time = -1
slot = 0

[State 301, MoveHitReset]
type = MoveHitReset
trigger1 = parent, StateNo = 1000 && MoveContact

[State 301, PowerAdd]
type = PowerAdd
trigger1 = Time = 0
value = 5

[State 301, DestroySelf]
type = DestroySelf
trigger1 = Time = 10
trigger2 = root, MoveType = H

;-------------------------------------------------------------------------------------------------------
;Ti atterro in aria
[Statedef 305]
type = A
movetype = A
physics = A
poweradd = 100
anim = 305
ctrl = 0

[State 305, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
animtype = Back
damage = 104
guardflag = M
pausetime = 12,12
sparkno = 6
guard.sparkno = S8060
sparkxy = -10,-70
hitsound = s210,2
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -4.5,-3.5    
air.velocity = -7.5,-2.5
fall = 1

[State 215, explod]
type = Explod
trigger1 = movehit
anim = 8018
persist = 0
sprpriority = 5
postype = p2
pos = -10,-52
random = 5,5
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1


[State 305, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210, 1


[State 305, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

;---------------------------------------------------------------------------
;‚Avanti e X
[Statedef 310]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 65
ctrl = 0
velset = 0,0
anim = 310

[State 310, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Medium
damage = Ceil((40 / (2 ** HitCount))+5)
Hitflag = MAF
guardflag = MA
pausetime = 3,4
sparkno = S8018
guard.sparkno = S8050
sparkxy = -10,-70
hitsound   = S200, 2
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 310, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Medium
damage = Ceil((38 / (2 ** HitCount))+5)
Hitflag = MAF
guardflag = MA
pausetime = 3,3
sparkno = S8018
sparkxy = 0,-50
hitsound   = S200, 2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 3003, Hit]         ;il colpo che fa male
type = HitDef
trigger1 = AnimElem = 6 
attr = S, NA
animtype = Hard
damage = Ceil(45 / (2 ** HitCount))
getpower = 40
sparkno = S8018
guard.sparkno = S8050
sparkxy = -20,-110
priority = 5
guardflag = M
yaccel = 0.5
sparkxy = -10,-55
pausetime = 20,20
hitsound = S220,0
guardsound = S150,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2.2,-14
guard.velocity = -3.5
air.velocity = -2.2,-14
air.animtype = Back
fall = 1
fall.recover = 0
envshake.ampl = 12
envshale.time = 20
envshake.freq = 170

[State 310, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 3                  
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub                     
time = 2

[State 310, Afterimage]    ; il mantello della notte
type = AfterImageTime
trigger1 = AnimElemTime(11) < 4
time = 2

[State 310, Blink]     ;la scia nera mi piace
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,3

[State 310, SE]
type = PlaySnd
trigger1 = Time = 8
value = 640, 

[State 310, VelSet]
type = VelSet
trigger1 = time = [13, 15]
x = 7

[State 310, SE2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 310,


[State 310, EnvColor]
type = EnvColor
triggerall = MoveHit
trigger1 = Time = 14
trigger2 = Time = 20
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 310, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 310, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
avanti a calcio
[Statedef 311]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 55
ctrl = 0
velset = 0,0
anim = 311

[State 310, SE2]
type = PlaySnd
trigger1 = AnimElem = 9
value = 41, 0

[State 1020, HitDef]        ;il calcio
type = HitDef
trigger1 = AnimElem = 11
attr = S, SA
animtype = Medium   ;DiagUp
damage    = 95, 20
getpower  = 55
priority  = 7
guardflag = MAF
pausetime = 0,24
sparkno = S8018
guard.sparkno = S8060
sparkxy = 25, -45
hitsound   = S11002,0
guardsound = 6,0
ground.type = Low
;ground.slidetime = -10
;ground.hittime  = -18
;ground.velocity = -22
;guard.velocity = -7
;air.velocity = -8
;airguard.velocity = -5
ground.type = High
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = 8,0
air.velocity = 8,0
givepower = 20,9
fall = 1
yaccel = .5
mindist = 50,-55
maxdist = 100,-10
envshake.time = 18
envshake.ampl = -6
envshake.freq = 178


[State 1020, HitDef]       ;i pugni
type = HitDef
trigger1 = AnimElem = 12
attr = S, SA
animtype = light     ;Medium    ;DiagUp
damage    = 95, 20
getpower  = 55
priority  = 7
guardflag = MAF
pausetime = 0,24
sparkno = S8018
guard.sparkno = S8060
sparkxy = 0, -45
hitsound   = S11002,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -22
guard.velocity = -7
;air.velocity = -8
;airguard.velocity = -5
fall = 1
givepower = 20,9
fall = 1
yaccel = .5
mindist = 50,-55
maxdist = 100,-10
envshake.time = 18
envshake.ampl = -6
envshake.freq = 178

[State 311, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;pugnetto basso
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 15
ctrl = 0
anim = 400
sprpriority = 2

[State 400, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 20
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = MA
pausetime = 8,8
sparkno = 4
guard.sparkno = S8050
sparkxy = -10,-52
hitsound   = s200,2;
guardsound = 6,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 12
ground.velocity = -4
air.velocity = -1.5,-3

[State 400, Explod]
type = Explod
trigger1 = movehit
anim = 8000
sprpriority = 5
postype = p2
pos = -10,-52
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 400, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 400, CS]
type = CtrlSet
trigger1 = Time = 8
value = 1

[State 400, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;colpo forte basso
[Statedef 410]
type    = C
movetype= A
physics = C
poweradd= 50
ctrl = 0
juggle  = 7
anim = 410
sprpriority = 2


[State 410, SE]
type = PlaySnd
trigger1 = AnimElem = 7
value = 210, 1

[State 410, HitDef]         ;tanto male!
type = HitDef
trigger1 = AnimElem = 6
attr = C, NA
damage = Ceil(80 / (2 ** HitCount))
animtype = Medium
hitflag = MAF
guardflag = MA
pausetime = 8,8
sparkno = S8018
guard.sparkno = S8060
sparkxy = -2,-10
hitsound = s200,2
guardsound = 6,0
ground.type = Trip
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3
air.velocity = -3,-4
P2Stateno = 411
;fall = 1

[State 410, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 8003
sprpriority = 5
postype = p1
pos = 65,0
random = 0,0
facing = -1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 410, ES]
type = EnvShake
trigger1 = AnimElem = 6
time = 10
ampl = -3
freq = 90

[State 410, MoveHR]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 410, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-----------------
;P2 subisce e reagisce
[Statedef 411]
type    = A
movetype= H
physics = N
velset = 0,0

[State 411, CA]
type = ChangeAnim 
trigger1 = 1
value = 5070

[State 411, CS]
type = ChangeState
trigger1 = HitShakeOver
value = 412

;-----------------------------
;i corsieri del patrizio
[Statedef 412]
type    = A
movetype= H
physics = N

[State 15071, VelAdd]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 412, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 412, HitVelSet]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 412, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
value = 5100

;---------------------------------------------------------------------------
;calcetto basso
[Statedef 430]
type    = C
movetype= A
physics = C
poweradd= 22
ctrl = 0
juggle  = 5
anim = 430
sprpriority = 2

[State 430, Hitef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 26
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 8,8
sparkno = S8002
guard.sparkno = S8050
sparkxy = 10,-60
hitsound   = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0

[State 430, CtrlSet]
type = CtrlSet
trigger1 = Time > 15
value = 1

[State 430, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Orsetto perfetto
[Statedef 440]
type    = C
movetype= A
physics = C
poweradd= 70
ctrl = 0
juggle  = 8
anim = 440
sprpriority = 2

[State 440, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = C, NA
damage = 20
hitflag = MA
guardflag = L
pausetime = 6,14
sparkno = S8002
guard.sparkno = S8060
sparkxy = 30,-55
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -8
air.velocity = -1.2,-3

[State 440, HitDef]         ;la cutiddata
type = HitDef
trigger1 = AnimElem = 12
attr = C, NA
damage = 70
animtype = Medium
hitflag = MAF
guardflag = MA
pausetime = 8,8
sparkno = S8001
guard.sparkno = S8060
sparkxy = -10,-5
hitsound = s200,2
guardsound = 6,0
ground.type = Trip
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3
air.velocity = -3,-4
P2Stateno = 411        ;subisci e reagisci
fall = 1

[State 440, SE]     ;ROARRR!
type = PlaySnd
trigger1 = Animelem = 2
value = 17023, 0
volume = -50

[State 440, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;pugnetto in aria
[Statedef 600]
type    = A
movetype= A
physics = A
poweradd= 11
ctrl = 0
juggle  = 3
anim = 600
sprpriority = 2

[State 600, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = A, NA
damage = 10
guardflag = HA
priority = 3
pausetime = 5,15
sparkno = S8002
guard.sparkno = S8050
sparkxy = 30, -10
hitsound = s200,2;
guardsound = 6,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3
hitonce = 1


;---------------------------------------------------------------------------
;pugno forte in aria
[Statedef 610]
type    = A
movetype= A
physics = A
poweradd= 65
ctrl = 0
juggle  = 5
anim = 610
sprpriority = 2

[State 610, 1]
type = HitDef
trigger1 = AnimElem = 9
attr = A, NA
damage = Ceil((65 / (2 ** HitCount))+5)
guardflag = HA
priority = 4
pausetime = 10,18
sparkno = 4
guard.sparkno = S8060
sparkxy = 4
hitsound   = s210,2;(‹­‚Ð‚Á‚©‚«)
guardsound = 6,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.velocity = -3,-4

[State 610, explod]
type = Explod
trigger1 = movehit
anim = 8001
sprpriority = 5
postype = p2
pos = 30,-56
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 610, EnvColor]
type = EnvColor
triggerall = Random < 300
trigger1 = MoveHit
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 610, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

;---------------------------------------------------------------------------
;Calcio Debole (air)
[Statedef 630]
type = A
movetype = A
physics = A
poweradd = 20
ctrl = 0
juggle  = 4
anim = 630
sprpriority = 2

[State 630, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 52
guardflag = HA
priority = 3
pausetime = 5,12
sparkno = S8002
guard.sparkno = S8050
sparkxy = 5,-40
hitsound   = 5,1
guardsound = 6,0
ground.type = High
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -4
air.velocity = -2,-3

;---------------------------------------------------------------------------
;-Calcio Fortis (air)
[Statedef 640]
type = A
movetype = A
physics = A
juggle = 4
poweradd = 65
ctrl = 0
anim = 640
sprpriority = 2

[State 640, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 72
guardflag = HA
priority = 4
pausetime = 8,18
sparkno = S8018
guard.sparkno = S8060
sparkxy = -2,-60
hitsound  = 5,3
guardsound = 6,0
animtype = Med
ground.type = High
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = -5
air.velocity = -3,-4

;---------------------------------------------------------------------------
;-Indietro Calcio Fortis (air)
[Statedef 641]
type = A
movetype = A
physics = A
juggle = 4
poweradd = 65
ctrl = 0
anim = 641
sprpriority = 2

[State 641, SE]      ;urlo
type = PlaySnd
trigger1 = AnimElem = 1
value = 210, 0
volume = -10

[State 641, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 100
guardflag = HA
priority = 6
pausetime = 10,10
sparkno = S8018
guard.sparkno = S8060
sparkxy = -12,-83
hitsound = S200, 2
guardsound = 6,0
animtype = Med
ground.type = High
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = 8,0
air.velocity = 8,0
fall = 1

[State 641, PA]      ;salto rimalzo!
type = PosAdd
trigger1 = movehit
X = 10
Y = -12

;==================PRESE=================================================
;Presa simil Raikkonen
[Statedef 800]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          
hitflag = M-          
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
hitsound   = s800,0
ground.hittime  = 20
sprpriority = 1       
p1stateno = 801       
p2stateno = 802       
fall = 1              

[State 800, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;colpo simil Raikkonen
[Statedef 801]
type = S
movetype = A
physics = S
poweradd = 90
anim = 801
ctrl = 0

[State 801, 1]
type = EnvShake
trigger1 = AnimElem = 2
time = 10
ampl = -3
freq = 90

[State 801, Explod]     ;sangue impalamento
type = Explod
trigger1 = AnimElem = 2
anim = 8000
sprpriority = 5
postype = p2
pos = 10,-68
facing = -1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 801, 2]
type = TargetLifeAdd
trigger1 = AnimElem = 2
value = -15
kill = 0
absolute = 1

[State 801, Explod]     ;sangue estrazione
type = Explod
trigger1 = AnimElem = 4
anim = 8001
sprpriority = 5
postype = p2
pos = 10,-68
facing = -1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 801, 2]
type = TargetLifeAdd
trigger1 = AnimElem = 4
value = -15
kill = 0
absolute = 1

[State 801, SE]   ;effetto colpo violento abbastanza estrattivo intenso
type = PlaySnd
trigger1 = Animelem = 4
value = 210, 2
volume = 215

hitsound = S210,2
[State 801, SE]   ; snap
type = PlaySnd
trigger1 = Animelem = 8
value = 10097, 2
volume = 215

[State 801, 2]
type = TargetLifeAdd
trigger1 = AnimElem = 11, =15
value = -65
kill = 0
absolute = 1

[State 801, Explod]     ;sangue esplosione
type = Explod
trigger1 = AnimElem = 11, =15
anim = 8135     ;8102
sprpriority = 5
postype = p2
pos = -5,-68         ;10,-68
facing = -1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
;scale = .6, .6

[State 801, ES]
type = EnvShake
trigger1 = AnimElem = 11, =15
time = 12
ampl = -7
freq = 150

[State 801, HitAdd]
type = hitadd
trigger1 = time = 0
value = -1

[State 801, CG]
type = ChangeState
trigger1 = P2StateNo = 851
value = 850
ctrl = 0

[State 801, SE]      ;taneda!
type = PlaySnd
trigger1 = Time = 17
value = 800, 1
volume = -10

[State 801, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210, 1


[State 801, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------
;Stramaledettissimo subimento
[Statedef 802]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 802, Nothitby]    ;da controllare 
type = NotHitBy
trigger1 = 1
value = SCA

[State 802, CA]
type = ChangeAnim2
Trigger1 = Time = 0
value = 802

[State 802, CG]
type = ChangeState
triggerall = Time = [0,16]
triggerall = AnimExist(200) || AnimExist(210) || AnimExist(10851)
trigger1 = Command = "y" || Command = "z"
trigger1 = Command = "holdfwd" || Command = "holdback" || Command = "holddown" || Command = "holdup"
value = 851

[State 802, SelfState] 
type = SelfState
trigger1 = AnimTime = 0 
value = 5030 
ctrl = 0

;---------------------------------------------------------------------------
;Presa Calcio sul COZZO
[Statedef 810]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 810
sprpriority = 2

[State 810, HitDef] ; ti prendo il cozzo
type = HitDef
Trigger1 = Time = 0
attr = S, NT          
hitflag = M-          
priority = 1, Miss    
pausetime = 0,0
sparkno = 50
sparkxy = 0,-75
hitsound   = s800,0
ground.hittime  = 20
sprpriority = 1       
p1stateno = 811       
p2stateno = 812            

[State 810, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ti salgo sul cozzo
[Statedef 811]
type = A
movetype = A
physics = N
poweradd = 100
anim = 811
ctrl = 0

[State 811, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

;[State 811, Width]    ;distanza dal bordo
;type = Width
;trigger1 = 1
;edge = 125,10

[State 811, PosAdd]
type = PosAdd
trigger1 = AnimElem = 7
x = 10
y = -20

;[State 811, PosAdd] ;forse va troppo in alto
;type = PosAdd
;trigger1 = AnimElem = 7, =3
;x = 12
;y = -22

;[State 811, Bind 1]
;type = TargetBind
;trigger1 = AnimElem = 1, >0
;trigger1 = AnimElem = 6, <=3
;pos = 40, 0

[State 10101, HitDef]   ;colpo sul collo
type = Hitdef
trigger1 = AnimElem = 8
attr = A, NA
animtype  = diagup
air.animtype = diagup
fall.animtype = diagup
getpower = 0,0
givepower = 20,10
damage    = 100
guardflag = MA
hitflag = MAF
pausetime = 0,0 
;sparkno = S3105 
guard.sparkno = S8050
;sparkxy = 35,-100          
hitsound   = s1100,2
guardsound =  6,0        
ground.type = Low      ;High
air.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = 9, 9            ;12.5, 8  invertito il subimento del p2           
airguard.velocity = -3.5      
air.velocity = 9, 9               ;15.5, 8
air.juggle = 3
fall = 1
fall.recover = 0
;palfx.time = 60
;palfx.add = 40,-70,-200
;palfx.sinadd = 40,30,0,10
;palfx.color = 0
;palfx.invertall = 1

[State 811, Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 8002
sprpriority = 5
postype = p2
pos = -10,-90
random = 5,5
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 811, SE]      ;taneda!
type = PlaySnd
trigger1 = AnimElem = 1
value = 800, 1
volume = -10


[State 811, SE]
type = PlaySnd
trigger1 = Time = 38
value = 725, 0
volume = -20

[State 811, SE]
type = PlaySnd
trigger1 = AnimElem = 3  ;suono presa
value = 210, 1

[State 180, 3]
type = EnvShake
trigger1 = AnimElem = 8
time = 10
ampl = -3
freq = 90


[State 811, Throw]      ;fa andare il p2 allo state in cui volera' dopo esser stato colpito
type = TargetState
trigger1 = AnimElem = 8
value = 813

[State 811, vel]   ;spinta
type = veladd
trigger1 = AnimElem = 9
x = 3	
y = -3

[State 811, CG]            ; da modificare, deve andare allo state in cui si appallottola
type = ChangeState
trigger1 = AnimTime = 0
value = 815
ctrl = 1

;----------------------------
;subimento da presa cozzo
[Statedef 812]
type    = S
movetype= H
physics = S
velset = 0,0
ctrl = 0
anim = 812

[State 812, NotHitBy]
type = NotHitBy
trigger1 = 36
value = SCA
time = 1

[State 812, ChangeAnim]
type = ChangeAnim2
Trigger1 = Time = 0
value = 812

[State 812, SprPriority]
type = SprPriority
trigger1 = Time = 23
value = -3

;---------------------------------------------------------------------------
;subimento da presa (caduta a terra)
[Statedef 813]
type = A       ;provare anche A
movetype = H
physics = A     ;provare anche S
velset = 0,0


[State 813, ChangeAnim]
type = ChangeAnim2
Trigger1 = Time = 0
value = 813

[State 813, 1] 
type = SelfState
trigger1 = Time = 0
value = 5030       

;[State 813, PosAdd]
;type = PosAdd
;trigger1 = Time = 0
;x = 138

;[State 813, PosSet]
;type = posset
;trigger1 = time = 0
;Y = 0

;[State 813, 1] ;Gravity
;type = VelAdd
;Trigger1 = 1
;Trigger1 = AnimElem != 5
;y = .4

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

;------------------------------------------------------------------------
;salto indietro dopo il colpo sul collo
[Statedef 814]
type = A
movetype = I
physics = A
poweradd = 0
ctrl = 0
anim = 1301
velset = 0,0

[State vel]
type	= veladd
trigger1 = time = 0
x = 4
y = -7

;------------------------------------------------------------
;balzo indietro dopo che colpisco
[Statedef 815]
type = A
movetype = I
physics = A
poweradd = 0
ctrl = 0
anim = 815
velset = 0,0

[State 815, PosAdd]
type = PosAdd
trigger1 = AnimElem = 1
x = 10
y = -20

[State 815, vel]   ;salita
type = veladd
trigger1 = time < 10
x = .4	
y = -.45

[State 815, vel]  ;discesa
type = veladd
trigger1 = time > 10
y = .47

[State 1303, CG]                 ; va alla stricata
type = ChangeState
trigger1 = Pos Y >= 0 && vel y > 0
value = 0

;-------------------------------------------------------------------------------
;Spostamento
[Statedef 850]
type = S
movetype = I
physics = S
anim = 850

[State 850, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 850, VelSet]
type = VelSet
trigger1 = Time = 5
x = -7

[State 850, BGPalfx]
type = BGPalfx
trigger1 = time = 6
ignorehitpause = 1
time = 1
add = 255,255,255

[State 850, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------
;e se la presa mi venisse incontro
[Statedef 851]
type = S
movetype = I
physics = S

[State 851, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 851, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && AnimExist(10851)
value = 10851;

[State 851, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && Anim != 10851
value = 210;

[State 851, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && Anim != 10851 && Anim != 210
value = 200;

[State 851, SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;==================SUPER SPARO=================================================
;-Face The Piccion (debole)
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1000
ctrl = 0

[State 1000, SE]           ;tiro il picciotto
type = PlaySnd
trigger1 = Time = 16
value = 1000, 0

[State 1000, Helper]   
type = Helper
trigger1 = AnimElem = 16
helpertype = normal
name = "piccion"
id = 1001
postype = P1
pos = 0,0
stateno = 1001
keyctrl = 0
ownpal = 1
facing = 1

[State 1000, Projectile]   ;il collison box blu
type = Projectile
trigger1 = AnimElem = 16
projanim = 1003
ProjID = 1003
;projhitanim = 1015
projcancelanim = 1016
offset = 0, 0
velocity = 15, 0
projremovetime = 40
attr = C, SP
animtype  = Hard
getpower = 0,0
givepower = 0,0
guardflag = MA
pausetime = 0,0
hitsound   = -1,0
guardsound = -1,0
ground.type = High
ground.velocity = 0

[State 1000, EnvShake]
type = EnvShake
trigger1 = AnimElem = 16
time = 5
ampl = -2
freq = 110

[State 1000, RemoveExplod]   ;il piccione va verso la meta
type = RemoveExplod
trigger1 = projcontact[1001] = 1
ID = 1002

[State 1000, Explod]        ;la polvere a terra
type = Explod
trigger1 = AnimElem = 15
anim = 8003
id = 8003
sprpriority = 5
pos = -20,10
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 1000, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
;collision Piccione viaggiatore debole
[Statedef 1001]
type    = C
movetype= A
physics = N
ctrl = 0
velset = 15, 0
anim = 1001

[State 1001,  PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1001, NotHitBy ]
type = NotHitBy 
trigger1 = 1
value = SCA
time = 1

[State 1001, HitDef]
type = HitDef
trigger1 = Timemod = 5,0
attr = C, SP
animtype  = Hard
damage = Ceil((75 / (2 ** HitCount))+6), 6
id = 1001
offset = 0,0
guardflag = MA
pausetime = 0,4
sparkno = S8001
guard.sparkno = S8050
sparkxy = 0,-80
hitsound   = S210,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -2.2,-3.2
stateno = 1015

[State 1001, DestroySelf]
type = DestroySelf
trigger1 = Time = 40

[State 1001, CS]
type = ChangeState
trigger1 = movehit
trigger2 = moveguarded
value = 1015
ctrl = 0

;---------------------------------------------------------------------------
;-Face The Piccion (forte)
[Statedef 1010]
type    = S
movetype= A
physics = S
poweradd= 120
velset = 0,0
juggle  = 4
anim = 1010
ctrl = 0

[State 1010, SE]
type = PlaySnd
trigger1 = Time = 16
value = 1000, 0


[State 1010, Helper]
type = Helper
trigger1 = AnimElem = 16
helpertype = normal
name = "piccion"
id = 1011
postype = P1
pos = 0,0
stateno = 1011
keyctrl = 0
ownpal = 1
facing = 1

[State 1010, Projectile]   ;il collison box blu
type = Projectile
trigger1 = AnimElem = 16
ProjID = 1003
projanim = 1003
projhitanim = 1015
projcancelanim = 1016
offset = 0, 0
velocity = 15, 0
projremovetime = 40
attr = C, SP
animtype  = Hard
getpower = 0,0
givepower = 0,0
guardflag = MA
pausetime = 0,0
hitsound   = -1,0
guardsound = -1,0
ground.type = High
ground.velocity = 0

[State 1010, RemoveExplod]   ;il piccione va verso la meta
type = RemoveExplod
trigger1 = projcontact[1001] = 1
ID = 1002

[State 1010, Explod]        ;la polvere a terra
type = Explod
trigger1 = AnimElem = 15
anim = 8003
id = 8003
sprpriority = 5
pos = -20,10
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 1010, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
;collision piccione viaggiatore (forte)
[Statedef 1011]
type    = C
movetype= A
physics = N
ctrl = 0
velset = 15, 0
anim = 1001

[State 1011, SE]
type = PlayerPush
trigger1 = 1
value = 0

[State 1011, NHB]
type = NotHitBy 
trigger1 = 1
value = SCA
time = 1

[State 1011, HitDef]
type = HitDef
trigger1 = Timemod = 5,0
attr = C, SP
animtype  = Hard
damage = Ceil((100 / (2 ** HitCount))+6), 6
id = 1001
offset = 0,0
guardflag = MA
pausetime = 0,4
sparkno = S8001
guard.sparkno = S8050
sparkxy = 0,-80
hitsound   = S210,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -2.2,-3.2
fall = 1
;stateno = 1015

[State 1001, DestroySelf]
type = DestroySelf
trigger1 = Time = 40

[State 1001, CS]
type = ChangeState
trigger1 = movehit
trigger2 = moveguarded
value = 1015
ctrl = 0

;----------------------------------------
[Statedef 1015]
type    = A
movetype= A
physics = N
ctrl = 0
velset = -2, -2
anim = 1015

[State 1015, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1015, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 30

[State 1015, DestroySelf]
type = DestroySelf
triggerall = P2movetype != H
trigger1 = Time = 0

[State 1015, DestroySelf]
type = DestroySelf
trigger1 = Time = 120

;---------------------------------------------------------------------------
;-Pretendo in Vanati, ovvero colpo doppio di mani (forte)
[Statedef 1020]
type    = S
movetype= A
physics = N
poweradd= 100
velset = 0,0
juggle  = 2
anim = 1020
ctrl = 0
sprpriority = 2

[State 1022, Friction]
type = VelMul
trigger1 = 1
x = .35 * ifelse (AnimElemTime(6) < 0, 1, .4)

[State 1020, VS]
type = VelSet
trigger1 = AnimElem = 4
trigger1 = P2Dist X >= 25
x = 25

[State 1022, Width]    ;distanza dal p2 se troppo vicino
type = Width
trigger1 = P2Dist X <= 10
player = 10

[State 1020, 0]
type = NotHitBy
trigger1 = AnimElem = 3
value = SCA

[State 1020, Afterimage]   ;la solita scia
type = AfterImage
trigger1 = AnimElem = 4
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 1
Trans = sub
time = 2

[State 1020, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 4
time = 2

[State 1020, SE]
type = PlaySnd
trigger1 = Time = 1
value = 640, 0;

[State 1020, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1020, 0
volume = 100

[State 1020, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,3

[State 1020, SE]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 1020, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype = DiagUp
damage    = 155, 25
getpower  = 75
priority  = 7
guardflag = MA
pausetime = 24,24
sparkno = S8018
guard.sparkno = S8060
sparkxy = 10, -65
hitsound   = S11002,0
guardsound = 6,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -22,-6
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
givepower = 24,10
fall = 1
yaccel = .5
mindist = 50,-55
maxdist = 100,-10
envshake.time = 18
envshake.ampl = -6
envshake.freq = 178

[State 1020, Impatto]
type = Explod
trigger1 = AnimElem = 5 
anim = 8142 
postype = p1
pos = 30, -40                
supermove = 1
ontop = 1
sprpriority = 7
ownpal = 1
shadow = -1
pausemovetime = 9999

[State 1020, polverone]        ;polverone per terra
type = Explod
trigger1 = AnimElem = 5 
anim = 8120  
postype = p1
pos = -18,                 
supermove = 1
ontop = 1
sprpriority = 3
ownpal = 1
shadow = -1
vel = -.7
scale = .5, .5
pausemovetime = 9999

[State 1020, polverone]        ;polverone per terra (opposto)
type = Explod
trigger1 = AnimElem = 5
anim = 8120  
postype = p1
pos = 18,                 
supermove = 1
ontop = 1
sprpriority = 3
facing = -1
ownpal = 1
shadow = -1
vel = .7
scale = .5, .5
pausemovetime = 9999

[State 1020, PA]
type = PosAdd
trigger1 = AnimTime = 0
x = -34

[State 1020, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;-Pretendo in Vanatine, ovvero colpo doppio di manine (debole)
[Statedef 1022]
type    = S
movetype= A
physics = N
juggle  = 5
poweradd= 55
velset = 0,0
anim = 1022
ctrl = 0
sprpriority = 2

[State 1022, Friction]
type = VelMul
trigger1 = 1
x = .42 * ifelse (AnimElemTime(6) < 0, 1, .4)

[State 1020, VS]
type = VelSet
trigger1 = AnimElem = 4
trigger1 = P2Dist X >= 40
x = 40                           ;x = 13

[State 1022, Width]    ;distanza dal p2 se troppo vicino
type = Width
trigger1 = P2Dist X <= 10
player = 10

[State 1022, SE]
type = PlaySnd
trigger1 = Time = 1
value = 640, 0;

[State 1022, 3]          ;dice le cosine
type = PlaySnd
trigger1 = AnimElem = 3
value = 17019, 0
volume = 50

[State 1022, Afterimage]
type = AfterImage
trigger1 = AnimElem = 4
length = 12
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 1
Trans = sub
time = 2

[State 1022, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 10          ;AnimElemTime(15) < 2
time = 2

;[State 1022, Blink]
;type = PalFX
;trigger1 = Time = 0
;time = 20
;sinadd = 50,50,50,3

[State 1022, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 1022, 6]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype = DiagUp
damage    = 100, 15
getpower  = 5
priority  = 7
guardflag = MA
pausetime = 22,22
hitonce = 1
sparkno = S8018
guard.sparkno = S8060
sparkxy = 10,-65
hitsound   = S11002,0
guardsound = 6,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -22,-6
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
givepower = 10,3
yaccel = .5
mindist = 50,-55
maxdist = 100,-10
envshake.time = 18
envshake.ampl = -6
envshake.freq = 178

[State 1022, Impatto]
type = Explod
trigger1 = AnimElem = 5 
anim = 8101 
postype = p1
pos = 60, -62                
supermove = 1
ontop = 1
sprpriority = 7
ownpal = 1
shadow = -1
pausemovetime = 9999

[State 1022, polverone]        ;polverone per terra
type = Explod
trigger1 = AnimElem = 4    
anim = 8120  
postype = p1
pos = -18,                 
supermove = 1
bindtime = -1
ontop = 1
sprpriority = 3
ownpal = 1
shadow = -1
vel = -.7
scale = .5, .5

[State 1022, PA]
type = PosAdd
trigger1 = AnimTime = 0
x = -34

[State 1022, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------
;subimento del p2 contro il muro
[Statedef 1025]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, ChangeAnim]
type = ChangeAnim
trigger1 = AnimExist(11025)
value = 11025;

[State 1025, CAnim]
type = ChangeAnim2
trigger1 = Anim != 11025
value = 1025

[State 1025, ChangeState]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1026

;------------------
;e volo cosi' verso il muro
[Statedef 1026]
type    = A
movetype= H
physics = N

[State 1026, HitVelSet]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, VelAdd]
type = VelAdd
trigger1 = 1
y = .45

[State 1026, ScreenBound]        ; non muovimao la MDP
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, ChangeState]        ;sbattimi
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1027

[State 1026, Torno Normale]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; mossa dsubita e volo veros il muro
[Statedef 1027]
type    = A
movetype= H
physics = N

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, PosFreeze]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, Spark]
type = GameMakeAnim
trigger1 = Time = 0
value = 3
postype = p2
pos = -30, -60
sprpriority = 3
bindtime = 1
ownpal = 1

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = 8012                           ;mettere forse l'anim 8012 
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, CAnim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 1027, SE]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1027, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 1028

;------------------
; e torno cosi' dal muro
[Statedef 1028]
type    = A
movetype= H
physics = N

[State 1028, NHB]
type = NotHitBy
trigger1 = 1
value = , NA, NP

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, VelAdd]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] 
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] 
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] 
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] 
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;--------------------------------------------------------------------------------------
;-Mega Uppercut (debole)
[Statedef 1100]
type    = S
movetype= A
physics = S
poweradd= 110
velset = 0,0
juggle = 6
anim = 1100
ctrl = 0

[State 1100, 0]
type = NotHitBy
trigger1 = Time = 0
value = SCA

[State 1100, SE]
type = PlaySnd
trigger1 = Time = 5
value = 1100, 0

[State 1110, SE]
type = PlaySnd
trigger1 = AnimElem = 7
trigger1 = MoveHit = 0 
value = 41, 1              ;effetto sibilo

;[State 1100, SE]
;type = PlaySnd
;trigger1 = movehit
;value = 17004, 1
;volume = 50

;[State 1100, SE]
;type = PlaySnd
;trigger1 = movehit
;value = 17005, 0
;volume = 50

[State 1100, 1]
type = varset
trigger1 = movehit
var(3) = 1

[State 1100, 2]          ;comincia a spostarsi
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
x = 8

[State 1100, Hit1]
type = HitDef
trigger1 = AnimElem = 4  
persistent = 0
attr = S, SA
animtype = Hard
damage = 50,15
getpower = 58
sparkno = S8001
;guard.sparkno = S8050
sparkxy = -40,-30
priority = 7
guardflag = M
yaccel = 0.5
sparkxy = -10,-55
pausetime = 11,12
hitsound = S200,2      ;S17004,1
guardsound = S150,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2.0,-10
guard.velocity = -3.5
air.velocity = -2.0,-10
air.animtype = Back
fall = 0
fall.recover = 0

[State 1100, Explod]
type = Explod
triggerall = movehit
trigger1 = AnimElem != 6
anim = 8018
postype = p1
pos = 60,-70
ontop = 1
bindtime = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 50

[State 1100, hit2]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
animtype = Hard
damage = 50,15
getpower = 25
sparkno = S8001
;guard.sparkno = S8050
sparkxy = -50,-50
priority = 7
guardflag = M
yaccel = 0.5
sparkxy = -10,-55
pausetime = 7,8
hitsound = S210,2          ;S17005,0
guardsound = S150,1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -3.0 + (movehit)*1,-10
guard.velocity = -4.0
air.velocity = -2.0,-10
air.animtype = Back
fall = 1
fall.recover = 0

[State 1100, Explod]
type = Explod
triggerall = moveguarded
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6
anim = 8050
postype = p2
pos = 0,-58
ontop = 1
;bindtime = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 50

[State 1100, Env]
type = EnvShake
trigger1 = AnimElem = 4
ampl = 3         
freq = 140
time = 5

[State 1100, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 8139
postype = p1
pos = 65,-50
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
pausemovetime = 9999

[State 1101, veladd]
type = VelAdd
trigger1 = AnimElem = 7
y = -.48

[State 1100, varset]
type = varset
trigger1 = movecontact
var(1) = 1

[State 1100, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 1103

;----------------------------------
;-mega uppercut il volo (debole)
[Statedef 1103]
type = A
movetype = A
physics = A
juggle = 7
anim = 1103
velset = 0,-5

[State 1103, 0]
type = varset
trigger1 = movehit
var(3) = 1

[State 1103, polverone]        ;polverone per terra
type = Explod
trigger1 = AnimElem = 1 
anim = 8120  
postype = p1
pos = -5,2                 
supermove = 1
ontop = 1
sprpriority = 3
ownpal = 1
shadow = -1
vel = -1.5
scale = .5, .5
pausemovetime = 9999

[State 1103, polverone]        ;polverone per terra (opposto)
type = Explod
trigger1 = AnimElem = 1
anim = 8120  
postype = p1
pos = 5,2                 
supermove = 1
ontop = 1
sprpriority = 3
facing = -1
ownpal = 1
shadow = -1
vel = 1.5
scale = .5, .5
pausemovetime = 9999

[State 1503, Hit1]
type = HitDef
trigger1 = animelem = 1
trigger1 =  var(1) = 0
attr = A, SA
animtype = Hard
damage = 70,11
getpower = 63
sparkno = 2
sparkxy = 0,-60
priority = 7
hitflag = MAF
guardflag = MA
yaccel = 0.5
pausetime = 7,8
hitsound = S220,0
guardsound = S150,1
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -1.5,-10
air.velocity = -1.5,-10
air.animtype = Back
fall = 1
fall.recover = 0

[State 1103, 4]
type = varset
trigger1 = animtime = 0
var(1) = 0

;--------------------------------------------------------------------------------------
;-Mega Uppercut(forte)
[Statedef 1110]
type    = S
movetype= A
physics = S
poweradd= 110
velset = 0,0
juggle  = 5
anim = 1100
ctrl = 0

[State 1110, 0]
type = NotHitBy
trigger1 = Time = 0
value = SCA

[State 1100, SE]      ;urlo di ella
type = PlaySnd
trigger1 = Time = 5
value = 1100, 0


[State 1110, SE]
type = PlaySnd
trigger1 = AnimElem = 7
trigger1 = MoveHit = 0 
value = 41, 1              ;effetto sibilo

;[State 1110, Explod]
;type = Explod
;trigger1 = time = 19
;anim = 1101
;pos = 10, -55
;postype = p1
;sprpriority = 3
;ownpal = 1
;ontop = 1

[State 1110, burn]
type = varset
trigger1 = movehit
var(3) = 1

[State 1110, PA]          ;comincia a spostarsi
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
x = 8

[State 1110, Hit1]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype = Medium
damage = 40,10
getpower = 63
priority = 7
guardflag = M ; MA
sparkno = S8001
;guard.sparkno = S8050
sparkxy = -40,-30
pausetime = 11,12
hitsound = S200,2
guardsound = S150,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
air.velocity = -5,-6
air.animtype = Back
fall.recover = 0

[State 1110, Hit2]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
animtype = Medium
damage = 40,10
getpower = 50
guardflag = M ; MA
priority = 7
sparkno = S8001
;guard.sparkno = S8050
sparkxy = -50,-50
pausetime = 7,8
hitsound = S200,2
guardsound = S150,1
ground.type = Low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -5,-6.5  ; X -4 Y  -6
air.velocity = -5,-6
air.animtype = Back
fall = 1
fall.recover = 0

[State 1110, Explod]
type = Explod
triggerall = movehit
trigger1 = AnimElem != 6
anim = 8018
postype = p1
pos = 60,-70
ontop = 1
bindtime = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 50

[State 1110, Explod]
type = Explod
triggerall = moveguarded
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6
anim = 8050
postype = p2
pos = 0,-58
ontop = 1
;bindtime = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 50

[State 1110, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 8139
postype = p1
pos = 65,-50
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
pausemovetime = 9999

[State 1100, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 1104

;----------------------------------
;-mega uppercut il volo (forte)
[Statedef 1104]
type = A
movetype = A
physics = A
juggle = 2
anim = 1104
velset = 5,-15

[State 10010, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 15
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 15

[State 10010, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(6) < 2
time = 2

;[State 10010, Blink Color]
;type = PalFX
;trigger1 = Time = 0
;time = 20
;sinadd = 50,50,50,8                   ;cosi' si colora (grigio) e lascia una scia nera

[State 1104, 0]
type = varset
trigger1 = movehit
var(3) = 1

[State 1104, 1]
type = varset
trigger1 = time = 0
var(2) = 0

[State 1104, 2]
type = VelAdd
trigger1 = Time < 20
y = 0.45

[State 1104, polverone]        ;polverone per terra
type = Explod
trigger1 = AnimElem = 1 
anim = 8120  
postype = p1
pos = 2, 12                
supermove = 1
ontop = 1
sprpriority = 3
ownpal = 1
shadow = -1
vel = -1.5
scale = .5, .5
pausemovetime = 9999


[State 1104, polverone]        ;polverone per terra (opposto)
type = Explod
trigger1 = AnimElem = 1
anim = 8120  
postype = p1
pos = -2, 12                 
supermove = 1
ontop = 1
sprpriority = 3
facing = -1
ownpal = 1
shadow = -1
vel = 1.5
scale = .5, .5
pausemovetime = 9999


[State 1104, Hit1]
type = HitDef
trigger1 = AnimElem = 1
attr = A, SA
animtype = Hard
damage = 55,10
getpower = 45
priority = 7
sparkno = S8018
guard.sparkno = S8050
sparkxy = -10,-90
hitflag = MAF
guardflag = MA
yaccel = 0.5
pausetime = 7,8
hitsound = S210,2
guardsound = S150,1
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -1.5,-10
air.velocity = -1.5,-10
air.animtype = Back
fall = 1
fall.recover = 0

[State 1104, 4]
type = varset
trigger1 = animtime = 0
var(1) = 0

[State 1110, Explod]
type = Explod
trigger1 = AnimElem = 1, =5
anim = 8138
postype = p1
pos = 25,-40
ontop = 1
bindtime = -1
ownpal = 1
ignorehitpause = 1
pausemovetime = 9999

[State 1104, CS]
type = ChangeState
triggerall = stateno = 1104 & AnimElem = 1, >9
trigger1 = AnimElem = 3, <3
trigger1 = command = "calciolo"
value = 1105
ctrl = 1

;-------------------------------------------------------
;-Calciolo (a seguire dopo mega uppercut forte)
[Statedef 1105]
type = A
movetype = A
physics = A
anim = 1105
poweradd = 15
juggle = 2
ctrl = 0

[State 10010, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 10
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 2

[State 10010, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(5) < 19
time = 2

;[State 10010, Blink Color]
;type = PalFX
;trigger1 = Time = 0
;time = 20
;sinadd = 50,50,50,8                   ;cosi' si colora (grigio) e lascia una scia nera


;[State 1105, 3]
;type = PlaySnd
,trigger1 = Time = 2
,value = 400,1

;[State 1005, 4]
;type = PlaySnd
;trigger1 = movehit
;value = 2000,0
;persistent = 0

;[State 1105 , 5]
;type = explod
;trigger1 = animelem = 3, = 1
;Anim = 
;pos = 20,-80
;sprpriority = 2
;shadow = 64,64,64
;postype = p1
;bindtime = 13
;ownpal = 1

[State 1105 , Hit1]
type = HitDef
trigger1 = AnimElem = 3
attr = A, SA
animtype = Hard
damage = 10,4
getpower = 10
priority = 7
sparkno = 2
guardflag = MA
sparkxy = 0,-60
pausetime = 10,10
hitsound = S11000,0         
guardsound = S150,1
ground.slidetime = 15
ground.hittime = 15
ground.velocity = 0,7
air.velocity = -14,11
air.animtype = Back
fall = 1
fall.recover = 0

[State 1105 , Hit1]
type = HitDef
trigger1 = AnimElem = 5
attr = A, SA
animtype = Hard
damage = 30,8
getpower = 26
guardflag = MA
sparkno = S8018
guard.sparkno = S8050
sparkxy = 0,-60
pausetime = 15,12
hitsound = S10005,0
guardsound = S150,1
ground.slidetime = 15
ground.hittime = 15
ground.velocity = 0,7
air.velocity = -11,11
air.animtype = Back
fall = 1
fall.recover = 0
envshake.ampl = 6
envshake.freq = 178
envshake.time = 12

;--------------------------------------------------------------------------------------
;-Inizio del Calcio Nautilus (la tipa si abbassa)
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 1200
ctrl = 0

[State 100, SE]
type = StopSnd
trigger1 = 1
channel = 20;

[State 1200, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 1201

;----------------------------------------------------
;-Calcio Nautilus (debole)
[Statedef 1201]
type    = A
movetype= A
physics = N
poweradd= 110
velset = 6,-4.8
juggle = 5
anim = 1211
ctrl = 0

[State 100, SE]
type = StopSnd
trigger1 = 1
channel = 20;

[State 1201, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 9
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 2

[State 1201, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 1201, Blink Black]
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,3

[State 1201, VelAdd]
type = VelAdd 
trigger1 = Time >= 1
y = 0.5

[State 1201, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 8009
sprpriority = 5
pos = 0,3
bindtime = 1
supermovetime = -1
removeongethit = 1

[State 1201, SE]
type = PlaySnd
trigger1 = AnimElem = 4, =1
value = 41, 1
volume = -50

[State 1201, HitDef1]
type = HitDef
trigger1 = AnimElem = 7
attr = A, SA
animtype  = Hard
getpower = 10,2
givepower = 20,2
damage    = 91,6
guardflag = HA
hitflag = MAF
pausetime = 25,25
sparkno = S8018
guard.sparkno = S8050
sparkxy = 0,-75
hitsound   = s11001,0
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8, -4.5
airguard.velocity = -3.5      
air.velocity = -5.5,-4.5
fall = 1

[State 1201, Impatto]
type = Explod
trigger1 = AnimElem = 2
anim = 8136
postype = p1
pos = 20, -40
facing = -1            
supermove = 1
ontop = 1
sprpriority = 7
ownpal = 1
shadow = -1
pausemovetime = 9999

[State 1201, CG]
type = ChangeState
trigger1 = pos Y >= 20
value = 1212

;------------------
;il solito collegamento
[Statedef 1202]
type = C
movetype = A
physics = S
anim = 1202
velset = 0, 0

[State 1202, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1202, SE]
type = PlaySnd
trigger1 = Time = 0
value = 40,0;

[State 1202, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
;l'altro solito collega (inizio calcio nautilus forte)
[Statedef 1210]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 1210
ctrl = 0


[State 100, SE]
type = StopSnd
trigger1 = 1
channel = 20;

[State 1210, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 190, 1

[State 1210, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 1220

;----------------------------------------
;Calcio Nautilus (forte)
[Statedef 1220]
type    = A
movetype= A
physics = N
poweradd= 110
velset = 6,-4.8
juggle = 5
anim = 1220
ctrl = 0

[State 100, SE]
type = StopSnd
trigger1 = 1
channel = 20;

[State 1220, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 10                  ;35
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 2

[State 1220, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 1220, Blink Black]
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,3

[State 1220, VelAdd]
type = VelAdd 
trigger1 = AnimElem = 1
x = 0.5

[State 1220, VelSet]
type = VelSet
trigger1 = AnimElem = 1
y = -5
X = 9.5

[State 1220, VelSet]
type = VelSet
trigger1 = AnimElem = 3
y = -5
X = 9.5

[State 1220, VelSet]
type = VelSet
trigger1 = AnimElem = 5
y = -5
X = 10.5

[State 1220, VelSet]
type = VelSet
trigger1 = AnimElem = 7
y = -5
X = 11.5

[State 1220, VelAdd]
type = VelAdd 
trigger1 = Time >= 1
y = 0.5

[State 1220, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 8009
sprpriority = 5
pos = 0,3
bindtime = 1
supermovetime = -1
removeongethit = 1

[State 1201, SE]
type = PlaySnd
trigger1 = AnimElem = 4, =1
value = 41, 1
volume = -50

[State 1220, HitDef1]
type = HitDef
trigger1 = AnimElem = 7
attr = A, SA
animtype  = DiagUp
getpower = 15,5
givepower = 20,2
damage    = 104,30
guardflag = HA
hitflag = MAF
pausetime = 30,30
sparkno = S8018
guard.sparkno = S8050
sparkxy = 0,-75
hitsound   = s11001,0
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8, -4.5
airguard.velocity = -3.5      
air.velocity = -7.5,-4.5
fall = 1
envshake.ampl = 6
envshake.freq = 178
envshake.time = 15

[State 1020, Impatto]
type = Explod
trigger1 = AnimElem = 7
anim = 8136
postype = p1
pos = 30, -40
facing = -1            
supermove = 1
ontop = 1
sprpriority = 7
ownpal = 1
shadow = -1
pausemovetime = 9999

[State 1220, CG]
type = ChangeState
trigger1 = pos Y >= 20
value = 1212


;----------------------------------------
;Me Atterro
[Statedef 1212]
type = C
movetype = A
physics = S
anim = 1212
velset = 0, 0

[State 1212, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1212, SE]
type = PlaySnd
trigger1 = Time = 0
value = 40,0

[State 1212, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------
;-Fall On Me
[Statedef 1300]
type = A
movetype = A
physics = N
poweradd = 0
juggle = 12
ctrl = 0
anim = 1300
velset = 0,0

[State 1300, Blink]
type = PalFX
trigger1 = Time = 0
time = 35
sinadd = 50,50,50,3

[State 1300, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 35


[State 1300, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 11016, 0
volume = -15

[State 1300, velset]
type = velset
trigger1 = animelem = 3
x = 6.5
y = 5.5

[State 1300, veladd]
type = veladd
trigger1 = animelem = 3, > 0
trigger1 = animelem != 4
y = .45

[State 1300, Freeze]                 
type = PosFreeze
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
trigger4 = AnimElem = 7
trigger5 = AnimElem = 8
trigger6 = AnimElem = 9
trigger7 = AnimElem = 10


[State 1300, CG]                 ;va a una anim speciale se p2 si para
type = ChangeState
trigger1 = moveguarded
value = 1301

[State 1300, CG]                 ; se non colpisce nessuno
type = ChangeState
trigger1 = Pos Y >= 0 && vel y > 0
value = 1302


[State 1300, HitDef]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
attr = A, SA
hitflag = HLA
animtype = HARD
damage = 93,19
guardflag = HLA
pausetime = 25,40
sparkno = S8018
guard.sparkno = S8050
sparkxy = 15,-38
hitsound = S200, 2
guardsound = 6, 0
ground.type = low
ground.velocity = -6,6
air.velocity = -6,6
airguard.velocity = -2.5,-1
id = 1300
hitonce = 1
fall = 0
fall.recover = 0
forcestand = 1
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 0,0
givepower = 21,21
air.juggle = 15
guard.pausetime = 1,11
guard.slidetime = 22
guard.hittime = 44
guard.ctrltime = 44
fall.yVelocity = -6.4
yaccel = .5
envshake.ampl = 6            ;Parameters for shaking the screen on hit
envshake.freq = 178
envshake.time = 15
p1stateno = 1303

[State 1300]
type = ChangeState
trigger1 = animtime = 0
Value = 1301

;------------------------------------------------------------------------
;salto indietro
[Statedef 1301]
type = A
movetype = I
physics = A
poweradd = 0
ctrl = 0
anim = 1301
velset = 0,0

[State vel]
type	= veladd
trigger1 = time = 0
x = -4
y = -7

;-------------------------------------------------------------------------
;ELLA atterra
[StateDef 1302]
Type = S
MoveType = I
physics = S
anim = 1302
Ctrl = 0
PowerAdd = 0
velset = 0,0
FaceP2 = 0
HitDefPersist = 0
MoveHitPersist = 0
HitCountPersist = 0
SprPriority = 2

[State 1302, AfterImage]
type = AfterImagetime
trigger1 = time = 0
time = 0

[State 1302, Vel]
type = posset
trigger1 = time = 0
Y = 0

[State 1302, CG]
type = ChangeState
trigger1 = Animtime = 0
Value = 0
ctrl = 1

;------------------------------------------------------------
;balzo indietro dopo che colpisco
[Statedef 1303]
type = A
movetype = I
physics = N
poweradd = 0
ctrl = 0
anim = 1303
velset = 0,0

[State 1303, vel]
type = veladd
trigger1 = time = 0
x = -6	
y = 3	

[State vel]
type	= veladd
trigger1 = time = 0
x = -6
y = 4

[State 1303, CG]                 ; va alla stricata
type = ChangeState
trigger1 = Pos Y >= 0 && vel y > 0
value = 1304

;------------------------------------------------------------
;stricata per terra
[Statedef 1304]
type = S
movetype = I
physics = N
poweradd = 0
ctrl = 0
anim = 1304
velset = 0,0

[State 1304, Env]
type = EnvShake
trigger1 = time = 0
ampl = 3          
freq = 178
time = 5

[State 1304, vel]
type = veladd
trigger1 = time = 0
x = -2	
y = 0	

[State 1302, CG]
type = ChangeState
trigger1 = Animtime = 0
Value = 1305
ctrl = 1

;------------------------------------------------------------
;si rialza dopo la stricata
[StateDef 1305]
Type = S
MoveType = I
physics = S
anim = 1305
Ctrl = 0
PowerAdd = 0
velset = 0,0
FaceP2 = 0
HitDefPersist = 0
MoveHitPersist = 0
HitCountPersist = 0
SprPriority = 2

[State 1305, PosAdd]
type = PosAdd
trigger1 = AnimTime = 0
x = -30
y = -1

[State 1305, CG]
type = ChangeState
trigger1 = Animtime = 0
Value = 0
ctrl = 1

;===================================================================
;-Grab'O'Rama (super presa)
[Statedef 3000]
type    = S
movetype= A
physics = S
velset = 0,0
juggle  = 1
anim = 3000
ctrl = 0
sprpriority = 2
poweradd = -1000

[State 3000, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = AnimElem = 1
time = 15
sinadd = 50,50,50,3

[State 3000, SP]
type = SuperPause
trigger1 = AnimElem = 1
time = 30
anim = -1
unhittable = 1
darken = 1

[State 3100, Explod]
type = Explod
trigger1 =  AnimElem = 1      
anim = 4000
pos = -25, -70
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 3100, Explod]
type = Explod
trigger1 = AnimElem = 1   
anim = 4001
pos = -25, -70
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
under = 1

[State 3000, SE]         ;sfx della super a uno
type = PlaySnd
trigger1 = AnimElem = 1
value = 700, 1;SE

[State 3000, SE]         ;voce
type = PlaySnd
trigger1 = AnimElem = 2
value = 3000,0
volume = 255

[State 3000, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 41, 1
volume = -50


[State 3000, HitDef]
type = HitDef
Trigger1 = p2bodydist Y < 0
Trigger1 = AnimElem = 3
attr = S, HT         
hitflag = MAF         
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
hitsound   = s800,0
sprpriority = 1
p1stateno = 3001      
p2stateno = 3002            
fall = 1  

[State 10100, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------
;-Grab'o'Rama (tanti colpi del p1)
[Statedef 3001]
type = S
movetype = A
physics = N
anim = 3001
velset = 0, 0
ctrl = 0
sprpriority = 7

[State 3001, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 3000, Explod]         ;roba davanti
type = Explod
trigger1 = AnimElem = 1
anim = 3103
pos = 20, 0
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1

[State 3000, Explod]       ;roba dietro
type = Explod
trigger1 = AnimElem = 1
anim = 3104
pos = 20, 0
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1

[State 3001, Afterimage]   ;la solita scia
type = AfterImage
trigger1 = time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 108

[State 3001, Bind 1]        ;il p2 legato dalla mano di ella
type = TargetBind
trigger1 = AnimElem = 1
pos = 120, -100

[State 3001, Bind 2]      
type = TargetBind
trigger1 = AnimElem = 2
pos = 80, -70

[State 3001, PlayerPush]    
type = PlayerPush
trigger1 = AnimElemTime(2) > 0
value = 1

[State 3001, Bind 3]      
type = TargetBind
trigger1 = AnimElem = 3
pos = 30, -30

[State 3001, EnvShake]      
type = EnvShake
trigger1 = AnimElem = 4
ampl = 9            
freq = 178
time = 15

[State 3001, Bind 4]      
type = TargetBind
trigger1 = AnimElem = 4
pos = 15, 0

[State 3001, TargetState]
type = TargetState
trigger1 = AnimElem = 4
value = 3003

[State 3001, TargetState]
type = TargetState
trigger1 = AnimElem = 8
value = 3004

[State 3001, TargetState]
type = TargetState
trigger1 = AnimElem = 12
value = 3004

[State 3001, SE]
type = PlaySnd
trigger1 = AnimElem = 16 ;parlo prima di colpire
value = 17008, 0
volume = 30


[State 3001, TargetState]   ;colpo finale
type = TargetState
trigger1 = AnimElem = 26
value = 3005

[State 3001, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 12
absolute = 1
kill = 0
value = -100

[State 3001, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 26
absolute = 1
kill = 1
value = -120

[State 3001, SE]
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 12
;trigger3 = AnimElem = 26
value = 210, 2

[State 3001, SE]         ;sfx colpo finale
type = PlaySnd
trigger1 = AnimElem = 26
value = 11002, 0
volume = 185

[State 3001, EnvShake]     ;envshake dei colpi     
type = EnvShake
trigger1 = AnimElem = 8
trigger2 = AnimElem = 12
;trigger3 = AnimElem = 26
ampl = 6            
freq = 178
time = 10

[State 3001, EnvShake]     ;envshake ultimo colpo   
type = EnvShake
trigger1 = AnimElem = 26
ampl = 11            
freq = 200
time = 30

[State 3001, Explod]        ;sangue violento
type = Explod
trigger1 = AnimElem = 8
trigger2 = AnimElem = 12
;trigger3 = AnimElem = 26
anim = 8001
id = 8001
postype = p1
sprpriority = 2
pos = 25, -20
facing = -1
bindtime = 1
supermovetime = -1
removeongethit = 1

[State 3001, Explod]        ;sangue violento all'incontrario
type = Explod
trigger1 = AnimElem = 8
trigger2 = AnimElem = 12
;trigger3 = AnimElem = 26
anim = 8001
id = 8001
postype = p1
sprpriority = 2
pos = -10,-20
bindtime = 1
supermovetime = -1
removeongethit = 1


[State 13001, Explod]        ;sangue piccolo
type = Explod
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 26, =10
anim = 8000
id = 8000
postype = p2
sprpriority = 5
pos = 15,-35
facing = -1
bindtime = 1
random = 30,10
supermovetime = -1

[State 13001, Explod]        ;sangue piccolo all'incontrario
type = Explod
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 26, =10
anim = 8000
id = 8000
postype = p2
sprpriority = 5
pos = -25,-35
bindtime = 1
random = 10,10
supermovetime = -1

[State 3001, Explod]        ;sangue esplosione colpo finale all'incontrario
type = Explod
trigger1 = AnimElem = 26
anim = 8102
id = 8102
postype = p1
sprpriority = 2
pos = 25, -20
facing = -1
bindtime = 1
supermovetime = -1
removeongethit = 1

[State 3001, Explod]        ;sangue esplosione colpo finale all'incontrario
type = Explod
trigger1 = AnimElem = 26
anim = 8102
id = 8102
postype = p1
sprpriority = 2
pos = -10,-20
bindtime = 1
supermovetime = -1
removeongethit = 1

[State 3000, polverone]        ;polverone per terra
type = Explod
trigger1 = AnimElem = 26
anim = 8120  
postype = p1
pos = 5,2                 
supermove = 1
ontop = 1
sprpriority = 3
ownpal = 1
shadow = -1
vel = -2.0
scale = 1, .5
pausemovetime = 9999

[State 3000, polverone]        ;polverone per terra (opposto)
type = Explod
trigger1 = AnimElem = 26
anim = 8120  
postype = p1
pos = 15,2                 
supermove = 1
ontop = 1
sprpriority = 3
facing = -1
ownpal = 1
shadow = -1
vel = 2.0
scale = 1, .5
pausemovetime = 9999


[State 10100, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;-Grab'o'Rama (p2 trascinato per terra)
[Statedef 3002]
type    = A
movetype= H
physics = N
velset = 0,0

[State 3002, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 3002, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3002

;---------------------------------------------------------------------------
;-Grab'o'Rama (p2 sbatte per terra)
[Statedef 3003]
type    = L
movetype= H
physics = N
velset = 0,0

[State 3003, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 3003, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3003


;----------------------------------------------
;-Grab'o'Rama (p2 subisce i due colpi per terra)
[Statedef 3004]
type    = L
movetype= H
physics = N
velset = 0,0

[State 3004, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 3004, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3004

;----------------------------------------------
;-Grab'o'Rama (p2 subisce il colpo finale per terra)
[Statedef 3005]
type    = L
movetype= H
physics = C
velset = 0,0

[State 3005, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 3005, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3005

[State 810, Turn ]
type = Turn
trigger1 = AnimTime = 0

[State 3005, SelfState]
type = SelfState
triggerall = Life > 0
trigger1 = AnimTime = 0
value = 5120           ;5110
ctrl = 1

[State 3005, SelfState]
type = SelfState
triggerall = Life <= 0
trigger1 = AnimTime = 0
value = 5150           ;5100               ;5150               ;5110
ctrl = 0

;===================================================================
;-Chain'O'Saw (super presa a DUE)
[Statedef 3050]
type    = S
movetype= A
physics = S
velset = 0,0
juggle  = 1
anim = 3050
ctrl = 0
sprpriority = 2
poweradd = -2000

[State 3000, SE]         ;Urlo di ella
type = PlaySnd
trigger1 = AnimElem = 2
value = 17015, 0
volume = 40

[State 3050, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = AnimElem = 1
time = 15
sinadd = 50,50,50,3

[State 3050, SP]
type = SuperPause
trigger1 = AnimElem = 1
time = 30
anim = -1
unhittable = 1
darken = 1

[State 3060, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 1
time = 30                   
value = 0,0,0
under = 1

[State 3050, Explod]
type = Explod
trigger1 =  AnimElem = 1      
anim = 4003
pos = -25, -70
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 3050, Explod]
type = Explod
trigger1 = AnimElem = 1   
anim = 4002
pos = -25, -70
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
under = 1

[State 3050, SE]         ;sfx della super a uno
type = PlaySnd
trigger1 = AnimElem = 1
value = 700, 1;SE

[State 3051, BGPalFX] ;effetto di inversione colori schermo
type = BGPalFX
trigger1 = Time >= 6
time = 1
invertall = 1
ignorehitpause = 1

[State 3050, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 41, 1
volume = -50

[State 3050, HitDef]
type = HitDef
Trigger1 = p2bodydist Y < 0
Trigger1 = AnimElem = 3
attr = S, HT         
hitflag = MAF         
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
hitsound   = s800,0
sprpriority = 1
p1stateno = 3051      
p2stateno = 3002            
fall = 1  

[State 3050, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------
;-Chain'o'Saw (tanti colpi del p1)
[Statedef 3051]
type = S
movetype = A
physics = N
anim = 3051
velset = 0, 0
ctrl = 0
sprpriority = 7

[State 3051, BGPalFX] ;effetto di inversione colori schermo
type = BGPalFX
trigger1 = Time >= 1
trigger1 = Time < 204
time = 1
invertall = 1
ignorehitpause = 1

[State 3051, BGPalFX] ;oscuramento quando alza la sega
type = BGPalFX
;trigger1 = AnimElem = 70
trigger1 = Time >= 204
trigger1 = Time < 210
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 200,200,200
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 2
type = BGPalFX
;trigger1 = AnimElem = 70
trigger1 = Time >= 210
trigger1 = Time < 215
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 180,180,180
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 3
type = BGPalFX
;trigger1 = AnimElem = 71
trigger1 = Time >= 215
trigger1 = Time < 219
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 160,160,160
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 4
type = BGPalFX
;trigger1 = AnimElem = 71
trigger1 = Time >= 219
trigger1 = Time < 223
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 140,140,140
sinadd = 0,0,0,3


[State 3051, BGPalFX] ;oscuramento 5
type = BGPalFX
;trigger1 = AnimElem = 72
trigger1 = Time >= 223
trigger1 = Time < 227
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 120,120,120
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 6
type = BGPalFX
;trigger1 = AnimElem = 72
trigger1 = Time >= 227
trigger1 = Time < 230
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 100,100,100
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 7
type = BGPalFX
;trigger1 = AnimElem = 73
trigger1 = Time >= 230
trigger1 = Time < 234
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 80,80,80
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 8
type = BGPalFX
;trigger1 = AnimElem = 73
trigger1 = Time >= 234
trigger1 = Time < 237
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 60,60,60
sinadd = 0,0,0,3


[State 3051, BGPalFX] ;oscuramento 9
type = BGPalFX
;trigger1 = AnimElem = 74
trigger1 = Time >= 237
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 40,40,40
sinadd = 0,0,0,3


[State 3051, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 3050, Explod]         ;roba davanti
type = Explod
trigger1 = AnimElem = 1
anim = 3103
pos = 20, 0
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1

[State 3050, Explod]       ;roba dietro
type = Explod
trigger1 = AnimElem = 1
anim = 3104
pos = 20, 0
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1

[State 3051, Afterimage]   ;la solita scia
type = AfterImage
trigger1 = time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 400

[State 3051, Bind 1]        ;il p2 legato dalla mano di ella
type = TargetBind
trigger1 = AnimElem = 1
pos = 120, -100

[State 3051, Bind 2]      
type = TargetBind
trigger1 = AnimElem = 2
pos = 80, -70

[State 3051, PlayerPush]    
type = PlayerPush
trigger1 = AnimElemTime(2) > 0
value = 1

[State 3051, Bind 3]      
type = TargetBind
trigger1 = AnimElem = 3
pos = 30, -30

[State 3051, EnvShake]      
type = EnvShake
trigger1 = AnimElem = 4
ampl = 9            
freq = 178
time = 15

[State 3051, Bind 4]      
type = TargetBind
trigger1 = AnimElem = 4
pos = 15, 0

[State 3001, TargetState]
type = TargetState
trigger1 = AnimElem = 4
value = 3003

[State 3051, TargetState]
type = TargetState
trigger1 = AnimElem = 9
trigger2 = AnimElem = 12
trigger3 = AnimElem = 16
trigger4 = AnimElem = 19
trigger5 = AnimElem = 23
trigger6 = AnimElem = 26
trigger7 = AnimElem = 30
trigger8 = AnimElem = 37
trigger9 = AnimElem = 40
trigger10 = AnimElem = 44
trigger11 = AnimElem = 47
trigger12 = AnimElem = 51
trigger13 = AnimElem = 54
trigger14 = AnimElem = 58
trigger15 = AnimElem = 61
trigger16 = AnimElem = 65
trigger17 = AnimElem = 67
value = 3004

[State 3051, TargetState]  ;subimento da motsega
type = TargetState
trigger1 = AnimElem = 115
value = 3053

[State 3001, TargetState]   ;colpo finale
type = TargetState
trigger1 = AnimElem = 146
value = 3005

[State 3051, TargetLifeAdd]  ;mettere la energia che ella toglie nei milioni di colpi
type = TargetLifeAdd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 12
trigger3 = AnimElem = 16
trigger4 = AnimElem = 19
trigger5 = AnimElem = 23
trigger6 = AnimElem = 26
trigger7 = AnimElem = 30
trigger8 = AnimElem = 37
trigger9 = AnimElem = 40
trigger10 = AnimElem = 44
trigger11 = AnimElem = 47
trigger12 = AnimElem = 51
trigger13 = AnimElem = 54
trigger14 = AnimElem = 58
trigger15 = AnimElem = 61
trigger16 = AnimElem = 65
trigger17 = AnimElem = 67
absolute = 1
kill = 0
value = -20

[State 3051, TargetLifeAdd] ;mettere energia che toglie ella colla motosega
type = TargetLifeAdd
trigger1 = AnimElem = 115
trigger2 = AnimElem = 117
trigger3 = AnimElem = 119
trigger4 = AnimElem = 121
trigger5 = AnimElem = 123
trigger6 = AnimElem = 125
trigger7 = AnimElem = 127
trigger8 = AnimElem = 129
trigger9 = AnimElem = 131
trigger10 = AnimElem = 133
trigger11 = AnimElem = 135
trigger12 = AnimElem = 137
trigger13 = AnimElem = 139
trigger14 = AnimElem = 141
trigger15 = AnimElem = 143
trigger16 = AnimElem = 145
absolute = 1
kill = 0
value = -10

[State 3051, TargetLifeAdd] ;mettere energia che toglie ella estraendo la sega
type = TargetLifeAdd
trigger1 = AnimElem = 146
absolute = 1
kill = 1
value = -100

[State 3051, SE]           ;sfx dei vari colpi
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 12
trigger3 = AnimElem = 16
trigger4 = AnimElem = 19
trigger5 = AnimElem = 23
trigger6 = AnimElem = 26
trigger7 = AnimElem = 30
trigger8 = AnimElem = 37
trigger9 = AnimElem = 40
trigger10 = AnimElem = 44
trigger11 = AnimElem = 47
trigger12 = AnimElem = 51
trigger13 = AnimElem = 54
trigger14 = AnimElem = 58
trigger15 = AnimElem = 61
trigger16 = AnimElem = 65
value = 210, 2

[State 3051, SE]           ;sfx colpo finale
type = PlaySnd
trigger1 = AnimElem = 67
value = 11002, 0
volume = 185

[State 3051, SE]           ;sfx di lei che alza la motsega
type = PlaySnd
trigger1 = AnimElem = 73
value = 3165, 0
volume = 255

;[State 3051, SE]           ;sfx motsega cattiva
;type = PlaySnd
;trigger1 = AnimElem = 71
;value = 17016,0

[State 3051, SE]           ;sfx motsega cattiva 4
type = PlaySnd
trigger1 = AnimElem = 95
value = 17018,0
volume = 255

[State 3051, SE]           ;strappo la motosega!
type = PlaySnd
trigger1 = AnimElem = 146
value = 17012, 0
volume = 255

[State 3051, SE]           ;sfx aggiuntivo starppo sega
type = PlaySnd
trigger1 = AnimElem = 146
value = 210, 2

[State 3051, EnvShake]     ;envshake dei colpi     
type = EnvShake
trigger1 = AnimElem = 9
trigger2 = AnimElem = 12
trigger3 = AnimElem = 16
trigger4 = AnimElem = 19
trigger5 = AnimElem = 23
trigger6 = AnimElem = 26
trigger7 = AnimElem = 30
trigger8 = AnimElem = 37
trigger9 = AnimElem = 40
trigger10 = AnimElem = 44
trigger11 = AnimElem = 47
trigger12 = AnimElem = 51
trigger13 = AnimElem = 54
trigger14 = AnimElem = 58
trigger15 = AnimElem = 61
trigger16 = AnimElem = 65
trigger17 = AnimElem = 67
ampl = 4            
freq = 178
time = 7

[State 3051, EnvShake]     ;envshake della motosega   
type = EnvShake
trigger1 = AnimElem = 115
trigger2 = AnimElem = 117
trigger3 = AnimElem = 119
trigger4 = AnimElem = 121
trigger5 = AnimElem = 123
trigger6 = AnimElem = 125
trigger7 = AnimElem = 127
trigger8 = AnimElem = 129
trigger9 = AnimElem = 131
trigger10 = AnimElem = 133
trigger11 = AnimElem = 135
trigger12 = AnimElem = 137
trigger13 = AnimElem = 139
trigger14 = AnimElem = 141
trigger15 = AnimElem = 143
trigger16 = AnimElem = 145
ampl = 4            
freq = 200
time = 4

[State 3051, Explod]        ;sangue violento
type = Explod
trigger1 = AnimElem = 9
trigger2 = AnimElem = 12
trigger3 = AnimElem = 16
trigger4 = AnimElem = 19
trigger5 = AnimElem = 23
trigger6 = AnimElem = 26
trigger7 = AnimElem = 30
trigger8 = AnimElem = 37
trigger9 = AnimElem = 40
trigger10 = AnimElem = 44
trigger11 = AnimElem = 47
trigger12 = AnimElem = 51
trigger13 = AnimElem = 54
trigger14 = AnimElem = 58
trigger15 = AnimElem = 61
trigger16 = AnimElem = 65
trigger17 = AnimElem = 67
trigger18 = AnimElem = 114
trigger19 = AnimElem = 118
trigger20 = AnimElem = 121
trigger21 = AnimElem = 123
trigger22 = AnimElem = 127
trigger23 = AnimElem = 130
trigger24 = AnimElem = 134
trigger25 = AnimElem = 139
trigger26 = AnimElem = 142
trigger27 = AnimElem = 144
anim = 8001
id = 8001
postype = p1
sprpriority = 2
pos = 25, -20
facing = -1
bindtime = 1
supermovetime = -1
removeongethit = 1

[State 3051, Explod]        ;sangue violento all'incontrario
type = Explod
trigger1 = AnimElem = 9
trigger2 = AnimElem = 12
trigger3 = AnimElem = 16
trigger4 = AnimElem = 19
trigger5 = AnimElem = 23
trigger6 = AnimElem = 26
trigger7 = AnimElem = 30
trigger8 = AnimElem = 37
trigger9 = AnimElem = 40
trigger10 = AnimElem = 44
trigger11 = AnimElem = 46
trigger12 = AnimElem = 50
trigger13 = AnimElem = 54
trigger14 = AnimElem = 58
trigger15 = AnimElem = 62
trigger16 = AnimElem = 63
trigger17 = AnimElem = 67
trigger18 = AnimElem = 114
trigger19 = AnimElem = 118
trigger20 = AnimElem = 121
trigger21 = AnimElem = 122
trigger22 = AnimElem = 127
trigger23 = AnimElem = 131
trigger24 = AnimElem = 134
trigger25 = AnimElem = 139
trigger26 = AnimElem = 142
trigger27 = AnimElem = 144
anim = 8001
id = 8001
postype = p1
sprpriority = 2
pos = -10,-20
bindtime = 1
supermovetime = -1
removeongethit = 1


[State 3051, Explod]        ;sangue piccolo
type = Explod
trigger1 = AnimElem = 9
trigger2 = AnimElem = 12
trigger3 = AnimElem = 16
trigger4 = AnimElem = 19
trigger5 = AnimElem = 23
trigger6 = AnimElem = 26
trigger7 = AnimElem = 30
trigger8 = AnimElem = 37
trigger9 = AnimElem = 40
trigger10 = AnimElem = 44
trigger11 = AnimElem = 47
trigger12 = AnimElem = 51
trigger13 = AnimElem = 54
trigger14 = AnimElem = 58
trigger15 = AnimElem = 61
trigger16 = AnimElem = 65
trigger17 = AnimElem = 67
trigger18 = AnimElem = 148     
anim = 8000
id = 8000
postype = p2
sprpriority = 5
pos = 15,-35
facing = -1
bindtime = 1
random = 30,10
supermovetime = -1

[State 3051, Explod]        ;sangue piccolo all'incontrario
type = Explod
trigger1 = AnimElem = 9
trigger2 = AnimElem = 12
trigger3 = AnimElem = 16
trigger4 = AnimElem = 19
trigger5 = AnimElem = 23
trigger6 = AnimElem = 26
trigger7 = AnimElem = 30
trigger8 = AnimElem = 37
trigger9 = AnimElem = 40
trigger10 = AnimElem = 44
trigger11 = AnimElem = 47
trigger12 = AnimElem = 51
trigger13 = AnimElem = 54
trigger14 = AnimElem = 58
trigger15 = AnimElem = 61
trigger16 = AnimElem = 65
trigger17 = AnimElem = 67
trigger18 = AnimElem = 148
anim = 8000
id = 8000
postype = p2
sprpriority = 5
pos = -25,-35
bindtime = 1
random = 10,10
supermovetime = -1

[State 3051, Explod]        ;sangue violento
type = Explod
trigger1 = AnimElem = 114
trigger2 = AnimElem = 118
trigger3 = AnimElem = 121
trigger4 = AnimElem = 123
trigger5 = AnimElem = 127
trigger6 = AnimElem = 130
trigger7 = AnimElem = 134
trigger8 = AnimElem = 139
trigger9 = AnimElem = 142
trigger10 = AnimElem = 144
anim = 8001
id = 8001
postype = p1
sprpriority = 2
pos = 25, -20
random = 20,20
facing = -1
bindtime = 1
supermovetime = -1
removeongethit = 1

[State 3051, Explod]        ;sangue violento all'incontrario
type = Explod
trigger1 = AnimElem = 114
trigger2 = AnimElem = 118
trigger3 = AnimElem = 121
trigger4 = AnimElem = 122
trigger5 = AnimElem = 127
trigger6 = AnimElem = 131
trigger7 = AnimElem = 134
trigger8 = AnimElem = 139
trigger9 = AnimElem = 142
trigger10 = AnimElem = 144
anim = 8001
id = 8001
postype = p1
sprpriority = 2
pos = 0,-20
random = 20,20
bindtime = 1
supermovetime = -1
removeongethit = 1


[State 3051, Explod]        ;schizzo sangue violento che sprizza per la motosega
type = Explod
trigger1 = AnimElem = 119
trigger2 = AnimElem = 134
trigger3 = AnimElem = 143
trigger4 = AnimElem = 144
anim = 8135     ;8125
id = 8135       ;8125
postype = p1
sprpriority = 2
pos = 27, -30
facing = -1
bindtime = 1
scale = 1, 2
supermovetime = -1
removeongethit = 1

[State 3051, Explod]        ;schizzo sangue violento gigante che sprizza per la motosega
type = Explod
trigger1 = AnimElem = 119
trigger2 = AnimElem = 127
trigger3 = AnimElem = 140
trigger4 = AnimElem = 144
anim = 8135     ;8125
id = 8135       ;8125
postype = p1
sprpriority = 2
pos = 27, -30
facing = -1
bindtime = 1
scale = 1, 3
supermovetime = -1
removeongethit = 1

[State 3051, Explod]        ;sangue violento all'incontrario che sprizza per la motosega
type = Explod
trigger1 = AnimElem = 116
trigger2 = AnimElem = 141
trigger3 = AnimElem = 144
anim = 8135     ;8125
id = 8135       ;8125
postype = p1
sprpriority = 2
pos = 10, -30        ;1,-30
bindtime = 1
scale = 1, 2
;vel = -3.-4
supermovetime = -1
removeongethit = 1

[State 3051, Explod]        ;sangue violento gigante all'incontrario che sprizza per la motosega
type = Explod
trigger1 = AnimElem = 123
trigger2 = AnimElem = 128
trigger3 = AnimElem = 138
trigger4 = AnimElem = 143
anim = 8135     ;8125
id = 8135       ;8125
postype = p1
sprpriority = 2
pos = 10,-30
bindtime = 1
scale = 1, 3
;vel = -3.-4
supermovetime = -1
removeongethit = 1

[State 3100, EnvColor]      ;piccolo flash bianco prima della esplosione finale
type = EnvColor
trigger1 = AnimElem = 145, = 2
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 3051, Explod]        ;sangue esplosione colpo finale
type = Explod
trigger1 = AnimElem = 147
anim = 8102
id = 8102
postype = p1
sprpriority = 2
pos = 25, -20
facing = -1
bindtime = 1
vel = 1.2
scale = 1, 2
supermovetime = -1
removeongethit = 1

[State 3051, Explod]        ;sangue esplosione colpo finale all'incontrario
type = Explod
trigger1 = AnimElem = 147
anim = 8102
id = 8102
postype = p1
sprpriority = 2
pos = -10,-20
bindtime = 1
vel = 1.1
scale = 2, 1
supermovetime = -1
removeongethit = 1

[State 3051, EnvShake]     ;envshake ultimo colpo   
type = EnvShake
trigger1 = AnimElem = 146
ampl = 16            
freq = 100
time = 35

[State 3051, polverone]        ;polverone per terra
type = Explod
trigger1 = AnimElem = 146
anim = 8120  
postype = p1
pos = 5,2                 
supermove = 1
ontop = 1
sprpriority = 3
ownpal = 1
shadow = -1
vel = -2.0
scale = 1, .5
pausemovetime = 9999

[State 3051, polverone]        ;polverone per terra (opposto)
type = Explod
trigger1 = AnimElem = 146
anim = 8120  
postype = p1
pos = 15,2                 
supermove = 1
ontop = 1
sprpriority = 3
facing = -1
ownpal = 1
shadow = -1
vel = 2.0
scale = 1, 1
pausemovetime = 9999

[State 3001, Explod]        ;sangue violento sul p2 alla fine
type = Explod
trigger1 = time = 368
trigger2 = time = 386
trigger3 = time = 405
anim = 8001
id = 8001
postype = p1
sprpriority = 2
pos = 25, -20
facing = -1
bindtime = 1
supermovetime = -1
removeongethit = 1

[State 3001, Explod]        ;sangue violento all'incontrario sul p2 alla fine
type = Explod
trigger1 = time = 368
trigger2 = time = 386
trigger3 = time = 405
anim = 8001
id = 8001
postype = p1
sprpriority = 2
pos = -10,-20
bindtime = 1
supermovetime = -1
removeongethit = 1


[State 10100, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------
;-Chain'o'Saw (p2 subisce la motosega per terra)
[Statedef 3053]
type    = L
movetype= H
physics = N
velset = 0,0

[State 3053, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 3053, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3053


;=============================================================
;-Psycho Teddy (super sparo a uno)
[Statedef 3100]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3100
ctrl = 0
poweradd = -1000

[State 3100, VarSet]
type = VarSet
trigger1 = var(10) = 1
var(10) = 0

[State 3100, HitDef]          ;colpo che serve per allontanare
type = HitDef
trigger1 = AnimElem = 9
attr = S, HA
animtype  = Hard
damage = 80
guardflag = MA
pausetime = 0,20           
sparkno = S8002
sparkxy = 0,-85
hitsound   = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 35
guard.slidetime = 35
ground.hittime  = 15
ground.velocity = -7
air.velocity = -2.5,-4

[State 3100, SE]
type = PlaySnd
trigger1 = AnimElem = 9
value = 41, 0

[State 3100, SE]
type = PlaySnd
trigger1 = time = 50
value = 700, 1;

[State 3100, SE]        ;voce
type = PlaySnd
trigger1 = AnimElem = 1
value = 3100, 1;

[State 3100, Explod]
type = Explod
trigger1 = Time = 50        
anim = 4000
pos = 70, -25
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 3100, Explod]
type = Explod
trigger1 = Time = 50       
anim = 4001
pos = 70, -25
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
under = 1

[State 3100, SP]
type = SuperPause
trigger1 = AnimElem = 17
time = 60
Movetime = 20
anim = -1
unhittable = 1

[State 3100, SE]
type = EnvShake
trigger1 = AnimElem = 18
ampl = 8
time = 30

[State 3110, Explod]            ;il fumo che esce dalla "pistola" finale
type = Explod
trigger1 = AnimElem = 18
anim = 8014
pos = 70, -20
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1
ontop = 1
scale = .8, .8

[State 3100, Explod]         ;roba davanti
type = Explod
trigger1 = AnimElem = 18
anim = 3103
pos = 30, 0
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1

[State 3100, Explod]       ;roba dietro
type = Explod
trigger1 = AnimElem = 18
anim = 3104
pos = 30, 0
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1

[State 3100, SE]
type = PlaySnd
trigger1 = AnimElem = 18
value = 1100, 2;SE

[State 3100, Proj]     
type = Projectile
trigger1 = Animelem = 18
projanim = 3110
ID = 3110
projhitanim = 3102
offset = 40, -25
velocity = 25, 0
projremovetime = 30
attr = A, HP
animtype  = diagup
getpower = 0,0
givepower = 20,10
damage    = 290,65
guardflag = MA
hitflag = MAF
pausetime = 0,12
sparkno = 3
guard.sparkno = 42
sparkxy = 20, 0
hitsound   = s3100,0
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8,-5.5 
air.velocity = -2.5,-5.5
p2stateno = 3101
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 3150, Explod]
type = Explod
trigger1 = ProjContact3110 = 1
anim = 3107
pos = 5, -65
postype = p2
random = 40,-65
sprpriority = 2
bindtime = -1
ownpal = 1
ontop = 1
scale = .7, .7

[State 3150, Explod]
type = Explod
trigger1 = ProjContact3110 = 1
anim = 3106
pos = 5, -40
postype = p2
random = 35,-55
sprpriority = 2
bindtime = -1
ownpal = 1
ontop = 1

[State 3100, EnvColor]
type = EnvColor
trigger1 = AnimElem = 18, = 5
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

;[State 3100, SB]
;type = ScreenBound
;trigger1 = AnimElemTime(26) >= 0
;movecamera = 1
;value = 1

[State 3100, VelSet]
type = VelSet
triggerall = BackEdgeDist < 20
trigger1 = AnimElemTime(26) >= 0
x = 4

[State 3100, PosAdd]         ;riallineamento del p1
type = PosAdd
trigger1 = AnimTime = 0
x = -44
y = 0

[State 3100, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------
;Subimento p2
[Statedef 3101]
type = A
movetype = H
physics = N
anim = 5030
velset = 0, 0
ctrl = 0

[State 3101,Pause]
type = Pause
trigger1 = Time = [12,22] 
trigger1 = RoundState = 2
time = 1
darken = 1

[State 3101,ChangeAnim]
type = ChangeAnim
trigger1 = HitShakeOver
persistent = 0
value = IfElse(SelfAnimExist(5052),5052,5050)

[State 3101,VelSet]
type = VelSet
trigger1 = HitShakeOver
persistent = 0
x = -6.0
y = -7.0

[State 3101,Gravity]
type = Gravity
trigger1 = HitShakeOver

[State 3101,ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > 0 
trigger1 = Anim = 5050 || Anim = 5052
trigger1 = SelfAnimExist(5062)
value = 5062

[State 3101,SelfState]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;-------------------------------------------------------------
;Full Metal Teddy (super a due)
[Statedef 3160]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3160
ctrl = 0
poweradd = -2000

[State 3160, VarSet]
type = VarSet
trigger1 = var(10) = 1
var(10) = 0

[State 3160, HitDef]          ;colpo che serve per allontanare
type = HitDef
trigger1 = AnimElem = 9
attr = S, HA
animtype  = Hard
damage = 80
guardflag = MA
pausetime = 0,20           
sparkno = S8002
sparkxy = 0,-85
hitsound   = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 35
guard.slidetime = 35
ground.hittime  = 15
ground.velocity = -7
air.velocity = -2.5,-4

[State 3060, SE]
type = PlaySnd
trigger1 = AnimElem = 9
value = 41, 0

[State 3060, SE]        ;sfx super a due
type = PlaySnd
trigger1 = Time = 49
value = 3000, 1


[State 3060, Explod]   ;flash super davanti
type = Explod
trigger1 = Time = 49        
anim = 4003
pos = 55, -113
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
sprpriority = 2
bindtime = 1

[State 3060, Explod]     ;flash super in fondo
type = Explod
trigger1 = Time = 49       
anim = 4002
pos = 55, -113
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
under = 1

[State 3060, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 15
time = 52                   
value = 0,0,0
under = 1

[State 3060, SP]
type = SuperPause
trigger1 = AnimElem = 15, =1
time = 50
Movetime = 5
anim = -1
unhittable = 1


[State 3160, AfterImage]
type = AfterImage
trigger1 = AnimElemTime(1) > 1            
trigger1 = AnimElemTime(30) < 2
time = 20
length = 60
timegap = 1
framegap = 1
trans = sub

[State 3160, BGPALFX]       ;inversione colori schermo
type = BGPalFX
trigger1 = AnimElemTime(16) > 0            
trigger1 = AnimElemTime(30) < 2
time = 30
invertall = 1
value = 0
ignorehitpause = 1
scale = 1.08, 1.08

[State 3060, SE]
type = EnvShake
trigger1 = AnimElem = 16
ampl = 8
time = 30

[State 3060, Explod]            ;il fumo che esce dalla "pistola" finale
type = Explod
trigger1 = AnimElem = 16
anim = 8128
pos = 40, -113
postype = p1
sprpriority = 3
bindtime = 1
ownpal = 1
scale = .8, .8

[State 3060, Explod]            ;esplosione cannone devastante
type = Explod
trigger1 = AnimElem = 16
anim = 8127
pos = 50, -113
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1
ontop = 1
;scale = .8, .8

[State 3160, Explod]         ;roba davanti
type = Explod
trigger1 = AnimElem = 16
anim = 3103
pos = 30, 0
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1

[State 3160, Explod]       ;roba dietro
type = Explod
trigger1 = AnimElem = 16
anim = 3104
pos = 30, 0
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1

[State 3160, SE]
type = PlaySnd
trigger1 = AnimElem = 16
value = 1100, 2;SE

[State 3160, SE]
type = PlaySnd
trigger1 = AnimElem = 16
value = 17022, 0        ; Cannon!

[State 3160, Proj]     
type = Projectile
trigger1 = Animelem = 16
projanim = 3111
ID = 3111
;projhitanim = 8129
offset = 50, -45
velocity = 25, 0
projremovetime = 30
attr = A, HP
animtype  = diagup
getpower = 0,0
givepower = 20,10
damage    = 560,105  
guardflag = MA
hitflag = MAF
pausetime = 0,12
sparkno = 3
guard.sparkno = 42
sparkxy = -50, -65
hitsound   = s3100,0
guardsound = s3100,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8,-5.5 
air.velocity = -2.5,-5.5
p2stateno = 3101
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 3160, Explod]
type = Explod
trigger1 = projContact = 1
anim = 8129
pos = -15, -85
postype = p2
sprpriority = 3
bindtime = 1
ownpal = 1
ontop = 1
random = 5,5

[State 3160, Explod]
type = Explod
triggerall = P2stateno = 3101
trigger1 = P2movetype = H && Time = 72
anim = 8130
pos = 12, -65
postype = p2
sprpriority = 2
bindtime = 1
ownpal = 1
random = 5,5

[State 3160, EnvColor]
type = EnvColor
trigger1 = AnimElem = 16, = 5
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 3160, VelSet]
type = VelSet
triggerall = BackEdgeDist < 20
trigger1 = AnimElemTime(26) >= 0
x = 4

[State 3160, PosAdd]         ;riallineamento del p1
type = PosAdd
trigger1 = AnimTime = 0
x = -23

[State 3160, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;-SAYANCHIOSPARO (SUPER A TRE)
[Statedef 3165]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3165
ctrl = 0
poweradd = -1000

[State 3165, SuperPause]
type = SuperPause
trigger1 = AnimElem = 1
time = 150                     
movetime = 150
darken = 1 
unhittable = 1

[State 10113, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 4003
pos = 65, -100
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 10113, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 4002
pos = 65, -100
postype = p1
supermove = 1
under = 1

[State 10113, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3165, 0
volume = 50

;[State 10113, BGPALFX]
;type = BGPalFX
;trigger1 = AnimElemTime(2) > 0         
;trigger1 = AnimElemTime(28) < 6
;time = 15
;invertall = 1
;value = 0
;ignorehitpause = 1
;scale = 1.08, 1.08

;[State 10113, SE]
;type = PlaySnd
;trigger1 = AnimElem = 2
;value = 700, 1;


[State 3165, Explod]                    ;palonzo dietro
type = Explod
trigger1 = AnimElem = 1
anim = 3167
pos = 28,1 
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1
supermovetime = 200
shadow = -1
;scale = .8, .8

[State 3165, SE]                         ;prima frase
type = PlaySnd
trigger1 = AnimElem = 4
value = 3165,1

[State 3165, SE]                         ;seconda frase
type = PlaySnd
trigger1 = AnimElem = 5
value = 3165,2

[State 3165, SE]                         ;terza frase
type = PlaySnd
trigger1 = AnimElem = 7
value = 3165,3
volume = 100

[State 3165, SE]                         ;quarta frase (coretto palonzo)
type = PlaySnd
trigger1 = AnimElem = 7
value = 3165,4
volume = 100

[State 3165, Proj Finale]                  ;questo e' il colpo finale con palonzo
type = Projectile
trigger1 = Animelem = 5
trigger2 = Animelem = 5, =15
projanim = 3168
projID = 3168
projhitanim = 3102
offset = 5, -40
velocity = 25, 0
projremovetime = 30
attr = A, HP
animtype  = diagup
getpower = 0,0
givepower = 20,10
damage    = 70,40
guardflag = MA
hitflag = MAF+
pausetime = 0,0
sparkno = 3
guard.sparkno = 42
sparkxy = 20, 0
hitsound   = s3100,0
guardsound = 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -10,-8.5       ;-8,-5.5 
air.velocity = -8.5,-7.5         ;-2.5,-5.5
p2stateno = 3101
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 10113, Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 4003
pos = 65, -100
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 10113, Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 4002
pos = 65, -100
postype = p1
supermove = 1
under = 1

[State 10113, SE]
type = PlaySnd
trigger1 = AnimElem = 8
value = 10130, 1;
volume = 200


[State 3160, SE]          
type = PlaySnd
trigger1 = Animelem = 8
trigger2 = Animelem = 9
value = 1100, 2;
;volume = 60

[State 3165, Explod]
type = Explod
trigger1 = projHit3168 = 1
anim = 3105
pos = 0, -85
postype = p2
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
random = 40,40

[State 3165, Explod]
type = Explod
trigger1 = projHit3168 = 1
anim = 3106
pos = 12, -35
postype = p2
sprpriority = 3
bindtime = 1
ownpal = 1
ontop = 1
random = 40,40


[State 3165, Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 3101
pos = 66, -101
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
supermovetime = 200

[State 3165, Explod]      ;lo sparo di palonzo
type = Explod
trigger1 = AnimElem = 8, =2
anim = 3101
pos = 86, -107
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1
ontop = 1
supermovetime = 200

[State 3165, EnvShake]
type = EnvShake
trigger1 = projHit3168 = 1
time = 30
ampl = 10
freq = 90
persistent = 0
ignorehitpause = 1

[State 3165, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=============================================================
;HYPER DEVASTAZIONE a TRE
[Statedef 3300]                ;lui che crea la palla
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3300
ctrl = 0
poweradd = -3000
sprpriority = 2               ;nota: crea invunerabilita', superpausa che blocca tutti e effetti grafici

[State 3300, SuperPause]      ;casomai aggiungerci un bel sfx
type = SuperPause
trigger1 = AnimElem = 1
time = 25                     
movetime = 25
darken = 0 
anim = -1
unhittable = 1

[State 3303, SE]               ;BAROCCO BLAST!
type = PlaySnd
trigger1 = Time = 0
value = 11009, 0

[State 3301, SE]
type = PlaySnd
trigger1 = Time = 0
value = 700, 1;

[State 3301, SE]
type = PlaySnd
trigger1 = Time = 0
value = 3000, 1;

[State 3301, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 1
time = 25                    
value = 0,0,0
under = 1

[State 3300, Blink Color]            ;da scegliere il colore se nero, giallo o altri
type = PalFX
trigger1 = AnimElem = 1
time = 15
sinadd = 50,50,50,8                   ;cosi' si colora (grigio) e lascia una scia nera

[State 3300, Explod1]         ;explod di inzio della super
type = Explod
trigger1 = Time = 2
anim = 4003
pos = 5, -130
postype = p1
supermove = 1
sprpriority = 3
bindtime = 1
ownpal = 1


[State 3300, Explod2]        ;explod di inzio della super (sottofondo)
type = Explod
trigger1 = Time = 2
anim = 4002
pos = 5, -126
postype = p1
supermove = 1
sprpriority = -3
under = 1
ownpal = 1

[State 3300, Explod3]        ;la palla
type = Explod
trigger1 = Time = 12
anim = 8108
ID = 8108
pos = 5, -166
postype = p1
supermove = 1
sprpriority = 2
ownpal = 1
scale = .7, .7

[State 3301, SE]               ;urlo disumano
type = PlaySnd
trigger1 = Time = 12
value = 11007, 0             
volume = -45

[State 3303, polverone]        ;polverone per terra
type = Explod
trigger1 = Time = 14       
anim = 8120  
postype = p1
pos = -7, 0                
supermove = 1
sprpriority = 3
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, polverone]        ;polverone per terra (opposto)
type = Explod
trigger1 = Time = 14       
anim = 8120  
postype = p1
pos = 7, 0                 
supermove = 1
sprpriority = 3
facing = -1
ownpal = 1
shadow = -1
scale = .7, .7


[State 3301, SE]            ;TERREMOTO
type = PlaySnd
trigger1 = Time = 12
value = 11005, 0
loop = 1 
channel = 3

[State 3300, Colpisco!]      
type = HitDef
trigger1 = Time = 12
attr = A, HA
animtype  = Diagup
damage = 106, 106
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = S8002
guard.sparkno = 42
sparkxy = 20,-75
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12            
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1


[State 3300, Explod]         ;esplosione su p2 colpito
type = Explod
trigger1 = MoveHit
anim = 3107
pos = 15, -60
postype = p2
sprpriority = 2
random = 15,60
bindtime = 1
ownpal = 1
ontop = 1
scale = .4, .4

[State 3300, AssertSpecial]      
type = AssertSpecial
trigger1 = Time >= 12
flag = unguardable
flag2 = timerfreeze

[State 8030, Explod]     ;il cerchio che si crea p1     
type = Explod
trigger1 = AnimElem = 12
trigger2 = AnimElem = 39
trigger3 = AnimElem = 45
trigger4 = AnimElem = 67
anim = 8030            
ID = 8030
pos = 0,-50
postype = p1
sprpriority = 3
ontop = 1
shadow = -1
ownpal = 1
scale = .9, .9

[State 3300, SE]                ;SE del cerchio su p1
type = PlaySnd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 39
trigger3 = AnimElem = 45
trigger4 = AnimElem = 67
value = 10005,2
volume = 255


[State 3300, LifeADD]      ;il p1 comincia a perdere energia      
type = LifeAdd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 39
trigger3 = AnimElem = 45
trigger4 = AnimElem = 67
value = -19               ;quanto togliere
kill = 0                  ;settato a 0 il p1 non verra' ucciso



[State 8007, Explod]        ;Cerchio Bianco
type = Explod
trigger1 = AnimElem = 37
trigger2 = AnimElem = 39
anim = 8007
ID = 8007
pos = 5, -166
postype = p1
supermove = 1
sprpriority = 4
ownpal = 1

[State 3300, EnvShake]
type = EnvShake
trigger1 = Time = 12
time = 132
ampl = -2
freq = 90

[State 3300, ChangeState]      
type = ChangeState
trigger1 = AnimTime = 0
value = 3301
------------------------------

[Statedef 3301]                ;lui tiene la palla (secondo loop)
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3301
ctrl = 0
sprpriority = 2               

[State 3301, Explod4]        ;la palla secondo loop
type = Explod
trigger1 = Time = 1          ;forse e' meglio l'animelem
anim = 8109
pos = 5, -166
postype = p1
supermove = 1
sprpriority = 3
ownpal = 1
scale = .7, .7

[State 3301, Colpisco!]      
type = HitDef
trigger1 = Time = 1
attr = A, HA
animtype  = Diagup
damage = 106, 106
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = S8002
guard.sparkno = 42
sparkxy = 20,-75
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1


[State 3301, Explod]         ;esplosione su p2 colpito
type = Explod
trigger1 = MoveHit
anim = 3107
pos = 15, -60
postype = p2
sprpriority = 2
random = 15,60
bindtime = 1
ownpal = 1
ontop = 1
scale = .4, .4

[State 3301, AssertSpecial]      
type = AssertSpecial
trigger1 = Time >= 1
flag = unguardable
flag2 = timerfreeze

[State 8030, Explod]     ;il cerchio che si crea p1     
type = Explod
trigger1 = AnimElem = 21
trigger3 = AnimElem = 39
trigger4 = AnimElem = 56
trigger5 = AnimElem = 71
anim = 8030            
ID = 8030
pos = 0,-50
postype = p1
sprpriority = 3
ontop = 1
shadow = -1
ownpal = 1
scale = .9, .9

[State 3300, SE]                ;SE del cerchio su p1
type = PlaySnd
trigger1 = AnimElem = 21
trigger3 = AnimElem = 39
trigger4 = AnimElem = 56
trigger5 = AnimElem = 71
value = 10005,2
volume = 255


[State 3300, LifeADD]      ;il p1 continua a perdere energia      
type = LifeAdd
trigger1 = AnimElem = 21
trigger2 = AnimElem = 39
trigger3 = AnimElem = 56
trigger4 = AnimElem = 71
value = -29               
kill = 0                  


[State 8007, Explod]        ;Cerchio Bianco (seconda tornata)
type = Explod
trigger1 = AnimElem = 37
trigger2 = AnimElem = 39
anim = 8007
ID = 8007
pos = 5, -166
postype = p1
supermove = 1
sprpriority = 4
ownpal = 1

[State 3300, 5]
type = EnvShake
trigger1 = Time = 1
time = 156
ampl = -2
freq = 90

[State 3301, ChangeState]      
type = ChangeState
trigger1 = AnimTime = 0          
value = 3302
-----------------------------

[Statedef 3302]                ;lui tiene la palla (terzo loop, quello grande)
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3302
ctrl = 0
sprpriority = 2               

[State 3302, Explod5]        ;la palla piu' grande
type = Explod
trigger1 = Time = 1          ;forse e' meglio l'animelem
anim = 8107
pos = 5, -166
postype = p1
supermove = 1
sprpriority = 3
ownpal = 1
scale = .7, .7

[State 3302, Colpisco!]      
type = HitDef
trigger1 = Time = 1
attr = A, HA
animtype  = Diagup
damage = 140, 140
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = S8002
guard.sparkno = 42
sparkxy = 20,-75
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1


[State 3302, Explod]         ;esplosione su p2 colpito
type = Explod
trigger1 = MoveHit
anim = 3107
pos = 15, -60
postype = p2
sprpriority = 2
random = 15,60
bindtime = 1
ownpal = 1
ontop = 1
scale = .4, .4

[State 3302, AssertSpecial]      
type = AssertSpecial
trigger1 = Time >= 1
flag = unguardable
flag2 = timerfreeze

[State 8030, Explod]     ;il cerchio che si crea p1     
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 15
trigger3 = AnimElem = 28
trigger4 = AnimElem = 37
anim = 8030            
ID = 8030
pos = 0,-50
postype = p1
sprpriority = 3
ontop = 1
shadow = -1
ownpal = 1
scale = .9, .9

[State 3300, SE]                ;SE del cerchio su p1
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 15
trigger3 = AnimElem = 28
trigger4 = AnimElem = 37
value = 10005,2
volume = 255


[State 3302, LifeADD]      ;il p1 continua a perdere energia      
type = LifeAdd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 15
trigger3 = AnimElem = 28
trigger4 = AnimElem = 37
value = -58               
kill = 0                  

[State 3302, 5]
type = EnvShake
trigger1 = Time = 1
time = 126         
ampl = -3
freq = 90


[State 3302, ChangeState]      ;cambia all'animaz. di lui che butta la palla
type = ChangeState
trigger1 = AnimTime = 0          ;metti come trigger l'AnimElem finale
value = 3303

;---------------------------------
;-UBU butta la palla in terra
[Statedef 3303]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3303
ctrl = 0
sprpriority = 2

[State 3303, SE]
type = StopSnd
trigger1 = AnimElem = 1
value = 11005, 0
channel = 3

[State 3303, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 1
time = 3 
value = 246,246,246
under = 1

[State 3303, Blink Color]            ;da scegliere il colore se nero, giallo o altri
type = PalFX
trigger1 = AnimElem = 1
time = 3
sinadd = 50,50,50,8                   ;cosi' si colora (grigio) e lascia una scia nera

[State 3303, Invertall]
type = BGPalfx
trigger1 = AnimElemTime(1) >= 3
trigger1 = AnimElemTime(13) <= 5
ignorehitpause = 1
time = 2
invertall = 1

[State 3303, Explod6]        ;la palla viene gettata a terra
type = Explod
trigger1 = AnimElem = 1
anim = 8110                  ;casomai mettere la 8110
pos = -10, -160
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, Colpisco!]  ;nota:questa super e' parabile e il p1 e' colpibile    
type = HitDef
trigger1 = AnimElem = 1
attr = A, HA
animtype  = Diagup
damage = 140, 35
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1


[State 3303, Explod7]        ;la palla viene gettata a terra
type = Explod     
trigger1 = AnimElem = 2
anim = 8111                  
pos = -35, -145
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, Colpisco!]      ;nota:questa super e' parabile e il p1 e' colpibile
type = HitDef
trigger1 = AnimElem = 2
attr = A, HA
animtype  = Diagup
damage = 140, 35
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1

[State 3303, Explod8]        ;la palla viene gettata a terra
type = Explod
trigger1 = AnimElem = 3
anim = 8110                  ;casomai mettere la 8110
pos = -10, -160
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, Colpisco!]      ;nota:questa super e' parabile e il p1 e' colpibile
type = HitDef
trigger1 = AnimElem = 3
attr = A, HA
animtype  = Diagup
damage = 140, 35
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1


[State 3303, Explod9]        ;la palla viene gettata a terra
type = Explod
trigger1 = AnimElem = 4
anim = 8110                  ;casomai mettere la 8110
pos = 45, -140
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, Colpisco!]      ;nota: qui il p1 ridiventa incolpibile
type = HitDef
trigger1 = AnimElem = 4
attr = A, HA
animtype  = Diagup
damage = 140, 35
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1


[State 3303, Explod9]        ;la palla viene gettata a terra
type = Explod
trigger1 = AnimElem = 5
anim = 8110                  ;casomai mettere la 8110
pos = 90, -100
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1                ;se fai arretrare il p1 (posadd) allora devi togliere il bindtime infinito
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, Colpisco!]      
type = HitDef
trigger1 = AnimElem = 5
attr = A, HA
animtype  = Diagup
damage = 140, 35
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1

[State 3303, SE]               ;CRY!!!!!
type = PlaySnd
trigger1 = AnimElem = 5
value = 11008, 0


[State 3303, NotHitBy]            ;invunnerabile dall'anim 5
type = NotHitBy
trigger1 = AnimElemTime(5) >= 5
trigger1 = AnimElemTime(13) <= 15
value = SCA

[State 3303, polverone]        ;polverone per terra
type = Explod
trigger1 = AnimElem = 5, =3       
anim = 8120  
postype = p1
pos = 105, 0
supermove = 1
sprpriority = 3
ontop = 1
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, polverone]        ;polverone per terra (opposto)
type = Explod
trigger1 = AnimElem = 5, =3       
anim = 8120  
postype = p1
pos = 127, 0
supermove = 1
sprpriority = 3
ontop = 1
facing = -1
ownpal = 1
shadow = -1
scale = .7, .7



[State 3303, Explod10]        ;la palla viene gettata a terra
type = Explod
trigger1 = AnimElem = 6
anim = 8110                  ;creare una altra animazione della palla tagliata
pos = 120, -60
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, Colpisco!]      
type = HitDef
trigger1 = AnimElem = 6
attr = A, HA
animtype  = Diagup
damage = 140, 35
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1


[State 3303, SE]                ;SE della palla che sbatte per terra
type = PlaySnd
trigger1 = AnimElem = 6
value = 10005,1
volume = 100

[State 3303, SE]                ;SE del tuono della palla
type = PlaySnd
trigger1 = AnimElem = 6
value = 11006,0
volume = 250

[State 3303, Explod11]        ;la palla tagliata a terra
type = Explod
trigger1 = AnimElem = 7
anim = 8112                  
pos = 120, 1
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1
ownpal = 1
shadow = -1
scale = .7, .7


[State 3303, Colpisco!]    ;l'Hitdef per tutti i restanti colpi  
type = HitDef
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
trigger4 = AnimElem = 10
trigger5 = AnimElem = 11
trigger6 = AnimElem = 12
attr = A, HA
animtype  = Diagup
damage = 10, 8
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 5,-62
random = 20, 66
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1


[State 3303,EnvShake]
type = EnvShake
trigger1 = AnimElem = 7, =1
time = 25                    
ampl = -30
freq = 30

[State 3303, Schermo Bianco]
type = EnvColor
trigger1 = AnimElem = 7, =3
time = 2
value = 246,246,246
under = 1

[State 3303, Schermo Bianco]
type = EnvColor
trigger1 = AnimElem = 8
time = 15
value = 246,246,246
under = 1

[State 3303, Schermo Nero]   
type = EnvColor
trigger1 = AnimElem = 10
time = 25
value = 0,0,0
under = 1

[State 3303, Explod12]        ;l'animz. gialla sull'espl.
type = Explod
trigger1 = AnimElem = 10
anim = 8025
sprpriority = 0
postype = left
pos = 0,0
shadow = 0,0,0                
bindtime = -1
supermovetime = 30            ;quanto la explod sta "unfrozen" durante la superpausa

[State 3303, Explod13]        ;l'espl. dopo il polverone
type = Explod
trigger1 = AnimElem = 9    
anim = 8022  
postype = p1
pos = 50, -1
supermove = 1
sprpriority = 3
ownpal = 1
shadow = -1

[State 3303, Explod14]       ;l'esplosione bianca che invade lo schermo
type = Explod
trigger1 = AnimElem = 12
anim = 8026
postype = left
pos = 160,140
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3303, SE]
type = PlaySnd
trigger1 = Time = 1
value = 3000, 1

[State 3303, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3304

;---------------------------------
;-Il bianco invade lo schermo e i nemici subiscono
[Statedef 3304]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3304
ctrl = 0
sprpriority = 2

[State 3304,EnvShake]
type = EnvShake
trigger1 = time = 0
time = 60
ampl = -6
freq = 95

[State 3304, AsserSpecial]            ;nota; mettere un flag2 dove spariscono le barre di energia
type = AssertSpecial
trigger1 = time = 0
flag = nojugglecheck

[State 3304, NotHitBy]            ;invunnerabile
type = NotHitBy
trigger1 = AnimElemTime(1) >= 1
trigger1 = AnimElemTime(40) <= 2
value = SCA

[State 3304‚ BGPalFx­]
type = BGPalfx
trigger1 = time = 0
trigger2 = time = 2
ignorehitpause = 1
time = 1
mul = 0,0,0
invertall = 1

[State 3304, BGPal]
type = BGPalfx
trigger1 = time = 1
trigger2 = time >= 3
ignorehitpause = 1
time = 1
add = 255,255,255

[State 3304‚­ PalFX]
type = Palfx
trigger1 = time = 1
ignorehitpause = 1
time = 18
sinadd = 255,255,255,80

[State 3304, PalFX]
type = Palfx
trigger1 = time >= 19
ignorehitpause = 1
time = 1
add = 255,255,255

[State 3304, HitDef]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
trigger5 = AnimElem = 30
attr = A, HA
animtype  = Hard
affectteam = B
damage = Ceil((160 / (2 ** HitCount))+7), 8
Hitflag = MAF
guardflag = MA
pausetime = 0,1
givepower = 0,0
getpower = 0,0
sparkno = S8012
guard.sparkno = S8050
sparkxy = -7,-90
random = 20, 66
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,-1


[State 3304, HitDef]
type = HitDef
trigger1 = AnimElem = 8
trigger2 = AnimElem = 12
trigger3 = AnimElem = 16
trigger4 = AnimElem = 20
trigger5 = AnimElem = 32
attr = A, HA
animtype  = Hard
affectteam = B
damage = Ceil((160 / (2 ** HitCount))+7), 8
Hitflag = MAF
guardflag = MA
pausetime = 0,1
givepower = 0,0
getpower = 0,0
sparkno = S8012
guard.sparkno = S8050
sparkxy = -16,-95
random = 20, 66
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,-1


[State 3304, HitDef]
type = HitDef
trigger1 = AnimElem = 22
trigger2 = AnimElem = 24
trigger3 = AnimElem = 26
trigger4 = AnimElem = 28
attr = A, HA
animtype  = Hard
affectteam = B
damage = 6, 6
Hitflag = MAF
guardflag = MA
pausetime = 2,3
givepower = 0,0
getpower = 0,0
sparkno = S8012
guard.sparkno = S8050
sparkxy = 2,-60
random = 20, 66
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,-1

[State 3304, VarRandom]
type = VarRandom
trigger1 = Time = 0
v = 15
range = 0,4

[State 3304, HitDef]
type = HitDef
triggerall = Var(15) = 4
trigger1 = AnimElem = 7
trigger2 = AnimElem = 9
trigger3 = AnimElem = 11
trigger4 = AnimElem = 13
trigger5 = AnimElem = 15
trigger6 = AnimElem = 17
trigger7 = AnimElem = 19
trigger8 = AnimElem = 21
trigger9 = AnimElem = 23
trigger10 = AnimElem = 25
trigger11 = AnimElem = 27
trigger12 = AnimElem = 29
trigger13 = AnimElem = 31
trigger14 = AnimElem = 33
trigger15 = AnimElem = 34
attr = A, HA
animtype  = Hard
affectteam = B
damage = Ceil((160 / (2 ** HitCount))+8), 8
Hitflag = MAF
guardflag = MA
pausetime = 0,1
givepower = 0,0
getpower = 0,0
sparkno = S8012
guard.sparkno = S8050
sparkxy = 2,-60
random = 20, 66
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,-1

[State 3304, HitDef]               ;colpo finale che atterra
type = HitDef
trigger1 = AnimElem = 35
attr = A, HA
animtype  = Diagup
affectteam = B
damage = 25, 13
Hitflag = MAF
guardflag = MA
pausetime = 0,0
givepower = 0,0
getpower = 0,0
sparkno = S3105
guard.sparkno = S8050
sparkxy = 2,-67
random = 20, 66
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1


[State 3304, CGsuicidio]             ;se invece p1 si trova con 1 di energia
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = life = 1
trigger1 = p2life > 0
value = 3305
ctrl = 1


[State 3304, CG]             ;il ritorno allo state normale
type = ChangeState
trigger1 = AnimTime = 0
value = 0                        
ctrl = 1

;---------------------------------
;-Se p1 E' con una linea di energia
[Statedef 3305]
type    = S
movetype= A
velset = 0,0
anim = 3305
ctrl = 0
sprpriority = 2

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3305, Explod]    ;il sangue sulla testa   
type = Explod
trigger1 = AnimElem = 8, =14
anim = 8125
postype = p1
pos = -15,-118
bindtime = 1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, 5]        ;lo schermo trema sul colpo alla tempia
type = EnvShake
trigger1 = AnimElem = 8, =14
time = 25        
ampl = -3
freq = 90

[State 3305, SE]
type = PlaySnd
trigger1 = AnimElem = 8, =14
value = 11004,0
volume = 60

[State 3305, SE]
type = PlaySnd
trigger1 = AnimElem = 8, =14
value = 1100,2               

[State 3305, EnvColor]  
type = EnvColor
trigger1 = life = 1
trigger1 = AnimElem = 25, =15
value = 0,0,0
time = 130              

[State 3305,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 25,=26
trigger2 = AnimElem = 25,=32
trigger3 = AnimElem = 25,=65
trigger4 = AnimElem = 25,=78
value = 3100,0
volume = 30

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =25
anim = 3105
postype = p1
pos = 20,-45
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =25
anim = 3107
postype = p1
pos = -20,-20
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =30
anim = 3102
postype = p1
pos = 0,-30
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =60
anim = 3105
postype = p1
pos = 0,-65
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =65
anim = 3107
postype = p1
pos = 15,-10
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =75
anim = 3105
postype = p1
pos = 25,-65
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =80
anim = 3107
postype = p1
pos = 5,-40
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, ChangeState]    ;p1 si uccide!   
type = ChangeState
trigger1 = AnimTime = 0
value = 3307

;---------------------------------------------------------------
;P1 a terra morto
[Statedef 3307]
type = L
movetype= I
velset = 0,0
anim = 3307
ctrl = 0
sprpriority = 2

[State 3307, AssertSpecial]  
type = AssertSpecial
trigger1 = Time = [0,35]
flag = nokosnd
flag2 = nokoslow
flag3 = nomusic

[State 3307, LifeAdd]    ;p1 si uccide!   
type = LifeAdd
trigger1 = life = 1
trigger1 = AnimElem = 1, =18
value = -1
kill = 1
absolute = 1

[State 3307, ChangeAnim]   
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------
;REVERSAL START per colpi da stand e alti
[Statedef 10001]
type = S
movetype = I
physics = N
anim = 11001
velset = 0,0
poweradd = 53
ctrl = 0

[State 10001,3]
type = ReversalDef
reversal.attr = SA, NA,SA,HA   
trigger1 = AnimElemTime(5) >= 0
trigger1 = AnimElemTime(17) <= 4
pausetime = 9,65            
sparkno = S8002
sparkxy = 60,-65
hitsound = S3,6
numhits = 0
priority = 7, Hit
p1stateno = 10003

[State 10001, Cancel]
type = ChangeState
trigger1 = AnimTime = 0
value = 10002
ctrl = 0

;-----------------------------
;Reversal End
[Statedef 10002]
type = S
movetype = I
physics = N
anim = 10002
velset = 0,0
ctrl = 0

[State 10002, END]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------

[Statedef 10003] 
type = S
movetype = A
physics = S
anim = 10003
velset = 0
ctrl = 0
juggle = 8
poweradd = 130

[State 10004, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 11000, 0
volume = 100

;[State 10003, Width]    ;distanza dal bordo
;type = Width
;trigger1 = 1
;edge = 75,10

[State 10003, LifeAdd]    ;p1 perde un poco di energiga 
type = LifeAdd
trigger1 = AnimElem = 4
value = -20
kill = 0
absolute = 1

;reversal attack
[State 10003, HitDef]     ;colpi alti
type = HitDef
trigger1 = AnimElem = 13
trigger2 = AnimElem = 21
trigger3 = AnimElem = 29
trigger4 = AnimElem = 37
attr = S, SA
damage = 20,5
animtype = Hard
guardflag = M
hitflag = MAF
pausetime = 0,50                  ;24,24
hitonce = 1
sparkno = S8018
guard.sparkno = S8060
sparkxy = 0, -70
hitsound = S1100,2
guardsound = S200,4
ground.type = High
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -22,-6
air.velocity = -20,-6
ground.cornerpush.veloff = 0     ;evita che venga spinto indietro
getpower = 5,2
givepower = 3,2
kill = 0
fall = 0
fall.recover = 0
yaccel = .5
mindist = 50,-55
maxdist = 100,-10
envshake.time = 3
envshake.ampl = -3
envshake.freq = 90

[State 10003, HitDef]     ;colpi bassi
type = HitDef
trigger1 = AnimElem = 17
trigger2 = AnimElem = 25
trigger3 = AnimElem = 41
attr = S, SA
damage = 20,5
animtype = Light
guardflag = M
hitflag = MAF
pausetime = 0,50                 ;24,24
hitonce = 1
sparkno = S8018
guard.sparkno = S8060
sparkxy = 0, -45
hitsound = S1100,2
guardsound = S200,4
ground.type = Low
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -22,-6
air.velocity = -20,-6
ground.cornerpush.veloff = 0
getpower = 5,2
givepower = 3,2
kill = 0
fall = 0
fall.recover = 0
yaccel = .5
mindist = 50,-55
maxdist = 100,-10
envshake.time = 3
envshake.ampl = -3
envshake.freq = 90

[State 10003, HitDef]     ;colpo  finale
type = HitDef
trigger1 = AnimElem = 45
attr = S, SA
damage = 10,5
animtype = DiagUp
guardflag = M
hitflag = MAF
pausetime = 40,24           ;24,24
hitonce = 1
sparkno = S8018
guard.sparkno = S8060
sparkxy = 0, -50
hitsound = S1100,2
guardsound = S200,4
ground.type = High
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -22,-6
air.velocity = -20,-6
getpower = 5,2
givepower = 3,2
fall = 1
fall.recover = 0
yaccel = .5
mindist = 50,-55
maxdist = 100,-10
envshake.time = 6
envshake.ampl = -8
envshake.freq = 90


[State 10004, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0        
value = SCA
time = 1

[State 10003, END]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------
;Hyper REVERSAL A UNO START
[Statedef 10004]
type = S
movetype = I
physics = N
anim = 10004
velset = 0,0
poweradd = -1000
ctrl = 0

[State 10004, SE]
type = PlaySnd
trigger1 = Time = 0
value = 700, 1;

[State 10004,SE]      ;sfx di ella che parla
type = PlaySnd
trigger1 = AnimElem = 4
value = 11011, 2
volume = 180

[State 10004,rev1]
type = ReversalDef
reversal.attr = SCA, NA,SA,HA
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
pausetime = 9,20            ;9,100                 
hitsound = S3,6
numhits = 0
priority = 7
p1stateno = 10005

[State 10004, AfterImage]
type = Null;AfterImage
trigger1 = AnimElem = 1
time = 999
timegap = 1
framegap = 1
length = 10


[State 10004,EnvColor]
type = EnvColor
trigger1 = Time = 1
trigger2 = AnimElem = 1
value = 248,248,248
time = 2
under = 1

[State 10004,Explod]
type = Explod
trigger1 = Time = 2
anim = 4000
ID = 4000
pos = 6,-83
postype = P1
sprpriority = 4
supermove = 1
ownpal = 1
bindtime = -1

[State 10004,Explod]
type = Explod
trigger1 = Time = 2
anim = 4001
ID = 4001
pos = 6,-83
postype = P1
sprpriority = -2
supermove = 1
ownpal = 1
bindtime = -1

[State 10004, SP]
type = SuperPause
trigger1 = AnimElem = 4
pos = -5, -55
anim = -1
sound = 20, 0
unhittable = 1


[State 10004, Cancel]
type = ChangeState
trigger1 = Time = 50
value = 10002
ctrl = 0
;-----------------------------
;Hyper Reversal End
[Statedef 10002]
type = S
movetype = I
physics = N
anim = 10002
velset = 0,0
ctrl = 0

[State 10002, END]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
																										
;--------------------------------------------------
;-HYPER REVERSAL A UNO
[Statedef 10005] 
type = S
movetype = A
physics = S
anim = 10005
velset = 0
ctrl = 0
juggle = 15
sprpriority = 7

[State 10005, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 11011, 0;

[State 10005, SP]
type = SuperPause
trigger1 = Time = 0
time = 125          ;170
movetime = 125      ;170
darken = 0
anim = -1
unhittable = 1

[State 3051, BGPalFX] ;oscuramento 1
type = BGPalFX
trigger1 = Time >= 10
trigger1 = Time < 15
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 240,240,240
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 2
type = BGPalFX
trigger1 = Time >= 15 
trigger1 = Time < 20
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 230,230,230
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 3
type = BGPalFX
trigger1 = Time >= 20
trigger1 = Time < 25
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 220,220,220
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 4
type = BGPalFX
trigger1 = Time >= 25
trigger1 = Time < 30
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 210,210,210
sinadd = 0,0,0,3


[State 3051, BGPalFX] ;oscuramento 5
type = BGPalFX
trigger1 = Time >= 30
trigger1 = Time < 35
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 200,200,200
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 6
type = BGPalFX
trigger1 = Time >= 35
trigger1 = Time < 40
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 190,190,190
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 7
type = BGPalFX
trigger1 = Time >= 40
trigger1 = Time < 45
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 180,180,180
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 8
type = BGPalFX
trigger1 = Time >= 45
trigger1 = Time < 50
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 170,170,170
sinadd = 0,0,0,3


[State 3051, BGPalFX] ;oscuramento 9
type = BGPalFX
trigger1 = Time >= 50
trigger1 = Time < 55
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 160,160,160
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 10
type = BGPalFX
trigger1 = Time >= 55
trigger1 = Time < 60
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 150,150,150
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 11
type = BGPalFX
trigger1 = Time >= 60
trigger1 = Time < 65
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 140,140,140
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 12
type = BGPalFX
trigger1 = Time >= 65
trigger1 = Time < 70
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 130,130,130
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 13
type = BGPalFX
trigger1 = Time >= 70
trigger1 = Time < 75
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 120,120,120
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 14
type = BGPalFX
trigger1 = Time >= 75
trigger1 = Time < 80
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 110,110,110
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 15
type = BGPalFX
trigger1 = Time >= 80
trigger1 = Time < 85
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 100,100,100
sinadd = 0,0,0,3


[State 3051, BGPalFX] ;oscuramento 16
type = BGPalFX
trigger1 = Time >= 85
trigger1 = Time < 90
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 90,90,90
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 17
type = BGPalFX
trigger1 = Time >= 90
trigger1 = Time < 95
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 80,80,80
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 18
type = BGPalFX
trigger1 = Time >= 95
trigger1 = Time < 100
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 70,70,70
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 19
type = BGPalFX
trigger1 = Time >= 100
trigger1 = Time < 105
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 60,60,60
sinadd = 0,0,0,3


[State 3051, BGPalFX] ;oscuramento 20
type = BGPalFX
trigger1 = Time >= 105
trigger1 = Time < 110
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 50,50,50
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 21
type = BGPalFX
trigger1 = Time >= 110
trigger1 = Time < 115
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 40,40,40
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 22
type = BGPalFX
trigger1 = Time >= 115
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 30,30,30
sinadd = 0,0,0,3

[State 10005, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 60
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 1
Trans = sub       ;add1 per lasciare una scia nera continua, add per una scia nera classica
time = 150

;[State 1300, Blink]
;type = PalFX
;trigger1 = Time = 0
;time = 170
;sinadd = 50,50,50,3

;Invunerabilita' dei primi frames
[State 10005, NotHitBy]
type = NotHitBy
trigger1 = AnimElem >= 1
value = SCA

;fermare il tempo
[State 10005, AssertSpecial]
type = AssertSpecial
trigger1 = (GameTime%1) = 0 && roundstate = 2 && p2life > 0
flag = timerfreeze
flag2 = nomusic
flag3 = nobardisplay

;Rallentare tutti i personaggi sullo schermo
[State 10005, Slow Motion ]
type = Pause 
triggerall = (GameTime%1) = 0 && roundstate = 2 && p2life > 0 
trigger1 = time > 1
time = 1 
movetime = 1 
ignorehitpause = 1 

[State 10005, TargetBind]
type = TargetBind
trigger1 = time > 1
time = 1

[State 10005, SE]
type = PlaySnd
trigger1 = AnimElem = 7
value = 11011,0


;[State 10005, END2]               ;nota; la mossa si resetta se non prende
;type = ChangeState
;trigger1 = AnimElem = 8
;trigger1 = movecontact != 1
;value = 0
;ctrl = 1

[State 10005, SE]
type = PlaySnd
trigger1 = AnimElem = 8
value = 11012,0

;[State 10005,Explod]
;type = Explod
;trigger1 = AnimElem = 9
;anim = 3102
;ID = 3102
;pos = 0,-150
;postype = P2
;sprpriority = 5
;supermove = 1
;ownpal = 1
;bindtime = 2

;[State 10005, Explod]
;type = Explod
;trigger1 = AnimElem = 9
;anim = 8103
;id = 8103
;sprpriority = -5
;pos = 60,-135
;bindtime = -1
;supermovetime = -1
;removeongethit = 1

[State 10005,SE]      ;nota: scegliere tra fx 3100,0 o questo
type = PlaySnd
trigger1 = AnimElem = 9
value = 10005,1
volume = 30


[State 10005,SE]      ;sfx di ella che parte
type = PlaySnd
trigger1 = AnimElem = 32, =4
value = 11011, 1
volume = 250

[State 10005, END]    ;passa al movimento veloce
type = ChangeState
trigger1 = AnimTime = 0
value = 10020
ctrl = 1

;----------------------------------------------------
;-HYPER REVERSAL A UNO
;Movimento Veloce con colpo
[Statedef 10020]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 0
velset = 0,0
anim = 10020
ctrl = 0
sprpriority = 7

[State 10020, ES]          ;envshake forse da togliere se metti schermo nero
type = EnvShake
trigger1 = AnimElem = 1
ampl = 12
time = 15
freq = 180

[State 10020,EnvColor]
type = EnvColor
trigger1 = AnimElem = 2, =1
value = 248,248,248
time = 1
under = 1

[State 10020,EnvColor]
type = EnvColor
trigger1 = AnimElem = 2, =12
value = 0,0,0
time = 5

[State 10020, Friction]
type = VelMul
;triggerall = FrontEdgeBodyDist > 50
trigger1 = time > 1
x = 1.85

[State 10020, 5]
type = VelSet
;triggerall = FrontEdgeBodyDist > 50
trigger1 = AnimElem = 1, =2
x = 13

;[State 10020, VelSet]
;type = VelSet
;trigger1 = FrontEdgeBodyDist < 50
;x = 0

[State 10020, PlayerPush]
type = PlayerPush
trigger1 = time > 1
value = 1

[State 10020, SE]
type = PlaySnd
trigger1 = Time = 1
value = 640, 0

[State 10020, SE]       
type = PlaySnd
trigger1 = AnimElem = 3
value = 11017, 0
volume = -10

[State 10020, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 50
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = add
time = 2

[State 10020, Afterimage]
type = AfterImageTime
trigger1 = time < 25
time = 2

[State 10020, Blink Color]
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,8                   ;cosi' si colora (grigio) e lascia una scia nera

[State 10020, 1]                      ;controlla che sfx e'
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 10020, Explod]
type = Explod
trigger1 = AnimElem = 1, =2
anim = 8009
id = 8009
sprpriority = 1
pos = -5,0
bindtime = 1
supermovetime = -1
ownpal = 1

[State 10020, Explod]    ;la scia blue enorme
type = Explod
trigger1 = AnimElem = 2
anim = 8137
id = 8137
sprpriority = 7
ontop = 1
postype = p2
pos = -15,-65
bindtime = 1
supermovetime = -1
ownpal = 1

[State 10023, Explod]    ;scia di sangue
type = Explod
trigger1 = AnimElem = 4
anim = 8134
id = 8134
sprpriority = -3
under = 1
postype = p2
pos = -15, -63
bindtime = 1
ownpal = 1

;[State 10020, SP]       ;eventualmente da mettere
;type = SuperPause
;trigger1 = Time = 1
;time = 250          
;movetime = 250
;darken = 0
;anim = -1
;unhittable = 1

[State 10020, BGPalFX]   ;scermo nero da risistemare
type = BGPalFX
trigger1 = Time >= 0      ;>= 4
time = 25
;invertall = 1
ignorehitpause = 1
color = 0
mul = 30,30,30
sinadd = 0,0,0,3

[State 200, HitDef]
type = HitDef
trigger1 = AnimElem = 1
attr = S, HA                    
damage = 25                  
animtype = Light                 
guardflag = MA                   
hitflag = MAF                    
priority = 7, Hit                
pausetime = 0, 0                
sparkno = 0              
guard.sparkno = 0
kill = 0
p2stateno = 10021            ;fa andare il p2 al posfreze

[State 10020, Targetbind]   
type = TargetBind
trigger1 = AnimElem = 1
time = 1
pos = 0,0

[State 10020, TargetState]   ;subimento p2
type = TargetState
trigger1 = AnimElem = 1, =2
value = 10022

[State 10020, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 10025
ctrl = 1

;-------------------------
;p2 freeze
[Statedef 10021]
movetype= H
physics = N
velset = 0,0

[State 3003, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 10022, 1]
type = PosFreeze
Trigger1 = Time > 0
value = 1

;-------------------------
;subimento p2
[Statedef 10022]
type    = S
movetype= H
physics = N
velset = 0,0

[State 10022, 1]
type = Posset
Trigger1 = 1
Y = 0

[State 10022, Width]    ;distanza dal bordo del p2
type = Width
trigger1 = BackEdgeBodyDist < 40
edge = 0,125

[State 10022, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 10022

;-------------------------
;subimento p2 con esplosione di sangue
[Statedef 10023]
type    = S
movetype= H
physics = N
velset = 0,0

[State 10023, 1]
type = Posset
Trigger1 = 1
Y = 0

[State 10023, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 10023

[State 10020, ES]          
type = EnvShake
trigger1 = AnimElem = 6, =3
ampl = 4
time = 8
freq = 100

[State 10023, 8]
type = SelfState
Trigger1 = AnimTime = 0
value = 5110          

;----------------------------------------------
;-HYPER REVERSAL A UNO
;finale con ella che si pulisce la manina
[Statedef 10025]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 0
velset = 0,0
anim = 10025
ctrl = 0
sprpriority = 7

[State 10025,SE]      ;sfx di ella che abbassa la manina
type = PlaySnd
trigger1 = AnimElem = 3
value = 200, 1
volume = 255

[State 10020,SE]      ;sfx sbudellamento
type = PlaySnd
trigger1 = AnimElem = 9
value = 210, 2
volume = 255

[State 10325, Width]    ;distanza dal bordo
type = Width
trigger1 = 1
edge = 45

[State 10025, 5]
type = VelSet
trigger1 = time > 0
x = 0

[State 10025, TargetState]   ;subimento p2
type = TargetState
trigger1 = AnimElem = 9
value = 10023

[State 10025, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 9
value = -500

[State 10023, Explod]
type = Explod
trigger1 = AnimElem = 9, =4
anim = 8133
id = 8133
sprpriority = 7
ontop = 1
postype = p2
pos = -10, -60
bindtime = 1
ownpal = 1

[State 10023, Explod]
type = Explod
trigger1 = AnimElem = 9, =4
anim = 3052
id = 3052
sprpriority = 6
postype = p2
pos = -10, -60
bindtime = 1
ownpal = 1

[State 10020, ES]          
type = EnvShake
trigger1 = AnimElem = 9, =4
ampl = 17
time = 32
freq = 65

[State 10025, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------
;Hyper REVERSAL START MAX
[Statedef 10006]
type = S
movetype = I
physics = N
anim = 10006
velset = 0,0
poweradd = -2000
ctrl = 0

[State 10006, SE]
type = PlaySnd
trigger1 = Time = 0
value = 700, 1;

[State 10006, SE]
type = PlaySnd
trigger1 = Time = 0
value = 3000, 1;

[State 10006,rev1]
type = ReversalDef
reversal.attr = SCA, NA,SA,HA
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
pausetime = 9,66            
hitsound = S3,6
numhits = 0
priority = 7
p1stateno = 10007

[State 10006,SE]      ;sfx di ella che parla
type = PlaySnd
trigger1 = AnimElem = 4
value = 11011, 2
volume = 180

[State 10006, AfterImage]
type = Null;AfterImage
trigger1 = AnimElem = 1
time = 999
timegap = 1
framegap = 1
length = 10

[State 10006,EnvColor]
type = EnvColor
trigger1 = Time = 1
trigger2 = AnimElem = 1
value = 248,248,248
time = 2
under = 1


[State 10006,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 4003
ID = 4003
pos = 6,-83
postype = P1
sprpriority = 4
supermove = 1
ownpal = 1
bindtime = -1

[State 10006,Explod]
type = Explod
trigger1 = AnimElem = 4 
anim = 4002
ID = 4002
pos = 6,-83
postype = P1
sprpriority = -2
supermove = 1
ownpal = 1
bindtime = -1

[State 10006, SP]
type = SuperPause
trigger1 = AnimElem = 4
pos = -5, -55
anim = -1
sound = 20, 0
unhittable = 1


[State 10006, Cancel]
type = ChangeState
trigger1 = Time = 50
value = 10002
ctrl = 0

;---------------------------------
;Hyper Reversal End
[Statedef 10002]
type = S
movetype = I
physics = N
anim = 10002
velset = 0,0
ctrl = 0

[State 10002, END]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
																										
;-----------------------------------------------------------------
;HYPER REVERSAL MAX (Ella va dietro il P2)

[Statedef 10007] 
type = S
movetype = A
physics = S
anim = 10007
velset = 0
ctrl = 0
juggle = 15
sprpriority = 7

[State 10007, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 11011, 0;

[State 10007, SP]       ;da stabilire la durata della superpausa
type = SuperPause
trigger1 = Time = 1
time = 125          
movetime = 125      
darken = 0
anim = -1
unhittable = 1

[State 3160, BGPALFX]       ;inversione colori schermo
type = BGPalFX
trigger1 = AnimElemTime(1) > 0            
time = 2
invertall = 1
value = 0
ignorehitpause = 1
scale = 1.08, 1.08

;[State 10007, BGPalFX] inversione colori
;type = BGPalFX
;trigger1 = AnimElem = 1
;time = 125
;invertall = 1

;Invunerabilita' dei primi frames
[State 10007, NotHitBy]
type = NotHitBy
trigger1 = AnimElem >= 1
value = SCA
time = 1

;fermare il tempo
[State 10007, AssertSpecial]
type = AssertSpecial
trigger1 = (GameTime%1) = 0 && roundstate = 2 && p2life > 0
flag = timerfreeze
flag2 = nomusic
flag3 = nobardisplay

;Rallentare tutti i personaggi sullo schermo
[State 10007, Slow Motion ]
type = Pause 
triggerall = (GameTime%1) = 0 && roundstate = 2 && p2life > 0 
trigger1 = time > 1
time = 1 
movetime = 1 
ignorehitpause = 1 

[State 10007, AfterImage]
type = AfterImage
trigger1 = Time = 0
trans = add     ;add1
TimeGap  = 1
FrameGap = 1
length = 60
time = 150
PalInvertall = 1
PalBright   =   -250,  -250,  -250
PalContrast =   250,250,2500
PalAdd      =   0,  0,  0
PalMul      =  1,.9,.8;.7, .6, .5

;[State 10007, Afterimage]
;type = AfterImage
;trigger1 = Time = 0
;length = 60
;PalColor = 100
;PalBright   =  100, 155,  155
;PalContrast =  100, 155, 155
;PalInvertall = 1
;TimeGap  = 1
;FrameGap = 1
;Trans = add       ;add1 per lasciare una scia nera continua, add per una scia nera classica
;time = 150

[State 10007, TargetBind]
type = TargetBind
trigger1 = time > 1
time = 1

[State 10007, END]          ;si porta dietro il p2
type = ChangeState
trigger1 = AnimTime = 0
value = 10026
ctrl = 1

;----------------------------------------------------
;-HYPER REVERSAL MAX
;Ella col movimento veloce si porta dietro il P2
[Statedef 10026]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 0
velset = 0,0
anim = 10026
ctrl = 0
sprpriority = 7

[State 10007, SE]           ;sfx flash ella che si porta dietro il p2
type = PlaySnd
trigger1 = AnimElem = 3
value = 17011, 0;

[State 10026, BGPALFX]       ;inversione colori schermo
type = BGPalFX
trigger1 = AnimElemTime(1) > 0            
time = 2
invertall = 1
value = 0
ignorehitpause = 1
scale = 1.08, 1.08

[State 10026, ES]          ;envshake forse da togliere se metti schermo nero
type = EnvShake
trigger1 = AnimElem = 1
ampl = 12
time = 15
freq = 180

[State 10026,EnvColor]
type = EnvColor
trigger1 = AnimElem = 2, =1
value = 248,248,248
time = 1
under = 1

;[State 10026, Friction]
;type = VelMul
;triggerall = P2Dist X > -40 
;trigger1 = time > 1
;x = 1.85

;[State 10020, 5]            ;cosi' attrversa il p2
;type = VelSet
;triggerall = P2Dist X > -40 
;trigger1 = AnimElem = 1, =2
;x = 13

;[State 10027, 5]
;type = VelSet
;triggerall = P2Dist X < -40 
;trigger1 = time > 0
;x = 0


[State 10026, PlayerPush]
type = PlayerPush
trigger1 = time > 1
value = 1

[State 10026, SE]
type = PlaySnd
trigger1 = Time = 1
value = 640, 0

[State 10026, SE]       
type = PlaySnd
trigger1 = AnimElem = 3
value = 11017, 0
volume = -10

[State 10026, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 50
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = add
time = 2

[State 10026, Afterimage]
type = AfterImageTime
trigger1 = time < 25
time = 2

[State 10026, Blink Color]
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,8                   ;cosi' si colora (grigio) e lascia una scia nera

[State 10026, 1]                      ;controlla che sfx e'
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 200, HitDef]
type = HitDef
trigger1 = AnimElem = 1
attr = S, HT                   
damage = 25                  
animtype = Light                 
guardflag = MA                   
hitflag = MAF                    
priority = 7, Hit                
pausetime = 0, 0                
sparkno = 0              
guard.sparkno = 0
hitonce = 1                  ;colpisce una sola persona
kill = 0
p2stateno = 10028     ;10021           ;fa andare il p2 al posfreze

[State 10007, Targetbind]   
type = TargetBind
trigger1 = Time > 0
time = 100
pos = -66,0

[State 10007, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 10027
ctrl = 1

;----------------------------------------------
;-HYPER REVERSAL MAX
;ella infila teddy e relativa esplosione
[Statedef 10027]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 0
velset = 0,0
anim = 10027
ctrl = 0
sprpriority = 7

[State 10007, SE]           ;sfx ella con orso in mano
type = PlaySnd
trigger1 = AnimElem = 1
value = 17012, 0;

[State 10007, SE]           ;sfx ella infila orso
type = PlaySnd
trigger1 = AnimElem = 34
value = 210, 2;
volume = -100

[State 10007, SE]           ;sfx ella estrae mano
type = PlaySnd
trigger1 = AnimElem = 37
value = 17005, 0;
volume = 100

[State 10007, SE]           ;sfx cuore
type = PlaySnd
trigger1 = AnimElem = 41
value = 17013, 0;

[State 10007, SE]           ;sfx esplosione
type = PlaySnd
trigger1 = AnimElem = 47
value = 3100, 0;
volume = 150

[State 10007, SE]           ;sfx esplosione2
type = PlaySnd
trigger1 = AnimElem = 47
value = 10005, 1;
volume = 150

[State 10026, Width]    ;distanza dal bordo
type = Width
trigger1 = 1
edge = 35,90

[State 10027, PlayerPush]
type = PlayerPush
trigger1 = time > 1
value = 1

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X = 0
Trigger1 = AnimElem = 1
X = 100

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X = [1,10]
Trigger1 = AnimElem = 1
X = 110

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X = [11,20]
Trigger1 = AnimElem = 1
X = 120

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X = [21,30]
Trigger1 = AnimElem = 1
X = 130

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X = [31,40]
Trigger1 = AnimElem = 1
X = 140

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X = [41,50]
Trigger1 = AnimElem = 1
X = 150

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X = [51,60]
Trigger1 = AnimElem = 1
X = 160

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X = [61,70]
Trigger1 = AnimElem = 1
X = 170

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X = [71,80]
Trigger1 = AnimElem = 1
X = 180

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X = [81,90]
Trigger1 = AnimElem = 1
X = 190

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X = [91,100]
Trigger1 = AnimElem = 1
X = 200

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X = [101,110]
Trigger1 = AnimElem = 1
X = 210

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X = [111,120]
Trigger1 = AnimElem = 1
X = 220

[State 10027, PosAdd]
type = PosAdd
triggerall = P2BodyDist X > 121
Trigger1 = AnimElem = 1
X = 255

;[State 10027, TargetBind]   ;lega p2 in modo che sia coincidente con la mano di ella
;type = TargetBind
;trigger1 = AnimElem = 1
;time = 100
;x = -40

[State 3051, BGPalFX] ;oscuramento 1
type = BGPalFX
trigger1 = Time >= 50
trigger1 = Time < 56
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 200,200,200
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 2
type = BGPalFX
trigger1 = Time >= 56
trigger1 = Time < 63
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 180,180,180
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 3
type = BGPalFX
trigger1 = Time >= 63
trigger1 = Time < 70
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 160,160,160
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 4
type = BGPalFX
trigger1 = Time >= 70
trigger1 = Time < 77
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 140,140,140
sinadd = 0,0,0,3


[State 3051, BGPalFX] ;oscuramento 5
type = BGPalFX
trigger1 = Time >= 77
trigger1 = Time < 83
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 120,120,120
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 6
type = BGPalFX
trigger1 = Time >= 83
trigger1 = Time < 90
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 100,100,100
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 7
type = BGPalFX
trigger1 = Time >= 90
trigger1 = Time < 97
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 80,80,80
sinadd = 0,0,0,3

[State 10027, BGPalFX] ;oscuramento 8
type = BGPalFX
trigger1 = Time >= 97
trigger1 = Time < 104
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 60,60,60
sinadd = 0,0,0,3


[State 10027, BGPalFX] ;oscuramento 9
type = BGPalFX
trigger1 = Time >= 104
time = 1
invertall = 1
ignorehitpause = 1
color = 0
mul = 40,40,40
sinadd = 0,0,0,3

;[State 10027, SuperPause]
;type = SuperPause
;trigger1 = Animelem = 30        ;superpausa per caricare il colpo finale
;time = 40
;movetime = 0
;anim = -1

[State 10027, AssertSpecial]
type = AssertSpecial
trigger1 = (GameTime%1) = 0 && roundstate = 2 && p2life > 0
flag = timerfreeze
flag2 = nomusic
flag3 = nobardisplay

[State 10027, BGPalFX] ;luce!
type = BGPalFX
trigger1 = Time = 0
time = 2
invertall = 1
ignorehitpause = 1
color = 0
mul = 200,200,200
sinadd = 0,0,0,3

[State 10027, BGPalFX]  ;buio!
type = BGPalFX
trigger1 = Time = 2      ;Animelem = 1, =3
time = 20
invertall = 1
ignorehitpause = 1
color = 0
mul = 40,40,40
sinadd = 0,0,0,3

[State 10027, BGPALFX]       ;inversione colori schermo
type = BGPalFX
trigger1 = Time = 22            
time = 28
invertall = 1
value = 0
ignorehitpause = 1
scale = 1.08, 1.08;

[State 10027, Explod]            ;explod che va sull'orsetto
type = Explod
trigger1 = AnimElem = 1, =3
anim = 8260
ID = 8260
pos = 50, -72
postype = p1
facing = 1
bindtime = -1
vel = 0, 0
supermove = 1
supermovetime = 9999
sprpriority = -5
under = 1
scale = 1, 1

[State 10027, Explod]            ;explod che va sull'orsetto
type = Explod
trigger1 = AnimElem = 1, =20
anim = 8270
ID = 8270
pos = 50, -72
postype = p1
facing = 1
bindtime = -1
ontop = 1
vel = 0, 0
supermove = 1
supermovetime = 9999
sprpriority = 7
ontop = 1
scale = 1, 1

;[State 10027, ES]
;type = EnvShake
;trigger1 = AnimElem = 1, =33
;ampl = 10
;time = 12
;freq = 190

[State 10027, TargetState]   ;subimento p2
type = TargetState
trigger1 = AnimElem = 34
value = 10029

[State 10027, ES]
type = EnvShake
trigger1 = AnimElem = 34
ampl = 14
time = 19
freq = 160

[State 10027, Explod]
type = Explod
trigger1 = AnimElem = 34 
anim = 3052
id = 3052
sprpriority = 6
postype = p1
pos = -50, -60
bindtime = 1
ownpal = 1

[State 10027, Explod]
type = Explod
trigger1 = AnimElem = 34 
anim = 3052
id = 3052
sprpriority = -3
under = 1
postype = p1
pos = -50, -60
facing = -1
bindtime = 1
ownpal = 1

[State 10027, Explod]
type = Explod
trigger1 = AnimElem = 37
anim = 8134
id = 8134
sprpriority = 7
postype = p1
pos = -48, -55
facing = -1
bindtime = 1
ownpal = 1

[State 10027, Explod]
type = Explod
trigger1 = AnimElem = 37
anim = 8001  
id = 8001
sprpriority = 7
postype = p1
pos = -48, -60
bindtime = 1
ownpal = 1
ontop = 1
;scale =.5,.5

[State 10027, ES]
type = EnvShake
trigger1 = AnimElem = 37
ampl = 10
time = 12
freq = 190

[State 10027, Explod]       ; i numerini
type = Explod
trigger1 = AnimElem = 40
anim = 8143
id = 8143 
sprpriority = 7
ontop = 1
postype = left
pos = 15, 80
bindtime = -1
ownpal = 1
ontop = 1
supermovetime = 9999

[State 3160, EnvColor]
type = EnvColor
trigger1 = AnimElem = 41
time = 1
value = 160,160,160
ignorehitpause = 1
;under = 1

[State 10027, ES]
type = EnvShake
trigger1 = AnimElem = 41
ampl = 10
time = 10
freq = 190

[State 3160, EnvColor]
type = EnvColor
trigger1 = AnimElem = 43
time = 1
value = 200,200,200
ignorehitpause = 1
;under = 1


[State 10027, ES]
type = EnvShake
trigger1 = AnimElem = 43
ampl = 14
time = 12
freq = 190

[State 3160, EnvColor]
type = EnvColor
trigger1 = AnimElem = 45
time = 4
value = 255,255,255
ignorehitpause = 1
;under = 1


[State 10027, ES]
type = EnvShake
trigger1 = AnimElem = 45
ampl = 18
time = 16
freq = 190

[State 3051, BGPalFX] ;oscuramento 1
type = BGPalFX
;trigger1 = AnimElem = 41, =2
trigger1 = AnimElem = 43, =2
trigger2 = AnimElem = 45, =4
time = 9
invertall = 1
ignorehitpause = 1
color = 0
mul = 180,180,180
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 2
type = BGPalFX
;trigger1 = AnimElem = 41, =11
;trigger2 = AnimElem = 43, =11
trigger1 = AnimElem = 45, =13
time = 9
invertall = 1
ignorehitpause = 1
color = 0
mul = 130,130,130
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 3
type = BGPalFX
;trigger1 = AnimElem = 41, =20
trigger1 = AnimElem = 43, =20
trigger2 = AnimElem = 45, =22
time = 9
invertall = 1
ignorehitpause = 1
color = 0
mul = 80,80,80
sinadd = 0,0,0,3

[State 3051, BGPalFX] ;oscuramento 4
type = BGPalFX
;trigger1 = AnimElem = 41, =29
;trigger2 = AnimElem = 43, =29
trigger1 = AnimElem = 45, =31
time = 11
invertall = 1
ignorehitpause = 1
color = 0
mul = 40,40,40
sinadd = 0,0,0,3

[State 10027, TS]
type = TargetState
trigger1 = AnimElem = 46, =5
value = 10030

[State 10027, esplosione finale MAX]
type = HitDef
trigger1 = AnimElem = 47
attr = S, HA
hitflag = MAF
animtype  = Up               ;Make p2 use "Up" type animation on hit
damage    = 530
getpower  = 0
priority  = 7
pausetime = 5,5
hitsound   = S10005,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -.3,-92    ;quanto si sposta e va in aria dopo il pugnone
guard.velocity = -11
air.type = Low	
air.velocity = -.3,-92       
airguard.velocity = -4.5,-5
envshake.time = 30           ;Parameters for shaking the screen on hit (25)
envshake.ampl = 17           
envshake.freq = 200
hitonce = 1         
fall = 1
fall.recover = 0             ;Prevent p2 from recovering
fall.damage = 50             ;p2 will take 70 damage on hitting the ground
fall.envshake.ampl = 6       ;Parameters for shaking the screen on fall
fall.envshake.freq = 178
fall.envshake.time = 15
yaccel = .8                  ;Accelerate p2 downwards rapidly
palfx.time = 250
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 10027, Explod]
type = Explod
trigger1 = AnimElem = 47
anim = 8250  
id = 8250
sprpriority = 7
postype = p1
pos = -50, 0
bindtime = 1
ownpal = 1
ontop = 1

[State 10027, Explod]    ; Esplosione MAX
type = Explod
trigger1 = AnimElem = 47
anim = 8105
ID = 8105
postype = left
pos = 160,245
scale = 1.08,1.08
facing = facing
bindtime = -1
under = 1
;removetime = 40
sprpriority = -3
ownpal = 1

[State 10029, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 8230  
id = 8230
sprpriority = 7
facing = -1
postype = p2
pos = 25, -95
bindtime = 1
ownpal = 1
ontop = 1

[State 10027, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------
;hyper rev max
;subimento p2 dopo il movimento veloce di ella
[Statedef 10028]
type    = S
movetype= H
physics = N
velset = 0,0

[State 10028, Width]    ;distanza dal bordo del p2
type = Width
trigger1 = BackEdgeBodyDist < 40
edge = 0,125

[State 10028, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 10028, 1]
type = PosFreeze
Trigger1 = Time > 0
value = 1

[State 10028, 1]
type = Posset
Trigger1 = 1
Y = 0

[State 10028, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 10028

;-------------------------
;hyper rev max
;subimento p2 con teddy infilato dentro
[Statedef 10029]
type    = S
movetype= H
physics = N
velset = 0,0

[State 10029, 1]
type = Posset
Trigger1 = 1
Y = 0

[State 10023, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 10029

[State 10020, ES]          
type = EnvShake
trigger1 = AnimElem = 6, =3
ampl = 4
time = 8
freq = 100


;-----------------------
p2 subisce l'uppercut esplosivo dell'orsetto
[Statedef 10030]
type    = S
movetype= H
physics = N
velset = 0,0

[State 10030,1]	
type = ChangeAnim2
Trigger1 = Time = 0
value = 10030

[State 10023, 8]
type = SelfState
Trigger1 = AnimTime = 0
value = 5000         

;------------------------------------------------- 
;-reversal al colpi stand e bassi
[Statedef 10008]
type = S
movetype = I
physics = N
anim = 10001
velset = 0,0
poweradd = 53
ctrl = 0

[State 10008,1]
type = ReversalDef
reversal.attr = SC, NA,SA,HA   
trigger1 = AnimElemTime(5) >= 0
trigger1 = AnimElemTime(16) <= 7
pausetime = 9,65            
;sparkno = S8002
;sparkxy = -35, -65
hitsound = S3,6
numhits = 0
priority = 7, Hit
p1stateno = 11000          ;vai al calcio rotante

[State 10008, Cancel]
type = ChangeState
trigger1 = AnimTime = 0
value = 10002
ctrl = 0

;------------------------------------------------------
;Calcio rotante (a seguito della counter)
[Statedef 11000]
type    = S
movetype= A
physics = S
poweradd= 100
velset = 0,0
juggle  = 6
anim = 11000
ctrl = 0
sprpriority = 2

[State 10010, SE]      ;Yah!    
type = PlaySnd
trigger1 = AnimElem = 6
value = 17014, 0
volume = 255

[State 11000, HitDef]
type = HitDef
trigger1 = AnimElem = 9
attr = S, SA
animtype = Hard
damage    = 165, 18
getpower  = 75
priority  = 7
guardflag = MA
pausetime = 24,24
sparkno = S8018
guard.sparkno = S8060
sparkxy = 10, -45
hitsound   = S11001, 0
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -22,0
guard.velocity = -7
air.velocity = -8,0
airguard.velocity = -5,0
givepower = 24,10
fall = 1
yaccel = .5
mindist = 50,-55
maxdist = 100,-10
envshake.time = 16
envshake.ampl = -6
envshake.freq = 90

[State 11000, PA]
type = VelAdd
trigger1 = P2bodydist X < 30
X = -1.2

[State 11000, polverone]        ;polverone per terra
type = Explod
trigger1 = AnimElem = 1 
anim = 8120  
postype = p1
pos = 2,              
supermove = 1
ontop = 1
sprpriority = 3
ownpal = 1
shadow = -1
vel = -1.5
scale = .5, .5
pausemovetime = 9999


[State 11000, polverone]        ;polverone per terra (opposto)
type = Explod
trigger1 = AnimElem = 1
anim = 8120  
postype = p1
pos = -2,                 
supermove = 1
ontop = 1
sprpriority = 3
facing = -1
ownpal = 1
shadow = -1
vel = 1.5
scale = .5, .5
pausemovetime = 9999

[State 11000, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 50
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 15

[State 11000, Afterimage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 11000, Blink Color]
type = PalFX
trigger1 = Time = 0
time = 10
sinadd = 50,50,50,8                   ;cosi' si colora (grigio) e lascia una scia nera

[State 11000, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
;TELEPORTINO
[Statedef 10010]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 100
velset = 0,0
anim = 10010
ctrl = 0
sprpriority = 2

[State 19910, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 10010, SE]   
type = PlaySnd
trigger1 = AnimElem = 4
value = 3000, 2

[State 10010, Friction]
type = VelMul
trigger1 = time > 15
trigger1 = time < 25
x = 1.85

[State 10010, PlayerPush]
type = PlayerPush
trigger1 = time > 16
trigger1 = time < 32
value = 1

[State 10010, SE]
type = PlaySnd
trigger1 = Time = 1
value = 640, 0
volume = -130

[State 10010, SE]       
type = PlaySnd
trigger1 = AnimElem = 3
value = 11017, 0
volume = -10

[State 10010, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 50
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 2

[State 10010, Afterimage]
type = AfterImageTime
trigger1 = time < 25
;trigger1 = AnimElemTime(6) < 5
time = 2

[State 10010, Blink Color]
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,8                   ;cosi' si colora (grigio) e lascia una scia nera

[State 10010, 1]                      ;controlla che sfx e'
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 10010, 5]
type = VelSet
trigger1 = AnimElem = 9
x = 13


[State 10010, Explod]
type = Explod
trigger1 = AnimElem = 9
anim = 8009
id = 8009
sprpriority = 1
pos = 0,12
bindtime = 1
supermovetime = -1
ownpal = 1

[State 10010, 6]
type = Turn
trigger1 = AnimElem = 14
;trigger1 = AnimTime = 0


[State 10010, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
;TELEPORTINO Forte (con relativo colpo) 
[Statedef 10050]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= 100
velset = 0,0
anim = 10050
ctrl = 0
sprpriority = 2

[State 10050, Nothitby]    
type = NotHitBy
trigger1 = time < 22
value = SCA

[State 10050, Friction]
type = VelAdd
trigger1 = AnimElem = 20
;trigger1 = time > 53
;trigger1 = time < 56
x = 3.85

[State 10010, SE]
type = PlaySnd
trigger1 = Time = 1
value = 640, 0
volume = -170

[State 10010, SE]    ; ehya!
type = PlaySnd
trigger1 = AnimElem = 17
value = 17020, 0

[State 10010, SE]    ; sibilo
type = PlaySnd
trigger1 = AnimElem = 21
value = 17021, 0
volume = 100

[State 10050, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 50
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 2

[State 10010, Afterimage]
type = AfterImageTime
trigger1 = time < 60
time = 2

[State 10050, Blink Color]
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,8                   ;cosi' si colora (grigio) e lascia una scia nera

[State 10050, 1]                      ;controlla che sfx e'
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 10050, 5]
type = VelSet
trigger1 = AnimElem = 20
;trigger1 = time > 53
;trigger1 = time < 56
x = 25

[State 10050, Explod]
type = Explod
trigger1 = AnimElem = 20
anim = 8009
id = 8009
sprpriority = 1
pos = 0,12
bindtime = 1
supermovetime = -1
ownpal = 1

[State 10050, Hit]
type = HitDef
trigger1 = AnimElem = 22  
persistent = 0
attr = S, SA
animtype = Hard
damage = 50,15
getpower = 58
sparkno = S8001
;guard.sparkno = S8050
sparkxy = -40,-30
priority = 4
guardflag = M
yaccel = 0.5
sparkxy = -10,-55
pausetime = 0,0
hitsound = S200, 2
guardsound = S150,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2.2,-14
guard.velocity = -3.5
air.velocity = -2.2,-14
air.animtype = Back
fall = 1
fall.recover = 0

[State 10050, Explod]
type = Explod
trigger1 = AnimElem = 22
anim = 8131
id = 8131
sprpriority = 1
pos = -18,-115
bindtime = 1
supermovetime = -1
ownpal = 1

[State 10050, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------
;ProjREVERSAL START
[Statedef 10090]
type = S
movetype = A
physics = N
anim = 10090
velset = 0,0
poweradd = 53
ctrl = 0

[State 10090, ProjRev]
type = ReversalDef
reversal.attr = SCA, AP
trigger1 = AnimElem = 2
pausetime = 0,0            
hitsound = S3,6
numhits = 0
priority = 9999
p1stateno = 10091

[State 10090, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, NP, SP, HP
stateno = 10091
time = 50
slot = 0

[State 10090, Changestate]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;Ti Restituisco il favore
[Statedef 10091]
type = S
movetype = A
physics = N
anim = 10091
poweradd = 50
velset = 0,0
ctrl = 0

;[State 10091, SE]            ;sfx del suo parlato (da mettere)
;type = PlaySnd
;trigger1 = AnimElem = 2
;value = 10101, 0

[State 10091, Proj]
type = Projectile
trigger1 = AnimElem = 4
attr = S, SP
projID = 8127
projanim = 8127
projshadow = 68,68,68
projsprpriority = 1
projpriority = 9999
projremove = 0
projremovetime = 47
offset = 50,-65
velocity = 2
ownpal = 1
damage = 260,55
animtype = Hard
hitflag = MFADP
guardflag = MA
pausetime = 0,14
sparkno = 1000
guard.sparkno = S8060
hitsound = s1100,2
guardsound = S200,3
ground.type = high
ground.slidetime = 14
ground.hittime  = 19
air.hittime = 100
ground.velocity = -4,-6
air.velocity = -4,-4
down.velocity = -4
palfx.time = 45
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
fall = 1
getpower = 40,40
givepower = 30,30

[State 10091, Explod]       
type = Explod
trigger1 = ProjHit8127 = 1
anim = 3105
postype = p2
pos = 20,-45
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 10091, SE]
type = PlaySnd
trigger1 = ProjHit8127 = 1
value = 1100,2

[State 10091, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 50
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 2

[State 10091, Afterimage]
type = AfterImageTime
trigger1 = Time = 0
time = 2

[State 10091, Blink Color]           
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,3

[State 10091, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------
;PRESA SPECIALE
[Statedef 10100]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 10100
poweradd = 10
sprpriority = 2

[State 10100, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, ST          
hitflag = M-          
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
hitsound   = s17010,0   ;metti rumore motosega
sprpriority = 1
p1stateno = 10101      
p2stateno = 10102            
fall = 1 

[State 10101, SE]       ;papera 2!
type = PlaySnd
trigger1 = AnimElem = 3
value = 17009, 0
volume = 215

[State 10101, Explod]        ;punto esclamativo
type = Explod
trigger1 = AnimElem = 5
anim = 8020
id = 8020
postype = p1
sprpriority = 5
pos = 26,-157
scale = .5,.5
bindtime = 1
supermovetime = -1
removeongethit = 1
         

[State 10100, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------
;Presa Speciale - p1 solleva e colpisce
[Statedef 10101]
type    = S
movetype= A
physics = N
anim = 10101
poweradd = 60


[State 10101, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 1020, Afterimage]   ;la solita scia
type = AfterImage
trigger1 = time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 108

[State 10101, Bind 1]        ;il p2 davanti a ella
type = TargetBind
trigger1 = AnimElem = 1
trigger1 = AnimElem = 2
trigger1 = AnimElem = 3
trigger1 = AnimElem = 4
pos = 120, 0

[State 10101, Bind 2]        ;il p2 subisce innalzato dalla motosega
type = TargetBind
trigger1 = AnimElem = 5
pos = 50, -10

[State 10101, Explod]        ;esplosione di colpimento
type = Explod
trigger1 = AnimElem = 4
anim = 8018
id = 8018
postype = p2
sprpriority = 5
pos = 0,-70
bindtime = 1
supermovetime = -1
removeongethit = 1

;[State 10101, SE]       ;Kazani!
;type = PlaySnd
;trigger1 = AnimElem = 2
;value = 10101,0
;volume = 215

[State 10101, Explod]        ;la polvere a terra
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
trigger5 = AnimElem = 22
trigger6 = AnimElem = 26
anim = 8003
id = 8003
sprpriority = 5
pos = -20,10
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 10101, Explod]        ;la polvere a terra opposto
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
trigger5 = AnimElem = 22
trigger6 = AnimElem = 26
anim = 8003
id = 8003
sprpriority = 5
pos = 20,10
bindtime = -1
supermovetime = -1
removeongethit = 1
facing = -1

[State 10101, Throw]      ;il p2 impalato dalla motosega
type = TargetState
trigger1 = AnimElemTime(6) >= 0
trigger1 = AnimElemTime(29) <= 2
value = 10104

[State 10101, Bind]
type = TargetBind
trigger1 = AnimElem = 6
trigger2 = AnimElem = 8
trigger3 = AnimElem = 10
trigger4 = AnimElem = 12
trigger5 = AnimElem = 14
trigger6 = AnimElem = 16
trigger7 = AnimElem = 18
trigger8 = AnimElem = 20
trigger9 = AnimElem = 22
trigger10 = AnimElem = 24
trigger11 = AnimElem = 26
trigger12 = AnimElem = 28
pos = 40, -115

[State 10101, Bind]
type = TargetBind
trigger1 = AnimElem = 7
trigger2 = AnimElem = 9
trigger3 = AnimElem = 11
trigger4 = AnimElem = 13
trigger5 = AnimElem = 15
trigger6 = AnimElem = 17
trigger7 = AnimElem = 19
trigger8 = AnimElem = 21
trigger9 = AnimElem = 23
trigger10 = AnimElem = 25
trigger11 = AnimElem = 27
trigger12 = AnimElem = 29
pos = 40, -113

[State 10101, TargetLifeAdd]      ;il p2 perde energiga
type = TargetLifeAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 16
trigger5 = AnimElem = 20
trigger6 = AnimElem = 22
trigger7 = AnimElem = 24
trigger8 = AnimElem = 26
value = -10
kill = 0
absolute = 1

[State 10101, Explod]        ;sangue violento
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 8
trigger3 = AnimElem = 10
trigger4 = AnimElem = 12
trigger5 = AnimElem = 14
trigger6 = AnimElem = 16
trigger7 = AnimElem = 18
trigger8 = AnimElem = 20
trigger9 = AnimElem = 22
trigger10 = AnimElem = 24
trigger11 = AnimElem = 26
trigger12 = AnimElem = 28
anim = 8001
id = 8001
postype = p2
sprpriority = 5
pos = 0,15
bindtime = 1
random = 30,10
supermovetime = -1
removeongethit = 1

[State 10101, Explod]        ;sangue piccolo
type = Explod
trigger1 = AnimElem = 7
trigger2 = AnimElem = 9
trigger3 = AnimElem = 11
trigger4 = AnimElem = 13
trigger5 = AnimElem = 15
trigger6 = AnimElem = 17
trigger7 = AnimElem = 19
trigger8 = AnimElem = 21
trigger9 = AnimElem = 23
trigger10 = AnimElem = 25
trigger11 = AnimElem = 27
anim = 8000
id = 8000
postype = p2
sprpriority = 5
pos = -10,0
bindtime = 1
random = 30,10
supermovetime = -1
removeongethit = 1

[State 10101, Throw]      ;il p2 rilasciato dalla motosega
type = TargetState
trigger1 = AnimElem = 30
value = 11002

[State 10101, Bind 5]       ;serve per riallineare
type = TargetBind
trigger1 = AnimElem = 30
pos = 60, -40


[State 10101, 3]
type = EnvShake
trigger1 = AnimElem = 30
time = 15
ampl = -8
freq = 90

;[State 10091, SE]
;type = PlaySnd
;trigger1 = Time = 15
;value = 200,2
;volume = -60

;[State 10091, SE]
;type = PlaySnd
;trigger1 = AnimElem = 10
;value = 3100,0

[State 10101, HitDef]
type = Hitdef
trigger1 = AnimElem = 31
anim = 10101
attr = A, SA
animtype  = diagup
air.animtype = diagup
fall.animtype = diagup
getpower = 0,0
givepower = 20,10
damage    = 100,25
guardflag = MA
hitflag = MAF
pausetime = 0,5        ;0,5
;sparkno = S3105 
guard.sparkno = S8050
;sparkxy = 35,-100          
hitsound   = S210,2
guardsound =  6,0        
ground.type = Low      ;High
air.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -12.5,1      ;-6,0.5      
airguard.velocity = -3.5      
air.velocity = -15.5, -3    ;-2.5,0.5
air.juggle = 3
fall = 1
fall.recover = 0
fall.envshake.time = 15
fall.envshake.ampl = -4
fall.envshake.freq = 90

[State 10101, Throw]      ;fa andare il p2 allo state in cui volera' dopo esser stato colpito
type = TargetState
trigger1 = AnimElem = 31
value = 10103

[State 10101, Explod]        ;Hit a estrazione motosega
type = Explod
trigger1 = Time = 70
anim = 8018
id = 8018
postype = p1
sprpriority = 7
pos = 80,-100
bindtime = 1
ontop = 1
supermovetime = -1
removeongethit = 1
ownpal = 1

[State 10101, Explod]        ;esplosione sangue ad estrazione motosega
type = Explod
trigger1 = Time = 73
anim = 8102
id = 8102
postype = p1
sprpriority = 5
pos = 80,-100
bindtime = 1
supermovetime = -1
removeongethit = 1
ownpal = 1

[State 11002, Explod]        ;esplosione sangue che segue la caduta del p2
type = Explod
trigger1 = Time > 75
trigger1 = Time < 105
anim = 8001
id = 8001
postype = p2
sprpriority = 5
pos = 0,-60
random = 25,15
bindtime = 1
supermovetime = -1
removeongethit = 1
ownpal = 1

[State 10101, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------
;lo state in cui va il p2 se preso
[Statedef 10102]
type    = S      ;A
movetype= H
physics = S      ;N
velset = 0,0
ctrl = 0

[State 10101, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 10102, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 10102

;[State 2302, 1]
;type = ScreenBound
;Trigger1 = Time >= 0
;value = 1
;movecamera = 0,0

;[State 4003, PosAdd]
;type = PosAdd
;trigger1 = Time = 0
;x = 30
;y = -52

;-----------------------------------------------------
;il p2 vola dopo esser stato colpito
[Statedef 10103]
type    = A
movetype= H
physics = N
velset = 0,0      ;2.8,-7 cordinate del movimento       
poweradd = 40

[State 10102, 1]
type = SelfState
Trigger1 = Time = 0
value = 5030           ;5010

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = -.4

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

;-----------------------------------------------------
;lo state in cui va il p2 se impalato dalla motosega
[Statedef 10104]
type    = S      ;A
movetype= H
physics = S      ;N
velset = 0,0
ctrl = 0

[State 10104, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 10104, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 10104

;-----------------------------------------------------
;lo state che serve al p2 per essere riallineato
[Statedef 11002]
type    = S      ;A
movetype= H
physics = S      ;N
velset = 0,0
ctrl = 0

[State 10101, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 10102, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 11002

;------------------------------------------------------
;-Slap Happy (debole)
[Statedef 12000]
type = S
movetype= A
physics = S
juggle = 1
anim = 12000
velset = 0,0
poweradd = 20
ctrl = 0

[State 12000, 1]
type = HitDef
trigger1 = AnimElem = 3 || AnimElem = 15 || AnimElem = 27
attr = S, SA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = back
damage = 13,4
sparkno = S8018
guard.sparkno = S8050
sparkxy = -10,-75
hitsound   = S200,2
guardsound = 6, 0
ground.type = high
priority = 7, Hit
pausetime = 5,15
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -4
air.velocity = -3.5,-3
guard.velocity = -4
guard.pausetime = 11,11
guard.slidetime = 10
guard.hittime = 10
guard.ctrltime = 10
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -4
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 12000, 2]
type = HitDef
trigger1 = AnimElem = 10 || AnimElem = 22 || AnimElem = 34
attr = S, SA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = back
damage = 13,4
sparkno = S8018
guard.sparkno = S8050
sparkxy = -10,-75
hitsound   = S200,2
guardsound = 6, 0
ground.type = low
priority = 7, Hit
pausetime = 5,15
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -4
air.velocity = -3.5,-3
guard.velocity = -4
guard.pausetime = 11,11
guard.slidetime = 10
guard.hittime = 10
guard.ctrltime = 10
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -4
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1


[State 12000, SE]         ;sfx vento
type = PlaySnd
trigger1 = AnimElem = 2 || AnimElem = 8 || AnimElem = 13 || AnimElem = 20 || AnimElem = 25 || AnimElem = 32
value = 41, 1;SE
volume = -80

[State 12000, Afterimage]
type = AfterImage
trigger1 = AnimElem = 1
length = 8                  
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub                     
time = 2

[State 12000, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(36) < 2
time = 2

[State 12000, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------
;-Slap Happy (forte)
[Statedef 12001]
type = S
movetype= A
physics = S
juggle = 1
anim = 12001
velset = 0,0
poweradd = 22
ctrl = 0

[State 12001, 1]
type = HitDef
trigger1 = AnimElem = 3 || AnimElem = 15 || AnimElem = 27 || AnimElem = 39 || AnimElem = 51
attr = S, SA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = back
damage = 11,4
sparkno = S8018
guard.sparkno = S8050
sparkxy = -10,-75
hitsound   = S200,2
guardsound = 6, 0
ground.type = high
priority = 7, Hit
pausetime = 5,15
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -4
air.velocity = -3.5,-3
guard.velocity = -4
guard.pausetime = 11,11
guard.slidetime = 10
guard.hittime = 10
guard.ctrltime = 10
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -4
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 12001, 2]
type = HitDef
trigger1 = AnimElem = 10 || AnimElem = 22 || AnimElem = 34 || AnimElem = 46 || AnimElem = 57
attr = S, SA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = back
damage = 11,4
sparkno = S8018
guard.sparkno = S8050
sparkxy = -10,-75
hitsound   = S200,2
guardsound = 6, 0
ground.type = low
priority = 7, Hit
pausetime = 5,15
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -4
air.velocity = -3.5,-3
guard.velocity = -4
guard.pausetime = 11,11
guard.slidetime = 10
guard.hittime = 10
guard.ctrltime = 10
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -4
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1


[State 12001, SE]         ;sfx vento
type = PlaySnd
trigger1 = AnimElem = 2 || AnimElem = 8 || AnimElem = 13 || AnimElem = 20 || AnimElem = 25 || AnimElem = 32 || AnimElem = 39 || AnimElem = 46 || AnimElem = 51 || AnimElem = 57
value = 41, 1;SE
volume = -80

[State 12001, Afterimage]
type = AfterImage
trigger1 = AnimElem = 1
length = 8                 
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub                     
time = 2

[State 12001, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(60) < 2
time = 2

[State 12000, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===================================================================
;-Insistiscici  (HYPER PRESA a UNO)
[Statedef 16000]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 16000
poweradd = -1000
sprpriority = 2

[State 16000, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, HT          
hitflag = M-         
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
;hitsound   = s17010,0
sprpriority = 1
p1stateno = 16001     
p2stateno = 16003            
fall = 1

[State 16000, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = AnimElem = 1
time = 15
sinadd = 50,50,50,3

[State 16000, SP]
type = SuperPause
trigger1 = AnimElem = 1
time = 24
anim = -1
unhittable = 1
darken = 1

[State 16000, Explod]
type = Explod
trigger1 =  AnimElem = 1      
anim = 4000
pos = 10, -70
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 16000, Explod]
type = Explod
trigger1 = AnimElem = 1   
anim = 4001
pos = 10, -70
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
under = 1

[State 16000, SE]         ;sfx della super a uno
type = PlaySnd
trigger1 = AnimElem = 1
value = 700, 1;SE

[State 16000, SE]         ;fantasma
type = PlaySnd
trigger1 = AnimElem = 1
value = 17029, 0;SE
volume = 250

[State 16000, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------
;Insistiscici P1 spaventa il p2
[Statedef 16001]
type    = S
movetype= A
physics = N
anim = 16001
poweradd = 60
ctrl = 0

[State 16001, SE]         ;fantasma
type = PlaySnd
trigger1 = AnimElem = 1
value = 17029, 0;SE
volume = 250

[State 16001, Width]    ;distanza dal bordo
type = Width
trigger1 = 1
edge = 100,10

[State 16000, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 16000, Explod]     ;esclamativo
type = Explod
trigger1 = AnimElem = 1
anim = 8020
sprpriority = 7
postype = p2
pos = -2,-160
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
facing = -1
scale =.5,.5

[State 16001, SE]         ;esclamativo
type = PlaySnd
trigger1 = AnimElem = 1
value = 3165, 0;SE

;[State 1020, Afterimage]   ;la solita scia
;type = AfterImage
;trigger1 = time = 0
;length = 13
;PalBright   =  30, 30,  0
;PalContrast =  70, 70, 20
;TimeGap  = 1
;FrameGap = 2
;Trans = sub
;time = 108

[State 10101, Bind 1]        ;il p2 davanti a ella
type = TargetBind
trigger1 = 1
pos = 70, 0

[State 16000, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 16002
ctrl = 1

;----------------------------------------------------
;Insistiscici P1 da i colpi di spada
[Statedef 16002]
type    = S
movetype= A
physics = N
anim = 16002
poweradd = 10
ctrl = 0

[State 16000, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 16000, Afterimage]   ;la solita scia
type = AfterImage
trigger1 = time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 380

[State 10101, Bind 1]        ;il p2 davanti a ella
type = TargetBind
trigger1 = AnimElem = 1
pos = 70, 0

[State 10101, Bind 1]        ;il p2 davanti a ella
type = TargetBind
trigger1 = AnimElem = 23
pos = 60, 0


[State 10101, Bind 1]        ;il p2 davanti a ella
type = TargetBind
trigger1 = AnimElem = 31
pos = 45, 0

[State 10101, State 1]        ;fa andare il p2 al secondo subimento
type = TargetState
trigger1 = AnimElem = 13
value = 16004


[State 10101, State 2]        ;fa andare il p2 al terzo finale subimento
type = TargetState
trigger1 = AnimElem = 31
value = 16005

[State 16000, SE]
type = EnvShake
trigger1 = Animelem = 13
trigger2 = Animelem = 23
ampl = 6
time = 12
freq = 150

[State 16000, 3]
type = EnvShake
trigger1 = AnimElem = 31
ampl = 8
time = 15
freq = 185

[State 16000, 4]
type = PosAdd
trigger1 = AnimElem = 29
x = 5

[State 16000, Explod]
type = Explod
trigger1 = AnimElem = 13
anim = 8304
sprpriority = 6
postype = p1
pos = 0,-80
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 16000, Explod]
type = Explod
trigger1 = AnimElem = 23
anim = 8303
sprpriority = 6
postype = p1
pos = 5,-45
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 16000, Explod]
type = Explod
trigger1 = AnimElem = 26, =15
anim = 8302
sprpriority = 7
postype = p1
pos = -2,-117
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 16000, Explod]
type = Explod
trigger1 = AnimElem = 13
anim = 8141
sprpriority = 7
postype = p2
pos = -35,-30
ontop = 1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 16000, Explod]
type = Explod
trigger1 = AnimElem = 23
anim = 8141
sprpriority = 7
postype = p2
pos = -35,-40
ontop = 1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 16000, Explod]
type = Explod
trigger1 = AnimElem = 31
anim = 8141
sprpriority = 7
postype = p1
pos = 35,-60
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 16000, Explod]          ;sangue 1
type = Explod
trigger1 = AnimElem = 13
anim = 8135
sprpriority = 7
postype = p2
pos = 5,-70
vfacing = -1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 16001, SE]             ;vento
type = PlaySnd
trigger1 = AnimElem = 12
value = 41, 1;SE
volume = -100

[State 16001, SE]             ;colpo di spada 1
type = PlaySnd
trigger1 = AnimElem = 13
value = 17004, 1;SE
volume = 250

[State 16000, Explod]         ;sangue 2
type = Explod
trigger1 = AnimElem = 23
anim = 8135
sprpriority = 7
postype = p2
pos = -5,-70
facing = -1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 16001, SE]             ;vento 2
type = PlaySnd
trigger1 = AnimElem = 22
value = 41, 1;SE
volume = -100

[State 16001, SE]             ;colpo di spada 2
type = PlaySnd
trigger1 = AnimElem = 23
value = 17005, 0;SE
volume = 250

[State 16001, SE]             ;scintilla spada
type = PlaySnd
trigger1 = AnimElem = 26, =15
value = 17021, 0;SE
;volume = 250

[State 16000, Explod]         ;sangue 3
type = Explod
trigger1 = AnimElem = 31
anim = 8125
sprpriority = 7
postype = p1
pos = 35,-60
vfacing = -1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 16001, SE]             ;vento finale
type = PlaySnd
trigger1 = AnimElem = 28
value = 41, 1;SE
volume = -100

[State 16001, SE]             ;colpo di spada finale
type = PlaySnd
trigger1 = AnimElem = 31
value = 210, 2                ;value = 17005, 0;
;volume = 255

[State 16000, Explod]         ;sangue piccolo a estrazione
type = Explod
trigger1 = AnimElem = 32
anim = 8001
sprpriority = 7
postype = p1
pos = 35,-60
;facing = -1
vfacing = -1
ontop = 1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 16000, Explod]         ;sangue 2 a estrazione
type = Explod
trigger1 = AnimElem = 33
anim = 8135
sprpriority = 7
postype = p2
pos = 5,-60
facing = -1
vfacing = -1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 16000, 3]
type = EnvShake
trigger1 = AnimElem = 33
ampl = 10
time = 10
freq = 185

[State 16001, SE]             ;estrazione spada
type = PlaySnd
trigger1 = AnimElem = 33
value = 17004,1
volume = 255

[State 16001, SE]             ;esclamativo sangue
type = PlaySnd
trigger1 = AnimElem = 43
value = 3165, 0;SE
voluem = 50

[State 16001, SE]             ;esplosione sangue
type = PlaySnd
trigger1 = AnimElem = 43
value = 17005,0
volume = 255

[State 16000, Explod]         ;esplosione sangue 
type = Explod
trigger1 = AnimElem = 43
anim = 8133
sprpriority = 7
postype = p2
pos = -10,-60
facing = -1
ontop = 1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 16000, 3]
type = EnvColor
trigger1 = AnimElem = 43
value = 0,0,0
time = 10
under = 1

[State 16000, 3]
type = EnvShake
trigger1 = AnimElem = 43
ampl = 18
time = 18
freq = 100

[State 16000, Life 1]        
type = TargetLifeAdd
trigger1 = AnimElem = 13
trigger2 = AnimElem = 23
value = -100
kill = 0
absolute = 1

[State 16000, Life 2]        
type = TargetLifeAdd
trigger1 = AnimElem = 30
value = -125
kill = 1
absolute = 1

[State 16002, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------
;Insistiscici state in cui va il p2 se preso (primo subimento)
[Statedef 16003]
type    = S      
movetype= H
physics = S
velset = 0,0
ctrl = 0

[State 16003, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

;[State 106, Posset]
;type = PosSet
;trigger1 = Time > 0
;y = 0
;x = 0

[State 16003, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 16003

;[State 16003, 2]
;type = SelfState
;Trigger1 = AnimTime = 0
;value = 0   

;-----------------------------------------------------
;Insistiscici state in cui va il p2 se preso (secondo subimento)
[Statedef 16004]
type    = S      
movetype= H
physics = S
velset = 0,0
ctrl = 0

[State 16003, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA


[State 16003, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 16004

;[State 16003, 2]
;type = SelfState
;Trigger1 = AnimTime = 0
;value = 0                 

;-----------------------------------------------------
;Insistiscici state in cui va il p2 se preso (terzo subimento)
[Statedef 16005]
type    = S      
movetype= H
physics = S
velset = 0,0
ctrl = 0

[State 16005, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA


[State 16005, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 16005


[State 16005, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 16006
ctrl = 0


;-----------------------------------------------------
;Insistiscici il p2 crolla per terra
[Statedef 16006]
type    = S      
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 16005, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA


[State 16005, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 16006


[State 16005, 2]
type = SelfState
Trigger1 = AnimTime = 0
value = 5110    

;------------------------------------------------------------
;-Blood Shower (HYPER PRESA a DUE)
[Statedef 17000]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 17000
poweradd = -2000
sprpriority = 2  

[State 17000, AS]           
type = AssertSpecial
trigger1 = AnimElemTime(1) > 0
flag = nojugglecheck

[State 17000, SE]   
type = PlaySnd
trigger1 = AnimElem = 1
value = 17030, 0;SE
volume = 250
      
[State 17000, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, HT          
hitflag = M-         
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
;hitsound   = s17010,0
sprpriority = 1
p1stateno = 17001     
p2stateno = 17006         
fall = 1

[State 17000, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = AnimElem = 1
time = 15
sinadd = 50,50,50,3

[State 17000, SP]
type = SuperPause
trigger1 = AnimElem = 1
time = 24
anim = -1
unhittable = 1
darken = 1

[State 3160, BGPALFX]       ;inversione colori schermo
type = BGPalFX
trigger1 = AnimElemTime(1) > 0            
time = 2
invertall = 1
value = 0
ignorehitpause = 1
scale = 1.08, 1.08

[State 17000, Explod]
type = Explod
trigger1 =  AnimElem = 1      
anim = 4002
pos = 10, -70
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 17000, Explod]
type = Explod
trigger1 = AnimElem = 1   
anim = 4003
pos = 10, -70
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
under = 1

[State 17000, SE]         ;sfx della super a 2
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000, 1;SE  

[State 17000, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------
;Blood Shower P1 spaventa il p2
[Statedef 17001]
type    = S
movetype= A
physics = N
anim = 17001
ctrl = 0

[State 17001, SE]   
type = PlaySnd
trigger1 = AnimElem = 1
value = 17030, 0;SE
volume = 250

[State 3160, BGPALFX]       ;inversione colori schermo
type = BGPalFX
trigger1 = AnimElemTime(1) > 0            
time = 2
invertall = 1
value = 0
ignorehitpause = 1
scale = 1.08, 1.08

[State 17001, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 8020
sprpriority = 7
postype = p2
pos = -2,-160
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
facing = -1
scale =.5,.5

[State 17001, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 8020
sprpriority = 7
postype = p2
pos = -12,-160
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
facing = -1
scale =.5,.5

[State 17001, Width]    ;distanza dal bordo da eliminare
type = Width
trigger1 = 1
edge = 125,10

[State 17000, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 10101, Bind 1]        ;il p2 davanti a ella
type = TargetBind
trigger1 = 1
pos = 90, 0

[State 17003, Explod]         ;cala la tendina
type = Explod
trigger1 = AnimElem = 6   
anim = 17003
ID = 17003
pos = 90, 0
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
sprpriority = 4
bindtime = 1
ownpal = 1
ignorehitpause = 1
shadow = -1

[State 17000, SE]   
type = PlaySnd
trigger1 = AnimElem = 6
value = 41, 0;SE
;volume = 250

[State 17003, Explod]         ;la tendina con acqua che scorre
type = Explod
trigger1 = time = 72
anim = 17011
ID = 17011
pos = 90, 0
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
under = 1
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 17003, Explod]         ;la tendina indietro
type = Explod
trigger1 = time = 72
anim = 17010
ID = 17004
pos = 90, 0
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
under = 1
bindtime = 1
ownpal = 1
ignorehitpause = 1
shadow = -1

[State 17000, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 17002
ctrl = 0

;--------------------------------------------
;Blood Shower P1 accoltella il p2
[Statedef 17002]
type    = S
movetype= A
physics = N
anim = 17002
ctrl = 0

[State 17000, AS]           
type = AssertSpecial
trigger1 = AnimElemTime(1) > 0
flag = nomusic
flag2 = nobardisplay 

[State 17000, SE]           ;psycho Doccia!
type = PlaySnd
trigger1 = AnimElem = 1
value = 17032, 0;SE
volume = 50

[State 3160, BGPALFX]       ;inversione colori schermo
type = BGPalFX
trigger1 = AnimElemTime(1) > 0
trigger1 = AnimElemTime(71) < 4          
time = 2
invertall = 1
value = 0
ignorehitpause = 1
scale = 1.08, 1.08

[State 17002, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 17002, Bind 1]        ;il p2 davanti a ella
type = TargetBind
trigger1 = 1
pos = 90, 0

[State 17000, SE]   
type = PlaySnd
trigger1 = AnimElem = 11
trigger2 = AnimElem = 19
trigger3 = AnimElem = 27
trigger4 = AnimElem = 35
trigger5 = AnimElem = 43
trigger6 = AnimElem = 51 
value = 210,2
volume = -50

[State 17002, Life 1]        
type = TargetLifeAdd
trigger1 = AnimElem = 11
trigger2 = AnimElem = 19
trigger3 = AnimElem = 27
trigger4 = AnimElem = 35
trigger5 = AnimElem = 43
trigger6 = AnimElem = 51 
value = -60
;ID = 17006
kill = 0
absolute = 1

[State 17002, 3]
type = EnvShake
trigger1 = AnimElem = 11
trigger2 = AnimElem = 19
trigger3 = AnimElem = 27
trigger4 = AnimElem = 35
trigger5 = AnimElem = 43
trigger6 = AnimElem = 51
ampl = 9
time = 2
freq = 150

[State 17002, Explod]         ;sangue penetrazione
type = Explod
trigger1 = AnimElem = 11
trigger2 = AnimElem = 19
trigger3 = AnimElem = 27
trigger4 = AnimElem = 35
trigger5 = AnimElem = 43
trigger6 = AnimElem = 51 
anim = 8125
pos = 55, -75
postype = p1
sprpriority = 2
supermove = 1
supermovetime = 9999
pausemovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
;shadow = -1

[State 17002, Explod]         ;sangue estrazione
type = Explod
trigger1 = AnimElem = 14
trigger2 = AnimElem = 22
trigger3 = AnimElem = 30
trigger4 = AnimElem = 38
trigger5 = AnimElem = 46
anim = 8135
pos = 59, -71
postype = p1
sprpriority = 2
supermove = 1
supermovetime = 9999
pausemovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
;shadow = -1

[State 17002, Explod]         ;sangue bottino
type = Explod
trigger1 = AnimElem = 11
trigger2 = AnimElem = 27
trigger3 = AnimElem = 43
anim = 8001
pos = 55, -75
postype = p1
sprpriority = 2
supermove = 1
supermovetime = 9999
pausemovetime = 9999
bindtime = 1
vfacing = -1
ownpal = 1
ignorehitpause = 1
;shadow = -1

[State 17002, Explod]         ;la granata
type = Explod
trigger1 = AnimElem = 67  
anim = 17004
pos = 0, 0
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
shadow = -1

[State 17000, SE]            ;granata
type = PlaySnd
trigger1 = AnimElem = 62
value = 17031, 1;SE
volume = 150

[State 17000, SE]   
type = PlaySnd
trigger1 = AnimElem = 67
value = 41, 0;SE

[State 17000, SE]   
type = PlaySnd
trigger1 = AnimElem = 70, =50
value = 3100, 0;SE
;volume = 250

[State 17000, SE]   
type = PlaySnd
trigger1 = AnimElem = 70, =50
value = 10005, 1;SE
;volume = 250

[State 17002, Explod]         ;esplosione
type = Explod
trigger1 = AnimElem = 70, =50 
anim = 8021
pos = 25, 0
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
sprpriority = 5
bindtime = 1
ownpal = 1
ignorehitpause = 1
;shadow = -1

[State 17002, Explod]         ;polverone
type = Explod
trigger1 = AnimElem = 70, =50 
anim = 8008
pos = 90, 0
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
bindtime = 1
ontop = 1
ownpal = 1
ignorehitpause = 1
;shadow = -1

[State 17002, Explod]         ;cerchio
type = Explod
trigger1 = AnimElem = 70, =50 
anim = 8007
pos = 90, -70
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
sprpriority = 6
bindtime = 1
ownpal = 1
ignorehitpause = 1
;shadow = -1

[State 17002, Explod]         ;cacchine che se ne vanno
type = Explod
trigger1 = AnimElem = 70, =50 
anim = 8104
pos = 90, -70
postype = p1
supermove = 1
supermovetime = 9999
pausemovetime = 9999
sprpriority = 4
bindtime = 1
ownpal = 1
ignorehitpause = 1
;shadow = -1

[State 3100, EnvColor]      ;piccolo flash bianco
type = EnvColor
trigger1 = AnimElem = 70, =49
time = 1
value = 255,255,255
ignorehitpause = 1

[State 3100, EnvColor]      ;piccolo flash nero
type = EnvColor
trigger1 = AnimElem = 70, =50
time = 35
value = 0,0,0
ignorehitpause = 1
under = 1

[State 16000, 3]
type = EnvShake
trigger1 = AnimElem = 70, =50
ampl = 26
time = 26
freq = 80

[State 17002, RE1]
type = RemoveExplod
Trigger1 = time = 385
ID = 17003

[State 17002, RE2]
type = RemoveExplod
Trigger1 = time = 385
ID = 17010

[State 17002, RE3]
type = RemoveExplod
Trigger1 = time = 385
ID = 17011

[State 17002, Life 2]        
type = TargetLifeAdd
trigger1 = AnimElem = 71
value = -240
;ID = 17006       ;
kill = 1
absolute = 1

[State 17002, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------
;Blood Shower il p2 subisce dietro la tendina
[Statedef 17006]
type    = S      
movetype= H
physics = N
velset = 0,0
ctrl = 0
;ID = 17006

[State 17006, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

;[State 17005, Posset]
;type = PosSet
;trigger1 = Time > 0
;y = 0
;x = 0

[State 3100, EnvColor]      ;piccolo flash nero
type = EnvColor
trigger1 = time = 40
time = 1
value = 0,0,0
ignorehitpause = 1

[State 3100, EnvColor]      ;piccolo flash bianco
type = EnvColor
trigger1 = time = 41
time = 2
value = 255,255,255
ignorehitpause = 1

[State 16000, 3]
type = EnvShake
trigger1 = time = 40
ampl = 10
time = 10
freq = 185

[State 17006, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 17006

[State 17006, 2]
type = PalFX
Trigger1 = AnimElemTime(3) > 1
time = 1
add = 40,-70,-200
sinadd = 40,30,0,10
color = 0
invertall = 1

[State 17006, Explod]         
type = Explod
Trigger1 = AnimElemTime(3) > 1
Trigger1 = AnimElemTime(8) < 5
anim = 3106
pos = 0, 0
postype = p1
random = 20,35
supermove = 1
supermovetime = 9999
pausemovetime = 9999
sprpriority = 7
bindtime = -1
ownpal = 1
ignorehitpause = 1


[State 17006, Explod]         
type = Explod
Trigger1 = AnimElemTime(3) > 1
Trigger1 = AnimElemTime(8) < 5
anim = 3107
pos = 0, 0
postype = p1
random = 20,35
supermove = 1
supermovetime = 9999
pausemovetime = 9999
sprpriority = 7
bindtime = -1
ownpal = 1
ignorehitpause = 1

[State 16000, 3]
type = EnvShake
trigger1 = AnimElem = 8
ampl = 10
time = 15
freq = 150

[State 17002, Life 3]        
type = LifeAdd
trigger1 = AnimElem = 8
value = -10
kill = 1
absolute = 1

[State 17006, 2]
type = SelfState
Trigger1 = AnimTime = 0
value = 5110
;=============================================================================================
;--MOSSE VS--
;-ABoriginal (Ella vs Ella)
[Statedef 19900]
type = S
movetype = A
physics = S
anim = 19900
velset = 0, 0
ctrl = 0

[State 19941, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 19000, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, ST          
hitflag = M-         
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
;hitsound   = s17010,0
sprpriority = 1
p2facing = 1
p1stateno = 19901    
p2stateno = 19910  
;mindist = -50
;maxdist = -100      
fall = 1

[State 19900, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------
;ABoriginal (Ella vs Ella) continuazione pugni p1
[Statedef 19901]
type = S
movetype = A
physics = S
anim = 19901
velset = 0, 0
sprpriority = 4
ctrl = 0

[State 19941, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 19901, Nothitby]    ;da controllare 
type = NotHitBy
trigger1 = 1
value = SCA

[State 19901, Width]
type = Width
trigger1 = 1
edge = 70

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 19900, 0; 

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 4
value = 10130, 0; 
volume = 255

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 19
value = 41, 1; 
volume = 150

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 29
value = 11001,0 
volume = 200

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 38
value = 10138,0
volume = 200

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 38
value = 17020,0

[State 19041, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 8302
persist = 0
sprpriority = 5
postype = p1
pos = -15,-90
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 180, 2]
type = PowerAdd
trigger1 = AnimElem = 38
value = 1000

[State 180, 3]
type = LifeAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 29
trigger3 = AnimElem = 38
value = -30
kill = 0
absolute = 1

[State 19912, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = -20

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 8005
persist = 0
sprpriority = 5
postype = p1
pos = 50,-80
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 29
anim = 8018
persist = 0
sprpriority = 5
postype = p1
pos = 50,-80
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 37
anim = 8018
persist = 0
sprpriority = 6
postype = p1
pos = 55,-65
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 37
anim = 8005
persist = 0
sprpriority = 5
postype = p1
pos = 40,-75
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 37
anim = 8007
persist = 0
sprpriority = 5
postype = p1
pos = 55,-65
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 37
anim = 8008
persist = 0
sprpriority = 5
postype = p1
pos = 45,0
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 180, 3]
type = EnvShake
trigger1 = AnimElem = 4
time = 8
ampl = -10
freq = 120

[State 180, 3]
type = EnvShake
trigger1 = AnimElem = 29
time = 6
ampl = -7
freq = 120

[State 180, 4]
type = EnvShake
trigger1 = AnimElem = 37
time = 18
ampl = -17
freq = 165

[State 19912, PosAdd]
type = PosAdd
trigger1 = AnimElem = 37
x = -5

[State 19900, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 10010                ;p1 va al teleportino
ctrl = 0

;-------------------------------------------
;ABoriginal (Ella vs Ella) continuazione pugni p2 
[Statedef 19910]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
sprpriority = 3
anim = 19910

[State 19941, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 19041, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 8302
persist = 0
sprpriority = 5
postype = p1
pos = -60,-50
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 180, 2]
type = PowerAdd
trigger1 = AnimElem = 30
value = 1000

[State 180, 3]
type = LifeAdd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 20
trigger3 = AnimElem = 30
value = -30
kill = 0
absolute = 1

[State 19912, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = -20

[State 19910, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 19912, PosAdd]
type = PosAdd
trigger1 = AnimElem = 5
x = -5

[State 19912, PosAdd]
type = PosAdd
trigger1 = AnimElem = 28
x = -5

[State 19910, VS]
type = VarSet
trigger1 = AnimTime = 0 
var(7) = 0

[State 19910, 1]
type = SelfState
trigger1 = AnimTime = 0
value = 10010             ;p2 va la teleportino
ctrl = 1

;-------------------------------------------------------
;Ti Titillo (Ubu VS Ella) subimento Ella
[Statedef 19935]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
sprpriority = 5
anim = 19935

[State 19941, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 19041, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 8302
persist = 0
sprpriority = 5
postype = p1
pos = -10,-105
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 180, 2]
type = PowerAdd
trigger1 = AnimElem = 42
trigger2 = AnimElem = 48
value = 500

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 40
trigger2 = AnimElem = 46
value = 17021,0
volume = 255

[State 180, 3]
type = LifeAdd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 11
trigger3 = AnimElem = 24
value = -25
kill = 0
absolute = 1

[State 19935, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 19935, Width]
type = Width
trigger1 = 1
edge = 60

[State 19935, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = -25

[State 19935, VS]
type = VarSet
trigger1 = AnimTime = 0 
var(7) = 0

[State 19935, VelAdd]
type = VelAdd
trigger1 = AnimElem = 24
x = -15

[State 19935, PosAdd]
type = PosAdd
trigger1 = AnimElem = 25
x = -5

[State 19035, Explod]
type = Explod
trigger1 = AnimElem = 42
anim = 16010
persist = 0
sprpriority = 5
postype = p1
pos = 45,-70
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1
facing = -1

[State 19035, Explod]
type = Explod
trigger1 = AnimElem = 48
anim = 16010
persist = 0
sprpriority = 5
postype = p1
pos = 45,-70
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1
facing = -1
vfacing = -1

[State 19931, 4]
type = EnvShake
trigger1 = AnimElem = 42
trigger2 = AnimElem = 48
time = 6
ampl = -18
freq = 165

[State 19935, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0               ;5120
ctrl = 1

;---------------------------------------------------
;-SONOLEDUE! (Ella vs Kuando)
[Statedef 19940]
type = S
movetype = A
physics = S
anim = 19900
velset = 0, 0
ctrl = 0

[State 19941, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 19940, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, ST          
hitflag = M-         
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
;hitsound   = s17010,0
sprpriority = 1
p2facing = 1
p1stateno = 19941 
p2stateno = 19945 
;mindist = -50
;maxdist = -100      
fall = 1

[State 180, 4]
type = EnvShake
trigger1 = Time = 0
time = 3
ampl = -4
freq = 165

[State 19940, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------
;SONOLEDUE! (Ella vs Kuando) continuazione p1
[Statedef 19941]
type = S
movetype = A
physics = S
anim = 19941
velset = 0, 0
sprpriority = 4
ctrl = 0

[State 19941, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 19041, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 8302
persist = 0
sprpriority = 5
postype = p1
pos = 10,-85
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 180, 1]
type = EnvShake
trigger1 = AnimElem = 2
time = 6
ampl = -4
freq = 180

[State 180, 2]
type = PowerAdd
trigger1 = AnimElem = 32
value = 1000

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 19900, 0; 

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 41,1
volume = 150

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 13
value = 11001,0
volume = 255

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 27
value = 11002,0
volume = 255

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 32
value = 10138,0
volume = 255

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 32
value = 1100,0

[State 180, 3]
type = LifeAdd
trigger1 = AnimElem = 13 
trigger2 = AnimElem = 27
trigger3 = AnimElem = 32
value = -25
kill = 0
absolute = 1

[State 19941, Nothitby]    ;da controllare 
type = NotHitBy
trigger1 = 1
value = SCA

[State 19941, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = -20

[State 19041, Explod]
type = Explod
trigger1 = AnimElem = 13
trigger2 = AnimElem = 27
trigger3 = AnimElem = 32
anim = 8005
persist = 0
sprpriority = 5
postype = p1
pos = 40,-75
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 180, 4]
type = EnvShake
trigger1 = AnimElem = 13
time = 4
ampl = -6
freq = 180

[State 180, 4]
type = EnvShake
trigger1 = AnimElem = 27
time = 7
ampl = -11
freq = 165

[State 180, 4]
type = EnvShake
trigger1 = AnimElem = 32
time = 8
ampl = -13
freq = 165

[State 210, EnvColor]
type = EnvColor
trigger1 = AnimElem = 27
trigger2 = AnimElem = 32
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 19941, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0                ;Ella si rialza
ctrl = 1

;---------------------------------------------
;SONOLEDUE! (Ella vs Kuando) Kuando subisce 
[Statedef 19945]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
sprpriority = 3
anim = 19945
;ID = 19925

[State 19941, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 19945, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 19945, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 19945, VS]
type = VarSet
trigger1 = AnimTime = 0 
var(7) = 0

[State 19945, 1]
type = SelfState
trigger1 = Time = 0
value = 19945       ;Kuando va alla sua anim
ctrl = 0

;--------------------------------------------------------
;-Ti Tillo (Ella vs Ubu)
[Statedef 19950]
type = S
movetype = A
physics = S
anim = 19900
velset = 0, 0
ctrl = 0

[State 19941, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 19920, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, ST          
hitflag = M-         
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
;hitsound   = s17010,0
sprpriority = 1
p2facing = 1
p1stateno = 19935 
p2stateno = 19931
;mindist = -50
;maxdist = -100      
fall = 1

[State 19920, 4]
type = EnvShake
trigger1 = Time = 0
time = 3
ampl = -4
freq = 165

[State 19950, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;Ti Tillo Ubu subisce 
[Statedef 19931]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
sprpriority = 3
anim = 19931

[State 19941, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 19935, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 19935, VS]
type = VarSet
trigger1 = AnimTime = 0 
var(7) = 0

[State 19935, 1]
type = SelfState
trigger1 = Time = 0
value = 19931       ;Ubu va alla sua anim
ctrl = 0

;-------------------------------------------------------------
;-SpecialCharge (Ella vs Altri)
[Statedef 19980]
type = S
movetype = A
physics = S
anim = 19900
velset = 0, 0
ctrl = 0

[State 19941, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 19000, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, ST          
hitflag = M-         
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
;hitsound   = s17010,0
sprpriority = 1
p2facing = 1
p1stateno = 19981   
p2stateno = 19985  
;mindist = -50
;maxdist = -100      
fall = 1

[State 19901, SE]
type = PlaySnd
trigger1 = Time = 0
value = 10111, 0;

[State 19900, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------
;SuperCharge (Ella vs altri) continuazione pugni p1
[Statedef 19981]
type = S
movetype = A
physics = S
anim = 19981
velset = 0, 0
sprpriority = 4
ctrl = 0

[State 19941, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 19981, Nothitby]    ;da controllare 
type = NotHitBy
trigger1 = 1
value = SCA

[State 10101, Width]    ;distanza dal bordo
type = Width
trigger1 = 1
edge = 75,10

[State 19981, SE]
type = PlaySnd
trigger1 = AnimElem = 6
value = 19900, 0; 

[State 19041, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 8302
persist = 0
sprpriority = 5
postype = p1
pos = 55,-115
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 210, EnvColor]
type = EnvColor
trigger1 = AnimElem = 6
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 180, 4]
type = EnvShake
trigger1 = AnimElem = 6
time = 10
ampl = -8
freq = 165

[State 1020, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = AnimElem = 7
time = 12
sinadd = 100,100,100,3

[State 180, 2]
type = PowerAdd
trigger1 = AnimElem = 8
value = 1000

[State 19981, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype = Diagup     ;Back
damage = 50
guardflag = M
pausetime = 0,2
;sparkxy = 0,-55
sparkno = S99999
hitsound = S17020,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -7.0,-3.5
air.velocity = -7.5,-4.7
fall = 1
maxdist = 55, -15
mindist = 55, -15

[State 19981, SE]
type = PlaySnd
trigger1 = AnimElem = 7
value = 17005,0
volume = 100

[State 19021, Explod]      
type = Explod
trigger1 = AnimElem = 7
anim = 8141
persist = 0
sprpriority = 5
postype = p1
pos = 35,-85
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19021, Explod]      
type = Explod
trigger1 = AnimElem = 7
anim = 8125
persist = 0
sprpriority = 5
postype = p1
pos = 65,-115
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 180, 4]
type = EnvShake
trigger1 = AnimElem = 7
time = 12
ampl = -6
freq = 165

[State 10101, Bind 1]
type = TargetBind
trigger1 = Time = [0,47] 
pos = 55,-115

[State 19900, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------
;SuperCharge (Ella vs altri) lo state in cui va il p2 se preso
[Statedef 19985]
type    = A    
movetype= H
physics = N    
velset = 0,0
ctrl = 0

[State 19941, VS]
type = VarSet
trigger1 = 1
var(7) = 0

;[State 19985, Nothitby]    
;type = NotHitBy
;trigger1 = Time = [0,47] 
;value = SCA

[State 1020, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = Time = 31
time = 12
sinadd = 100,100,100,3

[State 180, 2]
type = PowerAdd
trigger1 = Time = 31
value = -1000

[State 19985, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 19985

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = AnimTime = 0
value =  0

;=============================================================================================
; schivo
[Statedef 725]
type = S
movetype = I
physics = S
anim = 725
velset = 0
ctrl = 0

[State 725, 1]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 47             

[State 725, 2]
type = SprPriority
trigger1 = Time = 0
value = -2

[State 725, 3]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 725, 4]
type = PlaySnd
triggerall = Random < 300
trigger1 = Time = 1
value = 725,0;
volume = -20

[State 725, 5]
type = ChangeState
triggerall = AnimElem = 4, > 0
triggerall = AnimElem = 6, < 2
trigger1 = command = "x"
trigger2 = command = "a"
trigger3 = command = "y"
trigger4 = command = "b"
value = 730

[State 725, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------
; schivo e colpisco
[Statedef 730]
type = S
movetype = A
physics = S
anim = 730
poweradd = 60

[State 730, 1]
type = HitBy
trigger1 = Time = 0
value = SCA

[State 730, 3]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 50
animtype = hard
guardflag = MA
sparkno = S8018
guard.sparkno = S8060
sparkxy = -10,-65
hitsound = s210,2
guardsound = 6,0
pausetime = 12,12
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -10
air.velocity = -4,-3

[State 730, Explod]
type = Explod
triggerall = movehit
trigger1 = AnimElem = 8
anim = 8001
sprpriority = 5
postype = p2
pos = -10,-52
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 730, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------
;rotolino av
[Statedef 750]
type = S
movetype = I
physics = S
anim = 750
velset = 0
ctrl = 0

[State 750, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 26

[State 750, 2]
type = AfterImage
trigger1 = Time = 3
time = 16
trans = add1
timegap = 2
PalBright = 0,0,0
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
framegap = 2
length = 5

[State 750, 3]
type = SprPriority
trigger1 = Time = 8
value = -2

[State 750, 4]
type = VelSet
trigger1 = Time = [8,22]
x = 5

[State 750, 4.5]
type = PosAdd
trigger1 = AnimElem = 4
x = 10

[State 750, 5]
type = PlayerPush
trigger1 = Time = [8,22]
value = 0

[State 750, 6]
type = VelSet
trigger1 = AnimElem = 9
x = 0

[State 750, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------
;rotolino ind
[Statedef 775]
type = S
movetype = I
physics = S
anim = 775
velset = 0
ctrl = 0

[State 775, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 775, 2]
type = AfterImage
trigger1 = Time = 3
time = 16
trans = add1
timegap = 2
PalBright = 0,0,0
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
framegap = 2
length = 5

[State 775, 3]
type = SprPriority
trigger1 = Time = 7
value = -2

[State 775, 4]
type = VelSet
trigger1 = Time = [7,20]
x = -5

[State 775, 405]
type = PosAdd
trigger1 = AnimElem = 3
x = -8

[State 775, 5]
type = PlayerPush
trigger1 = Time = [7,20]
value = 0

[State 775, 6]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 775, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=================================================
;CARICAMENTO INIZIO
[Statedef 700]
type = S
movetype = I
physics = S
anim = 700
velset = 0
ctrl = 0

[State 700, 2]
type = PlaySnd
trigger1 = Time = 0
value = 700,0
channel = 0
volume = -50

[State 700, 3]
type = PowerAdd
trigger1 = ((Time + 2) % 2) = 0
value = 8

[State 700, 4]
type = ChangeState
trigger1 = power >= 3000
value = 715

[State 700, 5]
type = ChangeState
triggerall = AnimElem = 2, >= 0
trigger1 = command != "hold_x"
trigger2 = command != "hold_a"
value = 710

[State 700, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 705

;-----------------
;-CARICAMENTO LOOP
[Statedef 705]
type = S
movetype = I
physics = S
anim = 705

[State 705, 1]
type = PowerAdd
trigger1 = ((Time + 2) % 2) = 0
value = 15

[State 705, 2]
type = Explod
trigger1 = ((Time + 12) % 12) = 0
anim = 711
sprpriority = 3
postype = p1
pos = -12,5
bindtime = -1

[State 705, 3]
type = ChangeState
trigger1 = power >= 3000
value = 715

[State 705, 4]
type = ChangeState
trigger1 = command != "hold_x"
trigger2 = command != "hold_a"
value = 710

[State 705, 5]
type = EnvShake
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
trigger3 = AnimElem = 7
trigger4 = AnimElem = 8
time = 3
ampl = -2
freq = 90

;-----------------
;-CARICAMENTO RITORNO (se il caricamento viene spezzato)
[Statedef 710]
type = S
movetype = I
physics = S
anim = 710

[State 710, 1]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 710, 2]
type = StopSnd
trigger1 = Time = 0
channel = 1

[State 710, 3]
type = RemoveExplod
trigger1 = Time = 0

[State 710, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------
;CarMAX
[Statedef 715]
type = S
movetype = I
physics = S
anim = 715

[State 715, 1]
type = StopSnd
trigger1 = Time = 3
channel = 0

[State 715, 2]
type = StopSnd
trigger1 = Time = 3
channel = 1

[State 715, 3]
type = RemoveExplod
trigger1 = Time = 2

[State 715, 4]
type = Explod
trigger1 = AnimElem = 3
anim = 720
postype = p1
pos = -12,-3
sprpriority = 4
bindtime = 1
ownpal = 1

[State 715, 5]
type = EnvShake
trigger1 = AnimElem = 3
time = 20

[State 715, 6]
type = PalFX
trigger1 = AnimElem = 3
add = 64,64,64
time = 6

[State 715, 7]
type = PlaySnd
trigger1 = AnimElem = 3
value = 700,1

[State 715, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;==========================================
[Statedef 5201]
type = S
movetype = I
physics = N
anim = 5200
ctrl = 0

[State 5201,0]
type = turn
trigger1 = Time = 0
trigger1 = Vel X > 0
 
[State 5201,1]
type = VelSet
trigger1 = Time = 0
x = -3.0
y = 0

[State 5201,2]
type = VelAdd
trigger1 = Time >= 16
x = .80

[State 5201,3]
type = VelSet
trigger1 = Time > 16
trigger1 = Vel X >= 0
x = 0
y = 0

[State 5201,4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201,5]
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 5201,6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;============================================================================
[Statedef 780]
type = S
movetype = A
physics = S
poweradd = -1000
anim = 300
ctrl = 0

[State 780,0]
type = SuperPause
trigger1 = Time = 0
time = 10
movetime = 10
anim = S780
pos = 0,-60

[State 780, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 780, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 300, 0

[State 780, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210, 1

[State 780, AfterImage]
type = AfterImage
trigger1 = Time = 3
time = 12
trans = add1
timegap = 1
framegap = 2
length = 8

[State 780, 3]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype = Back
damage = 10
guardflag = M
pausetime = 14,14
sparkxy = 0,-55
sparkno = 1
hitsound = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -5.0,-3.0
air.velocity = -5.5,-3.7
fall = 1

[State 780, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
[Statedef 790]
type = S
movetype = I
physics = S
anim = 750
velset = 0
poweradd = -1000
ctrl = 0

[State 790,0]
type = SuperPause
trigger1 = Time = 0
time = 10
movetime = 10
anim = S780
pos = 0,-60

[State 790, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 790, 2]
type = AfterImage
trigger1 = Time = 3
time = 22
trans = add1
timegap = 1
framegap = 2
length = 8

[State 790, 3]
type = SprPriority
trigger1 = Time = 8
value = -2

[State 790, 4]
type = VelSet
trigger1 = Time = [4,24]
x = 5

[State 790, 5]
type = PlayerPush
trigger1 = Time = [4,24]
value = 0

[State 790, 6]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 790,7]
type = Turn
trigger1 = AnimTime = 0 
trigger1 = P2BodyDist X < -5

[State 790, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------
[Statedef 795]
type = S
movetype = I
physics = S
anim = 775
velset = 0
ctrl = 0

[State 795,0]
type = SuperPause
trigger1 = Time = 0
time = 10
movetime = 10
anim = S780
pos = 0,-60

[State 795, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 795, 2]
type = AfterImage
trigger1 = Time = 3
time = 22
trans = add1
timegap = 1
framegap = 2
length = 8

[State 795, 3]
type = SprPriority
trigger1 = Time = 8
value = -2

[State 795, 4]
type = VelSet
trigger1 = Time = [4,24]
x = -5

[State 795, 5]
type = PlayerPush
trigger1 = Time = [4,24]
value = 0

[State 795, 6]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 795, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;================================================
;Chiamata di Perro (Helper)
[Statedef 4500]
type = S
ctrl = 0
anim = 4500
velset = 0,0
movetype = I
physics = S
sprpriority = 2
poweradd = -500

[State 4500, st]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "perro"
id = 6000
postype = p2
pos = -92,-600
stateno = 6000
keyctrl = 0
ownpal = 1
facing = 1

[State 4500, SE]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 4
value = 17025,0;
volume = 250

[State 4500, 1]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 4500, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;============================================================================
;AI
[Statedef 9999]
anim = 9999
ctrl = 0

[State 9999, AI]
type = VarSet
trigger1 = Command = "a"
trigger2 = Command = "b"
trigger3 = Command = "c"
trigger4 = Command = "x"
trigger5 = Command = "y"
trigger6 = Command = "z"
trigger7 = Command = "holdup"
trigger8 = Command = "holddown"
trigger9 = Command = "holdfwd"
trigger10 = Command = "holdback"
trigger11 = Command = "s"
var(59) = 1

[State 9999,AI]
type = ParentVarSet
trigger1 = RoundState = 2
trigger1 = !Var(59)
trigger1 = Parent, StateNo != 0
trigger1 = Parent, StateNo != [190,194]
trigger1 = Parent, StateNo != 5900
trigger1 = Parent, StateNo != [5000,5299]
trigger1 = Parent, MoveType != H
var(7) = 1

;============================================================================
[Statedef -2]

[State -2, SE]
type = PlaySnd
triggerall = RoundState = 2
triggerall = Time = 390 || Time = 1140 || Time = 1920 || Time = 2310
trigger1 = stateno = 0
trigger2 = var(8) != 2 || var(8) != -2
value = 186,0
volume = -155

[State -2, SE]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 50
trigger2 = stateno = 105
trigger3 = stateno = 51
trigger3 = var(8) != 2 || var(8) != -2
value = 41,0

[State -2, SE]
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 51
trigger1 = var(8) = 2 || var(8) = -2
value = 41,1

[State -2, SE]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52
trigger2 = stateno = 106
value = 40,0

;---------------------------------------------------------------------------
[State -2, SE]
type = PlaySnd
triggerall = Random < 500
triggerall = time = 1
trigger1 = stateno = 200
trigger2 = stateno = 400
trigger3 = stateno = 600
trigger4 = stateno = 230
trigger5 = stateno = 430
trigger6 = stateno = 630
value = 200, 0

[State -2, SE]
type = PlaySnd
triggerall = Random < 500
triggerall = time = 1
trigger1 = stateno = 210
trigger2 = stateno = 410
trigger3 = stateno = 610
trigger4 = stateno = 240
trigger5 = stateno = 440
trigger6 = stateno = 640
trigger7 = stateno = 245
trigger8 = stateno = 215
value = 210, 0

;---------------------------------------------------------------------------
[State -2, SE]
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 200
trigger2 = stateno = 400
trigger3 = stateno = 600
trigger4 = stateno = 430
trigger5 = stateno = 630
value = 200, 1

[State -2, SE]
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 210
trigger2 = stateno = 410
trigger3 = stateno = 610
trigger4 = stateno = 230
trigger5 = stateno = 240
trigger6 = stateno = 640
trigger7 = stateno = 245
trigger8 = stateno = 215
value = 210, 1

;---------------------------------------------------------------------------
[State -2, SE]
type = PlaySnd
triggerall = Random < 300
triggerall = Time = 1
trigger1 = anim = 5000
trigger2 = anim = 5001
trigger3 = anim = 5010
value = 5000, 0

[State -2, SE]
type = PlaySnd
triggerall = Random < 300
triggerall = Time = 1
trigger1 = anim = 5001
trigger2 = anim = 5011
trigger3 = anim = 5021
value = 5000, 1

[State -2, SE]
type = PlaySnd
triggerall = Random < 300
triggerall = Time = 1
trigger1 = anim = 5002
trigger2 = anim = 5012
trigger3 = anim = 5022
value = 5000, 2

[State -2, SE]
type = PlaySnd
triggerall = Time = 1
trigger1 = anim = 5200
value = 5200, 0

[State -2, SE]
type = PlaySnd
triggerall = Time = 1
trigger1 = anim = 5210
value = 5200, 1

[State -2, SE]
type = PlaySnd
trigger1 = anim = 170
trigger1 = time = 10
value = 5000, 3

[State -2, SE]
type = PlaySnd
trigger1 = anim = 10851
trigger1 = Time = 6
value = 800, 2;
volume = -10

[State -2, StopSnd]
type = StopSnd
trigger1 = RoundState = 2
channel = 0

;---------------------------------------------------------------------------
[State -2, RemoveExplod]
type = RemoveExplod
triggerall = NumExplod(3001) = 1
trigger1 = Stateno != 3000
ID = 3001

[State -2, RemoveExplod]
type = RemoveExplod
triggerall = NumExplod(3210) = 1
trigger1 = Stateno != 3201
ID = 3210

;----------------------------------------------------------------------------
;[State -2, Perro]
;type = Helper
;triggerall = command = "st"
;triggerall = command != "hold_x"
;triggerall = command != "hold_b"
;triggerall = movetype != H
;triggerall = power >= 1000
;triggerall = stateno != [3000,3300]  
;triggerall = stateno != [700,719] 
;triggerall = numhelper(6000) = 0
;trigger1 = statetype != A
;trigger1 = ctrl = 0
;trigger2 = statetype = A
;helpertype = normal
;name = "perro"
;id = 6000
;postype = p2
;pos = -200,-600
;stateno = 6000
;keyctrl = 0
;ownpal = 1
;facing = 1

;---------------------------------------------------------------------------
;COMANDI FINALI
[State, VarSet]
type = VarSet
triggerall = stateno = 1000 || stateno = 1010 || stateno = 1100 || stateno = 1110
triggerall = Time >= 10
trigger1 = command = "graborama" || command = "psycho" 
trigger1 = power >= 2000
var(10) = 1

[State, PalFX]
type = PalFX
triggerall = stateno = 1000 || stateno = 1010 || stateno = 1100 || stateno = 1110
triggerall = Time >= 10
trigger1 = command = "graborama" || command = "psycho" 
trigger1 = power >= 2000
add = 255,255,255
time = 4

[State, Poweradd]
type = Poweradd
triggerall = stateno = 1000 || stateno = 1010 || stateno = 1100 || stateno = 1110
triggerall = Time >= 10
trigger1 = command = "graborama" || command = "psycho" 
trigger1 = power >= 2000
value = -1000

[State, CS]
type = ChangeState
trigger1 = command = "graborama"
trigger1 = power >= 1000
trigger1 = var(10) = 1
value = 3000;
ctrl = 0

[State, CS]
type = ChangeState
trigger1 = command = "psycho" 
trigger1 = power >= 1000
trigger1 = var(10) = 1
value = 3100;
ctrl = 0


;--------------------------------------------------------------------------
[State -2, VarAdd­]
type = VarAdd
triggerall = Var(4) >= 10
trigger1 = stateno = 5000 && Time = 0
v = 4
value = -1

[State -2, ­VarADD]
type = VarAdd
triggerall = Var(4) >= 10
trigger1 = timemod  = 100, 50
v = 4
value = -1
;===========================================================================
[Statedef -3]

;INTRO BASSI
[State -3, Turns Mode Intro]
type = ChangeState
triggerall = teammode = turns
triggerall = roundno > 1
triggerall = time = 0
triggerall = roundstate = 0
trigger1 = roundsexisted <= 0
trigger2 = p2name = "evilryu"
trigger3 = p4name = "evilryu"
trigger4 = p2name = "evilken"
trigger5 = p4name = "evilken"
value = 191

[state -3, nolifebar]
type = assertspecial
trigger1 = roundstate != 2
flag = NoBarDisplay

;---------------------------------------
;attiva l'AI in altra maniera
[State -3, AI]    ;pessimi comandi da eliminare in blocco!
type = Helper
trigger1 = NumHelper(9999) = 0
trigger1 = var(7) = 0
trigger1 = RoundState = 2
name = "AI"
id = 9999
pos = 1000, 1000
stateno = 9999
helpertype = normal
keyctrl = 1

[State -3, VarSet]
type = Varset
trigger1 = var(7) = 1
trigger1 = RoundState = 3
var(7) = 0

[State -3, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
ignorehitpause = 1
text = "AI(var 7) %d, guard(var 4) %d"
params = var(7),var(4)