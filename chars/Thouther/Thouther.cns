;変数使用表
;　 1 = 
;　 2 = 勝利ポーズ変更
;☆ 3 = 落下速度
;☆ 4 = 七星ゲージ
;　 5 = 強弱ボタン判定
;　 6 = 通常攻撃ボイス、乱数指定
;　 7 = ダガール当身、知略の時代無敵
;☆ 8 = カウンター
;☆ 9 = グレイブシュート判定
;☆10 = プレイヤーの向き設定
;☆11 = バニシングストライク判定
;☆12 = KOサウンド
;  13 = 勝利判定
;  14 = 攻撃力
;☆15 = ハイジャンプ
;　16 = 
;☆17 = ダメージ補正に使用
;  18 = 攻撃値の保存
;  19 = 
;  20 = 鳳凰呼闘塊天ゲージ
;☆21 = テーレッテー
;  22 = 透明化
;☆23 = ブーストゲージ
;  24 = ?
;☆25 = グレイブシュート判定
;☆26 = ネバリ補正
;
; 30 = AI判定(にしたいな…)

; f(1) = 攻撃補正
; f(2) = 通常ダメージ補正
; f(3) = グレイブシュートダメージ補正
; f(4) = バニシングストライクダメージ補正
; f(5) = 連続技補正

; channel = 4	
; channel = 5	イントロ

; 体力ゲージ　192
; オーラゲージ　約130


[Data]
  ;体力ゲージの初期値
life = 1000
  ;攻撃力（これ以上に設定すると強くなる）
attack = 100
  ;防御力（これ以上に設定すると強くなる）
defence = 90
  ;コンボをくらっている時にあがる防御力
fall.defence_up = 50
  ;倒れてから起上がるまでのフレーム数
liedown.time = 20
  ;空中でどれだけコンボが繋がるか（高くすると無限コンボになるので注意）
airjuggle = 15
  ;hitdefで設定していない時の基本ヒットスパークナンバー
sparkno = 2
  ;設定してない時のガードナンバー
guard.sparkno = 40
  ;KOした時に声にエコーをかけるか（１でＯＮ）
KO.echo = 0
 volume = 5
  IntPersistIndex = 0
FloatPersistIndex = 40

[Size]
xscale = 0.5           ;水平方向の縮尺（通常１）
yscale = 0.5           ;垂直方向の縮尺（通常１）
ground.back = 20     ;キャラの幅(後方,地上)
ground.front = 20    ;キャラの幅(前方,地上)
air.back = 12        ;キャラの幅(後方,空中)
air.front = 12       ;キャラの幅(前方,空中)
height = 120          ;キャラの高さ
attack.dist = 320    ;攻撃をした時相手がガード体制に入る最低距離
proj.attack.dist = 320;攻撃をした時相手がガード体制に入る最低距離（飛び道具）
proj.doscale = 0     ;上で設定した縮尺を飛び道具にも適用するか（１でＯＮ）   
head.pos = 5, -127   ;頭の大体の座標
mid.pos = -7, -90    ;体の中心の大体の座標
shadowoffset = 0     ;影の垂直方向のオフセット
draw.offset = 0,0    ;使用しない

[Velocity]
walk.fwd  = 2.1      ;前進の速度
walk.back = -2.1     ;後退の速度
run.fwd  = 4.3130434, 0    ;前ダッシュの速度（ホップする時はyを-にする）
run.back = -4.5,-4.1 ;後ダッシュの速度（ホップする時はyを-にする）
jump.neu = 0,-11.5    ;垂直ジャンプの速度
jump.back = -3.55,1    ;後ジャンプの速度
jump.fwd = 3.5,1       ;前ジャンプの速度
runjump.back = -2.55,-8.1 ;後ダッシュしながらのジャンプ速度(オプション)
runjump.fwd = 4,-8.1      ;前ダッシュしながらのジャンプ速度(オプション)
airjump.neu = 0,-8.1      ;２段ジャンプ以降の垂直ジャンプの速度(オプション)
airjump.back = -2.55      ;２段ジャンプ以降の後ジャンプの速度(オプション)
airjump.fwd = 2.5         ;２段ジャンプ以降の前ジャンプの速度

[Movement]
airjump.num = 1      ;空中でジャンプする回数
airjump.height = 35  ;空中でジャンプする最低限の高さ
yaccel = .54         ;重力
stand.friction = .85  ;立ち状態の摩擦係数
crouch.friction = .82 ;屈み状態の摩擦係数

;---------------------------------------------------------------------------
; 立ちポーズ
[Statedef 0]
type = S
physics = S
sprpriority = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[state a]
type = velset
trigger1 = time = 0
y = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != ifelse(var(20) = 0,0,3000) && Anim != ifelse(var(20) = 0,5,3005)
trigger2 = Anim = ifelse(var(20) = 0,5,3005) && AnimTime = 0 ;Turn anim over
value = ifelse(var(20) = 0,0,3000)

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = null;VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
; しゃがみ移行
[Statedef 10]
type    = C
physics = C
anim = ifelse(var(20) = 0,10,3010)

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; しゃがみ
[Statedef 11]
type    = C
physics = C
anim = ifelse(var(20) = 0,11,3011)
sprpriority = 0

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = ifelse(var(20) = 0,11,3011)

;---------------------------------------------------------------------------
; しゃがみ解除
[Statedef 12]
type    = S
physics = S
anim = ifelse(var(20) = 0,12,3012)

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; 歩き
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
trigger1 = var(20) = 0
x = const(velocity.walk.fwd.x)

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
trigger1 = var(20) >= 1
x = const(velocity.walk.fwd.x)*1.5

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
trigger1 = var(20) = 0
x = const(velocity.walk.back.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
trigger1 = var(20) >= 1
x = const(velocity.walk.back.x)*1.5

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != ifelse(var(20) = 0,20,3020) && Anim != ifelse(var(20) = 0,5,3005)
trigger2 = Anim = ifelse(var(20) = 0,5,3005) && AnimTime = 0
value = ifelse(var(20) = 0,20,3020)

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != ifelse(var(20) = 0,21,3021) && Anim != ifelse(var(20) = 0,5,3005)
trigger2 = Anim = ifelse(var(20) = 0,5,3005) && AnimTime = 0
value = ifelse(var(20) = 0,21,3021)


;---------------------------------------------------------------------------
; ジャンプ開始
[Statedef 40]
type    = S
physics = S
anim = ifelse(var(20) = 0,40,3040)
ctrl = 0
;velset = 0,0
sprpriority = 1


[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = ifelse(var(20) = 0,100,3100) ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; 空中ジャンプ開始
[Statedef 45]
type    = A
physics = N
ctrl = 0
velset = 0,0

[State 45, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(44)
value = 44

[State 45, 2]
type = ChangeAnim
trigger1 = !SelfAnimExist(44)
value = ifelse(var(20) = 0,41,3041)

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y)

[State 00]
type = PlaySnd
trigger1 = time = 0
value = 40, 1

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; ジャンプ上昇
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, ifelse(var(20) = 0,41,3041), ifelse((vel x)>0, ifelse(var(20) = 0,42,3042), ifelse(var(20) = 0,43,3043)))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; 着地
[Statedef 52]
type    = S
physics = S
ctrl = 0
velset = 0,0
anim = ifelse(var(20) = 0,47,3047)

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ダッシュ
[Statedef 100]
type    = S
physics = N
anim = ifelse(var(20) = 0,100,3100)
sprpriority = 1
ctrl = 1


[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 00]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animtime = 0
value = 100, 0

[State 01]
type = VelSet
trigger1 = time = 0
trigger1 = var(20) = 0
x = const(velocity.run.fwd.x)

[State 01]
type = VelSet
trigger1 = time = 0
trigger1 = var(20) >1
x = const(velocity.run.fwd.x)*1.5

[state a]
type = veladd
trigger1 = vel x <= 9.5
trigger1 = var(20) = 0
x = 0.1

[state a]
type = veladd
trigger1 = vel x <= 12.5
trigger1 = var(20) >1
x = 0.15

[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 04]
type = ChangeState
trigger1 = command != "holdfwd"
value = 101


;---------------------------------------------------------------------------
;ダッシュ終了
[Statedef 101]
type    = S
physics = S
anim = ifelse(var(20) = 0,101,3101)
sprpriority = 1
ctrl = 1

[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 04]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 空中ダッシュ
[Statedef 110]
type    = A
physics = N
anim = ifelse(var(20) = 0,110,3110)
sprpriority = 1
velset = 0,0
ctrl = 1

[State 01]
type = VelSet
trigger1 = animelem = 2
x = 6.5
y = 0

[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 04]
type = ChangeState
trigger1 = time = 20
value = 111

;---------------------------------------------------------------------------
; 空中バックダッシュ
[Statedef 115]
type    = A
physics = N
anim = ifelse(var(20) = 0,115,3115)
sprpriority = 1
velset = 0,0
ctrl = 1

[State 01]
type = VelSet
trigger1 = time = 0
x = -6.5
y = 0

[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 04]
type = ChangeState
trigger1 = time = 20
value = 111

;---------------------------------------------------------------------------
; 空中ダッシュ終了
[Statedef 111]
type    = A
physics = A
anim = ifelse(var(20) = 0,111,3111)
sprpriority = 1
ctrl = 1

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn




;---------------------------------------------------------------------------
; バックステップ
[Statedef 105]
type    = S
physics = N
ctrl = 0
anim = ifelse(var(20) = 0,105,3105)
velset = 0,0


[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 00]
type = PlaySnd
trigger1 = animelem = 2
value = 40, 1

[State 01]
type = VelSet
trigger1 = animelem = 3
trigger1 = var(20) = 0
x = -5
y = -3

[State 01]
type = VelSet
trigger1 = animelem = 3
trigger1 = var(20) >1
x = -7
y = -3


[state a]
type = veladd
trigger1 = animelem = 3,>=0
y = 0.45

[State 00]
type = ChangeState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106


; バックステップ・着地
[Statedef 106]
type    = S
physics = S
anim = ifelse(var(20) = 0,106,3106)
sprpriority = 1
velset = 0,0
ctrl = 1

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 00]
type = PlaySnd
trigger1 = animelem = 1
value = 40, 0

[State explod];着地エフェクト
type = Explod
trigger1 = animelem = 1
anim = 6047
id = 6040
sprpriority = -5
postype = p1
pos = 0,0
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
scale = 0.7,0.7
ownpal = 1

[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 04]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; タイムオーバーで負けた時
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 00];
type = PlaySnd
trigger1 = animelem = 2
value = 170,0


[State 00]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; 勝った動作
[Statedef 180]
type = S


[State 01];
type = ChangeState
trigger1 = var(21) = 1
value = 189

[State 01];
type = ChangeState
trigger1 = 1
value = 181



;---------------------------------------------------------------------------
; 勝った動作1[]
[Statedef 181]
type = A
ctrl = 0
anim = 181
velset = 0,0
physics = N
sprpriority = 2

[state a]
type = null;turn
trigger1 = time = 0
trigger1 = p2dist x <= 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 00];
type = PlaySnd
trigger1 = time = 0
value = 181,0+(random%4)
channel = 2

[state a]
type = velset
trigger1 = time = 0
x = 2.5

[state a]
type = changeanim
trigger1 = anim != 182
trigger1 = Abs(pos x - helper(182),pos x) <= 30
value = 182

[state a]
type = velset
trigger1 = anim = 182
x = 0
y = 0

[State 00];
type = PlaySnd
triggerall = anim = 182
trigger1 = animelem = 4
trigger2 = animelem = 9
value = 100,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,300]
flag = roundnotover

;---------------------------------------------------------------------------
[Statedef 182]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 182
sprpriority = -1

[state a]
type = AssertSpecial
trigger1 = 1
flag = invisible

[state a]
type = posset
trigger1 = 1
x = enemy,pos x

;---------------------[]
[state a]
type = destroyself
trigger1 = root,anim = 182


;---------------------------------------------------------------------------
; 勝った動作1[一撃]
[Statedef 188]
type = S
velset = 0,0
physics = N
sprpriority = 2
ctrl = 0

[state a]
type = ctrlset
trigger1 = time = 120
value = 1

[state a]
type = ctrlset
trigger1 = time = 121
value = 0

[state a]
type = changeanim
trigger1 = time = 100
trigger1 = anim != 2505
value = 2505

[State 2000, 6];お師・・・もうすぐ貴方の聖帝十字稜は完成する・・・
type = PlaySnd
trigger1 = animelem = 5
trigger1 = anim = 2505
value = 2500,3+var(5)*3

[state a]
type = turn
triggerall = anim = 2505
triggerall = animelem = 5
trigger1 = facing = 1 && pos x < 0
trigger2 = facing = -1 && pos x > 0

[State 3040, 7]
type = BGPalfx
trigger1 = var(2) <= 1200
time = 1
;sinadd = 10,10,10,120
add = 20+var(2),20+var(2),20+var(2)
mul = 120,120,120
color = 256
under = 1

[state a]
type = varadd
trigger1 = var(2) <= 1200
v = 2
value = 20


;---------------------[ヘルパー]
[state a];お師さん
type = Helper
trigger1 = animelem = 5
trigger1 = anim = 2505
id = 2530
name = "oshisan"
sprpriority = 2
pos = -120,-160
postype = p1
stateno = 2530
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,300]
flag = roundnotover

[state a]
type = null;changestate
trigger1 = command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c" || command = "start" 
value = 188

;---------------------------------------------------------------------------
; お師さん
[Statedef 2530]
type = A
ctrl = 0
velset = 0,0
physics = N
sprpriority = -1
anim = 2530

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------[]
[state a]
type = varset
trigger1 = time = 0
;trigger2 = animelem = 2
v = 1
value = 0

[state a]
type = varset
trigger1 = animtime = 0
v = 1
value = 256

[state a]
type = varadd
trigger1 = time <= 16
v = 1
value = 16

[state a]
type = varadd
trigger1 = animelem = 2,>=0
v = 1
value = -8

[state a]
type = varadd
trigger1 = animelem = 3,>=0
v = 1
value = 16

;---------------------[ヘルパー]
[state a];お師さん
type = Helper
trigger1 = time = 0
trigger1 = root,var(5) = 0
id = 2531
name = "oshisan"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 2531
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[state a];お師さん
type = Helper
trigger1 = time = 0
trigger1 = root,var(5) = 1
id = 2532
name = "jagi"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 2531
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1


;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = var(1),256

;---------------------[拡縮]
[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 1,1

;---------------------------------------------------------------------------
; お師さん
[Statedef 2531]
type = A
ctrl = 0
velset = 0,0
physics = N
sprpriority = 2
anim = 2531

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = ishelper(2532)
value = 2532

[state a]
type = turn
trigger1 = time = 0
trigger1 = anim = 2531

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------[]


;---------------------[透過]
[state a]
type = Trans
trigger1 = anim = 2532
trans = addalpha
alpha = 256,70

[state a]
type = angledraw
trigger1 = anim = 2532
scale = 0.7,0.7

;---------------------[拡縮]
[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 1,1



;---------------------------------------------------------------------------
;
[Statedef 171]
type    = S
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 171
sprpriority = -1

;---------------------[]

;---------------------[速度]


;---------------------[]
[state a]
type = destroyself
trigger1 = root,anim != 181


;---------------------------------------------------------------------------
; 通常登場
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0

[state a]
type = posset
trigger1 = time = 0
y = -150/2

[State a];
type = PlaySnd
trigger1 = time = 60
value = 190,0

[State a];
type = PlaySnd
trigger1 = animelem = 10
value = 100,0

[State a];
type = PlaySnd
trigger1 = animelem = 12
value = 40,2

[state a]
type = changeanim
trigger1 = time = 60
value = 191

[state a];聖帝バイク
type = Helper
trigger1 = time = 0
id = 170
name = "bike"
sprpriority = 4
pos = 0,0
postype = p1
stateno = 172
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[State a] 
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,0



[state a]
type = velset
trigger1 = animelem = 12
x = 0
y = -9

[state a]
type = veladd
trigger1 = animelem = 12,>=0
y = 0.4

[state a]
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 191

;---------------------------------------------------------------------------
; 通常登場
[Statedef 191]
type = S
ctrl = 0
anim = 40
velset = 0,0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State a];
type = PlaySnd
trigger1 = time = 0
value = 40,0


[state a]
type = changestate
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------
;聖帝バイク
[Statedef 172]
type    = S
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 171
sprpriority = -1

[state a]
type = posset
trigger1 = time = 0
y = 0

;---------------------[うっさいので削除]
[State 2000, 6];
type = null;PlaySnd
trigger1 = time = 0
value = 171,0
loop = 1
channel = 3

[state a]
type = null;stopsnd
trigger1 = RoundState = 2
channel = 3

;---------------------[]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state a]
type = varadd
trigger1 = RoundState = 2
v = 1
value = 8

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(1),var(1)

;---------------------[]
[state a]
type = null;destroyself
trigger1 = var(1) >= 256


;---------------------------------------------------------------------------
; 挑発の動作
[Statedef 199]
type = S
ctrl = 0
anim = 199
velset = 0,0
movetype = I
physics = S
sprpriority = 1


[State 191, 3];
type = PlaySnd
trigger1 = animelem = 1
value = 199,0

[State 195, 1]
type = CtrlSet
trigger1 = animelem = 60
value = 1


;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = time = 0
id = 182
name = "s"
sprpriority = 5
pos = 0,0
postype = p2
stateno = 182
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
;---------------------------------------------------------------------------
; 遠距離立ち・弱・パンチ・の動作
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 0
;velset = 0,0
ctrl = 0
anim = ifelse(var(20) = 0,200,201)
poweradd = 0

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 200, 1]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage = 36, 0
getpower = 62,62
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 0+(random%2)
guard.sparkno = s7100
guardsound = s120, 0
ground.type = high
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -4
airguard.velocity = -1.9,-2
air.type = high
air.velocity = -2,-4
air.hittime = 12
air.fall = 1
fall.recovertime = 10
yaccel = 0.45 + (var(3) - 1)*0.15
ID = 200
nochainID = 9999

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200,0+(random%2)


[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
x = 14

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 5
ignorehitpause = 1
persistent = 0


[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 3
v = 20
value = -10

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち・弱・パンチ・の動作
[Statedef 205]
type    = S
movetype= A
physics = S
juggle  = 0
;velset = 0,0
ctrl = 0
anim = ifelse(var(20) = 0,205,206)
poweradd = 0

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0


[State 200, 1]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage = 47, 0
getpower = 46,46
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = s7000+(random%8)
sparkxy = -15, -244/2
hitsound = s400, 0+(random%2)
guard.sparkno = s7100
guardsound = s120, 0
ground.type = high
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -4
airguard.velocity = -1.9,-2
air.type = high
air.velocity = -2,-4
air.hittime = 10
air.fall = 1
fall.recovertime = 10
yaccel = 0.45 + (var(3) - 1)*0.15
ID = 200
nochainID = 9999

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200,0+(random%2)

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
x = 14

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 3
ignorehitpause = 1
persistent = 0


[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 3
v = 20
value = -10

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 遠距離立ち・強・パンチ・の動作
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 0
;velset = 0,0
ctrl = 0
anim = ifelse(var(20) = 0,210,211)
poweradd = 0

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[state a]
type = posadd
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
x = 5

[state a]
type = posadd
trigger1 = animelem = 5
x = 22


[State 200, 1]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage = 89, 0
getpower = 92,92
animtype = hard
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 15, 15
sparkno = s7000+(random%8)
sparkxy = -15, -212/2
hitsound = s500, 2
guard.sparkno = s7100
guardsound = s120, 0
ground.type = high
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -11
airguard.velocity = -1.9,-2
air.type = high
air.velocity = -4,-4
air.hittime = 12
air.fall = 1
fall.recovertime = 26
yaccel = 0.45 + (var(3) - 1)*0.17
ID = 200
nochainID = 9999

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 1

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,0+(random%3)

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 8
ignorehitpause = 1
persistent = 0


[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 3
v = 20
value = -15

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 近距離立ち・強・パンチ・の動作
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 0
;velset = 0,0
ctrl = 0
anim = ifelse(var(20) = 0,215,216)
poweradd = 0

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 200, 1]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
damage = 99, 0
getpower = 92,92
animtype = diagup
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 15, 15
sparkno = s7000+(random%8)
sparkxy = -15, -252/2
hitsound = s400, 3
guard.sparkno = s7100
guardsound = s120, 0
ground.type = high
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = 0,-14
air.type = high
air.velocity = 0,-14
air.hittime = 30
fall = 1
fall.recovertime = 24
yaccel = 0.45 + var(3)*0.45
ID = 200
nochainID = 9999

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 300, 1

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,0+(random%3)

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
x = 16

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 8
ignorehitpause = 1
persistent = 0


[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 4
v = 20
value = -15


[state a]
type = changestate
trigger1 = movehit
trigger1 = command = "holdup"
value = 40
ignorehitpause = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;遠距離立ち・弱・キック
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
;velset = 0,0
anim = ifelse(var(20) = 0,230,231)
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200,0+(random%2)

[State 230, 2]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
animtype  = light
damage    = 36,0
priority = 4, Hit
getpower = 62,62
guardflag = MA
pausetime = 12,12
sparkno = s7000+(random%8)
sparkxy = -15,-178/2
hitsound   = s400,0+(random%2)
guard.sparkno = s7100
guardsound = s120,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -5
air.velocity = -1.5,-3.5
fall.recovertime = 24
yaccel = 0.45 + (var(3)-1)*0.15
air.fall = 1
ID = 200
nochainID = 9999


[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16) >= 20
x = 14

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 5
ignorehitpause = 1
persistent = 0



[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 2
v = 20
value = -10


[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち・弱・キック
[Statedef 235]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
;velset = 0,0
anim = ifelse(var(20) = 0,235,236)
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200,0+(random%2)

[State 230, 2]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
animtype  = light
damage    = 47,0
priority = 4, Hit
getpower = 62,62
guardflag = L
pausetime = 10,10
sparkno = s7000+(random%8)
sparkxy = -15,-188/2
hitsound   = s400,0+(random%2)
guard.sparkno = s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -6
air.velocity = -1.5,-3.5
yaccel = 0.45 + (var(3)-1)*0.15
air.fall = 1
fall.recovertime = 12
ID = 200
nochainID = 9999

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16) >= 20
x = 14

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 5
ignorehitpause = 1
persistent = 0



[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 2
v = 20
value = -10

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;遠距離立ち・強・キック
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
;velset = 0,0
anim = ifelse(var(20) = 0,240,241)
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 300, 2

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,0+(random%3)


[State 230, 2]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype  = hard
damage    = 89,0
priority = 5, Hit
getpower = 108,108
guardflag = L
pausetime = 15,17
sparkno = s7000+(random%8)
sparkxy = -15,-114/2
hitsound   = s400,3
guard.sparkno = s7100
guardsound = s120,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -11
air.velocity = -1.5,-7
fall.recovertime = 26
yaccel = 0.6 + (var(3)-1)*0.17
air.fall = 1
fall.recover = 0

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 11
ignorehitpause = 1
persistent = 0



[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 4
v = 20
value = -15

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;近距離立ち・強・キック
[Statedef 245]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
;velset = 0,0
anim = ifelse(var(20) = 0,245,246)
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,0+(random%3)

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 2


[State 240, 2]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype  = hard
damage    = 99,0
priority = 6, Hit
getpower = 108,108
guardflag = MA
pausetime = 15,17
sparkno = s7000+(random%8)
sparkxy = -15,-232/2
hitsound   = s400,3
guard.sparkno = s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3,-10
guard.velocity = -11
air.velocity = -3,-9.2
yaccel = 0.6 + (var(3)-1)*0.17
fall = 1
fall.recovertime = 26
ID = 200
nochainID = 9999


[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 11
ignorehitpause = 1
persistent = 0


[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 4
v = 20
value = -15

[state a]
type = changestate
trigger1 = movehit
trigger1 = command = "holdup"
value = 40
ignorehitpause = 1

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;特殊技その１
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
;velset = 0,0
anim = ifelse(var(20) = 0,250,251)
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0


[State 200, 1];
type = PlaySnd
trigger1 = animelem = 5
value = 300, 1

[State 200, 5];ひざまずけ
type = PlaySnd
trigger1 = AnimElem = 1
value = 250,0


[State 230, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
animtype  = up
damage    = 104,0
priority = 4, Hit
getpower = 108,108
guardflag = HA
pausetime = 15,15
sparkno = s7000+(random%8)
sparkxy = -15,-156/2
hitsound   = s400,3
guard.sparkno = s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2.5,-4
guard.velocity = -11
air.velocity = -1.5,-4
yaccel = 0.6 + (var(3)-1)*0.17
fall = 1
fall.recovertime = 26

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 11
ignorehitpause = 1
persistent = 0



[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 5
v = 20
value = -15

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;特殊技その２
[Statedef 260]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
;velset = 0,0
anim = ifelse(var(20) = 0,260,261)
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0


[state a]
type = posadd
trigger1 = animelem = 5
x = 10


[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 300, 1

[State 200, 5];愛などいらぬ
type = PlaySnd
trigger1 = AnimElem = 2
value = 260,0


[State 230, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
animtype  = hard
damage    = 104,0
priority = 4, Hit
getpower = 108,108
guardflag = L
pausetime = 15,17
sparkno = s7000+(random%8)
sparkxy = -15,-106/2
hitsound   = s400,3
guard.sparkno = s7100
guardsound = s120,0
ground.type = trip
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2.5,-4
guard.velocity = -11
air.velocity = -1.5,-4
yaccel = 0.6 + (var(3)-1)*0.17
fall = 1
fall.recovertime = 26

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 11
ignorehitpause = 1
persistent = 0


;---------------------[相手制御]
[state a]
type = targetstate
trigger1 = movehit = 1
trigger1 = enemy,stateno != 550
value = 550

[state a]
type = varset
trigger1 = movehit
v = 11
value = 1

;-------------[]
[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 5
v = 20
value = -15


[State 410, 4]
type = ChangeState
trigger1 = movehit
trigger1 = command = "holdfwd"
value = 500

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ガードキャンセル攻撃
[Statedef 290]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= -1000
ctrl = 0
velset = 0,0
anim = 290
sprpriority = 1

[State 2000, 2]
type = SuperPause
trigger1 = time = 0
time = 20
movetime = 20
darken = 0
anim = -1

[State 1020, 4]
type = EnvShake
trigger1 = time = 0
time = 10
ampl = -4
freq = 95
phase = 95

[State a];
type = palfx
trigger1 = time = 0
time = 5
add = 255,255,2556
color = 1

;-------------[]
[State 210, 1];執念が足りんぞ
type = PlaySnd
trigger1 = animelem = 1
value = 290, 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 2

;-------------[速度]
[state a]
type = velset
trigger1 = animelem = 2
x = 7

;-------------[]
[State 410, 2]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
damage    = 52,0
priority = 7, Hit
animtype  = hard
guardflag = MA
pausetime = 17,17
guard.pausetime = 15,15
getpower = 123,123
sparkno = s7010+(random%8)
sparkxy = -10,-100
hitsound   = s400,3
guard.sparkno = s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10
guard.velocity = -12.5
air.velocity =-10,0
yaccel = 0.45 + var(3)*0.45;(enemy,gethitvar(hitcount)-1)*0.05
fall = 1
fall.recover = 1
kill = 0


;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 14
ignorehitpause = 1
persistent = 0


;-------------[]
[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;屈み・弱・パンチ
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
anim = ifelse(var(20) = 0,400,401)
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200,0+(random%2)

[State 400, 2]
type = HitDef
trigger1 = animelem = 3
attr = C, NA
damage    = 31,0
priority = 4, Hit
animtype  = Light
hitflag = MAF
guardflag = M
getpower = 62,62
pausetime = 10,10
sparkno = s7000+(random%8)
sparkxy = -10,-134/2
hitsound   = s400,0+(random%2)
guard.sparkno = s7100
guardsound = s120,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -4
air.velocity = -2.5,-3
air.fall = 1
fall.recovertime = 12
ID = 200
nochainID = 9999

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 5
ignorehitpause = 1
persistent = 0


[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 3
v = 20
value = -10

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
;屈み・強・パンチ
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
anim = ifelse(var(20) = 0,410,411)
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 2

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,0+(random%3)

[State 400, 2]
type = HitDef
trigger1 = animelem = 3
attr = C, NA
damage    = 83,0
priority = 5, Hit
animtype  = hard
hitflag = MAFLD
guardflag = M
getpower = 92,92
pausetime = 15,15
sparkno = s7000+(random%8)
sparkxy = -10,-156/2
hitsound   = s500,2
guard.sparkno = s7100
guardsound = s120,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7
air.velocity = -1.5,-7
air.fall = 1
fall.recovertime = 26
ID = 200
nochainID = 9999

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 8
ignorehitpause = 1
persistent = 0

[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 3
v = 20
value = -15

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1



;---------------------------------------------------------------------------
;屈み・弱・キック
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
anim = ifelse(var(20) = 0,430,431)
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200,0+(random%2)

[State 430, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 430, 2]
type = HitDef
trigger1 = animelem = 3
attr = C, NA
damage    = 31,0
priority = 4, Hit
animtype  = Light
hitflag = MAFLD
guardflag = L
getpower = 62,62
pausetime = 10,13
sparkno = s7000+(random%8)
sparkxy = -10,-38/2
hitsound   = s400,0
guard.sparkno = s7100
guardsound = s120,0
ground.type = Low
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20
air.fall = 1
fall.recovertime = 24
ID = 200
nochainID = 9999

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 5
ignorehitpause = 1
persistent = 0


[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 3
v = 20
value = -10

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み・強・キック
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
anim = ifelse(var(20) = 0,440,441)
velset = 0,0
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 440, 2]
type = PlaySnd
trigger1 = animelem = 5
value = 300, 3

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,0+(random%3)


[State 440, 3]
type = HitDef
trigger1 = animelem = 6
attr = C, NA
damage    = 68
priority = 6, Hit
hitflag = MAFLD
guardflag = L
pausetime = 15,15
sparkno = s7000+(random%8)
getpower = 108,108
sparkxy = -15,-21
hitsound   = s400,3
guardsound = s120,0
guard.sparkno = s7100
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -2.5,-8
guard..velocity = -11
air.velocity = -4,-4
guard.velocity = -5
fall = 1
fall.recovertime = 30
ID = 400
nochainID = 9999

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 11
ignorehitpause = 1
persistent = 0


[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 6
v = 20
value = -15

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;空中・弱・パンチ
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = ifelse(var(20) = 0,600,601)
sprpriority = 1

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200,0+(random%2)

;---------------------[エフェクト]
[State 600, 2]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage    = 31,0
animtype  = Light
priority = 4, Hit
getpower = 62,62
guardflag = HA
pausetime = 10,10
sparkno = s7000+(random%8)
sparkxy = -10,-164/2
hitsound   = s400,0+(random%2)
guard.sparkno = s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -6
air.velocity = ifelse(var(9) = 0,-2.3,0),-4
yaccel = 0.45 + (var(3) - 1)*0.1
air.fall = 1
fall.recovertime = 12
ID = 600
nochainID = 9999

[state a]
type = ctrlset
trigger1 = animelem = 6
value = 1

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 5
ignorehitpause = 1
persistent = 0


[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 3
v = 20
value = -10

;---------------------------------------------------------------------------
;空中・強・パンチ
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = ifelse(var(20) = 0,610,611)
sprpriority = 1

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 300, 2

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,0+(random%3)

[State 610, 3]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = 73,0
priority = 6, Hit
guardflag = HA
getpower = 108,108
pausetime = 14,14
sparkno = s7000+(random%8)
sparkxy = -10,-164/2
hitsound   = s400,3
guard.sparkno = s7100
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -11
air.velocity = ifelse(var(9) = 0,-2.3,0),-6
yaccel = 0.45 + (var(3) - 1)*0.1
air.fall = 1
fall.recovertime = 30
ID = 600
nochainID = 9999

[state a]
type = ctrlset
trigger1 = animelem = 9
value = 1

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 11
ignorehitpause = 1
persistent = 0



[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 4
v = 20
value = -15

;---------------------------------------------------------------------------
;空中・弱・キック
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = ifelse(var(20) = 0,630,631)
sprpriority = 1

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200,0+(random%2)

[State 630, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 630, 2]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage = 31,0
priority = 4, Hit
getpower = 62,62
guardflag = HA
pausetime = 10,10
sparkno = s7000+(random%8)
sparkxy = -5,-156/2
hitsound   = s400,1
guard.sparkno = s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -6
air.velocity = ifelse(var(9) = 0,-3.3,0),-5
yaccel = 0.45 + (var(3) - 1)*0.1
air.fall = 1
fall.recovertime = 24
ID = 600
nochainID = 9999

[state a]
type = ctrlset
trigger1 = animelem = 5
value = 1

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 5
ignorehitpause = 1
persistent = 0


[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 3
v = 20
value = -10

;---------------------------------------------------------------------------
;空中・強・キック
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = ifelse(var(20) = 0,640,641)
sprpriority = 1

[State 640, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 300, 2

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,0+(random%3)

[State 640, 3]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage    = 73,0
priority = 6, Hit
guardflag = HA
getpower = 123,123
pausetime = 15,15
sparkno = s7000+(random%8)
sparkxy = -10,-148/2
hitsound   = s400,3
guard.sparkno = s7100
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3,-10
guard.velocity = -11
air.velocity = ifelse(var(9) = 0,-3.3,0),-7
yaccel = 0.6 + (var(3)-1)*0.17
fall = 1
fall.recovertime = 30
ID = 600
nochainID = 9999


[state a]
type = ctrlset
trigger1 = animelem = 7
value = 1

[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 11
ignorehitpause = 1
persistent = 0

[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 4
v = 20
value = -15

;---------------------------------------------------------------------------
;死ねい！！（ケンシロウ）
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 800, 1]
type = HitDef
Trigger1 = animelem = 2
Trigger1 = p2stateno != 150 && 151 && 152 && 153 && 130 && 131 && 140
attr = S, NT          ;ｓ：立ち　ｎ：通常　ｔ：投げ
hitflag = M-          ;コンボの途中から投げが入らないよう設定してある
priority = 1, Miss    ;１は優先順位が低いので技がでないかミスするという設定
sparkno = -1          ;-をつければスパークエフェクトは無い
sprpriority = 1       ;２Ｐより上にカンフーマンが表示される
p1facing = 1 ;前を押したらターンする設定
p2facing = 1          ;？
p1stateno = 801
p2stateno = 804       ;投げが成功した場合の移動する２Ｐのステート
;hitsound = S800,0
fall = 1              ;落ちる力を２Ｐにかけるか
nochainID = 600,9999

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 215

;---------------------------------------------------------------------------
;
[Statedef 801]
type    = S
movetype= A
physics = N
anim = ifelse(var(20) = 0,801,802)
juggle  = 8
sprpriority = 2


[state a]
type = veladd
trigger1 = animelem = 10,>=0
y = 0.43

;---------------------[]
[State explod];掴み
type = Explod
trigger1 = animelem = 2
anim = 7000+(random%8)
id = 3000
sprpriority = 5
postype = p1
pos = 54/2,-66/2
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
ownpal = 1

[State explod];掴み
type = Explod
trigger1 = animelem = 4
anim = 7000+(random%8)
id = 3000
sprpriority = 5
postype = p1
pos = 70/2,-164/2
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
ownpal = 1

;---------------------[サウンド]
[State 810, Grab Sound];フフハハハハハハ
type = PlaySnd
trigger1 = time = 0
value = 800, 0

[State 810, Grab Sound];
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 4
value = 400, 2

[State 810, Grab Sound];
type = PlaySnd
trigger1 = movehit
value = 500, 2
ignorehitpause = 1
persistent = 0

;---------------------[相手制御]
[State 801, 2]
type = TargetBind
trigger1 = time = 0
pos = 100/2,0

[State 801, 2]
type = TargetBind
trigger1 = animelem = 4
pos = 120/2,0

[State 801, 2]
type = Targetstate
trigger1 = animelem = 1
value = 804

[State 801, 2]
type = Targetstate
trigger1 = animelem = 4
value = 805

[State 801, 2]
type = Targetstate
trigger1 = animelem = 6
value = 806

[state a]
type = bindtotarget
trigger1 = animelem = 6
pos = 31,63,head

[state a]
type = hitadd
trigger1 = animelem = 2
trigger2 = animelem = 4
value = 1


[State 640, 3]
type = HitDef
trigger1 = animelem = 9
attr = A, NA
damage    = 146,0
priority = 6, Hit
guardflag = HA
getpower = 123,123
pausetime = 15,15
sparkno = s7010+(random%8)
sparkxy = 0,-128/2
hitsound   = s400,3
guard.sparkno = s7100
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -6,-6
guard.velocity = -11
air.velocity = -4,-7
yaccel = 0.6 + (var(3)-1)*0.17
fall = 1
fall.recovertime = 30
ID = 600
nochainID = 9999

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 14
ignorehitpause = 1
persistent = 0

;:::

[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = time = 0
edge = 70,0

;---------------------[]
[state a]
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 803

;---------------------------------------------------------------------------
;着地
[Statedef 803]
type = S
movetype = A
physics = S
poweradd= 0
ctrl = 0
anim = 803
sprpriority = 2
velset = 0,0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State -3, Landing Sound]
type = PlaySnd
trigger1 = time = 0
value = 40, 0

[State explod];着地エフェクト
type = Explod
trigger1 = time = 0
anim = 6047
id = 6040
sprpriority = -5
postype = p1
pos = 0,0
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
scale = 0.7,0.7
ownpal = 1


;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(ENEMY)踏まれ１
[Statedef 804]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 804

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

;---------------------------------------------------------------------------
;(ENEMY)踏まれ２
[Statedef 805]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 805

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

;---------------------------------------------------------------------------
;(ENEMY)踏まれ３
[Statedef 806]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 806

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1




;---------------------------------------------------------------------------
;ひれ伏すのだ
[Statedef 850]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 8,0
ctrl = 0
anim = ifelse(var(20) = 0,850,851)
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

;---------------------[七星ゲージ]
[state a]
type = varadd
trigger1 = movehit = 1
v = 4
value = 1



[State 800, 1]
type = HitDef
Trigger1 = animelem = 3
Trigger1 = enemy,stateno != 150 && 151 && 152 && 153 && 130 && 131 && 140
trigger1 = enemy,statetype = S
attr = S, NT          ;ｓ：立ち　ｎ：通常　ｔ：投げ
hitflag = M-          ;コンボの途中から投げが入らないよう設定してある
damage    = 0
pausetime = 3,3
getpower = 123,123
priority = 1, Miss    ;１は優先順位が低いので技がでないかミスするという設定
sparkno = s7000+(random%8)
sparkxy = -1,-220/2
sprpriority = 1       ;２Ｐより上にカンフーマンが表示される
p1facing = 1 ;前を押したらターンする設定
p2facing = 1          ;？
;p1stateno = 853
;p2stateno = 855       ;投げが成功した場合の移動する２Ｐのステート
hitsound = S400,3
fall = 1              ;落ちる力を２Ｐにかけるか
kill = 0

[state a]
type = changestate
trigger1 = movehit
value = 852

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;
[Statedef 852]
type    = S
movetype= A
physics = N
anim = ifelse(var(20) = 0,852,853)
juggle  = 0
velset = 0,0
sprpriority = 2

;---------------------[]
[State explod];
type = Explod
trigger1 = animelem = 6
anim = 854
id = 3000
sprpriority = 5
postype = p1
pos = 74/2,-184/2
bindtime = 1
supermove = 0
ignorehitpause = 1
under = 0

[State explod];
type = Explod
trigger1 = animelem = 7
anim = 857
id = 3000
sprpriority = 4
postype = p1
pos = 38/2,-212/2
bindtime = 1
supermove = 0
ignorehitpause = 1
under = 0
scale = 0.5,0.5


;---------------------[サウンド]
[State 810, Grab Sound];ひれ伏すのだ
type = PlaySnd
trigger1 = animelem = 1
value = 850, 0

[State 810, Grab Sound];
type = PlaySnd
trigger1 = animelem = 6
value = 300, 4

[state a]
type = playsnd
trigger1 = movehit
ignorehitpause = 1
persistent = 0
value = 400,3

;---------------------[相手制御]
[State 801, 2]
type = TargetBind
trigger1 = animelem = 1
pos = 84/2,0

[State 801, 2]
type = Targetstate
trigger1 = animelem = 1
value = 855

[State 801, 2]
type = Targetstate
trigger1 = animelem = 3
value = 856


[State 640, 3]
type = HitDef
trigger1 = animelem = 7
attr = A, NA
damage    = 125,0
priority = 6, Hit
guardflag = HA
getpower = 123,123
pausetime = 17,17
sparkno = s7010+(random%8)
sparkxy = 0,-168/2
hitsound   = s500,2
guard.sparkno = s7100
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7,-5
guard.velocity = -11
air.velocity = -4,-7
yaccel = 0.6 + (var(3)-1)*0.17
fall = 1
fall.recovertime = 30
ID = 600
nochainID = 9999

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = time = 0
trigger1 = var(23) = 0
v = 16
value = 14
ignorehitpause = 1
persistent = 0

[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 14
ignorehitpause = 1
persistent = 0

;:::

[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = time = 0
edge = 80,0

[State 821, 3] 
type = changeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;(ENEMY)掴まれ
[Statedef 855]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 855

[state a]
type = turn
trigger1 = animelem = 3

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

;---------------------------------------------------------------------------
;(ENEMY)掴まれ
[Statedef 856]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 856

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1


;---------------------------------------------------------------------------
;(ENEMY)投げられ２
[Statedef 857]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[state a]
type = sprpriority
trigger1 = animelem = 5
value = 5

[State 700, 2];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = velset
trigger1 = animelem = 1
x = 9
y = 6

[State 821, 1] ;これは重力これは毎フレーム事に0.4の力が加わります
type = VelAdd
Trigger1 = 1
y = .4

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100



;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;特殊技
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;グレイブシュート
[Statedef 300]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
;velset = 0,0
anim = ifelse(var(20) = 0,300,301)
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[state a]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
x = 40/2

[state a]
type = posadd
trigger1 = animelem = 5
x = -80/2

;-------------[効果音]
[State 210, 1];飛べ！！
type = PlaySnd
trigger1 = animelem = 2
value = 301, 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 300, 2

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 301, 1


[State 1020, 4]
type = EnvShake
trigger1 = animelem = 3
time = 8
ampl = -10
freq = 95
phase = 95

;-------------[攻撃]
[State 410, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage = 104
priority = 6, Hit
animtype  = diagup
hitflag = MAFLD
guardflag = MA
pausetime = 17,17
guard.pausetime = 15,15
getpower = 123,123
sparkno = s7000+(random%8)
sparkxy = -10,-20
hitsound   = s400,3
guard.sparkno = s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = 0,-14
guard.velocity = -12.5
air.velocity =0,-14
down.velocity = -9,-2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.45 + var(3)*0.45;(enemy,gethitvar(hitcount)-1)*0.05
fall = 1
fall.recovertime = 30
ID = 410
nochainID = 9999

;-------------[]
[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 14
ignorehitpause = 1
persistent = 0



[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 3
v = 20
value = -15

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(20) = 0
v = 16
value = 11
ignorehitpause = 1
persistent = 0


[state a]
type = changestate
trigger1 = movehit
trigger1 = command = "holdup"
value = 40
ignorehitpause = 1

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;へヴィーストライク
[Statedef 310]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
;velset = 0,0
anim = 310
sprpriority = 1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

;-------------[]
[State 210, 1];へヴィーストライク
type = PlaySnd
trigger1 = animelem = 1
value = 350, 0

[State 210, 1];下郎！！
type = PlaySnd
trigger1 = animelem = 1
value = 310, 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 5
value = 300, 3

;-------------[速度]
[state a]
type = velset
trigger1 = animelem = 5
x = 18

[state a]
type = posadd
trigger1 = animelem = 5
x = 48/2


;-------------[]
[State 410, 2]
type = HitDef
trigger1 = animelem = 6
attr = S, NA
damage    = 31,0
priority = 7, Hit
animtype  = hard
guardflag = N
pausetime = 17,17
guard.pausetime = 15,15
getpower = 108,108
sparkno = s7010+(random%8)
sparkxy = -10,-108
hitsound   = s500,2
guard.sparkno = s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10
guard.velocity = -12.5
air.velocity =-3,-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = 350
yaccel = 0.45 + var(3)*0.45;(enemy,gethitvar(hitcount)-1)*0.05
air.fall = 1
fall.recover = 1
ID = 410
nochainID = 9999

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = time = 0
id = 3000
name = "ef"
sprpriority = 2
pos = 6/2,-164/2
postype = p1
stateno = 311
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;-------------[]
[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16) >= 20
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 11
ignorehitpause = 1
persistent = 0


[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 6
v = 20
value = -15

;---------------------[七星ゲージ]
[state a]
type = varadd
trigger1 = movehit = 1
v = 4
value = 1
IgnoreHitPause = 1
persistent = 0

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(20) = 0
v = 16
value = 11
ignorehitpause = 1
persistent = 0

;-------------[]
[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;(HELPER)発動エフェクト
[Statedef 311]
type = S
ctrl = 0
anim = 6000
velset = 0,0
movetype = I
physics = N
sprpriority = 5

[state a]
type = AssertSpecial
trigger1 = time = 0
flag = invisible

;---------------------[エフェクト]
[state a]
type = PalFX
trigger1 = time = 0
time = 75
add = 5,25,5
mul = 206,200,155
color = 0

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
;---------------------[]
[state a]
type = varset
trigger1 = time = 0
v = 2
value = 0

[state a]
type = varadd
trigger1 = time >= 18
v = 2
value = 5

;---------------------[拡縮]
[state a]
type = angleset
trigger1 = time = 0
value = 90

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 1.5-(var(2)*0.01),1.5-(var(2)*0.01)

;---------------------[]



;---------------------[]
[state a]
type = destroyself
trigger1 = time = 46


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;秘孔やられ・よろけ
[Statedef 350]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[state a]
type = changestate
trigger1 = time = 0
trigger1 = (anim = [350,369]) || (anim = 5300)
trigger2 = pos y < 0
trigger3 = lose = 1
value = 352

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 350

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
value = 360

[state a]
type = changestate
trigger1 = animtime = 0
value = 351

;---------------------------------------------------------------------------
;秘孔やられ・気絶
[Statedef 351]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5300

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
value = 361

[state a]
type = selfstate
trigger1 = time = 180
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;秘孔やられ・吹き飛び
[Statedef 352]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 352

[state a]
type = changestate
trigger1 = time = 15
value = 353


;---------------------------------------------------------------------------
;秘孔やられ・吹き飛び
[Statedef 353]
type    = S
movetype= H
physics = N
velset = -4,-7
sprpriority = 1

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[State 821, 1] ;これは重力これは毎フレーム事に0.4の力が加わります
type = VelAdd
Trigger1 = 1
y = .4

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;バニシングストライク・チャージ
[Statedef 320]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
;velset = 0,0
anim = 320
sprpriority = 1


[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 210, 1];滅びるがいい
type = PlaySnd
trigger1 = time = 6
value = 320, 0

;-------------[変数初期化、変更]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

[state a]
type = varset
trigger1 = time >= 34
v = 5
value = 1

;-------------[]
[state a];ブースト
type = veladd
trigger1 = command = "z"
x = 15

[State a];ブースト
type = palfx
trigger1 = command = "z"
time = 5
add = 255,255,2556
color = 1


[State 410, 4]
type = ChangeState
trigger1 = (time >= 12 && var(20) = 0)||(time >= 6 && var(20) >1)
trigger1 = command != "おしっぱなしy" && command != "おしっぱなしb"
trigger2 = time >= 38
value = 321


;---------------------------------------------------------------------------
;バニシングストライク・攻撃
[Statedef 321]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = ifelse(var(20) = 0,321,322)
sprpriority = 1

;-------------[]
[State 210, 1];へヴィーストライク
type = PlaySnd
trigger1 = animelem = 1
trigger1 = var(5) = 1
value = 350, 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 1
value = 300, 2

;-------------[速度]
[state a]
type = velset
trigger1 = animelem = 1
x = 7+var(5)*8

;-------------[]
[State 410, 2]
type = HitDef
trigger1 = animelem = 2
trigger1 = var(5) = 0
attr = S, NA
damage    = 104,0
priority = 7, Hit
animtype  = hard
guardflag = MA
pausetime = 17,17
guard.pausetime = 15,15
getpower = 108,108
sparkno = s7010+(random%8)
sparkxy = -10,-100
hitsound   = s400,3
guard.sparkno = s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10
guard.velocity = -12.5
air.velocity =-10,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.45 + var(3)*0.45;(enemy,gethitvar(hitcount)-1)*0.05
fall = 1
fall.recover = 1

[State 410, 2]
type = HitDef
trigger1 = animelem = 2
trigger1 = var(5) = 1
attr = S, NA
damage    = 104,0
priority = 7, Hit
animtype  = hard
guardflag = N
pausetime = 17,17
guard.pausetime = 15,15
getpower = 108,108
sparkno = s7010+(random%8)
sparkxy = -10,-100
hitsound   = s400,3
guard.sparkno = s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10
guard.velocity = -12.5
air.velocity =-10,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.45 + var(3)*0.45;(enemy,gethitvar(hitcount)-1)*0.05
fall = 1
fall.recover = 1

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = time = 0
trigger1 = var(5) = 1
id = 3000
name = "ef"
sprpriority = 2
pos = -76/2,-152/2
postype = p1
stateno = 311
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[相手制御]
[state a]
type = targetstate
trigger1 = movehit = 1
trigger1 = enemy,stateno != 550
value = 550

[state a]
type = varset
trigger1 = movehit
v = 11
value = 1

;---------------------[七星ゲージ]
[state a]
type = varadd
trigger1 = movehit = 1
trigger1 = var(11) = 0
v = 4
value = 1
IgnoreHitPause = 1
persistent = 0

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 11
ignorehitpause = 1
persistent = 0


;-------------[]
[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 6
v = 20
value = -15


[State 410, 4]
type = ChangeState
trigger1 = movehit
trigger1 = command = "holdfwd"
value = 500

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
; ブースト
[Statedef 500]
type    = S
physics = N
anim = 500
sprpriority = 1
ctrl = 0

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[State 1000, 0]
type = MoveHitReset
trigger1 = 1
ignorehitpause =1


[state a]
type = veladd
trigger1 = time = 0
x = 8
;IgnoreHitPause = 1

[state a]
type = veladd
trigger1 = vel x < 8
x = 0.2


[State a];
type = palfx
trigger1 = time = 0
time = 5
add = 255,255,2556
color = 1

;-------------[]
[State 210, 1];
type = PlaySnd
trigger1 = time = 0
value = 110, 0

;-------------[状態関係]
[state a]
type = statetypeset
trigger1 = pos y < 0
value = A

[state a]
type = veladd;gravity
trigger1 = Statetype = A
y = 0.45

[state a]
type = statetypeset
trigger1 = pos y >= 0
value = S

[state a]
type = posset
trigger1 = Statetype = S
y = 0

[state a]
type = ctrlset
trigger1 = time = 40
value = 1

[state a]
type = velset
trigger1 = Pos Y >= 0
y = 0

[State 04]
type = posset
trigger1 = Pos Y > 0
y = 0
;-------------[]
[state a]
type = varadd
trigger1 = time = 0
v = 16
value = -20

[state a]
type = varset
trigger1 = time = 0
v = 23
value = 1

;-------------[]
[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 04]
type = ChangeState
trigger1 = time = 90
trigger1 = statetype = S
value = 0
ctrl = 1

[State 04]
type = ChangeState
trigger1 = time = 90
trigger1 = statetype = A
value = 111
ctrl = 1




;---------------------------------------------------------------------------
;(ENEMY)へヴィストライク、吹き飛び
[Statedef 550]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[state a]
type = turn
trigger1 = p2dist x < 0
trigger1 = time = 0

[state a]
type = velset
trigger1 = time = 0
x = -12

[state a]
type = posadd
trigger1 = time = 0
trigger1 = enemy,stateno = 321
y = -20

[state a]
type = playerpush
trigger1 = 1
value = 0


[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 550

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
value = 560

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = changestate
trigger1 = BackEdgeDist <= 10
trigger2 = time = 200
trigger3 = frontEdgeDist <= 10
value = 552

;---------------------------------------------------------------------------
;(ENEMY)へヴィストライク、弱吹き飛び
[Statedef 551]
type    = A
movetype= H
physics = N
velset = -12,0
sprpriority = 1

[state a]
type = turn
trigger1 = p2dist x < 0
trigger1 = time = 0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 550

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
value = 560

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = changestate
trigger1 = BackEdgeDist <= 10
value = 552

;---------------------------------------------------------------------------
;(ENEMY)へヴィストライク、壁ヒット
[Statedef 552]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 552

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
value = 562

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 1020, 4]
type = EnvShake
trigger1 = time = 0
time = 10
ampl = -4
freq = 95
phase = 95

[state a]
type = posadd
trigger1 = time = 0
trigger1 = prevstateno = 550
y = -10

[state a]
type = posadd
trigger1 = time = 0
trigger1 = prevstateno = 551
y = 5


[state a]
type = changestate
trigger1 = animtime = 0
value = 553

;---------------------------------------------------------------------------
;(ENEMY)へヴィストライク、落下
[Statedef 553]
type    = A
movetype= H
physics = N
velset = 0.4,0
sprpriority = 1

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
value = 563

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = veladd
trigger1 = time >= 3
y = 0.45

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100



;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;必殺技
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 極星十字衝破風
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
;velset = 0,0
anim = ifelse(var(20) = 0,1000,1001)
sprpriority = 1
ctrl = 0


[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0


;---------------------[コマンド判定]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

[state a]
type = varset
trigger1 = time = 0
trigger1 = command = "y"
v = 5
value = 1


;---------------------[効果音]
[state a];ここまでだ！
type = playsnd
trigger1 = time = 0
value = 1000,0

[state a];
type = playsnd
trigger1 = animelem = 5
value = 1000,1

[state a];
type = playsnd
trigger1 = movehit
value = 400,3
persistent = 0
ignorehitpause = 1

;---------------------[ヘルパー]
[state a];弾
type = Helper
trigger1 = animelem = 6
id = 1005
name = "kosure"
sprpriority = 5
pos = 74/2,-178/2
postype = p1
stateno = 1005
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[コマンド判定]
[State 440, 3]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
damage    = 83,8
priority = 8, Hit
hitflag = MAFLD
guardflag = M
animtype = hard
pausetime = 15,15
sparkno = s7010+(random%8)
getpower = 123,123
sparkxy = -15,-172/2
hitsound   = s500,2
guardsound = s121,0
guard.sparkno = s7101
ground.type = high
ground.slidetime = 17
ground.hittime  = 15
ground.velocity = -4.5
guard.velocity = -11
air.velocity = -3,-7
air.fall = 1
fall.recovertime = 30
ID = 400
nochainID = 9999

;---------------------[]
[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16) >= 20
x = 12

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 8
ignorehitpause = 1
persistent = 0




[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 5
v = 20
value = -30

;---------------------[七星ゲージ]
[state a];カウンターヒット
type = varadd
trigger1 = movehit = 1
trigger1 = var(8) = 1
v = 4
value = 1
IgnoreHitPause = 1
persistent = 0


;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;(HELPER)弾
[Statedef 1005]
type = A
ctrl = 0
anim = 1005
velset = 0,0
movetype = A
physics = N
sprpriority = 2

;
;var(2) = 拡縮

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------[]
[state a]
type = varset
trigger1 = time = 0
v = 1 
value = root,var(5)

[state a]
type = velset
trigger1 = time = 0
x = 1.5+var(1)

;---------------------[効果音]
[state a];
type = playsnd
trigger1 = movehit
value = 500,2
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 440, 3]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = hard
damage    = 83,6
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 0,12
sparkno = s7010+(random%8)
getpower = 46,46
sparkxy = -10,0
hitsound   = s400,3
guardsound = s121,0
guard.sparkno = s7101
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -9
guard.velocity = -11
air.velocity = -4,-4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 0
ID = 9999
nochainID = 9999

;---------------------[ヘルパー]
[state a];エフェクト
type = Helper
trigger1 = time = 0
id = 1010
name = "efe"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1010
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[state a];エフェクト
type = Helper
trigger1 = time = 0
id = 1011
name = "efe"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1010
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

;---------------------[拡縮]
[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 0.2,0.2

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 1006

;---------------------[ブーストゲージ増加]
[state a]
type = parentvaradd
trigger1 = movecontact = 1
trigger1 = root,var(23) = 0
v = 16
value = 4
ignorehitpause = 1
persistent = 0

;---------------------[]
[state a]
type = destroyself
trigger1 = time = 117

[state a]
type = changestate
trigger1 = movecontact
value = 1006

;---------------------------------------------------------------------------
;(HELPER)弾消滅
[Statedef 1006]
type = A
ctrl = 0
anim = 1006
velset = 0,0
movetype = A
physics = N
sprpriority = 2

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;---------------------[拡縮]
[state a]
type = varset
trigger1 = time = 0
v = 2
value = 0

[state a]
type = varadd
trigger1 = 1
v = 2
value = 16



[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 1+var(2)*0.005,1+var(2)*0.005

;---------------------[ヘルパー]
[state a];エフェクト
type = Helper
trigger1 = time = 0
id = 1015
name = "efe"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1015
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[state a];エフェクト
type = Helper
trigger1 = time = 0
id = 1016
name = "efe"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1015
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[state a];エフェクト
type = Helper
trigger1 = time = 0
id = 1017
name = "efe"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1015
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[state a];エフェクト
type = Helper
trigger1 = time = 0
id = 1018
name = "efe"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1015
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(2), 256

;---------------------[]
[state a]
type = destroyself
trigger1 = time = 16

;---------------------------------------------------------------------------
;(HELPER)エフェクト
[Statedef 1010]
type = A
ctrl = 0
anim = 1010
velset = 0,0
movetype = I
physics = N
sprpriority = 5


[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state a]
type = bindtoparent
trigger1 = 1
pos = 0,0

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = ishelper(1011)
value = 1011

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state a]
type = varadd
trigger1 = time <= 20
v = 1
value = 1

[state a]
type = varadd
trigger1 = time >= 95
v = 1
value = -1


;---------------------[拡縮]
[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 0+var(1)*0.05,0+var(1)*0.05


;---------------------[]
[state a]
type = destroyself
trigger1 = time = 117
trigger2 = root,numhelper(1005) = 0
trigger3 = parent,stateno = 1006


;---------------------------------------------------------------------------
;(HELPER)消滅エフェクト
[Statedef 1015]
type = A
ctrl = 0
anim = 1015
velset = 0,0
movetype = I
physics = N
sprpriority = 5


[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(1),256

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state a]
type = varadd
trigger1 = 1
v = 1
value = 16

;---------------------[拡縮]
[state a]
type = angleset
trigger1 = ishelper(1016)
value = 180

[state a]
type = angleset
trigger1 = ishelper(1017)
value = 90

[state a]
type = angleset
trigger1 = ishelper(1018)
value = 270


[State 1000, 0]
type = AngleDraw
trigger1 = ishelper(1015)
trigger2 = ishelper(1016)
scale = 1.0+var(1)*0.005,1.0+var(1)*0.003

[State 1000, 0]
type = AngleDraw
trigger1 = ishelper(1017)
scale = 1.0+var(1)*0.005,0.6+var(1)*0.003

[State 1000, 0]
type = AngleDraw
trigger1 = ishelper(1018)
scale = 1.0+var(1)*0.005,0.4+var(1)*0.003

;---------------------[]
[state a]
type = destroyself
trigger1 = time = 16


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; バクセー
[Statedef 1100]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = ifelse(var(20) = 0,1100,1101)
sprpriority = 1
ctrl = 0

;---------------------[コマンド判定]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

[state a]
type = varset
trigger1 = time = 0
trigger1 = command = "y"
v = 5
value = 1



[state a]
type = veladd
trigger1 = animelem = 10,>=0
y = 0.5


;---------------------[効果音]
[state a];南斗爆星波
type = playsnd
trigger1 = time = 0
value = 1100,0

[state a];
type = playsnd
trigger1 = animelem = 9
value = 1000,1

[state a];
type = playsnd
trigger1 = movehit
value = 400,3
persistent = 0
ignorehitpause = 1

;---------------------[ヘルパー]
[state a];弾
type = Helper
trigger1 = animelem = 10
id = 1105
name = "kosure"
sprpriority = 5
pos = 72/2,-114/2
postype = p1
stateno = 1105
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[コマンド判定]
[State 440, 3]
type = HitDef
trigger1 = animelem = 9
attr = S, SA
damage    = 83,8
priority = 8, Hit
hitflag = MAFLD
guardflag = H
animtype = hard
pausetime = 15,15
sparkno = s7010+(random%8)
getpower = 123,123
sparkxy = -15,-172/2
hitsound   = s500,2
guardsound = s121,0
guard.sparkno = s7101
ground.type = high
ground.slidetime = 17
ground.hittime  = 15
ground.velocity = -4.5
guard.velocity = -11
air.velocity = -3,-7
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recovertime = 30
ID = 400
nochainID = 9999


[state a]
type = ctrlset
trigger1 = animelem = 13
value = 1

;---------------------[]
[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 10,<=0
trigger1 = var(16) >= 20
x = 6

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 10,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 10,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 8
ignorehitpause = 1
persistent = 0



[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 9
v = 20
value = -30

;---------------------[七星ゲージ]
[state a];グレイブシュート
type = varadd
trigger1 = movehit = 1
trigger1 = var(9) != 0
v = 4
value = 1
IgnoreHitPause = 1
persistent = 0

[state a];カウンターヒット
type = varadd
trigger1 = movehit = 1
trigger1 = var(8) = 1
v = 4
value = 1
IgnoreHitPause = 1
persistent = 0


;---------------------[立ちステートに戻る]
[state a]
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 50

;---------------------------------------------------------------------------
;(HELPER)弾
[Statedef 1105]
type = A
ctrl = 0
anim = 1105
velset = 0,0
movetype = A
physics = N
sprpriority = 2

;
;var(2) = 拡縮

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------[]
[state a]
type = varset
trigger1 = time = 0
v = 1 
value = root,var(5)

[state a]
type = velset
trigger1 = time = 0
x = 1.5+var(1)
y = 1.5+var(1)

;---------------------[効果音]
[state a];
type = playsnd
trigger1 = movehit
value = 500,2
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 440, 3]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = hard
damage    = 57,6
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 0,8
sparkno = s7010+(random%8)
getpower = 69,69
sparkxy = -10,0
hitsound   = s400,3
guardsound = s121,0
guard.sparkno = s7101
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -9
guard.velocity = -11
air.velocity = -4,-4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 0
ID = 9999
nochainID = 9999

;---------------------[ヘルパー]
[state a];エフェクト
type = Helper
trigger1 = time = 0
id = 1110
name = "efe"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1110
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

;---------------------[拡縮]
[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 0.2,0.2

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 1106

;---------------------[ブーストゲージ増加]
[state a]
type = parentvaradd
trigger1 = movecontact = 1
trigger1 = root,var(23) = 0
v = 16
value = 7
ignorehitpause = 1
persistent = 0

;---------------------[]
[state a]
type = changestate
trigger1 = movecontact
value = 1106

[state a]
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1108

;---------------------------------------------------------------------------
;(HELPER)弾消滅
[Statedef 1106]
type = A
ctrl = 0
anim = 1006
velset = 0,0
movetype = A
physics = N
sprpriority = 2

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;---------------------[拡縮]
[state a]
type = varset
trigger1 = time = 0
v = 2
value = 0

[state a]
type = varadd
trigger1 = 1
v = 2
value = 16



[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 1+var(2)*0.005,1+var(2)*0.005

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(2), 256

;---------------------[]
[state a]
type = destroyself
trigger1 = time = 16

;---------------------------------------------------------------------------
;(HELPER)弾消滅2
[Statedef 1108]
type = A
ctrl = 0
;anim = 1005
;velset = 0,0
movetype = A
physics = N
sprpriority = 2

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------[]
[state a]
type = destroyself
trigger1 = time = 32

;---------------------------------------------------------------------------
;(HELPER)エフェクト
[Statedef 1110]
type = A
ctrl = 0
anim = 1110
velset = 0,0
movetype = I
physics = N
sprpriority = 5


[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state a]
type = bindtoparent
trigger1 = 1
pos = 0,0

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state a]
type = varadd
trigger1 = time <= 20
v = 1
value = 1

;---------------------[拡縮]
[State 1000, 0]
type = null;AngleDraw
trigger1 = 1
scale = 0+var(1)*0.05,0+var(1)*0.05


;---------------------[]
[state a]
type = changestate
trigger1 = parent,stateno = 1108
value = 1109

[state a]
type = changestate
trigger1 = parent,stateno = 1106
value = 1107

;---------------------------------------------------------------------------
;(HELPER)エフェクト
[Statedef 1109]
type = A
ctrl = 0
anim = 1110
velset = 0,0
movetype = I
physics = N
sprpriority = 5


[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state a]
type = bindtoparent
trigger1 = 1
pos = 0,0

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(1),256

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state a]
type = varadd
trigger1 = 1
v = 1
value = 8

;---------------------[拡縮]
[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 1.0-var(1)*0.004,1.0-var(1)*0.004


;---------------------[]
[state a]
type = destroyself
trigger1 = time = 32

;---------------------------------------------------------------------------
;(HELPER)消滅エフェクト
[Statedef 1107]
type = A
ctrl = 0
anim = 1107
velset = 0,0
movetype = I
physics = N
sprpriority = 5


[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state a]
type = bindtoparent
trigger1 = 1
pos = 0,0

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(1),256

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state a]
type = varadd
trigger1 = 1
v = 1
value = 8

;---------------------[拡縮]
[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 1.0,1.0


;---------------------[]
[state a]
type = destroyself
trigger1 = animtime = 0

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 投槍
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
;velset = 0,0
anim = ifelse(var(20) = 0,1200,1201)
sprpriority = 1
ctrl = 0


[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0


;---------------------[コマンド判定]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

[state a]
type = varset
trigger1 = time = 0
trigger1 = command = "y"
v = 5
value = 1

[state a]
type = varset
trigger1 = time = 0
trigger1 = command = "x"
trigger1 = command = "y"
v = 5
value = 2

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 2
value = ifelse(var(20) = 0,1205,1206)


;---------------------[効果音]
[state a];ふふふはははは
type = playsnd
trigger1 = time = 0
value = 1200,0

[state a];
type = playsnd
trigger1 = animelem = 11
value = 1200,1

[state a];
type = playsnd
trigger1 = animelem = 13
value = 1200,2


;---------------------[ヘルパー]
[state a];槍
type = Helper
trigger1 = animelem = 12
trigger1 = var(5) != 2
id = 1210
name = "yari"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1210
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[state a];槍
type = Helper
trigger1 = animelem = 16
trigger1 = var(5) = 2
id = 1210
name = "yari"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1212
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[]
[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 12,<=0
trigger1 = var(16) >= 20
x = 12

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 12,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 12,<=0
trigger1 = var(16) >= 20
v = 16
value = -20


[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 12
v = 20
value = -30

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;(HELPER)槍
[Statedef 1210]
type = A
ctrl = 0
anim = 1210
velset = 0,0
movetype = A
physics = N
sprpriority = 2

;
;var(2) = 拡縮


[state a]
type = bindtoroot
trigger1 = time = 0
trigger1 = root,var(5) = 0
pos = 88/2,-278/2

[state a]
type = bindtoroot
trigger1 = time = 0
trigger1 = root,var(5) = 1
pos = 88/2,-298/2
;---------------------[]
[state a]
type = velset
trigger1 = time = 0
trigger1 = root,var(5) = 0
x = 9
y = -3

[state a]
type = velset
trigger1 = time = 0
trigger1 = root,var(5) = 1
x = 18
y = -9

;---------------------[効果音]
[state a];
type = playsnd
trigger1 = movehit
value = 500,2
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 440, 3]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = hard
damage    = 115,11
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 0,12
sparkno = s7010+(random%8)
getpower = 69,69
sparkxy = -10,0
hitsound   = s400,3
guardsound = s121,0
guard.sparkno = s7101
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2,-7
guard.velocity = -11
air.velocity = ifelse(var(9) = 0,-2.3,0),-7
yaccel = 0.6 + (var(3) - 1)*0.1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
air.fall = 1
fall.recovertime = 24
ID = 9999
nochainID = 9999


;---------------------[拡縮]
[state a]
type = angleset
trigger1 = time = 0
trigger1 = root,var(5) = 0
value = 20

[state a]
type = angleset
trigger1 = time = 0
trigger1 = root,var(5) = 1
value = 30

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 1.0,1.0

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 1211

;---------------------[ブーストゲージ増加]
[state a]
type = parentvaradd
trigger1 = movecontact = 1
trigger1 = root,var(23) = 0
v = 16
value = 7
ignorehitpause = 1
persistent = 0

;---------------------[]
[state a]
type = changestate
trigger1 = movecontact
trigger2 = frontedgedist < -20
trigger3 = time = 100
value = 1211

;---------------------------------------------------------------------------
;(HELPER)槍
[Statedef 1211]
type = A
ctrl = 0
anim = 1210
velset = 0,0
movetype = A
physics = N
sprpriority = 2

;
;var(2) = 拡縮


;---------------------[拡縮]
[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 1.0,1.0

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

;---------------------[]
[state a]
type = destroyself
trigger1 = time = 0


;---------------------------------------------------------------------------
;(HELPER)強化版槍
[Statedef 1212]
type = A
ctrl = 0
anim = 1210
velset = 0,0
movetype = A
physics = N
sprpriority = 2

[state a]
type = bindtoroot
trigger1 = time = 0
pos = 88/2,-198/2

;---------------------[]
[state a]
type = velset
trigger1 = time = 0
x = 15

;---------------------[効果音]
[state a];
type = playsnd
trigger1 = movehit
value = 500,2
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 440, 3]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = hard
damage    = 115,11
priority = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkno = s7010+(random%8)
getpower = 69,69
sparkxy = -10,0
hitsound   = s400,3
guardsound = s121,0
guard.sparkno = s7101
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2,-7
guard.velocity = -11
air.velocity = ifelse(var(9) = 0,-2.3,0),-7
yaccel = 0.6 + (var(3) - 1)*0.1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
air.fall = 1
fall.recovertime = 24
ID = 9999
nochainID = 9999


[State explod];
type = Explod
trigger1 = movehit
anim = 1217
id = 1217
sprpriority = 6
postype = p1
pos = 70,0
bindtime = 1
facing = -1
supermove = 0
under = 0
scale = 1.5,1.5
persistent = 0
ignorehitpause = 1


[State explod];
type = Explod
trigger1 = movehit
anim = 1217
id = 1217
sprpriority = -6
postype = p1
pos = 80,0
bindtime = 1
supermove = 0
under = 0
scale = 0.9,0.9
persistent = 0
ignorehitpause = 1

;---------------------[拡縮]
[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 1.0,1.0

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 1211

;---------------------[ブーストゲージ増加]
[state a]
type = parentvaradd
trigger1 = movecontact = 1
trigger1 = root,var(23) = 0
v = 16
value = 14
ignorehitpause = 1
persistent = 0

;---------------------[]]
[state a]
type = changestate
trigger1 = movehit
value = 1215

[state a]
type = changestate
trigger1 = moveguarded
trigger2 = frontedgedist < -20
trigger3 = time = 100
value = 1211

;---------------------------------------------------------------------------
;(HELPER)強化版槍・相手貫通
[Statedef 1215]
type = A
ctrl = 0
anim = 1215
velset = 0,0
movetype = A
physics = N
sprpriority = -2

[state a]
type = bindtotarget
trigger1 = time = 0
pos = 0,0,Mid

[state a]
type = targetstate
trigger1 = 1
value = 1220

[state a]
type = null;varset
trigger1 = time = 0
v = 1
value = pos y

[state a]
type = targetbind
trigger1 = 1
x = 0

[state a]
type = posset
trigger1 = 1
y = -198/2

;---------------------[ヘルパー]
[state a];槍
type = Helper
trigger1 = time = 0
id = 1216
name = "yari"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1216
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[]
[state a]
type = velset
trigger1 = time = 0
x = 11


;---------------------[]
[state a]
type = changestate
trigger1 = frontedgedist <= 0
trigger2 = time = 100
value = 1217

;---------------------------------------------------------------------------
;(HELPER)強化版槍2・相手貫通
[Statedef 1216]
type = A
ctrl = 0
anim = 1216
velset = 0,0
movetype = A
physics = N
sprpriority = 2

[state a]
type = bindtoparent
trigger1 = 1
pos = 0,0

;---------------------[]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state a]
type = varadd
trigger1 = parent,stateno = 1217
v = 1
value = 8

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(1),var(1)

[state a]
type = destroyself
trigger1 = var(1) >= 256

;---------------------------------------------------------------------------
;(HELPER)強化版槍・壁張り付き
[Statedef 1217]
type = A
ctrl = 0
anim = 1215
velset = 0,0
movetype = A
physics = N
sprpriority = -2

[state a]
type = targetbind
trigger1 = time = 0
x = 0

[state a]
type = targetstate
trigger1 = time = 0
value = 1221

[State 200, 1];
type = PlaySnd
trigger1 = time = 0
value = 301, 1


[State 1020, 4]
type = EnvShake
trigger1 = time = 0
time = 8
ampl = -6
freq = 95
phase = 95

[State explod];
type = Explod
trigger1 = time = 0
anim = 1217
id = 1217
sprpriority = 6
postype = p1
pos = 0,0
bindtime = 1
facing = -1
supermove = 0
under = 0
scale = 1.2,1.2
persistent = 0
ignorehitpause = 1

;---------------------[]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state a]
type = varadd
trigger1 = 1
v = 1
value = 8

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(1),var(1)

;---------------------[]
[state a]
type = destroyself
trigger1 = time = 32
;value = 1216

;---------------------------------------------------------------------------
;(ENEMY)刺され
[Statedef 1220]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[state a]
type = playerpush
trigger1 = 1
value = 0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1220

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,0

;---------------------------------------------------------------------------
;(ENEMY)刺され２
[Statedef 1221]
type    = A
movetype= H
physics = N
velset = -20,0
sprpriority = -1

[state a]
type = playerpush
trigger1 = 1
value = 0

[state a]
type = posfreeze
trigger1 = 1
value = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1221

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,0

[state a]
type = changestate
trigger1 = time = 32
value = 1222

;---------------------------------------------------------------------------
;(ENEMY)落下
[Statedef 1222]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = changeanim2
trigger1 = time = 0
value = 1222

[state a]
type = changestate
trigger1 = animtime = 0
value = 1223

;---------------------------------------------------------------------------
;(ENEMY)ダウン
[Statedef 1223]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -2
anim = 5050

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 700, 2];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = AnimExist(5051) = 1
value = 5051

[state a]
type = turn
trigger1 = time = 0
trigger1 = AnimExist(5101) = 0


[State 821, 3] 
type = selfState
trigger1 = time = 0
;trigger2 = animtime = 0
value = 5100


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 退かぬ
[Statedef 1300]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
;velset = 0,0
anim = ifelse(var(20) = 0,1300,1301)
sprpriority = 1
ctrl = 0


[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[state a]
type = posset
trigger1 = time = 0
y = 0


;---------------------[速度]
[state a]
type = posadd
trigger1 = animelem = 4
x = 23

[state a]
type = veladd
trigger1 = animelem = 3
x = 9

[state a]
type = veladd
trigger1 = vel x > 0
x = -0.5

[state a]
type = velset
trigger1 =  vel x <= 0
x = 0


;---------------------[効果音]
[state a];退かぬ
type = playsnd
trigger1 = time = 0
value = 1300,0

[state a];スライス
type = playsnd
trigger1 = animelem = 3
value = 1300,3

[state a];
type = playsnd
trigger1 = movehit
trigger1 = animelem = 4,>=0 && animelem = 6,<=0
value = 500,3
persistent = 0
ignorehitpause = 1

[state a];
type = playsnd
trigger1 = movehit
trigger1 = animelem = 6,>=0
value = 400,3
persistent = 0
ignorehitpause = 1

;---------------------[コマンド判定]
[State 440, 3]
type = HitDef
triggerall = anim = 1300
trigger1 = animelem = 4
trigger2 = animelem = 6
attr = S, SA
damage    = 42,5
priority = 8, Hit
hitflag = MAFLD
guardflag = M
animtype = hard
pausetime = 12,12
sparkno = s7010+(random%8)
getpower = 69,69
sparkxy = -15,-156/2
hitsound   = s400,2
guardsound = s121,0
guard.sparkno = s7101
ground.type = high
ground.slidetime = 17
ground.hittime  = 15
ground.velocity = -7.5
guard.velocity = -11
air.velocity = -3,-7
yaccel = 0.45 + (var(3) - 1)*0.1
air.fall = 1
fall.recovertime = 24
ID = 400
nochainID = 9999

[State 440, 3]
type = HitDef
triggerall = anim = 1301
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 8
trigger4 = animelem = 10
attr = S, SA
damage    = 42,5
priority = 8, Hit
hitflag = MAFLD
guardflag = M
animtype = hard
pausetime = 7,7
sparkno = s7010+(random%8)
getpower = 69,69
sparkxy = -15,-156/2
hitsound   = s400,2
guardsound = s121,0
guard.sparkno = s7101
ground.type = high
ground.slidetime = 17
ground.hittime  = 15
ground.velocity = -7.5
guard.velocity = -11
air.velocity = -3,-7
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.45 + (var(3) - 1)*0.1
air.fall = 1
fall.recovertime = 24
ID = 400
nochainID = 9999

;---------------------[ヘルパー]
[state a];エフェクト
type = Helper
trigger1 = animelemtime(3) = 2
id = 1305
name = "hakuha"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1305
helpertype = normal
IgnoreHitPause = 0
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[]
[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
x = 9

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 7

;---------------------[七星ゲージ]
[state a];カウンターヒット
type = varadd
trigger1 = movehit = 1
trigger1 = var(8) = 1
v = 4
value = 1
IgnoreHitPause = 1
persistent = 0

[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 4
v = 20
value = -40

[state a];塊天ゲージ
type = varadd
trigger1 = movecontact = 1
v = 20
value = -5

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)退かぬエフェクト
[Statedef 1305]
type = A
ctrl = 0
anim = 1305
velset = 0,0
movetype = I
physics = N
sprpriority = 2

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state a]
type = bindtoroot
trigger1 = 1
pos = 120/2,-160/2

[state a]
type = changeanim
triggerall = anim = 1305
trigger1 = root,animelem = 6 && root,anim = 1300
trigger2 = root,animelem = 10 && root,anim = 1301
value = 1306

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

;---------------------[拡縮]
[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 1.6,1.6

;---------------------[]
[state a]
type = destroyself
trigger1 = animtime = 0
trigger1 = anim = 1306
trigger2 = root,stateno != 1300


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 媚びぬ
[Statedef 1310]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
;velset = 0,0
anim = ifelse(var(20) = 0,1310,1311)
sprpriority = 1
ctrl = 0


[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[state a]
type = posset
trigger1 = time = 0
y = 0


;---------------------[速度]
[state a]
type = posadd
trigger1 = animelem = 5
x = 21

[state a]
type = veladd
trigger1 = animelem = 4
x = 9

[state a]
type = veladd
trigger1 = vel x > 0
x = -0.5

[state a]
type = velset
trigger1 =  vel x <= 0
x = 0


;---------------------[効果音]
[state a];媚びぬ
type = playsnd
trigger1 = time = 0
value = 1300,1

[state a];スライス
type = playsnd
trigger1 = animelem = 5
trigger2 = animelem = 7
value = 1300,4

[state a];
type = playsnd
trigger1 = movehit
trigger1 = animelem = 5,>=0 && animelem = 7,<=0
value = 500,3
persistent = 0
ignorehitpause = 1

[state a];
type = playsnd
trigger1 = movehit
trigger1 = animelem = 7,>=0
value = 400,3
persistent = 0
ignorehitpause = 1

;---------------------[コマンド判定]
[State 440, 3]
type = HitDef
triggerall = anim = 1310
trigger1 = animelem = 5
trigger2 = animelem = 7
attr = S, SA
damage    = 42,5
priority = 8, Hit
hitflag = MAFLD
guardflag = M
animtype = hard
pausetime = 12,12
sparkno = s7010+(random%8)
getpower = 85,85
sparkxy = -15,-176/2
hitsound   = s400,2
guardsound = s121,0
guard.sparkno = s7101
ground.type = high
ground.slidetime = 17
ground.hittime  = 15
ground.velocity = -8.5
guard.velocity = -11
air.velocity = -3,-7
yaccel = 0.45 + (var(3) - 1)*0.1
air.fall = 1
fall.recovertime = 24
ID = 400
nochainID = 9999

[State 440, 3]
type = HitDef
triggerall = anim = 1311
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 8
attr = S, SA
damage    = 42,5
priority = 8, Hit
hitflag = MAFLD
guardflag = M
animtype = hard
pausetime = 8,8
sparkno = s7010+(random%8)
getpower = 85,85
sparkxy = -15,-176/2
hitsound   = s400,2
guardsound = s121,0
guard.sparkno = s7101
ground.type = high
ground.slidetime = 17
ground.hittime  = 15
ground.velocity = -8.5
guard.velocity = -11
air.velocity = -3,-7
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.45 + (var(3) - 1)*0.1
air.fall = 1
fall.recovertime = 24
ID = 400
nochainID = 9999


;---------------------[ヘルパー]
[state a];エフェクト
type = Helper
trigger1 = animelem = 5
id = 1315
name = "hakuha"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1315
helpertype = normal
IgnoreHitPause = 0
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[state a];エフェクト
type = Helper
trigger1 = animelem = 7
id = 1316
name = "hakuha"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1315
helpertype = normal
IgnoreHitPause = 0
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[]
[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16) >= 20
x = 9

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 8

;---------------------[七星ゲージ]
[state a];カウンターヒット
type = varadd
trigger1 = movehit = 1
trigger1 = var(8) = 1
v = 4
value = 1
IgnoreHitPause = 1
persistent = 0

[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 5
v = 20
value = -40

[state a];塊天ゲージ
type = varadd
trigger1 = movecontact = 1
v = 20
value = -5

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)エフェクト
[Statedef 1315]
type = A
ctrl = 0
anim = 1315
velset = 0,0
movetype = A
physics = N
sprpriority = 2

[state a]
type = sprpriority
trigger1 = ishelper(1316)
value = -2


[state a]
type = bindtoroot
trigger1 = ishelper(1315)
pos = 22/2,-194/2

[state a]
type = bindtoroot
trigger1 = ishelper(1316)
pos = 56/2,-206/2

;---------------------[]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state a]
type = varadd
trigger1 = 1
v = 1
value = 16

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(1),256

[state a]
type = angledraw
trigger1 = 1
scale = 1.5+var(1)*0.006,1.5-var(1)*0.006

;---------------------[]
[state a]
type = destroyself
trigger1 = time = 16

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 媚びぬ2
[Statedef 1320]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
;velset = 0,0
anim = ifelse(var(20) = 0,1320,1321)
sprpriority = 1
ctrl = 0


[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[state a]
type = posset
trigger1 = time = 0
y = 0


;---------------------[速度]
[state a]
type = posadd
trigger1 = animelem = 7
trigger1 = anim = 1320
x = 96/2

[state a]
type = posadd
trigger1 = animelem = 9
trigger1 = anim = 1321
x = 96/2

[state a]
type = veladd
trigger1 = animelem = 1
x = 5

[state a]
type = veladd
trigger1 = vel x > 0
x = -0.25

[state a]
type = veladd
trigger1 = vel x > 6
x = -0.5

[state a]
type = velset
trigger1 =  vel x <= 0
x = 0


;---------------------[効果音]
[state a];媚びぬ
type = playsnd
trigger1 = time = 0
value = 1300,1

[state a];スライス
type = playsnd
trigger1 = animelem = 4
value = 1300,3

[state a];
type = playsnd
trigger1 = movehit
trigger1 = animelem = 4,>=0 && animelem = 5,<=0
value = 500,3
persistent = 0
ignorehitpause = 1

[state a];
type = playsnd
trigger1 = movehit
trigger1 = animelem = 5,>=0
value = 400,3
persistent = 0
ignorehitpause = 1

;---------------------[コマンド判定]
[State 440, 3]
type = HitDef
triggerall = anim = 1320
trigger1 = animelem = 4
trigger2 = animelem = 5
attr = S, SA
damage    = 42,5
priority = 8, Hit
hitflag = MAFLD
guardflag = L
animtype = hard
pausetime = 9,9
sparkno = s7010+(random%8)
getpower = 85,85
sparkxy = -15,-76/2
hitsound   = s400,2
guardsound = s121,0
guard.sparkno = s7101
ground.type = trip
ground.slidetime = 17
ground.hittime  = 15
ground.velocity = -3.-6
guard.velocity = -11
air.velocity = -3,-7
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.45 + (var(3) - 1)*0.1
fall = 1
fall.recovertime = 24
ID = 400
nochainID = 9999

[State 440, 3]
type = HitDef
triggerall = anim = 1321
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
attr = S, SA
damage    = 42,5
priority = 8, Hit
hitflag = MAFLD
guardflag = L
animtype = hard
pausetime = 3,4
sparkno = s7010+(random%8)
getpower = 85,85
sparkxy = -15,-76/2
hitsound   = s400,2
guardsound = s121,0
guard.sparkno = s7101
ground.type = trip
ground.slidetime = 17
ground.hittime  = 15
ground.velocity = -3.-6
guard.velocity = -11
air.velocity = -3,-7
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.45 + (var(3) - 1)*0.1
fall = 1
fall.recovertime = 24
ID = 400
nochainID = 9999


;---------------------[ヘルパー]
[state a];エフェクト
type = Helper
trigger1 = animelem = 4
id = 1325
name = "hakuha"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1325
helpertype = normal
IgnoreHitPause = 0
pausemovetime = 0
keyctrl = 0 
ownpal = 1


;---------------------[]
[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
x = 9

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 7

;---------------------[七星ゲージ]
[state a];カウンターヒット
type = varadd
trigger1 = movehit = 1
trigger1 = var(8) = 1
v = 4
value = 1
IgnoreHitPause = 1
persistent = 0

[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 4
v = 20
value = -40

[state a];塊天ゲージ
type = varadd
trigger1 = movecontact = 1
v = 20
value = -5

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)エフェクト
[Statedef 1325]
type = A
ctrl = 0
anim = 1325
velset = 0,0
movetype = A
physics = N
sprpriority = 2

[state a]
type = bindtoroot
trigger1 = time <= 6
pos = 220/2,-24/2

;---------------------[]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state a]
type = varadd
trigger1 = 1
v = 1
value = 16

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(1),256

[state a]
type = angledraw
trigger1 = 1
scale = 2.5-var(1)*0.0097,2.5-var(1)*0.0097

;---------------------[]
[state a]
type = destroyself
trigger1 = time = 16


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 省みぬ
[Statedef 1330]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
;velset = 0,0
anim = ifelse(var(20) = 0,1330,1331)
sprpriority = 1
ctrl = 0

[state a]
type = changeanim
triggerall = anim = 1330
triggerall = time = 0
trigger1 = prevstateno = 1310
trigger2 = prevstateno = 1320
value = 1332

[state a]
type = changeanim
triggerall = anim = 1331
triggerall = time = 0
trigger1 = prevstateno = 1310
trigger2 = prevstateno = 1320
value = 1333

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[state a]
type = posset
trigger1 = time = 0
y = 0


;---------------------[速度]
[state a]
type = posadd
trigger1 = animelem = 3
x = 30/2



[state a]
type = statetypeset
trigger1 = animelem = 3
value = A

[state a]
type = veladd
trigger1 = animelem = 3
x = 7

[state a]
type = velset
trigger1 = animelem = 3
y = -6

[state a]
type = veladd
trigger1 = animelem = 3,>=0
y = 0.45

[state a]
type = veladd
trigger1 = vel x > 0
x = -0.25

[state a]
type = veladd
trigger1 = vel x > 6
x = -0.5

[state a]
type = velset
trigger1 =  vel x <= 0
x = 0


;---------------------[効果音]
[state a];省みぬ
type = playsnd
trigger1 = time = 0
value = 1300,2

[state a];スライス
type = playsnd
trigger1 = animelem = 5
value = 1300,4

[state a];
type = playsnd
trigger1 = movehit
trigger1 = animelem = 6,>=0 && animelem = 7,<=0
value = 500,3
persistent = 0
ignorehitpause = 1

[state a];
type = playsnd
trigger1 = movehit
trigger1 = animelem = 7,>=0
value = 400,3
persistent = 0
ignorehitpause = 1

;---------------------[コマンド判定]
[State 440, 3]
type = HitDef
triggerall = anim = 1330 || anim = 1332
trigger1 = animelem = 6
trigger2 = animelem = 8
attr = S, SA
damage    = 42,5
priority = 8, Hit
hitflag = MAFLD
guardflag = H
animtype = hard
pausetime = 11,11
sparkno = s7010+(random%8)
getpower = 85,85
sparkxy = -15,-116/2
hitsound   = s400,2
guardsound = s121,0
guard.sparkno = s7101
ground.type = high
ground.slidetime = 17
ground.hittime  = 15
ground.velocity = -3.5,-9
guard.velocity = -11
air.velocity = -3.5,-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.45 + (var(3) - 1)*0.1
fall = 1
fall.recovertime = 24
ID = 400
nochainID = 9999

[State 440, 3]
type = HitDef
triggerall = anim = 1331 || anim = 1333
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
attr = S, SA
damage    = 42,5
priority = 8, Hit
hitflag = MAFLD
guardflag = H
animtype = hard
pausetime = 8,9
sparkno = s7010+(random%8)
getpower = 85,85
sparkxy = -15,-116/2
hitsound   = s400,2
guardsound = s121,0
guard.sparkno = s7101
ground.type = high
ground.slidetime = 17
ground.hittime  = 15
ground.velocity = -3.5,-9
guard.velocity = -11
air.velocity = -3.5,-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.45 + (var(3) - 1)*0.1
fall = 1
fall.recovertime = 24
ID = 400
nochainID = 9999


;---------------------[ヘルパー]
[state a];エフェクト
type = Helper
trigger1 = animelem = 5
id = 1340
name = "hakuha"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1340
helpertype = normal
IgnoreHitPause = 0
pausemovetime = 0
keyctrl = 0 
ownpal = 1


;---------------------[]
[state a];ブースト
type = veladd
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16) >= 20
x = 9

[State a];ブースト
type = palfx
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16) >= 20
time = 5
add = 255,255,2556
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16) >= 20
v = 16
value = -20

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = 7

;---------------------[七星ゲージ]
[state a];カウンターヒット
type = varadd
trigger1 = movehit = 1
trigger1 = var(8) = 1
v = 4
value = 1
IgnoreHitPause = 1
persistent = 0

[state a];塊天ゲージ
type = varadd
trigger1 = animelem = 6
v = 20
value = -40

[state a];塊天ゲージ
type = varadd
trigger1 = movecontact = 1
v = 20
value = -5

;---------------------[]
[state a]
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1335

;---------------------------------------------------------------------------
;着地
[Statedef 1335]
type = S
movetype = A
physics = S
poweradd= 0
ctrl = 0
anim = ifelse(var(20) = 0,1335,1336)
sprpriority = 2
velset = 0,0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State -3, Landing Sound]
type = PlaySnd
trigger1 = time = 0
value = 40, 0

[State explod];着地エフェクト
type = Explod
trigger1 = time = 0
anim = 6047
id = 6040
sprpriority = -5
postype = p1
pos = 0,0
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
scale = 0.7,0.7
ownpal = 1


;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)省みぬエフェクト
[Statedef 1340]
type = A
ctrl = 0
anim = 1340
velset = 0,0
movetype = I
physics = N
sprpriority = 2

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state a]
type = bindtoroot
trigger1 = anim = 1340
pos = 178/2,-120/2

[state a]
type = changeanim
triggerall = anim = 1340
trigger1 = root,animelemtime(9) = 3 && (root,anim = 1330||root,anim = 1332)
trigger2 = root,animelem = 9 && (root,anim = 1331||root,anim = 1333)
value = 1341

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

;---------------------[拡縮]
[state a]
type = angleset
trigger1 = time = 0
value = 30

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 1.6,1.6

;---------------------[]
[state a]
type = destroyself
trigger1 = animtime = 0
trigger1 = anim = 1341
trigger2 = root,stateno != 1330




;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)


[State 5100, 3] ;バニシングストライクヒット
type = ChangeAnim
trigger1 = time = 0
trigger1 = prevstateno = 553
;trigger1 = anim = 563
trigger1 = SelfAnimExist(5101)
value = 5101

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20


;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


[State 5150, 5] ;自決
type = AssertSpecial
trigger1 = prevstateno = 2200
flag = invisible
flag2 = noshadow


[State 3040, 7]
type = BGPalfx
trigger1 = prevstateno = 2200
trigger1 = var(2) <= 1200
time = 1
;sinadd = 10,10,10,120
add = 20+var(2),20+var(2),20+var(2)
mul = 120,120,120
color = 256
under = 1

[state a]
type = varadd
trigger1 = prevstateno = 2200
trigger1 = var(2) <= 1200
v = 2
value = 20

[state a]
type = poweradd
trigger1 = prevstateno = 2200
trigger1 = time = 0
value = 99999


[State 5150, 5] ;一撃その１
type = changeanim
trigger1 = prevstateno = 2556
trigger1 = AnimExist(5141) = 1
trigger1 = time = 0
value = 5141

[State 5150, 5] ;一撃その２
type = turn
trigger1 = prevstateno = 2556
trigger1 = Anim = 5140
trigger1 = time = 0



;---------------------------------------------------------------------------
; Varのラウンド持ち越し
[Statedef 5900]
type = S

[state a]
type = varadd
trigger1 = time = 0
v = 4
value = -1

[state a]
type = varset
trigger1 = time = 0
v = 19
value = 0

[state a]
type = varset
trigger1 = var(21) = 1
trigger1 = time = 0
v = 4
value = 0

[state a]
type = varset
trigger1 = time = 0
v = 21
value = 0

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
farst = 2
last = 59
value = 0

[State 5900, 2] ;Clear all float variables
type = null;VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1




;---------------------------------------------------------------------------
; ここから下に新しいステートを書くと分かりやすくていいと思います
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; ここは-2のステートを書いてください、ヘルパー関係です
;---------------------------------------------------------------------------
[Statedef -2]

[state -2, a];右向き設定
type = varset
trigger1 = var(10) = 0
trigger1 = facing = 1
v = 10
value = 1

[state -2, a];左向き設定
type = varset
trigger1 = var(10) = 0
trigger1 = facing = -1
v = 10
value = 2

[State -2, 1];ダッシュの音止め
type = stopSnd
trigger1 = stateno != 100
channel = 1


[State -2, 3]
type = stopSnd
trigger1 = MoveType = H
channel = 2




[State -2, 4];ハイジャンプ判定
type = varadd
trigger1 = 1
v = 15
value = -1



;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;::::::::変数設定(多分ダメージ関係が殆ど)
[state a]
type = varset
trigger1 = movetype = H
v = 13
value = 0

;::::::::ボイス変更の乱数
[State 180, 1]
type = null;VarRandom
trigger1 = 1
v = 6
range = 0,2

;::::::::カウンターヒット設定
[state a]
type = varset
trigger1 = enemy,movetype != A
;trigger1 = movehit = 1
v = 8
value = 0

[state a]
type = varset
trigger1 = enemy,movetype = A
v = 8
value = 1


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;ダメージ時のエフェクト、サウンドの消去
;//////////////////////////////////////////////////////////////////////////
;ダッシュ終了時のエフェクトの消去
[State 1];ブレスレットのエフェクト消去、主に通常動作
type = removeexplod
trigger1 = MoveType = H && stateno != [120,159]
ID = 3000


[State 1]
type = removeexplod
trigger1 = stateno != 101
ID = 102


[state a]
type = removeexplod
trigger1 = MoveType = H
id = 1860

;ダメージ時のサウンドの消去
[state a]
type = stopsnd
trigger1 = MoveType = H
channel = 1

;ダメージ時のサウンドの消去
[state a]
type = stopsnd
trigger1 = MoveType = H
channel = 4

;ダメージ時の残像の消去
[state a];
type = afterimagetime
trigger1 = MoveType = H
time = 0

;///////////////////////////////////////////////////////////////////////
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;コンボによるダメージ補正
;//////////////////////////////////////////////////////////////////////////
; 
;---------------------[連続技補正（聖帝）]
[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 0
trigger2 = enemy,gethitvar(hitcount) = 1
fvar(5) = 1.0

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 2
fvar(5) = 0.8

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 3
fvar(5) = 0.6

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 4
fvar(5) = 0.55

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 5
fvar(5) = 0.5

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 6
fvar(5) = 0.45

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 7
fvar(5) = 0.3

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 8
fvar(5) = 0.35

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 9
fvar(5) = 0.3

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 10
fvar(5) = 0.25

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 11
fvar(5) = 0.2

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 12
fvar(5) = 0.15

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 13
fvar(5) = 0.1

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 14
fvar(5) = 0.08

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) >= 15
fvar(5) = 0.05


;---------------------[連続技補正（鳳凰呼闘塊天）]
[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 0
trigger2 = enemy,gethitvar(hitcount) = 1
fvar(5) = 0.4

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 2
fvar(5) = 0.5

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 3
fvar(5) = 0.5

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 4
fvar(5) = 0.6

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 5
fvar(5) = 0.6

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 6
fvar(5) = 0.7

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 7
fvar(5) = 0.7

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 8
fvar(5) = 0.8

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 9
fvar(5) = 0.9

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 10
fvar(5) = 1.0

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 11
fvar(5) = 0.9

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 12
fvar(5) = 0.8

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 13
fvar(5) = 0.7

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) = 14
fvar(5) = 0.6

[state a]
type = varset
triggerall = var(20) >= 1
trigger1 = enemy,gethitvar(hitcount) >= 15
fvar(5) = 0.5

;---------------------[連続技補正（グレイブシュート）]
[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) >= 0
trigger1 = enemy,gethitvar(hitcount) <= 3
fvar(3) = 0.8

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) > 3
trigger1 = enemy,gethitvar(hitcount) <= 5
fvar(3) = 0.7

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) = 6
fvar(3) = 0.6

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) >= 7
fvar(3) = 0.5

;---------------------[連続技補正（バニシングストライク）]
[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) >= 0
trigger1 = enemy,gethitvar(hitcount) <= 3
fvar(4) = 0.5

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) > 3
trigger1 = enemy,gethitvar(hitcount) <= 6
fvar(4) = 0.4

[state a]
type = varset
trigger1 = enemy,gethitvar(hitcount) > 6
fvar(4) = 0.3


;---------------------[]
[state a]
type = varset
trigger1 = enemy,movetype != H
fvar(3) = 1.0

[state a]
type = varset
trigger1 = enemy,movetype != H
fvar(4) = 1.0

[state a]
type = varset
trigger1 = enemy,movetype != H
fvar(5) = 1.0

;ネバリ補正関係
[state a];第一段階
type = varset
trigger1 = enemy,life >= 500
v = 26
value = 0

[state a];第二段階
type = varset
trigger1 = enemy,life <= 499 && enemy,life >= 334
v = 26
value = 1

[state a];第三段階
type = varset
trigger1 = enemy,life <= 333 && enemy,life >= 250
v = 26
value = 2

[state a];第四段階
type = varset
trigger1 = enemy,life <= 249
v = 26
value = 3


[state a]
type = varset
trigger1 = 1
fvar(0) = 1.0

[state a]
type = varset
trigger1 = 1
fvar(2) = 0.0

[state a]
type = varset
trigger1 = var(14) >= 1
fvar(2) = 0.1

[state a];補正
type = varset
trigger1 = enemy,movetype = H
;trigger1 = enemy,gethitvar(hitcount) > 1
fvar(0) = fvar(5);((100.0-(25.0+(enemy,gethitvar(hitcount)/2.0)*5.0))/100.0)


[state a];補正
type = varset
trigger1 = stateno = [2000,2999]
trigger1 = fvar(5) <= 0.4
fvar(0) = 0.4


[state a];補正・グレイブシュート
type = varset
trigger1 = enemy,movetype = H
trigger1 = var(9) >= 1
fvar(0) = fvar(5)*fvar(3);((100.0-(25.0+(enemy,gethitvar(hitcount)/2.0)*5.0))/100.0)


[state a];補正・バニシングストライク
type = varset
trigger1 = enemy,movetype = H
trigger1 = var(11) >= 1
fvar(0) = fvar(5)*fvar(4)



[state a];ねばり補正
type = attackmulset
trigger1 = var(26) = 0
value = fvar(0)

[state a];ねばり補正
type = attackmulset
trigger1 = var(26) = 1
value = fvar(0)*0.85

[state a];ねばり補正
type = attackmulset
trigger1 = var(26) = 2
value = fvar(0)*0.8

[state a];ねばり補正
type = attackmulset
trigger1 = var(26) = 3
value = fvar(0)*0.75

[state a]
type = DefenceMulSet
trigger1 = var(14) = 1
value = 1


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;勝利時のサウンドストップ
;//////////////////////////////////////////////////////////////////////////
;
[State 1]
type = AssertSpecial
;triggerall = Win
trigger1 = var(21) = 1
flag = nomusic
ignorehitpause = 1

[State 1]
type = varset
;triggerall = Win
trigger1 = RoundState != 2
v = 26
value = 0

[state a]
type = stopsnd
trigger1 = RoundState = 2
channel = 2
ignorehitpause = 1

[state a];イントロ時ボイスの消去
type = stopsnd
trigger1 = RoundState = 2
channel = 5
ignorehitpause = 1


[state a]
type = playsnd
trigger1 = LoseKO
trigger1 = RoundState = 3
trigger1 = var(12) = 0
IgnoreHitPause = 1
persistent = 0
value = 12,0+(random%3)

[state a]
type = varset
trigger1 = RoundState = 3
IgnoreHitPause = 1
v = 12
value = 1

[state a]
type = varset
trigger1 = RoundState = 2
IgnoreHitPause = 1
v = 12
value = 0

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
;//////////////////////////////////////////////////////////////////////////
[State -2, a];タイムカウントテスト用
type = null;palfx
trigger1 = var(25) >= 1
trigger1 = var(20) >= 1
trigger1 = var(21) >= 1
trigger1 = var(24) >= 1
time = 1
add = 126,126,0
;mul = 126,126,0
color = 1
ignorehitpause = 1

[State -2, a];グレイブシュートテスト
type = null;palfx
trigger1 = var(9) != 0
time = 1
add = 126,126,0
;mul = 126,126,0
color = 1

[State -2, a];バニシングストライクテスト
type = null;palfx
trigger1 = var(11) != 0
time = 1
add = 0,126,126
;mul = 126,126,0
color = 1

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;塊天ゲージ
;//////////////////////////////////////////////////////////////////////////
[state a]
type = varadd
trigger1 = var(20) > 0
trigger1 = stateno != 2000
v = 20
value = -1

[state a]
type = varset
trigger1 = var(20) <= 0
v = 20
value = 0

[State -2, a];
type = palfx
trigger1 = var(20) > 0
trigger1 = gametime%2
time = 1
add = 126,126,0
;sinadd = 30,30,0,60
;mul = 126,126,0
color = 1


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;相手落下速度
;//////////////////////////////////////////////////////////////////////////
[state a]
type = varset
trigger1 = enemy,movetype != H
v = 3
value = 0

[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = enemy,statetype = A
v = 3
value = 1


;///////////////////////////////////////////////////////////////////////
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[state a]
type = changestate
trigger1 = prevstateno = 188
value = 188


;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = numhelper(182) = 0
trigger1 = stateno != 181
id = 182
name = "s"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 182
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;///////////////////////////////////////////////////////////////////////
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[state a];七星ゲージ
type = Helper
trigger1 = numhelper(4000) = 0
id = 4000
name = "sichisei"
sprpriority = 10
pos = -50,-160
postype = front
stateno = 4000
helpertype = normal
pausemovetime = 0
bindtime = -1
keyctrl = 0 
ownpal = 1


[state a]
type = varset
trigger1 = var(4) <= 0
v = 4
value = 0

[state a]
type = varset
trigger1 = var(4) >= 7
v = 4
value = 7


[state a];ブーストゲージ
type = Helper
trigger1 = numhelper(4100) = 0
id = 4100
name = "boost"
sprpriority = 10
pos = 50,-160
postype = back
stateno = 4100
helpertype = normal
pausemovetime = 0
bindtime = -1
keyctrl = 0 
ownpal = 1


[state a]
type = varset
trigger1 = var(16) <= 0
v = 16
value = 0

[state a]
type = varset
trigger1 = var(16) >= 300
v = 16
value = 300




[state a]
type = varadd
triggerall = gametime%2
triggerall = var(23) = 1
trigger1 = var(16) < 300 && var(16) >= 201
trigger2 = var(16) < 200 && var(16) >= 101
trigger3 = var(16) < 100 && var(16) >= 1
v = 16
value = -1

[state a];ブーストテスト用デバッグ
type = null;varset
trigger1 = stateno = 11
v = 16
value = 300

[state a];ゲージ減少フラグ
type = varset
trigger1 = var(16) = 300
trigger2 = var(16) = 200
trigger3 = var(16) = 100
trigger4 = var(16) = 0
v = 23
value = 0


;---------------------------------------------------------------------------
; ここから下は-3のステートを書いてください、ここに書いたものはゲーム中
; に条件が成立すればいつでも開始するステートです。
;---------------------------------------------------------------------------

[Statedef -3]
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
;//////////////////////////////////////////////////////////////////////////
;
;ゲーム中に常にいつでも開始したいステート、ここでは「着地音」に使用しています
;下の条件は「52か106のステートに移動して１フレーム目に」と言う事です。
;52と106はバックステップとジャンプの着地のステートです。
[state a]
type = posset
trigger1 = time = 0
trigger1 = prevstateno = 500
trigger1 = statetype != A
y = 0

[state a]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 500
trigger1 = statetype != A
y = 0



[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 
trigger2 = stateno = 107 
trigger3 = stateno = 103 
value = 40, 0


[State explod];着地エフェクト
type = Explod
triggerall = time = 1
trigger1 = stateno = 52 
anim = 6047
id = 6040
sprpriority = -5
postype = p1
pos = 0,0
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
scale = 0.7,0.7
ownpal = 1


[State -3, 2];ジャンプ音
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 40 
trigger1 = var(15) <= 0
value = 40, 1
channel = 3

[State -3, 2];ジャンプ音
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 40 
trigger1 = var(15) > 1
value = 40, 2
channel = 3

[State explod];ジャンプエフェクト
type = Explod
triggerall = time = 1
trigger1 = stateno = 40 
trigger1 = pos y = 0
anim = 6040
id = 6040
sprpriority = 5
postype = p1
pos = 0,0
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
ownpal = 1

[State -3, Landing Sound]:
type = PlaySnd
triggerall = Time = 1
;trigger1 = stateno = 100 
trigger1 = stateno = 105 
value = 105, 0

;ダメージ時のエフェクトの消去
[State 1]
type = removeexplod
trigger1 = MoveType = H
ID = 2405

;ダメージ時のエフェクトの消去
[State 1]
type = removeexplod
trigger1 = MoveType = H
ID = 1000

[state a];残像消去
type = afterimagetime
trigger1 = movetype = H
time = 0


[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = 1
edge = 5,0


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; ハイジャンプ処理
[State -3, 5];ハイジャンプ判定
type = varset
trigger1 = stateno = 10
trigger1 = time = 0
;trigger2 = stateno = 100
v = 15
value = 20

[State -3, 5];ハイジャンプ消去
type = varset
trigger1 = stateno = 52
trigger1 = time = 0
v = 15
value = 0


[State -3, 5]
type = velset
trigger1 = stateno = 50
trigger1 = anim = 42
trigger1 = time = 1
trigger1 = var(15) >= 1
x = 5
;y = -9


[State -3, 5]
type = velset
trigger1 = stateno = 50
trigger1 = anim = 43
trigger1 = time = 1
trigger1 = var(15) >= 1
x = -5
;y = -9

[State -3, 5]
type = velset
trigger1 = stateno = 50
trigger1 = time = 1
trigger1 = var(15) >= 1
y = -15

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

[State -3, 5];グレイブシュート判定
type = varset
triggerall = var(11) = 0
triggerall = stateno = 40
trigger1 = prevstateno = 300
trigger2 = prevstateno = 215
v = 9
value = 1

[State -3, 5];グレイブシュート判定
type = varset
trigger1 = enemy,movetype != H
v = 9
value = 0

[state a]
type = varset
trigger1 = var(9) >= 1
v = 11
value = 0


[State -3, 5];グレイブシュート判定
type = varset
trigger1 = stateno = 52
v = 9
value = 0

[state a];エリアルジャンプ速度
type = velset
trigger1 = stateno = 50
trigger1 = time = 1
trigger1 = var(9) = 1
y = -14.5



[State -3, 5];グレイブシュート攻撃ヒット
type = velset
trigger1 = movecontact = 1
trigger1 = var(9) != 0
trigger1 = statetype = A
y = -4.0


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[State -3, 5];バニシングストライク判定
type = varset
trigger1 = enemy,movetype != H
trigger2 = enemy,stateno = 5100
v = 11
value = 0

[state a]
type = varset
trigger1 = var(11) >= 1
v = 9
value = 0

[state a];相手吹き飛ばし
type = targetstate
trigger1 = movehit = 1
trigger1 = var(11) = 1
value = 550

[state a];弱攻撃吹き飛ばし
type = targetstate
triggerall = movehit = 1
triggerall = var(11) = 1
trigger1 = stateno = 200
trigger2 = stateno = 205
trigger3 = stateno = 400
trigger4 = stateno = 230
trigger5 = stateno = 235
trigger6 = stateno = 430
value = 551

[state a]
type = veladd
trigger1 = enemy,stateno = 550
trigger1 = movehit = 1
trigger1 = movetype = A
x = -1.0 - var(3)*0.4
persistent = 0

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[state a];ブースト
type = varset
trigger1 = command = "z"
trigger1 = movetype != H
trigger1 = var(16) >= 20
v = 23
value = 1