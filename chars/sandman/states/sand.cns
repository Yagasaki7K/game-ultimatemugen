;=========================================================
;\------------------\ Sandman /--------------------------/
;Sprite Edits, Character design, Concepts ---->  McCready 
;Sprite Edits, Programming-Code, Concepts ---->  Loganir
;==========================================================
;  loganir@gmail.com    mccready171@yahoo.com

[Data]
life = 1000
power = 3000
attack = 90 
defence = 100 
fall.defence_up = 60
liedown.time = 19
airjuggle = 25
sparkno = -1;8510
guard.sparkno = -1;8550
KO.echo = 0
volume = 90
IntPersistIndex = 50
FloatPersistIndex = 40


[Size]
xscale = 1           ;Horizontal scaling factor.
yscale = 1        ;Vertical scaling factor.
ground.back = 34     ;Player width (back, ground)
ground.front = 34   ;Player width (front, ground)
air.back = 30       ;Player width (back, air)
air.front = 30       ;Player width (front, air)
height = 70          ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 1     ;Set to 1 to scale projectiles too
head.pos = 0, -125   ;Approximate position of head
mid.pos = 0, -65    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 2.1     ;Walk forward
walk.back = -1.8     ;Walk backward
run.fwd  = 8.3 ;8, -2.4    ;Run forward (x, y)
run.back = -8.3 ;Hop backward (x, y)
jump.neu = 0,-11    ;Neutral jumping velocity (x, y)
jump.back = -3.2   ;Jump back Speed (x, y)
jump.fwd = 3.2      ;Jump forward Speed (x, y)
runjump.back = -4,-9 ;Running jump speeds (opt)
runjump.fwd = 4,-9      ;.
airjump.neu = 0,0      ;.
airjump.back = 0     ;Air jump speeds (opt)
airjump.fwd = 0        ;.

[Movement]
airjump.num = 0      ;Number of air jumps allowed (opt)
airjump.height = 40  ;Minimum distance from ground before you can air jump (opt)
yaccel = .63       ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching




[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


[Statedef 180]
type = S


[State 190, aa]            
type = VarRandom         
trigger1 = !Time
v = 3
range = 400

[State 190, a1]
type = PalFX
trigger1 = 1
time = 1
add = 0,0,1

[State 777, hsp]
type = helper
trigger1 = !time
helpertype = normal
stateno = 11180
ID = 11180
name = "to-u"
facing=-1
postype = p1
pos = var(52),0
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1



[State 180, a1]; un-sand-wich :P
type = ChangeState
trigger1 = (var(3) = [0,100]) && (!time)
value = 181;181

[State 180, a2]; tsc-tsc
type = ChangeState
trigger1 = (var(3) = [101,200])&& (!time)
value = 182 ;182 

[State 180, a3];tcharam
type = ChangeState
trigger1 = (var(3) = [201,300])&& (!time)
value = 183;183 

[State 180, a3];wind
type = ChangeState
trigger1 = (var(3) = [301,400])&& (!time)
value = 184;184 


[Statedef 11180];----
type = S
movetype = I
physics = N
anim = 8787
sprpriority = -7

[State 11180, lp2]
type = ParentVarSet
trigger1 = time>=5
v = 52
value = ceil(ParentDist X)
ignorehitpause = 1

[State 11180, A0]
type = screenbound
trigger1 = 1
value = 0
[state 11180, a1]
type = assertspecial
trigger1 = 1
flag = noshadow



; Win pose 1 - un-sand-wich :P
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, BGPalfx]
Type = BGPalfx
Trigger1 = !time
Add = 1,1,1
IgnoreHitPause = 1
time = 1


[State 181, a1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, a1]
type = PlaySnd
trigger1 = !time
value = 20,0
channel = 2
volume =250


[State 777, voz]
type = PlaySnd
trigger1 = !time
value = 200,1
channel = 0
volume =200


[State 181,a2]
type = AssertSpecial
trigger1 = Time = [0,340]
flag = RoundNotOver

[state 181, A3]
type = assertspecial
trigger1 = Time >= 0
flag = NoBarDisplay


; Win pose 2 - "tsc-tsc"
[Statedef 182]
type = S
movetype = I
physics = S
ctrl = 0
anim = 20
sprpriority = -4
facep2 = 1

[State 182, 0]
type = ChangeAnim
trigger1 = var(52)<=150  
value = 180
persistent=0

[State 182, A5]
type = PosAdd
trigger1 = anim = 20
y = 0
x = 1.5



[State 182, BGPalfx]
Type = BGPalfx
Trigger1 = !time
Add = 1,1,1
IgnoreHitPause = 1
time = 1

[state 182, A0]
type = assertspecial
trigger1 = Time >= 0
flag = NoBarDisplay

[State 182, a1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182,a2]
type = AssertSpecial
trigger1 = Time = [0,450]
flag = RoundNotOver

[State 777, voz]
type = PlaySnd
trigger1 = time = 20
value = 200,0
channel = 0
volume =200

[State 182, 0]
type = PlaySnd
trigger1 = anim=180 && AnimElem = 1
value = 7,3
channel = 1
[State 182, 0]
type = PlaySnd
trigger1 = anim=180 && AnimElem = 4
value = 20,0
channel = 2
volume =250


; Win pose 3 - "tcharam"
[Statedef 183]
type = S
movetype = I
physics = S
ctrl = 0
anim = 182
sprpriority = 4


[State 182, BGPalfx]
Type = BGPalfx
Trigger1 = !time
Add = 1,1,1
IgnoreHitPause = 1
time = 1

[state 183, A0]
type = assertspecial
trigger1 = Time >= 0
flag = NoBarDisplay

[State 183, a1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 183,a2]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = RoundNotOver

[State 183, 0]
type = PlaySnd
trigger1 =  AnimElem = 2
value = 20,0
channel = 2
volume = 200

[State 777, voz]
type = PlaySnd
trigger1 = Animelem = 4
value = 200,11
channel = 0
volume =200

; Win pose 4 - when the wind blows
[Statedef 184]
type = S
ctrl = 0
anim = 183
velset = 0,0

[State 184, BGPalfx]
Type = BGPalfx
Trigger1 = !time
Add = 1,1,1
IgnoreHitPause = 1
time = 1


[State 184, a1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 777, voz]
type = PlaySnd
trigger1 = animelem =15
value = 200,2
channel = 0
volume =200
persistent=0

[State 184, a1]
type = PlaySnd
trigger1 = !time
value = 40,6
channel = 2
freqmul =0.2
loop =1
volume =200

[State 184, a1]
type = PlaySnd
trigger1 = animelem=21
value = 20,0
channel = 9
volume =250

[State 184, a1];sand areia rastro
type = explod
trigger1 = animelemtime(20)>=0 && animelemtime(25)<=0
anim =29998
ID = 99
sprpriority = -10
postype = p1
pos = 0,-70
accel = -.2,ifelse(random<500,.2,-.2)
random = 30,90
ignorehitpause = 1
facing = ifelse(random<500,1,-1)
scale = .4,.4
supermovetime = 40
pausemovetime = 40

[State 184,a2]
type = AssertSpecial
trigger1 = Time = [0,240]
flag = RoundNotOver

[state 184, A3]
type = assertspecial
trigger1 = Time >= 0
flag = NoBarDisplay


[Statedef 190]
type = S
ctrl = 0
velset = 0,0


[State 190, v0];against females --- building up list no particular order.
type = VarSet
trigger1 = p2name = "Wonder Woman Reloaded" || p4name = "Wonder Woman Reloaded"
trigger2 = p2name =  "Cassie" || p4name =  "Cassie"
trigger3 = p2name =    "She-Hulk"|| p4name =    "She-Hulk"
trigger4 = p2name =    "Ice"    || p4name =    "Ice"    
trigger5 = p2name =   "Psylocke" || p4name =   "Psylocke"
trigger6 = p2name =   "Psylocke By WhiteMagic2002"   || p4name =   "Psylocke By WhiteMagic2002"  
trigger7 = p2name =  "Black Cat"|| p4name =  "Black Cat"
trigger8 = p2name =  "Catwoman"|| p4name = "Catwoman"
trigger9 = p2name =   "Dark Chun Li"    || p4name =   "Dark Chun Li"    
trigger10 = p2name =  "Chun Li"    || p4name =   "Chun Li" 
trigger11 = p2name = "Crystal of The Avengers"      || p4name = "Crystal of The Avengers"     
trigger12 = p2name =  "Rogue by Splode"   || p4name =  "Rogue by Splode"  
trigger13 = p2name =  "Rogue"|| p4name =  "Rogue"
trigger14 = p2name =    "Storm by WhiteMagic2002"     || p4name =    "Storm by WhiteMagic2002"      
trigger15 = p2name =  "Storm"    || p4name =   "Storm" 
trigger16 = p2name = "SF3 Chun Li" || p4name = "SF3 Chun Li"
trigger17 = p2name =   "Elektra"   || p4name =  "Elektra" 
trigger18 = p2name =  "Starfire"|| p4name =  "Starfire"
trigger19 = p2name =    "Baby Bonnie Hood"          || p4name =   "Baby Bonnie Hood"           
trigger20 = p2name =  "Cammy_MVC2"   || p4name =  "Cammy_MVC2"
trigger21 = p2name = "Powergirl" || p4name = "Powergirl"
trigger22 = p2name =   "Red Snake"        || p4name =  "Red Snake"      
trigger23 = p2name =  "Yuri Sakazaki" || p4name =  "Yuri Sakazaki"
trigger24 = p2name =  "Jill Valentine"|| p4name =  "Jill Valentine"
trigger25 = p2name =  "whip" || p4name =  "whip"
trigger26 = p2name = "Tron Bonne SxP" || p4name = "Tron Bonne SxP"
trigger27 = p2name = "Tron Bonne" || p4name = "Tron Bonne"
trigger28 = p2name =    "Morrigan"    || p4name =    "Morrigan"    
trigger29 = p2name =   "Morrigan Aensland" || p4name =   "Morrigan Aensland"
trigger30 = p2name =  "Karin Kanzuki" || p4name =  "Karin Kanzuki"
trigger31 = p2name =   "Mika"|| p4name =   "Mika"
trigger32 = p2name =   "Neo Rose" || p4name =   "Neo Rose"
trigger33 = p2name =  "Sakura Kasugano" || p4name =  "Sakura Kasugano"
trigger34 = p2name = "Psycho Weapon MB-00" || p4name = "Psycho Weapon MB-00"
trigger35 = p2name =  "Lei-Lei" || p4name =  "Lei-Lei"
trigger36 = p2name =    "Marrow"|| p4name =    "Marrow"
trigger37 = p2name =  "B.ORCHID BY AHRIMANES" || p4name =  "B.ORCHID BY AHRIMANES"
var(6) = 1
ignorehitpause = 1

[State 190, 0]; WIP vs Mambojambo's Plasticman
type = ChangeState
trigger1 = !time
trigger1 = p2name = "Homem Borracha"
value = 196
;triggerall = p2name != "guido" || p4name != "guido" ; intro especial contra guido
;triggerall = p2name != "spiderman" || p4name != "spiderman" ; intro especial contra aranha


[State 190, aa]            
type = VarRandom         
trigger1 = !Time
v = 4
range = 400


[State 190, a1]
type = ChangeState
triggerall = p2name != "Homem Borracha"
trigger1 = (var(4) = [0,100]) && (!time)
value = 191

[State 190, a2]
type = ChangeState
triggerall = p2name != "Homem Borracha"
trigger1 = (var(4) = [101,200]) && (!time)
value = 192;192

[State 190, a3]
type = ChangeState
triggerall = p2name != "Homem Borracha"
trigger1 = (var(4) = [201,300]) && (!time)
value = 193;193

[State 190, a3]
type = ChangeState
triggerall = p2name != "Homem Borracha" 
trigger1 = (var(4) = [301,400]) && (!time)
value = 194;194




[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0


[State 191, A0] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190


[State 777, voz]
type = PlaySnd
trigger1 = animelem=1
value = 200,ifelse(var(6),6,3)
volume = 200
persistent=0

[State 191, A1]
type = PlaySnd
trigger1 = animelem = 11
value = 20,0
volume=250


[state 191, A1]
type = assertspecial
trigger1 = Time >= 0
flag = NoBarDisplay

[State 191, A2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, A3] ;Change to stand state when done
type = ChangeState
trigger1 = !animtime
value = 0

[Statedef 192]; asssand :P
type = S
ctrl = 0
anim = 192
velset = 0,0

[State 192, A0] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 192

[State 777, voz]
type = PlaySnd
trigger1 = animelem =2
value = 200,4
channel = 0
volume =200

[State 192, A1]
type = PlaySnd
trigger1 = animelem = 11
value = 20,0

[state 192, A1]
type = assertspecial
trigger1 = Time >= 0
flag = NoBarDisplay

[State 192, A2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 192, A3] ;Change to stand state when done
type = ChangeState
trigger1 = !animtime
value = 0

[Statedef 193]
type = S
ctrl = 0
anim = 193
velset = 0,0


[state 193, A1]
type = assertspecial
trigger1 = Time >= 0
flag = NoBarDisplay
[State 193, A2] 
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 193, A1]
type = PlaySnd
trigger1 = (anim = 193) && (animelemtime(1)=5)
value = 20,2
volume=250
[State 193, A1]
type = PlaySnd
trigger1 = (anim = 193) && (animelem = 6)
value = 20,6
volume=250
[State 193, A5]
type = EnvShake
trigger1 = (anim = 193) && (animelem = 6)
time = 15
ampl = -4

[State 193, VA]
type = Explod
trigger1 = (anim = 193) && (animelem = 6)
anim = 112193
postype = p1
sprpriority = -15
scale = 1,1
ignorehitpause = 1
[State 193, VA]
type = Explod
trigger1 = (anim = 193) && (animelem = 8)
anim = 111193
postype = p1
sprpriority = 15
scale = 1,1
ignorehitpause = 1
shadow = -1

[State 777, voz]
type = PlaySnd
trigger1 = (anim = 193) && (animelem = 3)
value = 200,11
channel = 0
volume =200

[State 193, A0] 
type = ChangeAnim
trigger1 = (anim = 193) && (animtime = 0)
value = 113193


[State 193, A1]
type = PlaySnd
trigger1 = (anim = 113193) && (animelem = 2)
value = 20,0
volume=250

[State 193, A3] ;Change to stand state when done
type = ChangeState
trigger1 = (anim = 113193) && (animtime = 0)
value = 0

[Statedef 194]
type = S
ctrl = 0
anim = 8787
velset = 0,0

[state 194, A1]
type = assertspecial
trigger1 = Time >= 0
flag = NoBarDisplay
flag2 = intro

[State 194, A2] 
type = assertspecial
trigger1 = anim = 8787
flag = noshadow

[State 777, hsp]
type = helper
trigger1 = !time
helpertype = normal
stateno = 111194
ID = 111194
name = "fake"
postype = p1
pos = 1500,0
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 194, a1]
type = Changeanim
triggerall = numhelper(111194) 
trigger1 = helper(111194),parentdist x <= 0
value = 6510

[State 777, voz]
type = PlaySnd
trigger1 = time = 30
value = 200,7
channel = 0
volume =250

[State 194, sfx]
type = PlaySnd
trigger1 = time =60
value = 20,2
volume=250

[State 194, A1]
type = PlaySnd
trigger1 = (anim = 6510) && (animelem = 1)
value = 20,0
volume=250

[State 194, A3] ;Change to stand state when done
type = ChangeState
trigger1 = (anim = 6510) && (animtime = 0)
value = 0

[Statedef 111194]
type    = S
movetype= I
physics = N
poweradd= 0
velset = 0,0
ctrl = 0
sprpriority = 15

[State 111194, a0]
type = changeanim
trigger1 = !time
value = 6500

[State 111194, a2]
type = playerpush
trigger1 = time>=0
value = 0
ignorehitpause = 1

[State 111194, a3]
type = nothitby
trigger1 = time>=0
value = SCA,AA,AP,AT
ignorehitpause = 1


[State 111194, a5]
type = explod
trigger1 = time%3=0
anim =2
ID = 6
sprpriority = -7
postype = p1
pos = ifelse(random<500,15,-15),ifelse(random<500,-20,-10)
accel = ifelse(random<500,.05,-.05),ifelse(random<500,.05,-.05)
ignorehitpause = 1
facing = ifelse(random<500,1,-1)
scale = 1,1
supermovetime = 20
pausemovetime = 20

[State 111194, v0]
type = velset
trigger1 = !time 
x = 8

[State 111194, b2]
type = AfterImage
trigger1 = time=72
time = 60
PalBright = 25,25,0
PalContrast = 60,60,20
PalAdd = -10,-10,-10
PalMul = .85,.85,.50
trans = add
TimeGap = 1
FrameGap = 2
length = 10
ignorehitpause = 1


[State 111194, b3]
type = destroyself
trigger1 = parent, anim = 6510 


[Statedef 196]
type = S
ctrl = 0
anim = 194
velset = 0,0
sprpriority = -7


[State 777, voz]
type = PlaySnd
trigger1 = animelem=2
value = 200,5
volume = 200
persistent=0

[state 196, A1]
type = assertspecial
trigger1 = Time >= 0
flag = NoBarDisplay

[State 196, A2] 
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 196, A3]
type = ChangeState
trigger1 = !animtime
value = 0










[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 777, voz]
type = PlaySnd
trigger1 = !time
value = 200,9
channel = 0
volume =200

[State 195, 0]
type = PowerAdd
trigger1 = time = 10
value = 20

[State 777, sfx]
type = PlaySnd
trigger1 = animelem =9
trigger2 = animelem =13
value = 40,4

[State 195, 2]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                     ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
facep2 = 1                      ;Change animation (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
hitcountpersist =1


[State 200, a01]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 200
ctrl = 1

[State 200, voz]
type = PlaySnd
trigger1 = AnimElem = 1 && random <= 500
value = 50,0
channel = 0

[State 200, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 0

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47000
ID = 8700
name = "hitspark1"
postype = p2
pos = -15,-70
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -15,-70
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1


[State 200, 1]
type = HitDef
trigger1 = !time
attr = S, NA                     ;Attribute: Standing, Normal Attack
Damage = ceil(ifelse(fvar(10)*30<7,7,fvar(10)*30)),0
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 4, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8,8                 ;Time attacker pauses, time opponent shakes
sparkno = ifelse(!var(55),-1,0);Sifelse(random>500,8520,8521) 
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = -15, -70              ;X-offset for the "hit spark" rel. to p2,Y-offset for the spark rel. to p1
hitsound = S5, 2                  ;Sound to play on hit
guardsound = S7, 1                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 19             ;Time that the opponent slides back
ground.hittime  = 19            ;Time opponent is in hit state
ground.velocity = -6             ;Velocity at which opponent is pushed
guard.hittime = 20
guard.ctrltime = 20
airguard.velocity = -5,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -5,-4           ;X-velocity at which opponent is pushed,
air.hittime = 19               ;Time before opponent regains control in air
ground.cornerpush.veloff = -9
air.cornerpush.veloff = -9
guard.cornerpush.veloff = -10
airguard.cornerpush.veloff = -10
getpower  = 20
givepower = 10

[state 200, dashb]
type = VelSet
trigger1 = !Time && PrevStateno = 105
x = -4.5
[state 200, dashb]
type = VelSet
trigger1 = !Time && PrevStateno = 100
x = 4.5

[State 250, dust]
type = Explod 
trigger1 = PrevStateno = 100 && !time
anim = 8730
postype = p1
pos = -20, -3
removetime = -2
sprpriority = 3
persistent = 0
ownpal=1
[State 250, dust]
type = Explod 
trigger1 = PrevStateno = 105 && !time
anim = 8730
postype = p1
pos = -50, -3
removetime = -2
sprpriority = 3
persistent = 0
ownpal=1

[State 200, 7]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


; Standing Medium punch
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 2
facep2 = 1
poweradd = 30
ctrl = 0
velset = 0,0
sprpriority = 0
hitcountpersist =1

[State 777, ch]
type = ChangeAnim
trigger1 =!time && prevstateno != 9000
value = 210
ctrl = 1

[State 210, voz]
type = PlaySnd
trigger1 = AnimElem = 1 && random <= 500
value = 50,1
channel = 0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47001
ID = 8701
name = "hitspark2"
postype = p2
pos = -10,-70
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -10,-70
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 210, 2]
type = HitDef
trigger1 = animelem=2
attr = S, NA
animtype = back
air.animtype = back
damage = ceil(ifelse(fvar(10)*60<7,7,fvar(10)*60)),0
hitflag = MAF
guardflag = MA
priority = 4, Hit 
pausetime = 3,3;4,12
sparkno =ifelse(!var(55),-1,1);Sifelse(random>500,8500,8501) 
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = -10,-70
hitsound   = S5,4
guardsound = S7,1
guard.velocity = -12
airguard.velocity = -5,-4    
air.type = high                  
air.velocity = -7,1           
air.hittime = 1
ground.type = low
ground.slidetime = 24
ground.hittime  = 1
ground.velocity = -10,-3
ground.cornerpush.veloff = -19
air.cornerpush.veloff = -19
guard.cornerpush.veloff = -19
airguard.cornerpush.veloff = -19
guard.hittime = 20
guard.ctrltime = 20
getpower  = 30
givepower = 15
fall = 1
fall.recover = 0
fall.envshake.time = 25
fall.envshake.ampl = -6



[State 210, v0] 
type = VarSet
trigger1 = movehit
var(48) = 30
ignorehitpause = 1
persistent=0

[state 210, dashb]
type = VelSet
trigger1 = !Time && PrevStateno = 105
x = -4.5
[state 210, dashb]
type = VelSet
trigger1 = !Time && PrevStateno = 100
x = 4.5

[State 250, dust]
type = Explod 
trigger1 = PrevStateno = 100 && !time
anim = 8730
postype = p1
pos = -20, -3
removetime = -2
sprpriority = 3
persistent = 0
ownpal=1
[State 250, dust]
type = Explod 
trigger1 = PrevStateno = 105 && !time
anim = 8730
postype = p1
pos = -50, -3
removetime = -2
sprpriority = 3
persistent = 0
ownpal=1

[State 210, 4]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Standing strong punch
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= 45
facep2 = 1
ctrl = 0
velset = 0,0
sprpriority = 2
hitcountpersist =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 118710
ID = 8710
name = "cutspark"
postype = p2
pos = -7,-70
facing = ifelse(random<=499,-1,1)
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -15,-70
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 220
ctrl = 1

[State 220, voz]
type = PlaySnd
trigger1 = !time && random <= 500
value = 50,2
channel = 0

[State 220, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 220, 2]
type = HitDef
trigger1 = !time
attr = S, NA
animtype  = Hard
damage    = ceil(ifelse(fvar(10)*120<7,7,fvar(10)*120)),0
priority = 4, Hit
hitflag = MAF
guardflag = MA
pausetime = 2,4
guard.pausetime = 2,2
sparkno = ifelse(!var(55),-1,3)
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = -10,-70
hitsound   = S5,6
guardsound = S7,1
ground.type = low
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -12,-8.5;7.5
guard.velocity = -10
guard.hittime = 24
guard.ctrltime = 24
air.velocity = -12,-7.5
fall.envshake.time = 7
fall.envshake.ampl = -4
envshake.time = 12
envshake.freq = 127
envshake.ampl = -6
ground.cornerpush.veloff = -25
air.cornerpush.veloff = -25
down.cornerpush.veloff = -25
guard.cornerpush.veloff = -25
airguard.cornerpush.veloff = -25
fall = 1
fall.recover = 1
fall.recovertime = 30
getpower  = 40
givepower = 20


[State 220, v0] 
type = VarSet
trigger1 = movehit
var(49) = 30
ignorehitpause = 1
persistent=0

[state 220, dashb]
type = VelSet
trigger1 = !Time && PrevStateno = 105
x = -4.5
[state 250, dashb]
type = VelSet
trigger1 = !Time && PrevStateno = 100
x = 4

[State 250, dust]
type = Explod 
trigger1 = PrevStateno = 100 && !time
anim = 8730
postype = p1
pos = -30, -3
removetime = -2
sprpriority = 3
persistent = 0
ownpal=1
[State 250, dust]
type = Explod 
trigger1 = PrevStateno = 105 && !time
anim = 8730
postype = p1
pos = -50, -3
removetime = -2
sprpriority = 3
persistent = 0
ownpal=1
[State 220, 3]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1





; Standing light kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 20
ctrl = 0
velset = 0,0
sprpriority = 2
hitcountpersist =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47000
ID = 8700
name = "hitspark1"
postype = p2
pos = 0,-10
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -20,-35
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1


[State 777, ch]
type = ChangeAnim
trigger1 =!time && prevstateno != 9000
value = 230
ctrl = 1

[State 200, voz]
type = PlaySnd
trigger1 = AnimElem = 1&& random <= 500
value = 50,0
channel = 0

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 0

[State 230, 2]
type = HitDef
trigger1 = !Time
attr = S, NA
animtype  = Light
priority = 4, Hit 
damage    = ceil(ifelse(fvar(10)*30<7,7,fvar(10)*30)),0
hitflag = MAFD
guardflag = L
pausetime = 8,8
sparkno =ifelse(!var(55),-1,0); Sifelse(random>500,8520,8521) 
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = -5,-10
hitsound   = S5,2
guardsound = S7,1
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -3
air.velocity = -2.5,-3.5
ground.cornerpush.veloff = -9
air.cornerpush.veloff = -9
guard.cornerpush.veloff = -10
airguard.cornerpush.veloff = -10
down.velocity=-1.5,-8
down.hittime=32
yaccel=.55
getpower  = 20
givepower = 10
fall = 0
fall.recover = 1


[state 230, dashb]
type = VelSet
trigger1 = !Time && PrevStateno = 105
x = -4.5
[state 230, dashb]
type = VelSet
trigger1 = !Time && PrevStateno = 100
x = 4.5

[State 230, dust]
type = Explod 
trigger1 = PrevStateno = 100 && !time
anim = 8730
postype = p1
pos = -20, -3
removetime = -2
sprpriority = 3
persistent = 0
ownpal=1
[State 230, dust]
type = Explod 
trigger1 = PrevStateno = 105 && !time
anim = 8730
postype = p1
pos = -50, -3
removetime = -2
sprpriority = 3
persistent = 0
ownpal=1

[State 230, 3]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Standing medium kick
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 30
ctrl = 0
velset = 0,0
sprpriority = 2
facep2 = 1
hitcountpersist =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47001
ID = 8701
name = "hitspark2"
postype = p2
pos = -10,-70
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -10,-70
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1


[State 777, ch]
type = ChangeAnim
trigger1 =!time && prevstateno != 9000
value = 240
ctrl = 1

[State 240, voz]
type = PlaySnd
trigger1 = AnimElem = 1&& random <= 500
value = 50,1
channel = 0

[State 240, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1


[State 240, a1]
type = explod
trigger1 = animelemtime(2)>=0&&animelemtime(3)<=0
anim =29998
ID = 98
random = 8,4
vel = 4,-3
accel = .1,ifelse(random<500,-.1,-.05)
sprpriority = 4
postype = p1
pos = 10,-10
ignorehitpause = 1
facing = ifelse(random<500,1,-1)
scale = .4,.4
supermovetime = 40
pausemovetime = 40


[State 240, 2]
type = HitDef
trigger1 = !Time
attr = S, NA
animtype  = Medium
damage    = ceil(ifelse(fvar(10)*60<7,7,fvar(10)*60)),0
guardflag = MA
priority = 4, Hit 
pausetime = 10,10
sparkno = ifelse(!var(55),-1,1);Sifelse(random>500,8500,8501)
guard.sparkno = ifelse(!var(55),-1,41)
sparkxy = -10,-70
hitsound   = S5,1
guardsound = S7,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -8
air.velocity = -8,-3.2
ground.cornerpush.veloff = -19
air.cornerpush.veloff = -19
guard.cornerpush.veloff = -19
airguard.cornerpush.veloff = -19
getpower  = 30
givepower = 15

[state 200, dashb]
type = VelSet
trigger1 = !Time && PrevStateno = 105
x = -4.5
[state 200, dashb]
type = VelSet
trigger1 = !Time&& PrevStateno = 100
x = 4.5

[State 250, dust]
type = Explod 
trigger1 = PrevStateno = 100 && !time
anim = 8730
postype = p1
pos = 65, -3
removetime = -2
sprpriority = 3
persistent = 0
ownpal=1
[State 250, dust]
type = Explod 
trigger1 = PrevStateno = 105 && !time
anim = 8730
postype = p1
pos = 30, -3
removetime = -2
sprpriority = 3
persistent = 0
ownpal=1

[State 240, 3]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

; Standing strong kick
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= 45
facep2 = 1
ctrl = 0
velset = 0,0
sprpriority = 2
hitcountpersist =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 777, a01]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 250
ctrl = 1



[State 250, voz]
type = PlaySnd
trigger1 = !time && random <= 500
value = 50,2
channel = 0

[State 250, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[state 250, dashb]
type = VelSet
trigger1 = !Time && PrevStateno = 105
x = -4.5
[state 250, dashb]
type = VelSet
trigger1 = !Time && PrevStateno = 100
x = 4.5

[State 250, dust]
type = Explod 
trigger1 = PrevStateno = 100 && !time
anim = 8730
postype = p1
pos = 30, -3
removetime = -2
sprpriority = 3
persistent = 0
ownpal=1
[State 250, dust]
type = Explod 
trigger1 = PrevStateno = 105 && !time
anim = 8730
postype = p1
pos = 30, -3
removetime = -2
sprpriority = 3
persistent = 0
ownpal=1

[State 250, 2]
type = HitDef
trigger1 = !time
attr = S, NA
animtype = back
air.animtype = back
damage    = ceil(ifelse(fvar(10)*120<7,7,fvar(10)*120)),0
priority = 4, Hit
hitflag = MAF
guardflag = MA
pausetime = 3,3
sparkno = ifelse(!var(55),-1,2)
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
hitsound   = S5,4
guardsound = S7,1
ground.type = high
ground.slidetime = 12
ground.hittime  = 12
air.hittime  = 12
ground.velocity = -10,-3
guard.velocity = -8
air.velocity = -10,1
envshake.time = 12
envshake.freq = 127
envshake.ampl = -6
ground.cornerpush.veloff = -20
air.cornerpush.veloff = -20
guard.cornerpush.veloff = -20
airguard.cornerpush.veloff = -20
getpower  = 40
givepower = 20
guard.hittime = 20
guard.ctrltime = 20
fall = 1
fall.recover = 0
fall.envshake.time = 25
fall.envshake.ampl = -6



[State 250, v0] 
type = VarSet
trigger1 = movehit
var(48) = 30
ignorehitpause = 1
persistent=0



[State 250, 4]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1



[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 20
ctrl = 0
sprpriority = 2
hitcountpersist =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47000
ID = 8700
name = "hitspark1"
postype = p2
pos = -5,-50
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -5,-50
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 400
ctrl = 1

[State 400, voz]
type = PlaySnd
trigger1 = !time && random <= 500
value = 50,0
channel = 0


[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = !Time
attr = C, NA
damage    = ceil(ifelse(fvar(10)*30<7,7,fvar(10)*30)),0
priority = 4, Hit 
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 6,6
sparkno = ifelse(!var(55),-1,0);Sifelse(random>500,8520,8521) 
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = -5,-50
hitsound   = S5,2
guardsound = s7,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -4
air.velocity = -4,-3
ground.cornerpush.veloff = -9
air.cornerpush.veloff = -9
guard.cornerpush.veloff = -9
airguard.cornerpush.veloff = -9
getpower  = 20
givepower = 10

[State 400, 4]
type = ChangeState
trigger1 = !AnimTime
value = 11
ctrl = 1

;;Crouching medium punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 2
poweradd= 35
ctrl = 0
sprpriority = 2
facep2 = 1
hitcountpersist =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47001
ID = 8701
name = "hitspark2"
postype = p2
pos = -10,-50
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -10,-50
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 410
ctrl = 1

[State 410, voz]
type = PlaySnd
trigger1 = !time && random <= 500
value = 50,1
channel = 0

[State 410, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 410, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage    = ceil(ifelse(fvar(10)*60<7,7,fvar(10)*60)),0
animtype  = Medium
priority = 4, Hit 
hitflag = MAF
guardflag = M
pausetime = 8,8
sparkno = ifelse(!var(55),-1,1);Sifelse(random>500,8500,8501)
guard.sparkno = ifelse(!var(55),-1,41)
sparkxy = -10,-50
hitsound   = S5,3
guardsound = S7,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -8
air.velocity = -6,-4
ground.cornerpush.veloff = -18
air.cornerpush.veloff = -18
guard.cornerpush.veloff = -18
airguard.cornerpush.veloff = -18
getpower  = 30
givepower = 15

[State 410, 4]
type = ChangeState
trigger1 = !AnimTime
value = 11
ctrl = 1

;Crouching strong punch
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 3
poweradd= 45
facep2 = 1
ctrl = 0
velset = 0,0
sprpriority = 2
hitcountpersist =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos = 8,-90
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -8,-90
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 420
ctrl = 1

[State 420, a03] 
type = ChangeState
triggerall = Var(59) >= 1
trigger1 = movehit
value = 2999
ctrl = 1

[State 420, a04] 
type = ChangeState
trigger1 = command = "holdup" && movehit
value = 2999
ctrl = 1


[State 777, hdf]
type = helper
trigger1 = movehit
helpertype = normal
stateno = 8718
ID = 8718
name = "launcher"
postype = p2
pos = 0,enemynear,const(size.head.pos.y)
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 420, voz]
type = PlaySnd
trigger1 = !time
value = 50,1
channel = 0

[State 420, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

;[State 420, 1X]
;type = posadd
;trigger1 = time<5
;x = 4.5
;;[State 420, dust]
;type = Explod 
;trigger1 = time<5
;anim = 8730
;id=8731
;postype = p1
;pos = 70, 0
;sprpriority = 3
;persistent = 0
;scale = .5,.5
;ownpal=1

[State 420, 2]
type = HitDef
trigger1 = p2stateno != 5040 && !time
attr = S, NA                     
animtype = Up                 
damage = ceil(ifelse(fvar(10)*120<7,7,fvar(10)*120)),0
hitflag = MAF                  
guardflag = M 
priority = 4, Hit 
pausetime = 10,4  
sparkno = ifelse(!var(55),-1,2);S8500
guard.sparkno = ifelse(!var(55),-1,40)                     
sparkxy = 8, -94              
hitsound = S5,4                  
guardsound = S7,1           
ground.type = high               
ground.slidetime = 30            
ground.hittime  = 30             
ground.velocity = -1,-15.3       
guard.velocity = -8
airguard.velocity = -8,-1     
air.type = high                  
air.velocity = -1,-10            
air.hittime = 30
envshake.time = 7
envshake.ampl = 4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -25
airguard.cornerpush.veloff = -25
getpower  = 40
givepower = 20
 
[State 420, 2x]
type = HitDef
trigger1 = p2stateno = 5040 && !time
attr = S, NA                     
animtype = Up                 
guardflag = M                 
priority = 4, Hit 
damage = ceil(ifelse(fvar(10)*120<7,7,fvar(10)*120)),0
hitflag = MAF                  
pausetime = 12, 6   
sparkno = ifelse(!var(55),-1,2);S8500
guard.sparkno = ifelse(!var(55),-1,40)                     
sparkxy = 8, -94              
hitsound = S5,4                 
guardsound = S7,1           
ground.type = high               
ground.slidetime = 24            
ground.hittime  = 24             
ground.velocity = -5,-6        
guard.velocity = -8
airguard.velocity = -8,-1     
air.type = high                  
air.velocity = -5,-6            
air.hittime = 40
envshake.time = 7
envshake.ampl = 4
fall.envshake.time = 7
fall.envshake.ampl = -4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -25
airguard.cornerpush.veloff = -25
getpower  = 40
givepower = 20

[State 420, 5]
type = ChangeState
trigger1 = !AnimTime
value = 11
ctrl = 1

;Crouching light kick
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 20
facep2 = 1
ctrl = 0
sprpriority = 2
hitcountpersist =1


[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47000
ID = 8700
name = "hitspark1"
postype = p2
pos = -10,-2
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -10,-2
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1


[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 430
ctrl = 1

[State 200, voz]
type = PlaySnd
trigger1 = AnimElem = 1&& random <= 500
value = 50,0
channel = 0

[State 430, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 430, 2]
type = HitDef
trigger1 = !Time
attr = C, NA
damage    = ceil(ifelse(fvar(10)*30<7,7,fvar(10)*30)),0
animtype  = Light
hitflag = MAFD
guardflag = L
priority = 4, Hit 
pausetime = 6,6
sparkno = ifelse(!var(55),-1,0);Sifelse(random>500,8520,8521) 
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = -10,-2
hitsound   = s5,2
guardsound = s7,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -4
air.velocity = -2,-1
down.velocity=-1.5,-8
down.hittime=32
yaccel=.55
ground.cornerpush.veloff = -9
air.cornerpush.veloff = -9
guard.cornerpush.veloff = -9
airguard.cornerpush.veloff = -9
getpower  = 20
givepower = 10
fall=0
fall.recover=1


[State 430, 3]
type = ChangeState
trigger1 = !AnimTime
value = 11
ctrl = 1

;Crouching medium kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 2
poweradd= 30
facep2 = 1
ctrl = 0
sprpriority = 2
hitcountpersist =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47001
ID = 8701
name = "hitspark2"
postype = p2
pos = 10,-20
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 10,-20
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1


[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 440
ctrl = 1

[State 440, voz]
type = PlaySnd
trigger1 = !time&& random <= 500
value = 50,1
channel = 0

[State 440, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 440, 2]
type = HitDef
trigger1 = !Time
attr = C, NA
damage    = ceil(ifelse(fvar(10)*60<7,7,fvar(10)*60)),0
animtype  = medium
hitflag = MAFD
guardflag = MA
priority = 4, Hit 
pausetime = 8,8
sparkno = ifelse(!var(55),-1,1);Sifelse(random>500,8500,8501)
guard.sparkno = ifelse(!var(55),-1,41)
sparkxy = -10,-20
hitsound   = S5,3
guardsound = S7,1
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -8
air.velocity = -6,-3
air.hittime  = 20
guard.velocity = -6
guard.hittime = 16
ground.cornerpush.veloff = -18
air.cornerpush.veloff = -18
guard.cornerpush.veloff = -18
airguard.cornerpush.veloff = -18
down.velocity = -3,-8
down.hittime = 32
getpower  = 30
givepower = 15
yaccel =.65
fall = 0
fall.recover = 1

[State 440, 3]
type = ChangeState
trigger1 = !AnimTime
value = 11
ctrl = 1


;Crouch Strong Kick

[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 45
facep2 = 1
ctrl = 0
sprpriority = 0
hitcountpersist =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos = -10,-30
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -10,-30
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1


[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 450
ctrl = 1

[State 450, voz]
type = PlaySnd
trigger1 = AnimElem = 1
value = 50,ifelse(random<700,2,1)
channel = 0

[State 450, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2
[State 450, 3]
type = HitDef
trigger1 = !Time
attr = C, NA
damage    = ceil(ifelse(fvar(10)*120<7,7,fvar(10)*120)),0
priority = 4, Hit 
hitflag = MAFD
guardflag = L
pausetime = 6,12
sparkno = ifelse(!var(55),-1,2);S8500
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = -15,-30
hitsound   = S5,1
guardsound = S7,1
ground.type = Trip
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -2,-4
air.hittime = 32
air.velocity = -2,-3
airguard.ctrltime = 26
airguard.velocity = -10,1
guard.velocity = -10
down.velocity = -3,-8
down.hittime = 32
envshake.time = 7
envshake.ampl = 4
fall.envshake.time = 25
fall.envshake.ampl = -6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -20
airguard.cornerpush.veloff = -20
getpower  = 40
givepower = 20
yaccel =.65
fall = 1
fall.recover = 0

[State 450, 4]
type = ChangeState
trigger1 = !AnimTime
value = 11
ctrl = 1



;;Jump Light Punch
[Statedef 600]
type    = A
movetype= A
physics = N;A
juggle  = 1
poweradd= 20
ctrl = 0
sprpriority = 2
hitcountpersist =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&&movehit 
helpertype = normal
stateno = 47000
ID = 8700
name = "hitspark1"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno =47016
ID = 8716
name = "defend"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 600, xyz]
type = veladd
trigger1 = time>=0
y = ifelse(!var(25),const(movement.yaccel),ifelse(vel y<0,.4,.25))


[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 600
ctrl = 1

[State 600, voz]
type = PlaySnd
trigger1 = AnimElem = 1&& random <= 500
value = 50,0
channel = 0

[State 600, 1]
type = PlaySnd
trigger1 = !Time 
value = 0, 0


[State 600, 2]
type = HitDef
trigger1 = !Time
attr = A, NA
damage = ceil(ifelse(fvar(10)*30<7,7,fvar(10)*30)),0
hitflag = MAFD
guardflag = HA
priority = 4, Hit 
pausetime = 6,6
sparkno = ifelse(!var(55),-1,0);Sifelse(random>500,8520,8521) 
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
hitsound   = S5,2
guardsound = S7,1
air.type = low
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -4
ground.cornerpush.veloff = -8
down.velocity = -5,-8
down.hittime = 32
guard.hittime = 2
air.velocity = 0,-9;-8
air.hittime  = 20
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -8
airguard.cornerpush.veloff=0
airguard.velocity = -10,3
yaccel=.65
getpower  = 20
givepower = 10


[State 600, end]
type = ChangeState
trigger1 = !AnimTime
value = ifelse(var(25),2998,51)
ctrl = ifelse(var(25),1,0)
[state 600, safe]
type = ChangeState
trigger1 = Pos Y >= 1 
value = 52

;Jump Medium Punch
[Statedef 610]
type    = A
movetype= A
physics = N;A
juggle  = 2
poweradd= 30
ctrl = 0
sprpriority = 2
hitcountpersist =1


[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47001
ID = 8701
name = "hitspark2"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 610, xyz]
type = veladd
trigger1 = time>=0
y = ifelse(!var(25),const(movement.yaccel),ifelse(vel y<0,.4,.25))


[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 610
ctrl = 1

[State 610, voz]
type = PlaySnd
trigger1 = AnimElem = 1&& random <= 500
value = 50,1
channel = 0

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 610, 3]
type = HitDef
trigger1 = !Time
attr = A, NA
animtype = Medium
damage = ceil(ifelse(fvar(10)*60<7,7,fvar(10)*60)),0
hitflag = MAFD
guardflag = HA
priority = 4, Hit 
pausetime = 6,6
sparkno = ifelse(!var(55),-1,1);Sifelse(random>500,8500,8501)
guard.sparkno = ifelse(!var(55),-1,41)
sparkxy = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
hitsound   = S5,3
guardsound = S7,1
air.type = high
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5
air.velocity = 0,-8
air.hittime  = 25
air.cornerpush.veloff = 0
down.velocity = -5,-8
down.hittime = 32
guard.hittime = 2
ground.cornerpush.veloff = -8
guard.cornerpush.veloff = -8
airguard.velocity=-10,-1
yaccel=.65
getpower  = 30
givepower = 15

[State 610, end]
type = ChangeState
trigger1 = !AnimTime
value = ifelse(var(25),2998,51)
ctrl = ifelse(var(25),1,0)
[state 610, safe]
type = ChangeState
trigger1 = Pos Y >= 1 
value = 52

;Jump Strong Punch
[Statedef 620]
type    = A
movetype= A
physics = N;A
juggle  = 3
poweradd= 45
ctrl = 0
sprpriority = 2
hitcountpersist =1


[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1


;-----------------------------
[State 620, 1a]
type = VarSet
triggerall = var(25)
trigger1 = prevstateno = [600,650] 
trigger1 = P2moveType = H
v = 26
value = 1
ignorehitpause = 1

[State 620, 1b]
type = VelSet
trigger1 = var(25) && var(26)
x = 0 
ignorehitpause = 1

[State 620, 2b]
type = ScreenBound
trigger1 =  var(26)&& time>=5 && movehit
value = 0
ignorehitpause = 1


[State 620, 3b]
type = veladd
trigger1 =  time >=0
y = ifelse(!var(25),const(movement.yaccel),ifelse(vel y<0,.4,.25))


[State 620, 4b] 
type = VarSet
trigger1 = movehit && !var(26)
var(48) = 30
ignorehitpause = 1
;-------------------------------------------



[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 620
ctrl = 1

[State 620, voz]
type = PlaySnd
trigger1 = !time && random<=500
value = 50,2
channel = 0

[State 620, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2



[State 620, 3]
type = HitDef
triggerall = var(26)
trigger1 = animelem = 2
attr = A, NA
animtype = hard
damage    = ceil(ifelse(fvar(10)*110<7,7,fvar(10)*110)),0
guardflag = MA                  
hitflag = MAFD  
priority = 4, Hit 
pausetime = 10,13
sparkno = ifelse(!var(55),-1,2);S8500
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
hitsound   = S5,4
guardsound = S7,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.hittime = 20
ground.velocity = -9
air.type = low
air.velocity = -22,11
ground.cornerpush.veloff = -24
air.cornerpush.veloff = -24
down.cornerpush.veloff = -6
guard.cornerpush.veloff = -24
airguard.cornerpush.veloff = 0
airguard.ctrltime = 2
airguard.velocity = -10,1
air.hittime  = 35
fall.recover = 0
fall = 1
fall.xvelocity =0
fall.yvelocity =0
down.bounce =0
down.velocity = -5,-8
down.hittime = 32
guard.hittime = 2
liedown.time = 30
fall.envshake.time = 18
fall.envshake.ampl = -10
getpower  = 40
givepower = 20


[State 620, 3]
type = HitDef
triggerall = !var(26)
trigger1 = animelem = 2
attr = A, NA
animtype = hard
damage    = ceil(ifelse(fvar(10)*110<7,7,fvar(10)*110)),0
guardflag = MA                  
hitflag = MAFD  
priority = 4, Hit 
pausetime = 10,13
sparkno = ifelse(!var(55),-1,2);S8500
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
hitsound   = S5,4
guardsound = S7,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8
air.type = low
air.velocity = -18,11
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -24
down.cornerpush.veloff = -6
guard.cornerpush.veloff = -25
airguard.cornerpush.veloff = 0
airguard.ctrltime = 2
airguard.velocity = -10,1
down.velocity = -5,-8
down.hittime = 32
guard.hittime = 2
air.hittime  = 30
air.fall = 1
fall.recover = 0
fall.envshake.time = 6
fall.envshake.ampl = -10
yaccel=.65
getpower  = 40
givepower = 20



[State 620, end]
type = ChangeState
trigger1 = BackEdgeBodyDist <= -1 && var(26) = 1
value = 9624
ctrl = 0
[State 620, end]
type = ChangeState
trigger1 = !AnimTime && !movehit
value = ifelse(var(25),2998,51)
ctrl = ifelse((!var(26)||var(25)),1,0)

[State 620, end]
type = ChangeState
trigger1 = !AnimTime && movehit
value = 9623
ctrl =0
[state 620, safe]
type = ChangeState
trigger1 = Pos Y >= 1 
value = 52

;Jump Light Kick
[Statedef 630]
type    = A
movetype= A
physics = N;A
juggle  = 1
poweradd= 20
ctrl = 0
sprpriority = 2
hitcountpersist =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47000
ID = 8700
name = "hitspark1"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 630, xyz]
type = veladd
trigger1 = time>=0
y = ifelse(!var(25),const(movement.yaccel),ifelse(vel y<0,.4,.25))

[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 630
ctrl = 1

[State 200, voz]
type = PlaySnd
trigger1 = AnimElem = 1&& random <= 500
value = 50,0
channel = 0

[State 630, 1]
type = PlaySnd
trigger1 = !Time
value = 0, 0


[State 630, 2]
type = HitDef
trigger1 = !Time
attr = A, NA
animtype = Light
damage = ceil(ifelse(fvar(10)*30<7,7,fvar(10)*30)),0
hitflag = MAFD
guardflag = HA
priority = 4, Hit 
pausetime = 6,6
sparkno = ifelse(!var(55),-1,0);Sifelse(random>500,8520,8521) 
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy =0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
hitsound   = S5,2
guardsound = S7,1
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -6
ground.cornerpush.veloff = -8
air.type = low
air.velocity = 0,-8
air.hittime  = 20
air.cornerpush.veloff = 0
down.velocity = -5,-8
down.hittime = 32
guard.hittime = 2
guard.cornerpush.veloff = -14
airguard.ctrltime = 2
airguard.velocity = -10,1
airguard.cornerpush.veloff = 0
yaccel=.65
getpower  = 20
givepower = 10

[State 630, end]
type = ChangeState
trigger1 = !AnimTime
value = ifelse(var(25),2998,51)
ctrl = ifelse(var(25),1,0)
[state 630, safe]
type = ChangeState
trigger1 = Pos Y >= 1 
value = 52


;Jump Medium kick
[Statedef 640]
type    = A
movetype= A
physics = N;A
juggle  = 2
poweradd= 30
ctrl = 0
sprpriority = 2
hitcountpersist =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47001
ID = 8701
name = "hitspark2"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 640, xyz]
type = veladd
trigger1 = time>=0
y = ifelse(!var(25),const(movement.yaccel),ifelse(vel y<0,.4,.25))


[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 640
ctrl = 1

[State 640, voz]
type = PlaySnd
trigger1 = AnimElem = 1&& random <= 500
value = 50,1
channel = 0

[State 640, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 640, 3]
type = HitDef
trigger1 = !Time
attr = A, NA
damage    = ceil(ifelse(fvar(10)*60<7,7,fvar(10)*60)),0
hitflag = MAF
guardflag = HA
priority = 4, Hit 
pausetime = 6,6
sparkno = ifelse(!var(55),-1,1);Sifelse(random>500,8500,8501)
guard.sparkno = ifelse(!var(55),-1,41)
sparkxy = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
hitsound   = S5,3
guardsound = S7,1
animtype = medium
air.type=high
ground.type = high
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6,-4
ground.cornerpush.veloff = -16
down.velocity = -5,-8
down.hittime = 32
guard.hittime = 2
air.velocity = 0,-6
air.hittime  = 25
air.cornerpush.veloff = 0
airguard.velocity = -10,1
airguard.ctrltime = 2
guard.cornerpush.veloff = -14
yaccel=.65
getpower  = 30
givepower = 15


[State 640, end]
type = ChangeState
trigger1 = !AnimTime
value = ifelse(var(25),2998,51)
ctrl = ifelse(var(25),1,0)
[state 640, safe]
type = ChangeState
trigger1 = Pos Y >= 1 
value = 52

;Jump Strong Kick
[Statedef 650]
type    = A
movetype= A
physics = N;A
juggle  = 3
poweradd= 45
ctrl = 0
sprpriority = 2
hitcountpersist =1


[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

;-----------------------------------------------------------------------------

[State 650, 1a]
type = VarSet
triggerall = var(25)
trigger1 = prevstateno = [600,650] 
trigger1 = P2moveType = H
v = 26
value = 1
ignorehitpause = 1

[State 650, 1b]
type = VelSet
trigger1 = var(25) && var(26)
x = 0 
ignorehitpause = 1

[State 650, 2b]
type = ScreenBound
trigger1 =  var(26)&& time>=5 && movehit
value = 0
ignorehitpause = 1


[State 650, 3b]
type = veladd
trigger1 =  time >=0
y = ifelse(!var(25),const(movement.yaccel),ifelse(vel y<0,.4,.25))


[State 650, 4b] 
type = VarSet
trigger1 = movehit && !var(26)
var(48) = 30
ignorehitpause = 1
;-------------------------------------------

[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 650
ctrl = 1

[State 650, voz]
type = PlaySnd
trigger1 = !time
value = 50,ifelse(random<500,2,1)
channel = 0

[State 650, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 650, 3]
type = HitDef
triggerall = var(26)
trigger1 = animelem = 2
attr = A, NA
animtype = hard
damage    = ceil(ifelse(fvar(10)*110<7,7,fvar(10)*110)),0
guardflag = MA                  
hitflag = MAFD  
priority = 4, Hit 
pausetime = 10,13
sparkno = ifelse(!var(55),-1,2);S8500
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
hitsound   = S5,1
guardsound = S7,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.hittime = 20
ground.velocity = -9
air.type = low
air.velocity = -22,11
ground.cornerpush.veloff = -24
air.cornerpush.veloff = -24
down.cornerpush.veloff = -6
guard.cornerpush.veloff = -24
airguard.cornerpush.veloff = 0
airguard.ctrltime = 2
airguard.velocity = -10,1
air.hittime  = 35
fall.recover = 0
fall = 1
fall.xvelocity =0
fall.yvelocity =0
down.bounce =0
down.velocity = -5,-8
down.hittime = 32
guard.hittime = 2
liedown.time = 30
fall.envshake.time = 18
fall.envshake.ampl = -10
getpower  = 40
givepower = 20


[State 650, 3]
type = HitDef
triggerall = !var(26)
trigger1 = animelem = 2
attr = A, NA
animtype = hard
damage    = ceil(ifelse(fvar(10)*110<7,7,fvar(10)*110)),0
guardflag = MA                  
hitflag = MAFD  
priority = 4, Hit 
pausetime = 10,13
sparkno = ifelse(!var(55),-1,2);S8500
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
hitsound   = S5,1
guardsound = S7,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8
air.type = low
air.velocity = -18,11
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -24
down.cornerpush.veloff = -6
guard.cornerpush.veloff = -25
airguard.cornerpush.veloff = 0
airguard.ctrltime = 2
airguard.velocity = -10,1
down.velocity = -5,-8
down.hittime = 32
guard.hittime = 2
air.hittime  = 30
air.fall = 1
fall.recover = 0
fall.envshake.time = 6
fall.envshake.ampl = -10
yaccel=.65
getpower  = 40
givepower = 20



[State 650, end]
type = ChangeState
trigger1 = BackEdgeBodyDist <= -1
value = 9624
ctrl = 0
[State 650, end]
type = ChangeState
trigger1 = !AnimTime && !movehit
value = ifelse(var(25),2998,51)
ctrl = ifelse((!var(26)||var(25)),1,0)

[State 650, end]
type = ChangeState
trigger1 = !AnimTime && movehit
value = 9623
ctrl = 0
[state 650, safe]
type = ChangeState
trigger1 = Pos Y >= 1 
value = 52


[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
sprpriority = -5
anim = 800


[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
p1sprpriority = -1     ;Draw p1's sprite in front of p2
hitsound = S1, 1                    ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = 810       ;On success, KFM changes to state 810
p2stateno = 820       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down
fall.damage = 0

[State 800, 2]
type = ChangeState
Trigger1 = !AnimTime
value = 0
ctrl = 1


[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 100
sprpriority = -1
ctrl = 0


[State 777, hsp]
type = helper
trigger1 = !time 
helpertype = normal
stateno = 8705
ID = 8705
name = "hitspark5"
postype = p2
pos = -36,-67
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 810,a0]
type = Helper
trigger1 = !time
StateNo = 3598
id = 3598
name = "camera1"
pos = 200,0


[State 810, voz ]
type = PlaySnd
trigger1 = animelem=2
value = 50, 4
channel = 0

[State 810, a4 ]
type = PlaySnd
trigger1 = animelemtime(3)=20
value = 40, 7


[State 810, a4 ]
type = PlaySnd
trigger1 = animelem=4
value = 7, 2
volume = 250

[State 810, VA]
type = Explod
trigger1 = !time
id = 811
anim = 811
ownpal = 1
postype = p1
bindtime = -1
sprpriority = 5;7
scale = 1,1
ignorehitpause = 1




[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1 
pos = 108, -63
[State 810, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2 
pos = 94, -137
[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElem = 3 
pos = 0, -168
[State 810, Bind 4]
type = TargetBind
trigger1 = AnimElem = 4 
pos = 139, -40
[State 810, Bind 5]
type = TargetBind
trigger1 = AnimElem = 5 
pos = 139, -40


[State 801, b2]
type = EnvShake
trigger1 = animelem = 4
time = 13
ampl = -10
persistent=0

[State 801, p2] ;explodpedr
type = helper
trigger1 = AnimElem = 4
helpertype = normal
stateno = 8706
ID = 8706
name = "hitspark6"
postype = p1
pos = 139,0
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
ownpal = 1
persistent = 0



[State 810, a9]
type = TargetState
trigger1 = AnimElem = 6
value = 821

[State 821, a3]
type = targetLifeAdd
trigger1 = animelem = 5
value = -140

[State 810, b4]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 2

[State 820, a0]
type = PowerAdd
trigger1 = !time
value = 20

[State 820, a1]
type = ChangeAnim2
Trigger1 = !Time
value = 820

[State 820, a2]
type = ScreenBound
trigger1 = AnimElemtime(1)>= 0 && animelemtime(6)<=0
value = 0

[State 820, a3]
type = SelfState;safe
trigger1 = time >= 200 ;!gethitvar(isbound)
trigger2 = p2movetype = H
value = 5050

[Statedef 821]
type    = A
movetype= H
physics = N
velset = -8,-10;-19;2.8,-7
sprpriority = -6

[State 820, a1]
type = ChangeAnim
Trigger1 = !Time
value = 5050

[State 821, a1] 
type = VelAdd
Trigger1 = time>=0
y = .7;.5
x =.08;.5

[State 821, a4]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1


[State 821, 2] ; Recover near ground (use ChangeState)
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 821, 3] ; Recover in mid air (use SelfState)
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground


[Statedef 850]; Throw back -Spit out
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
sprpriority = 3
anim = 850


[State 850, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
p1sprpriority = 3   ;Draw p1's sprite in front of p2
hitsound = S1, 1                    ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = -1          ;Force p2 to face KFM
p1stateno = 860       ;On success, KFM changes to state 810
p2stateno = 870       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down
fall.damage = 0

[State 850, 2]
type = ChangeState
Trigger1 = !AnimTime
value = 0
ctrl = 1

[Statedef 860]
type    = S
movetype= A
physics = N
anim = 860
poweradd = 100
sprpriority = 3
ctrl = 0

[State 777, hsp]
type = helper
trigger1 = !time 
helpertype = normal
stateno = 8705
ID = 8705
name = "hitspark5"
postype = p2
pos = -30,-72
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 860,a0]
type = Helper
trigger1 = !time
StateNo = 3598
id = 3598
name = "camera1"
pos = 150,0




[State 860, a1];sand areia rastro
type = explod
trigger1 = time%3=0
anim =29998
ID = 98
sprpriority = -1
postype = p2
pos = 30,ifelse(p2stateno=871,-60,0)
accel = ifelse(random<500,.08,-.08),ifelse(random<500,.08,-.08)
ignorehitpause = 1
facing = ifelse(random<500,1,-1)
scale = .5,.5
supermovetime = 40
pausemovetime = 40

[State 860, a1];sand areia rastro
type = explod
trigger1 = animelemtime(6)>=0 && animelemtime(8)<=0
anim =29998
ID = 99
sprpriority = -10
postype = p1
pos = 0,-90
accel = -.55,ifelse(random<500,.2,-.2)
random = 10,20
ignorehitpause = 1
facing = ifelse(random<500,1,-1)
scale = .6,.6
supermovetime = 40
pausemovetime = 40



[State 860, b2]
type = EnvShake
trigger1 = animelem=1
time = 6
ampl = -6
persistent=0

[State 860, a4 ]
type = PlaySnd
trigger1 = animelem=2
value = 300, 1
channel = 9

[State 860, a4 ]
type = PlaySnd
trigger1 = animelem=5
value = 40, 4
volume = 250


[State 860, a4 ]
type = PlaySnd
trigger1 = animelem=7
value = 300, 4
channel = 5

[State 860, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1 
pos = 60, -82
[State 860, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2 
pos = 100, -101
[State 860, Bind 3]
type = TargetBind
trigger1 = AnimElem = 3 
pos = 80, -100
[State 860, Bind 4]
type = TargetBind
trigger1 = AnimElem = 4 
pos = 60, -99


[State 860, Bind 17]
type = TargetBind
trigger1 = AnimElem = 5 
pos = 0, -99
[State 860, Bind 18]
type = TargetBind
trigger1 = AnimElem = 6
pos = -70, -99

[State 860,a0]
type = Helper
trigger1 = AnimElem = 5
StateNo = 3598
id = 35981
name = "camera2"
pos = -190,0
persistent=0


[State 860, a9]
type = TargetState
trigger1 = AnimElem = 7
value = 871

[State 860, Bind 18];
type = TargetBind
trigger1 = AnimElem = 7 
pos = -75, -40
time=1

[State 860, a3]
type = targetLifeAdd
trigger1 = animelem = 7
value = -140


[State 860, end]
type = Turn
trigger1 = animelem = 12
ignorehitpause = 0
persistent=0

[State 860, b4]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

[Statedef 870]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -4


[State 870, a0]
type = PowerAdd
trigger1 = !time
value = 20

[State 870, a1]
type = ChangeAnim2
Trigger1 = !Time
value = 870

[State 870, a2]
type = ScreenBound
trigger1 = AnimElemtime(1)>= 0 ;&& animelemtime(6)<=0
value = 0


[State 870, a3]
type = SelfState;safe
trigger1 = time >= 200 
trigger2 = p2movetype = H
value = 5050

[Statedef 871]
type    = A
movetype= H
physics = N
sprpriority = -4

[State 871, a1]
type = ChangeAnim
Trigger1 = !Time
value = 5050

[State 871, a1] 
type = Velset
Trigger1 = !time
y = -.2;.5
x = -3;.5
[State 871, a1] 
type = VelAdd
Trigger1 = time>0
y = .3;.5
x = -3;.5

[State 1115, a4]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1


[State 871, 2] ; Recover near ground (use ChangeState)
type = ChangeState
triggerall = time>=50
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 871, 3] ; Recover in mid air (use SelfState)
type = SelfState
triggerall = time>=50
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 871, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 
[State 871, 4] 
type = SelfState
trigger1 = (time>=10) && (!alive)
value = 5050 


[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 110
ctrl = 0
sprpriority = 5

[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 1000
ctrl = 1


[State 777, es]
type = Explod 
trigger1 = !time
sprpriority = 10
anim = 8580
pos = -30, 3
removeongethit = 1
scale = .77,.77
bindtime = 1
supermovetime = 99
pausemovetime = 99
ownpal =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos = 0,ifelse(p2statetype=A,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,ifelse(p2statetype=A,(enemynear ,const(size.head.pos.y)),(enemynear,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 777, voz]
type = PlaySnd
trigger1 = !time
value = 50,ifelse(random<500,3,5)
channel = 0

[State 1000 , a6]
type = PlaySnd
trigger1 = AnimElem = 4
value = 40,7
channel = 9

[State 1000, b4]
type = Explod
trigger1 = animelem = 7
id =1010
anim = 1010
postype = p1
pos = 0, 0
sprpriority = 7
supermovetime = 9999
pausemovetime = 9999

[State 1000 , a8]
type = HitDef
trigger1 = !time
attr = S, SA
damage    = ceil(ifelse(fvar(10)*160<7,40,fvar(10)*160)),10
priority  = 6, hit
animtype = up;hard 
hitflag = MAFD
guardflag = HA
pausetime = 4,4
sparkxy = 0,-70
sparkno = ifelse(!var(55),-1,3);S8500
guard.sparkno = ifelse(!var(55),-1,40)
hitsound   = S5,4
guardsound = S7,1
ground.type = trip
air.type = low
fall.envshake.time = 20
fall.envshake.ampl = -5
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -6,-1
air.velocity = -6,-1
guard.velocity = -8
airguard.velocity = -8,-1     
air.hittime = 30
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower  = 40
givepower = 20
down.velocity = -1.5,-8
down.hittime = 32
yaccel =.55
guard.dist = 320


[State 1000, b2]
type = EnvShake
trigger1 = animelem = 7
time = 25
ampl = -8


[State 1000, b3 ]
type = PlaySnd
trigger1 = animelem = 7
value = 40, 8
volume = 250
channel =9

[State 1000, p2] ;explodpedr
type = helper
trigger1 = AnimElem = 7
helpertype = normal
stateno = 8706
ID = 8706
name = "ground"
postype = p1
pos = 200,0
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
ownpal = 1
persistent = 0



[State 1000, b4]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


[Statedef 1001];-
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 110
ctrl = 0


[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 1001
ctrl = 1

[State 777, es]
type = Explod 
trigger1 = !time
sprpriority = 10
anim = 8580
pos = -30, 3
removeongethit = 1
scale = .77,.77
bindtime = 1
supermovetime = 99
pausemovetime = 99
ownpal =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos =0,ifelse(p2statetype=A,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,ifelse(p2statetype=A,(enemynear ,const(size.head.pos.y)),(enemynear,const(size.mid.pos.y)))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 777, voz]
type = PlaySnd
trigger1 = !time
value = 50,ifelse(random<500,3,5)
channel = 0

[State 1001 , a6]
type = PlaySnd
trigger1 = AnimElem = 4
value = 40,7
channel = 9


[State 1001, 2]
type = HitDef
trigger1 = !time
attr = S, SA
animtype = back
air.animtype = back
damage    = ceil(ifelse(fvar(10)*140<7,40,fvar(10)*140)),10
priority  = 6, hit
hitflag = MAF
guardflag = MA
pausetime = 1,1;4,12
sparkno =ifelse(!var(55),-1,3);Sifelse(random>500,8500,8501) 
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = -10,-70
hitsound   = S5,4
guardsound = S7,1
guard.velocity = -12
airguard.velocity = -5,-4    
air.type = high                  
air.velocity = -7,1           
air.hittime = 1
ground.type = low
ground.slidetime = 18
ground.hittime  = 1
ground.velocity = -10,-2
ground.cornerpush.veloff = -15
air.cornerpush.veloff = -15
guard.cornerpush.veloff = -15
airguard.cornerpush.veloff = -15
guard.hittime = 20
guard.ctrltime = 20
getpower  = 30
givepower = 15
fall = 1
fall.recover = 0
fall.envshake.time = 25
fall.envshake.ampl = -6
guard.dist = 320

[State 1001, v0] 
type = VarSet
trigger1 = movehit
var(48) = 30
ignorehitpause = 1
persistent=0


[State 1001, b4]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


[Statedef 1002]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 110
ctrl = 0


[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 1002
ctrl = 1

[State 777, es]
type = Explod 
trigger1 = !time
sprpriority = 10
anim = 8580
pos = -30, 3
removeongethit = 1
scale = .77,.77
bindtime = 1
supermovetime = 99
pausemovetime = 99
ownpal =1

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos = 0,(enemynear ,const(size.head.pos.y))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,(enemynear ,const(size.head.pos.y))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 777, voz]
type = PlaySnd
trigger1 = !time
value = 50,ifelse(random<500,3,5)
channel = 0

[State 1002 , a6]
type = PlaySnd
trigger1 = AnimElem = 4
value = 40,7
channel = 9

[State 1002, 2]
type = HitDef
trigger1 =  !time
attr = S, SA                     
animtype = Up                 
damage = ceil(ifelse(fvar(10)*150<7,40,fvar(10)*150)),10
hitflag = MAF                  
guardflag = M 
priority = 6, Hit 
pausetime = 1,1   
sparkno = ifelse(!var(55),-1,3);S8500
guard.sparkno = ifelse(!var(55),-1,40)                     
sparkxy = -15, -110              
hitsound = S5,4                 
guardsound = S7,1           
ground.type = high               
ground.slidetime = 30            
ground.hittime  = 30             
ground.velocity = -6,-20       
guard.velocity = -8
airguard.velocity = -8,-1     
air.type = high                  
air.velocity = -6,-15            
air.hittime = 30
envshake.time = 10
envshake.ampl = 6
fall =1
fall.recover = 0
fall.recovertime = 80
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = -8
guard.cornerpush.veloff = -15
airguard.cornerpush.veloff = -15
getpower  = 40
givepower = 20
fall.envshake.time = 25
fall.envshake.ampl = -6
yaccel=.85


[State 1002, rg]
type = VarSet
trigger1 = movehit
v = 13
value =1 
ignorehitpause = 1
persistent = 0

[State 1002, b4]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


[Statedef 1100]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = 70
sprpriority = 2
juggle = 4
velset = 0,0

[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 1100
ctrl = 1

[State 777, es]
type = Explod 
trigger1 = !time
sprpriority = 10
anim = 8580
pos = -30, 3
removeongethit = 1
scale = .77,.77
bindtime = 1
supermovetime = 99
pausemovetime = 99
ownpal =1

[State 1100, A4]
type = PlaySnd
trigger1 = !time
value = 50,2
channel = 0

[State 1110, A4]
type = PlaySnd
trigger1 = animelem=3
value = 20,9;7
channel = 10
ignorehitpause=1
volume=200


[State 1100, A3]
type = Helper
trigger1 = animelem = 4
ID = 1110
name = "sandshower"
StateNo = 1110
postype = p1
pos = 0, 0
ownpal = 1



[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -26,(enemynear,const(size.mid.pos.y))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1


[State 1100, close]
type = HitDef
trigger1 = !Time
attr = S, SA
hitflag = MAF
guardflag = MA
animtype = hard
priority = 5,hit
damage = ceil(ifelse(fvar(10)*50<7,7,fvar(10)*50)),5
pausetime = 1,1
sparkno = Sifelse(!var(55),8523,1)
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy = -26,(enemynear,const(size.mid.pos.y))
hitsound   = S5,4
guardsound = S7,1
ground.type = low
ground.slidetime = 30
ground.hittime = 6
ground.velocity = -14
air.velocity = -14, -2
air.hittime = 30
envshake.time = 6
envshake.freq = 127
envshake.ampl = -5
ground.cornerpush.veloff = -25
air.cornerpush.veloff = -25
down.cornerpush.veloff = -25
guard.cornerpush.veloff = -25
airguard.cornerpush.veloff = -25
guard.dist = 320

[State 3220, 0]
type = envcolor
trigger1 = movehit  
time = 2
value = 255,255,255
ignorehitpause = 1
persistent=0


[State 1100, ee]
type = Changestate
trigger1 = !animtime
value = 0
ctrl = 1

[Statedef 1110];-- 
type    = A
movetype= A
physics = N
anim = 1110
juggle  = 12
velset = 0,0
ctrl = 0
sprpriority = 4


[State 1110, 00]
type = VarSet
trigger1 = parent,var(55) 
v = 1
value =1
ignorehitpause = 1


[State 1110, 1]
type = hitoverride
trigger1 =1
attr = SCA,AP
stateno = 1115
ignorehitpause = 1
slot = 1
[State 1110, 2]
type = nothitby
trigger1 = 1
value = SCA,AA,AT
ignorehitpause = 1
[State 1110, 3]
type = hitby
trigger1 = 1
value = SCA,AP
ignorehitpause = 1


[State 777, hdf]
type = helper
trigger1 = !var(1) 
trigger1 = moveguarded=1 && (numhelper(8716)<=1) 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,Var(7)
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
ownpal = 1

[State 777, hsp]
type = helper
trigger1 = movehit
helpertype = normal
stateno = 8705
ID = 8705
name = "hitspark5"
postype = p2
pos =  (enemynear ,const(size.mid.pos.x)),Var(7)
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1



[State 1110, a1];sand
type = explod
triggerall = movehit
trigger1 = time%6=0
anim =29998
ID = 4444
sprpriority = 4
postype = p2
pos = 0,(enemynear ,const(size.mid.pos.y))
accel = 0,1
random = 26,66
facing = ifelse(random<500,1,-1)
bindtime=-1
ignorehitpause = 1
scale = .3,.3
supermovetime = 40
pausemovetime = 40



[State 1110, Width]
type = Width
trigger1 = 1
player = -25,-25




[State 1110, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 1110, 0]
type = BindToParent
trigger1 = 1
pos = 0,0


[State 1110, v0]
type = VarSet
trigger1 = AnimElemtime(2)>=0 &&  AnimElemtime(5)<=3 
v = 7
value =(enemynear,const(size.head.pos.y))+15 
ignorehitpause = 1

[State 1110, v1]
type = VarSet
trigger1 = AnimElemtime(6)>=0 &&  AnimElemtime(7)<=3 
v = 7
value =(enemynear,const(size.mid.pos.y))
ignorehitpause = 1

[State 1110, v2]
type = VarSet
trigger1 = AnimElemtime(8)>=0 &&  AnimElemtime(9)<=0 
v = 7
value =-25
ignorehitpause = 1


[State 1110, hc]
type = parentvaradd
trigger1 = movehit && numtarget
var(15)=1
ignorehitpause = 1
;persistent = 0

[State 1110, 6]
type = HitDef
trigger1 =  AnimElem = 3 || AnimElem = 5||AnimElem = 7 || AnimElem = 9 
attr = A, SP
hitflag = MAFD
guardflag = MA
pausetime = 2, 2
animtype = medium
damage = ceil(ifelse(root,fvar(10)*40<7,7,root,fvar(10)*40)),2
priority = 5, Hit 
sprpriority =4
sparkno = Sifelse(!var(1),8523,1)
guard.sparkno = ifelse(!var(1),-1,40)   
sparkxy = ifelse(!var(1),0,-15),Var(7)
hitsound = S5,ifelse(random<=500,2,3)                  
guardsound = S7,1     
ground.type = low
air.type = low
ground.velocity = -6 
ground.slidetime = 10
ground.hittime = 10
air.velocity = -4, -4
air.hittime = 30
guard.slidetime = 10
guard.hittime = 6
guard.velocity = -5
down.velocity = -4, -5
down.hittime = 15
envshake.time = 7
envshake.ampl = 4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower  = 10
givepower = 5
guard.dist = 320

[State 1110, 6]
type = HitDef
trigger1 = AnimElem = 2 || AnimElem = 4 || AnimElem = 6||AnimElem = 8 
attr = A, SP
hitflag = MAFD
guardflag = MA
pausetime = 2, 2
animtype = medium
damage = ceil(ifelse(root,fvar(10)*40<7,7,root,fvar(10)*40)),10
priority = 5, Hit 
sprpriority =4
sparkno = Sifelse(!var(1),8523,1)
guard.sparkno = ifelse(!var(1),-1,40)   
sparkxy = ifelse(!var(1),0,-15),Var(7)
hitsound = S5,1                  
guardsound = S7,1     
ground.type = high
air.type = high
ground.velocity = -6 
ground.slidetime = 10
ground.hittime = 10
air.velocity = -4, -4
air.hittime = 30
guard.slidetime = 10
guard.hittime = 6
guard.velocity = -5
down.velocity = -4, -5
down.hittime = 15
envshake.time = 7
envshake.ampl = 4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower  = 10
givepower = 5
guard.dist = 320





[State 1110, a1]
type = explod
trigger1 = AnimElemtime(9)>= 0 && animelemtime(15)<=0
anim = 3225
ID = 3225
sprpriority = 15
postype = p1
pos = Var(10),10
random = 0,0
scale = .7,.7
ignorehitpause = 1
supermovetime=40
pausemovetime=40

[State 1110, A4]
type = VarSet
trigger1 = animelem = 8
v = 10
value = 300
ignorehitpause = 1
[State 1110, A4]
type = VarSet
trigger1 = animelem=10||animelem=11||animelem=12||animelem=13
v = 10
value = Var(10)-50
ignorehitpause = 1






[State 1110, A6]
type = DestroySelf
trigger1 = !animtime

[State 1110, A6]
type = changestate
trigger1 = parent,movetype=H
value = 1115
ignorehitpause=1

[Statedef 1115]
type    = A
movetype= I
physics = N
anim = 1115
velset = 0,0
ctrl = 0
sprpriority = 20


[State 1115, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 1115, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 1115, a4]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 1115, A6]
type = DestroySelf
trigger1 = !animtime


[Statedef 1200];--------------- 
type = S
movetype = A
physics = S
ctrl = 0
poweradd = 70
sprpriority = 1
juggle = 4
velset = 0,0

[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 1200
ctrl = 1

[State 777, es]
type = Explod 
trigger1 = !time
sprpriority = 10
anim = 8580
pos = -30, 3
removeongethit = 1
scale = .77,.77
bindtime = 1
supermovetime = 99
pausemovetime = 99
ownpal =1

[State 1200, A4]
type = PlaySnd
trigger1 = !time
value = 50,ifelse(random<500,0,1)
channel = 0

[State 1200, A3]
type = Helper
trigger1 = animelem = 4
ID = 1210
name = "imobilizator"
StateNo = 1210
postype = p2
pos = 5, 0
ownpal = 1

[State 1200, ee]
type = Changestate
trigger1 = !animtime
value = 0
ctrl = 1



[Statedef 1210]
type    = S
movetype= A
physics = N
anim = 1210
juggle  = 5
velset = 0,0
ctrl = 0
sprpriority = 20


[State 777, pos]
type = posset
trigger1 = !time
y = 0

[State 777, hsp]
type = helper
trigger1 = movecontact
helpertype = normal
stateno = 8705
ID = 8705
name = "hitspark5"
postype = p1
pos = -10,-40         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1



[State 1210, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 1210, A1]
type = PlaySnd
trigger1 = !time
value = 20,3
channel = 9


[State 1210, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 1210, 2]
type = HitDef
trigger1 = !time
attr = S, SP                     
animtype = hard                 
damage = 1,1
hitflag = MAF                 
guardflag = MA 
priority = 4, Hit 
sprpriority = 20
pausetime = 1,4   
guard.pausetime =2,2
sparkno = -1
guard.sparkno = -1                  
sparkxy = 0,0       
hitsound = S1, 1                  
guardsound = S7,1           
ground.hittime = 8
guard.slidetime = 8
guard.hittime = 8
guard.velocity = 6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
givepower = 20
guard.dist = 320


[State 1210, a6]
type = targetState
trigger1 = movehit
value = 1221
ignorehitpause=1

[State 1210, 1]
type = hitoverride
trigger1 =1
attr = SCA,AA,AP
stateno = 1215
ignorehitpause = 1
slot = 1
[State 1210, 2]
type = nothitby
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1
[State 1210, 3]
type = hitby
trigger1 = 1
value = SCA,AA,AP
ignorehitpause = 1

[State 1210, A6]
type = DestroySelf
trigger1 = !animtime
[State 1210, a6]
type = ChangeState
trigger1 = movehit
value = 1220
ctrl = 0
ignorehitpause=1




[Statedef 1215]
type    = S
movetype= I
physics = N
anim = 1215
velset = 0,0
ctrl = 0
sprpriority = 20


[State 1215, 0] 
type = PalFX
trigger1 = prevstateno = 1210
time = 4
add = 0,0,0
mul = 430,276,297
sinadd = 41,164,20,2
color = 256

[State 1215, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 1215, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 1215, a4]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 1215, A6]
type = DestroySelf
trigger1 = !animtime


[Statedef 1220]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1220
sprpriority = 20


[State 1220, a6]
type = ChangeState
trigger1 = p2stateno!=1221
value = 1215
ctrl = 0
ignorehitpause=1

[State 1215, A5]
type = EnvShake
trigger1 = !time
time = 4
ampl = -6


[State 1220, ]
type = BindToTarget
trigger1 = 1
pos = 5,0

[State 1220, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 1220, a4]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 1220, A6]
type = DestroySelf
trigger1 = !animtime


[Statedef 1221]
type = S
movetype = H
physics = S
ctrl = 0
sprpriority = 0
velset = 0,0


[State 1221, a0]
type = PosSet
trigger1 = !time
y = 0

[State 1221, a1]
type = ChangeAnim2
trigger1 = !time
value = 1221


[State 1221, A2]
type = selfstate
trigger1 = Time >= 45 
value = 5000
ctrl = 0


;---------------------------------  Assault step
[Statedef 1500]
type    = S
movetype= A
physics = S
velset = 0,0
sprpriority = 0
ctrl = 0
poweradd = 130

[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 1500
ctrl = 1

[State 777, r]
type = VarRangeSet
trigger1 = !time
value = 0
first = 11
last = 12
ignorehitpause = 1

[State 777, es]
type = Explod 
trigger1 = !time
sprpriority = 10
anim = 8580
pos = -30, 3
removeongethit = 1
scale = .77,.77
bindtime = 1
supermovetime = 99
pausemovetime = 99
ownpal =1


[State 1500, b2]
type = PlayerPush
trigger1 = 1
value = 0

[State 777, voz]
type = PlaySnd
trigger1 = !time
value = 50,ifelse(random<500,3,5)
channel = 0



[State 1500, A3]
type = Helper
trigger1 = animelem = 4
ID = 1510
name = "sand901"
StateNo = 1509
postype = p1
pos = 90, 0
ownpal = 1


[State 1500, A2]
type = ChangeState
triggerall = command = "collum_b"
trigger1 = Var(11) >= 1 
value = 1501
persistent = 0

[State 1500, A2]
type = ChangeState
triggerall = command = "collum_c"
trigger1 = Var(12) >= 1 
value = 1502
persistent = 0

[State 1500, 4]
type = ChangeState
trigger1 = !animTime
value = 0
ctrl =1

[Statedef 1509]
type    = S
movetype= A
physics = N
anim = 1510
juggle  = 5
velset = 0,0
ctrl = 0
sprpriority = 1

[state 7777, a0]
type = assertspecial
trigger1 = animelemtime(10)>=0
flag = noshadow

[state 7777, hs]
type = varset
trigger1 =!time 
var(1) =ifelse((parent,var(55)<=0),0,1)
ignorehitpause = 1

[State 777, hsp]
type = helper
trigger1 = !var(1)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos = -15,(enemynear,const(size.mid.pos.y))  
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(1)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -15,(enemynear,const(size.mid.pos.y))  
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[state 7777, bi]
type = parentvarset
trigger1 = movecontact
var(11) = 1

[state 7777, bi]
type = parentvarset
trigger1 = movecontact
var(12) = 1


[State 777, xy]
type = parentvaradd
trigger1 = movehit && numtarget
var(15) = 1
ignorehitpause = 1
persistent= 0

[State 1509, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 777, sfx]
type = PlaySnd
trigger1 = !time
value = 20,4
channel = 9

[State 1509, A5]
type = EnvShake
trigger1 = !time
time = 8
ampl = -4

[State 1509, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 1509, 2]
type = HitDef
trigger1 = !time
attr = S, SP                     
animtype = Up                 
damage = ceil(ifelse(root,fvar(10)*100<7,7,root,fvar(10)*100)),5
hitflag = MAFD                  
guardflag = MA 
priority = 6, Hit 
sprpriority = 1
pausetime = 2,2  
sparkno = ifelse(!var(1),-1,2)
guard.sparkno = ifelse(!var(1),-1,40)                     
sparkxy= -15,ifelse(p2statetype=A,-110,-70)  
hitsound = S5,1                  
guardsound = S7,1           
ground.type = high               
ground.slidetime = 30            
ground.hittime  = 30             
ground.velocity = -2.9,-12.3       
guard.velocity = -8
airguard.velocity = -8,-1     
air.type = high                  
air.velocity = -2.9,-9.3            
air.hittime = 30
envshake.time = 7
envshake.ampl = 4
;fall = 1
;fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower  = 40
givepower = 20
down.velocity = -1.5,-8
down.hittime = 32
yaccel =.65
;fall.envshake.time = 30
;fall.envshake.ampl = -8








[State 1509, 2]
type = hitoverride
trigger1 =(AnimElemTime(1) >= 0)&&(AnimElemTime(8) <= 3)
time = 1
attr = SCA,AA,AP,AT
stateno = 1511
ignorehitpause = 1
slot=1

[State 1509, A6]
type = DestroySelf
trigger1 = !animtime

[State 1509, a6]
type = ChangeState
trigger1 = parent, movetype=H
trigger2 = parent, stateno=1501
trigger3 = parent, stateno=1502
value = 1511
ctrl = 0

[Statedef 1510]
type    = S
movetype= A
physics = N
anim = 1510
juggle  = 5
velset = 0,0
ctrl = 0
sprpriority = 1

[state 7777, a0]
type = assertspecial
trigger1 = animelemtime(10)>=0
flag = noshadow

[state 7777, hs]
type = varset
trigger1 =!time 
var(1) =ifelse((parent,var(55)<=0),0,1)
ignorehitpause = 1

[State 777, hsp]
type = helper
trigger1 = !var(1)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos= -15,(enemynear ,const(size.mid.pos.y))  
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(1)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos= -15,(enemynear ,const(size.mid.pos.y))  
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[state 7777, bi]
type = parentvarset
trigger1 = movecontact
var(11) = 1

[state 7777, bi]
type = parentvarset
trigger1 = movecontact
var(12) = 1

[State 777, xy]
type = parentvaradd
trigger1 = movehit && numtarget
var(15) = 1
ignorehitpause = 1
persistent= 0




[State 1510, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 777, sfx]
type = PlaySnd
trigger1 = !time
value = 20,4
channel = 9

[State 1510, A5]
type = EnvShake
trigger1 = !time
time = 15
ampl = -4

[State 1510, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 1510, 2]
type = HitDef
trigger1 = !time
attr = S, SP                     
animtype = Up                 
damage = ceil(ifelse(root,var(20),40,root,fvar(10)*110)),5
hitflag = MAFD                  
guardflag = MA 
priority = 6, Hit 
sprpriority = 1
pausetime = 2,2   
sparkno = ifelse(!var(1),-1,3)
guard.sparkno = ifelse(!var(1),-1,40)                     
sparkxy= -15,ifelse(p2statetype=A,-110,-70)  
hitsound = S5,1                  
guardsound = S7,1           
ground.type = high               
ground.slidetime = 30            
ground.hittime  = 30             
ground.velocity = -2.9,-12.3       
guard.velocity = -8
airguard.velocity = -8,-1     
air.type = high                  
air.velocity = -2.4,-8            
air.hittime = 30
envshake.time = 7
envshake.ampl = 4
;fall = 1
;fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower  = 40
givepower = 20
down.velocity = -1.5,-8
down.hittime = 32
yaccel =.65
;fall.envshake.time = 30
;fall.envshake.ampl = -8


[State 1510, 2]
type = hitoverride
trigger1 =(AnimElemTime(1) >= 0)&&(AnimElemTime(8) <= 3)
time = 1
attr = SCA,AA,AP,AT
stateno = 1511
ignorehitpause = 1
slot=1

[State 1510, A6]
type = DestroySelf
trigger1 = !animtime

[State 1510, a6]
type = ChangeState
trigger1 = parent, movetype=H
trigger2 = parent, stateno=1502
value = 1511
ctrl = 0

[Statedef 1511]
type    = S
movetype= I
physics = N
anim = 1511
velset = 0,0
ctrl = 0
sprpriority = 10

[state 7777, a0]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1511, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 1511, A5]
type = EnvShake
trigger1 = !time
time = 8
ampl = -6

[State 1511, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 1511, a4]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 1511, A6]
type = DestroySelf
trigger1 = !animtime


[Statedef 1501]
type    = S
movetype= A
physics = S
velset = 0,0
sprpriority = 0
ctrl = 0
poweradd = 130

[State 777, r]
type = VarRangeSet
trigger1 = !time
value = 0
first = 11
last = 12
ignorehitpause = 1


[State 777, ch]
type = ChangeAnim
triggerall = prevstateno!=1500
trigger1 = !time 
value = 1500
ctrl = 1
[State 777, ch]
type = ChangeAnim
triggerall = prevstateno=1500
trigger1 = !time 
value = 1505
ctrl = 1

[State 777, ch]
type = VarSet
trigger1 = !time 
v = 20
value = ifelse((prevstateno=1500),1,0)
ignorehitpause = 1


[State 777, es]
type = Explod 
trigger1 = !time
sprpriority = 10
anim = 8580
pos = -30, 3
removeongethit = 1
scale = .77,.77
bindtime = 1
supermovetime = 99
pausemovetime = 99
ownpal =1


[State 1501, b2]
type = PlayerPush
trigger1 = 1
value = 0

[State 7777, voice]
type = PlaySnd
trigger1 = !time
value = 50,3
channel = 0


[State 1501, A3]
type = Helper
trigger1 = (anim =1500) && (animelem = 4)
trigger2 = (anim =1505) && (animelem = 2)
ID = 1511
name = "sand90"
StateNo = 1510
postype = p1
pos = 155, 0



[State 1501, A2]
type = ChangeState
triggerall = command = "collum_c"
trigger1 = Var(12) >= 1 
value = 1502
persistent = 0

[State 1501, 4]
type = ChangeState
trigger1 = !animTime
value = 0
ctrl =1






[Statedef 1502]
type    = S
movetype= A
physics = S
velset = 0,0
sprpriority = 0
ctrl = 0
poweradd = 130

[State 777, r]
type = VarRangeSet
trigger1 = !time
value = 0
first = 11
last = 12
ignorehitpause = 1

[State 777, ch]
type = ChangeAnim
triggerall = prevstateno!=1501|| prevstateno!=1500
trigger1 = !time 
value = 1502
ctrl = 1
[State 777, ch]
type = ChangeAnim
triggerall = prevstateno=1501||prevstateno=1500
trigger1 = !time 
value = 1505
ctrl = 1

[State 777, ch]
type = VarSet
trigger1 = !time 
v = 20
value = ifelse((prevstateno=1501|| prevstateno=1500),1,0)
ignorehitpause = 1


[State 777, es]
type = Explod 
trigger1 = !time
sprpriority = 10
anim = 8580
pos = -30, 3
removeongethit = 1
scale = .77,.77
bindtime = 1
supermovetime = 99
pausemovetime = 99
ownpal =1


[State 1502, b2]
type = PlayerPush
trigger1 = 1
value = 0

[State 777, voz]
type = PlaySnd
trigger1 = !time
value = 50,ifelse(random<500,3,5)
channel = 0

[State 1502, A3]
type = Helper
trigger1 = (anim =1502) && (animelem = 6)
trigger2 = (anim =1505) && (animelem = 1)
ID = 1520
name = "sand45"
StateNo = 1520
postype = p1
pos = 75, -3
helpertype = player
keyctrl = 0
facing = 1

[State 1502, 4]
type = ChangeState
trigger1 = !animTime
value = 0
ctrl =1




[Statedef 1520]
type    = S
movetype= A
physics = N
anim = 1520
juggle  = 5
velset = 0,0
ctrl = 0
sprpriority = 1

[state 7777, a0]
type = assertspecial
trigger1 = animelemtime(12)>=0
flag = noshadow

[state 7777, hs]
type = varset
trigger1 =!time 
var(1) =ifelse((parent,var(55)<=0),0,1)
ignorehitpause = 1


[State 777, hsp]
type = helper
trigger1 = !var(1)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos = -15,(enemynear ,const(size.mid.pos.y))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(1)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos= -15,(enemynear ,const(size.mid.pos.y))     
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 777, xy]
type = parentvaradd
trigger1 = movehit && numtarget
var(15) = 1
ignorehitpause = 1
persistent= 0

[State 1520, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 777, sfx]
type = PlaySnd
trigger1 = !time
value = 20,4
channel = 9


[State 1520, A5]
type = EnvShake
trigger1 = !time
time = 8
ampl = -4

[State 1520, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 1520, 2]
type = HitDef
trigger1 = !time
attr = S, SP                     
animtype = hard                 
damage = ceil(ifelse(root,var(20)=1,47,root,fvar(10)*130)),8
p2facing =1
hitflag = MAFD                  
guardflag = MA 
priority = 6, Hit 
sprpriority = 1
pausetime = 0, 8   
sparkno = ifelse(!var(1),-1,3)
guard.sparkno = ifelse(!var(1),-1,40)                     
sparkxy= -15,ifelse(p2statetype=A,-110,-70)     
hitsound = S5,4                  
guardsound = S7,1           
ground.type = high               
ground.slidetime = 30            
ground.hittime  = 30             
ground.velocity = -10,-24     
guard.velocity = -13
airguard.velocity = -8,-3     
air.type = high                  
air.velocity = -10,-20       
air.hittime = 30
fall.envshake.time = 40
fall.envshake.ampl = -9
envshake.time = 7
envshake.ampl = 4
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower  = 40
givepower = 20
down.velocity = -1.5,-8
down.hittime = 32
yaccel =.95
guard.dist = 320


[State 1520, rg]
type = parentVarSet
trigger1 = movehit
v = 13
value =1 
ignorehitpause = 1
persistent = 0

[State 1520, 2]
type = hitoverride
trigger1 =(AnimElemTime(1) >= 0)&&(AnimElemTime(9) <= 3)
time = 1
attr = SCA,AA,AP,AT
stateno = 1521
ignorehitpause = 1
slot=1

[State 1520, A6]
type = DestroySelf
trigger1 = !animtime

[State 1520, a6]
type = ChangeState
trigger1 = parent, movetype=H
value = 1521
ctrl = 0

[Statedef 1521]
type    = S
movetype= I
physics = N
anim = 1521
velset = 0,0
ctrl = 0
sprpriority = 10

[state 7777, a0]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1521, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 1521, A5]
type = EnvShake
trigger1 = !time
time = 8
ampl = -6

[State 1521, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 1521, a4]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 1521, A6]
type = DestroySelf
trigger1 = !animtime 


;------------------------------------------------- teleport
[Statedef 1700]
type    = S
movetype= I
physics = N
poweradd= 0
velset = 0,0
ctrl = 0
sprpriority = 15

[State 1700, a0]
type = changeanim
triggerall = !time && var(59)<=0
trigger1 = (command= "qs_f3p"||command= "qs_f3k")
trigger1 = var(19):=ifelse((command= "qs_f3k"),2,1)
value = 6700
persistent =0

[State 1700, a1]
type = changeanim
triggerall = !time && var(59)<=0
trigger1 =  (command= "qs_b3p"||command= "qs_b3k")
trigger1 = var(19):=ifelse((command= "qs_b3k"),4,3)
value = 6750
persistent=0

[State 1700, a0]
type = changeanim
triggerall = !time && var(59)>=1
trigger1 = (var(19):=1);ifelse((command= "qs_f3k"),2,1)
value = 6700
persistent = 0



[State 1700, a2]
type = playerpush
trigger1 = animelemtime(5)>=0 && animelemtime(15)<= 0
value = 0
ignorehitpause = 1

[State 1700, a3]
type = nothitby
trigger1 = animelemtime(5)>= 0 && animelemtime(15)<= 0
value = SCA,AA,AP,AT
ignorehitpause = 1

[State 1700, a4]
type = PlaySnd
trigger1 = animelem = 2
value = 20, 2
channel = 0
volume = 250
[State 7777, sfx]
type = PlaySnd
trigger1 = animelem=13 
value = 20,0
channel = 7
volume=250


[State 1700, a5]
type = explod
trigger1 = time%3=0
anim =2
ID = 6
sprpriority = -7
postype = p1
pos = ifelse(random<500,15,-15),ifelse(random<500,-20,-10)
accel = ifelse(random<500,.05,-.05),ifelse(random<500,.05,-.05)
ignorehitpause = 1
facing = ifelse(random<500,1,-1)
scale = 1,1
supermovetime = 20
pausemovetime = 20



[State 1700, v0]
type = velset
trigger1 = animelemtime(6)= 0 
x = ifelse((var(19)= 1||var(19)= 2),18,-18)


[State 1700, v1]
type = velmul
trigger1 = animelemtime(15)>=0 && (var(19)= 1||var(19)= 3)
trigger2 = animelemtime(10)>=0 && (var(19)= 2||var(19)= 4)
x=.7

[State 1700, b1]
type = turn
trigger1 = animelem=15 && p2dist x <= 0

[State 1700, b2]
type = AfterImage
trigger1 = animelem=7
time = 30
PalBright = 25,25,0
PalContrast = 60,60,20
PalAdd = -10,-10,-10
PalMul = .85,.85,.50
trans = add
TimeGap = 1
FrameGap = 2
length = 10
ignorehitpause = 1
[State 1700, b3]
type = AfterImagetime
trigger1 = animelemtime(13)>=0
time = 1

[State 1700, b3]
type = ChangeState
trigger1 = !AnimTime 
value = 0
ctrl = 1



;------------------------------------------------------------
[Statedef 2999]
type    = A
physics = N
velset = 0,-13
ctrl = 0

[State 2999, a6x]
type = Velset
trigger1 = Var(59)>=1 && (prevstateno=420)
x = 5

[state 2999,220]
type = varset
trigger1 = !time
var(25) = 1

[State 2999, aa]
type = ChangeAnim
trigger1 = !Time
value = 2999

[State 2999, a1]
type = Width
trigger1 = 1
player = -25,-25

[State 777, hsp]
type = helper
trigger1 = !time 
helpertype = normal
stateno = 8715
ID = 2999
name = "superjump"
postype = p1
pos = 0,-10
facing = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
ownpal = 1

[State 2999, a8]
type = Turn
trigger1 = P2Dist X < 0


[State 2999, a3]
type = PlaySnd
trigger1 = !time
value = 6,2

[state 2999, a9]
type = ChangeState
trigger1 = Time >= 2
value = 2998
ctrl=1

[Statedef 2998];-----------------
type    = A
physics = N
ctrl = 1

[State 2998, a1]
type = Width
trigger1 = 1
player = -25,-25

[State 2998, aa]
type = ChangeAnim
trigger1 = prevstateno !=2999 && !time
value = 50

;=========== dcvsm  screenpack stuff 
[State 2998, x]
type = VarRandom
triggerall = Var(55)=1
trigger1 = time >= 0
v = 51
range = -2, 2
[State 2998, z]
type = explod
triggerall = Var(55)=1
trigger1 = vel y <= -0.5 && numexplod(701) <= 5 && timemod = 3,1
anim = F701
id = 701
postype = p1
pos = const(size.mid.pos.x),const(size.mid.pos.y)-20
random = 20+const(size.air.back)+const(size.air.front),15
vel = var(51),1
bindtime = 1
removetime = -2
ontop = 1
ownpal = 1
removeongethit = 1
;=========== dcvsm  screenpack stuff end

[State 2998, a5]
type = VelAdd
triggerall = (prevstateno != [600,650])&& (Time < 20)
trigger1 = Command = "holdback" && Vel X > -2.2
x = -2

[State 2998, a6]
type = VelAdd
triggerall = (prevstateno != [600,650])&& (Time < 20)
trigger1 = Command = "holdfwd" && Vel X < 2.2
x = 2

[State 2998, a5x]
type = VelAdd
trigger1 = (Time > 20) && (Command = "holdback") && (Vel X > -1.5)
trigger2 = (prevstateno = [600,650])&&(Time > 0) && (Command = "holdback") && (Vel X > -1.5)
x = -1

[State 2998, a6x]
type = VelAdd
trigger1 = (Time > 20) &&(Command = "holdfwd") && (Vel X < 1.5)
trigger2 = (prevstateno = [600,650])&&(Time > 0) &&(Command = "holdfwd") && (Vel X < 1.5)
x = 1


[state 2998, a7];new
type = VelAdd
trigger1 = time>0
y = ifelse(vel y<.4,.35,ifelse(time>60,.5,.25))

[State 2998, a8]
type = Turn
trigger1 = P2Dist X < 0

[state 2998, a9]
type = ChangeState
trigger1 = Pos Y >= 1 
value = 52




;[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[
;[[[[[[[[[[[[[[ SANDMAN HYPER /SUPERMOVES [[[[[[[[[[[[[[[[[[[[[[[
;[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[

[Statedef 3000]
type    = S                      
movetype= A                      
physics = S                      
velset = 0,0                     
ctrl = 0                                                                 
sprpriority = 6
anim = 3000


;-------------------
; DCvM hyper portrait/BG
[State 777, superportrait]
type = Explod
trigger1 = Var(55)=1 && !time
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = -1
removetime = 70
removeongethit =1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -15
ownpal = 1
persistent=0
[State 777, superbg]
type = Explod
trigger1 = Var(55)=1 && !time
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = -1
removetime = 70
removeongethit =1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -20
ownpal = 1
persistent=0
[State 777, hyperBG2]
type = Helper
trigger1 = Var(55)=1 && !time 
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 7777, voice]
type = PlaySnd
trigger1 = !time
value = 200,12
channel = 0
volume =200

[State 3000, b1]
Type = BGPalfx
Trigger1 = time = [0, 800];BG VANISH IN
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 3000, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1

[State 3000, a8] ;SuperPort
type = Explod
trigger1 = !var(55) && !time
anim = IfElse((random <333),8952,IfElse((random>666),8951,8950))
postype = back
pos = 20,0
ownpal = 1
ignorehitpause = 1
sprpriority = -20
supermovetime = 9999
pausemovetime = 9999
removeongethit = 1
bindtime = -1

[State 3000, a9] ;bgscreen
type = Explod
trigger1 = !var(55) && !time
anim = 8900
ownpal = 1
pos = ifelse(facing=1,0,1),0
postype = back
facing = 1 
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -25
scale = 1,1
removeongethit = 1



[State 3000, a2] ; Superpause
type = SuperPause
trigger1 = !time 
darken = 1
anim = S8400
sound = S40, 5
pos = 10, -75
movetime = 50;70
poweradd = -1000
bindtime = -1
sprpriority = 12
Time = 50;70
p2defmul = 1.4;2

[State 3000, c4]
type = ChangeState
trigger1 = !AnimTime
value = 3001
ctrl = 0

[Statedef 3001]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 10                     
ctrl = 0                                                                 
sprpriority = 3
anim = 3001

[State 3000, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1


[State 3000, b1]
Type = BGPalfx
trigger1 = time = [0, 800];BG VANISH IN
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 3000, a1]
type = explod
triggerall= NumExplod(3225)<6
trigger1 = (animelemtime(12)>=0) &&(animelemtime(36)<=0)
anim = 3225
ID = 3225
sprpriority = -9
postype = p1
pos = 0,0
random = 240,4
ignorehitpause = 1
supermovetime=99
pausemovetime=99
[State 3000, a2];r
type = explod
triggerall= NumExplod(3226)<6
trigger1 = animelemtime(5)>=0
anim = 3225
ID = 3226
sprpriority = 10
postype = p1
pos = 0,0
random = 240,0
ignorehitpause = 1
scale = .6,.6
supermovetime=99
pausemovetime=99



[State 777, sfx]
type = PlaySnd
trigger1 = animelem = 3;5
value = 20,5
channel = 0
freqmul =1.2

[State 3000, a0]
type = ScreenBound
trigger1 = movehit && (p2movetype = H) && (animelemtime(36)>=0) 
value = 0
ignorehitpause = 1


[State 3000, a2]
type = VelSet
trigger1 = AnimElemtime(5) >= 0 && animelemtime(33)<= 0
x = 9   

[State 3000, 20] 
type = VelMul
trigger1 = AnimElemtime(34) >= 0
x = .8


[State 3000, ff]
type = HitDef
trigger1 = animelem = 5 ||animelem = 10||animelem = 15 || animelem = 20 || animelem = 25 || animelem = 30
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = medium
priority = 7, Hit
sprpriority = 3
damage = 20,5
pausetime = 0,8
sparkno =-1;S8711
guard.sparkno = ifelse(!var(55),-1,40) 
sparkxy = -40,-60 
hitsound   = S5,5
guardsound = S7,1
ground.slidetime = 20
ground.hittime  = 20             
ground.velocity = -2,-1
air.velocity = -6,-1
guard.velocity = -6
airguard.velocity = -6,-1
ground.type = low
air.type = Low                  
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.pausetime = 3,3
getpower = 0
givepower = 5
envshake.time = 6
envshake.freq = 80
envshake.ampl = 6
guard.dist = 320



[State 3000, ff]
type = HitDef
trigger1 = animelem = 7 ||animelem = 13||animelem = 17 || animelem = 23 || animelem = 27 || animelem = 33
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = medium
priority = 7, Hit
sprpriority = 3
damage = 20,5
pausetime = 0,8
sparkno =-1;S8712
guard.sparkno = ifelse(!var(55),-1,40) 
sparkxy = -40,-60
hitsound   =S5,5
guardsound = S7,1
ground.slidetime = 20
ground.hittime  = 20             
ground.velocity = -2,-1
air.velocity = -6,-1
guard.velocity = -6
airguard.velocity = -6,-1
ground.type = high
air.type = high                 
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.pausetime = 3,3
getpower = 0
givepower = 5
envshake.time = 6
envshake.freq = 80
envshake.ampl = -6
guard.dist = 320




[State 3001, ff]
type = HitDef
trigger1 = AnimElem = 35 
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = hard
priority = 7, Hit
sprpriority = 3
damage = 80,5
pausetime = 0,1
sparkno = S8711
guard.sparkno = ifelse(!var(55),-1,40) 
sparkxy = -40,-60
hitsound   = S5,6
guardsound = S7,1
ground.type = high               
ground.slidetime = 20
ground.hittime  = 20             
ground.velocity = -18,-12
air.velocity = -18,-12
guard.velocity = -12
airguard.velocity = -12,-2
air.type = high                  
air.hittime = 30
fall.envshake.time = 30
fall.envshake.ampl = -8
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 19
envshake.freq = 80
envshake.ampl = -4
ground.cornerpush.veloff = -8
air.cornerpush.veloff = -8
down.cornerpush.veloff = -8
guard.cornerpush.veloff = -8
airguard.cornerpush.veloff = -8
getpower = 0
givepower = 5
yaccel=.65



[State 777, hsp]
type = explod 
triggerall = movehit && (p2stateno=5000 ||p2stateno=5020)
trigger1 = animelem = 5||animelem = 10||animelem = 15||animelem = 20||animelem = 25||animelem = 30
anim = 8711
ID = 8711
sprpriority = 20
postype = p2
pos = -45,-70
ignorehitpause = 1
supermovetime = 99
pausemovetime = 99
scale = .6,.6
ownpal = 1


[State 777, hsp]
type = explod
triggerall = movehit && (p2stateno=5000 ||p2stateno=5020)
trigger1 = animelem = 7 ||animelem = 13||animelem = 17 || animelem = 23 || animelem = 27 || animelem = 33
anim = 8712
ID = 8712
sprpriority = 20
postype = p2
pos = -45,-70
ignorehitpause = 1
supermovetime = 99
pausemovetime = 99
scale = .6,.6
ownpal = 1


[State 777, hdf]
type = helper
triggerall = !var(55)
trigger1 = moveguarded=1 && (numhelper(8716)<=1) 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -25,-70
facing = -1;
supermovetime = 30
pausemovetime = 30
ignorehitpause = 1
ownpal = 1


[State 3001, 0]
type = envcolor
trigger1 = movehit && p2movetype=H && animelem=36
time = 2
value = 255,255,255
ignorehitpause = 1
;under = 1

[State 3001, end]
type = ChangeState
trigger1 = BackEdgeBodyDist <= -1
value = 9624
ctrl = 0
[State 3001, c4]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;-------------------------------------------------------------------
[Statedef 3100]
type    = S                      
movetype= A                      
physics = S                      
velset = 0,0                     
ctrl = 0                                                                 
sprpriority = 6
anim = 3100


;-------------------
; DCvM hyper portrait/BG
[State 777, superportrait]
type = Explod
trigger1 = Var(55)=1 && !time
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = -1
removetime = 70
removeongethit =1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -15
ownpal = 1
persistent=0
[State 777, superbg]
type = Explod
trigger1 = Var(55)=1 && !time
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = -1
removetime = 70
removeongethit =1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -20
ownpal = 1
persistent=0
[State 777, hyperBG2]
type = Helper
trigger1 = Var(55)=1 && !time 
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------


[State 3100, b1]
Type = BGPalfx
Trigger1 = time = [0, 800];BG VANISH IN
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 3100, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1

[State 3100, a8] ;SuperPort
type = Explod
trigger1 = !var(55) && !time
anim = IfElse((random <333),8950,IfElse((random>666),8951,8952))
postype = back
pos = 20,0
ownpal = 1
ignorehitpause = 1
sprpriority = -20
supermovetime = 9999
pausemovetime = 9999
removeongethit = 1
bindtime = -1

[State 3100, a9] ;bgscreen
type = Explod
trigger1 = !var(55) && !time
anim = 8900
ownpal = 1
pos = ifelse(facing=1,0,1),0
postype = back
facing = 1 
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -25
scale = 1,1
removeongethit = 1

[State 3100, b2]
type = PlayerPush
trigger1 = 1
value = 0

[State 7777, voice]
type = PlaySnd
trigger1 = !time
value = 200,12
channel = 0
volume =200

[State 3100, som]
type = PlaySnd
trigger1 = animelem = 4
value = 300, 2
volume = 250

[State 3100, a2] ; Superpause
type = SuperPause
trigger1 = !time 
darken = 1
anim = S8400
sound = S40, 5
pos = -50, -75
movetime = 50;75
poweradd = -1000
bindtime = -1
sprpriority = 12
Time = 50;75
p2defmul = 1.1




[State 3100, 1]
type = HitDef
Trigger1 = AnimElem =5 || AnimElem = 6 
attr = S, HA          
hitflag = MAF         
priority = 6, Hit    
sparkno = -1         
p1sprpriority = 6    
guardflag = MA
guard.sparkno = S8550
guardsound = S7,1
hitsound = S1, 1     
sparkxy = 0,-70  
p1facing = 1
p2facing = 1          
p1stateno = 3101       
p2stateno = 3115       
fall = 1             
fall.damage = 0
fall.envshake.time = 30
fall.envshake.ampl = -8
envshake.time = 7
envshake.freq = 40
envshake.ampl = -5
guard.velocity = -15
airguard.velocity = -15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.dist = 320
getpower = 0

[State 3100, 2]
type = HitDef
Trigger1 = AnimElem =7 
attr = S, HA          
hitflag = MAF         
priority = 6, Hit    
guardflag = MA
guard.sparkno = S8550
guardsound = S7,1
sparkxy = 0,-70  
sparkno = -1         
p1sprpriority = 6   
hitsound = S1, 1     
p1facing = 1
p2facing = 1          
p1stateno = 3102       
p2stateno = 3115       
fall = 1             
fall.damage = 0
fall.envshake.time = 30
fall.envshake.ampl = -8
envshake.time = 7
envshake.freq = 40
envshake.ampl = -5
guard.velocity = -15
airguard.velocity = -15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.dist = 320
getpower = 0

[State 3100, 3]
type = HitDef
Trigger1 = AnimElem =8 
attr = S, HA          
hitflag = MAF         
priority = 6, Hit    
sparkno = -1         
p1sprpriority = 6    
sparkxy = 0,-70  
guardflag = MA
guard.sparkno = S8550
guardsound = S7,1
hitsound = S1, 1     
p1facing = 1
p2facing = 1          
p1stateno = 3103       
p2stateno = 3115       
fall = 1             
fall.damage = 0
fall.envshake.time = 30
fall.envshake.ampl = -8
envshake.time = 7
envshake.freq = 40
envshake.ampl = -5
guard.velocity = -15
airguard.velocity = -15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.dist = 320
getpower = 0

[State 3100, c1];back
type = Explod 
trigger1 = animelem = 5
sprpriority = -4
anim = 3121
id=3121
pos = -45, 0
removeongethit = 1
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
[State 3100, end]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

[Statedef 3101]
type    = S                      
movetype= A                      
physics = S                      
velset = 0,0                     
ctrl = 0                                                                 
sprpriority = 7
anim = 3101
hitcountpersist=1

[State 3110, b2]
type = PlayerPush
trigger1 = 1
value = 0

[State 3101, a0]
type = RemoveExplod
trigger1 = 1
ID = 3121

[State 3101, a0];back
type = Explod 
trigger1 = time =0
sprpriority = -4
anim = 3122
pos = -55, 0
removeongethit = 1
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
[State 3101, a4]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 3101, a5]
Type = BGPalfx
Trigger1 = 1
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 3101, Bind 3]
type = TargetBind
trigger1 = AnimElem = 1 
pos = 45, -30

[State 3101, Bind 4]
type = TargetBind
trigger1 = AnimElem = 2 
pos = 40, -30

[State 3101, Bind 5]
type = TargetBind
trigger1 = AnimElem = 3 
pos = 37, -29

[State 3101, Bind 6]
type = TargetBind
trigger1 = AnimElem = 4 
pos = 34, -28

[State 3101, Bind 7]
type = TargetBind
trigger1 = AnimElem = 5 
pos = 31, -27

[State 3101, Bind 8]
type = TargetBind
trigger1 = AnimElem = 6 
pos = 27, -26


[State 3101, Bind 9]
type = TargetBind
trigger1 = AnimElem = 7 
pos = 24, -25

[State 3101, a9]
type = TargetState
trigger1 = AnimElem = 7
value = 3116

[State 3101, som]
type = PlaySnd
trigger1 = animelem =5
value = 20, 8
channel = 9
volume = -150

[State 3101, end]
type = ChangeState
trigger1 = !AnimTime
value = 3110


[Statedef 3102]
type    = S                      
movetype= A                      
physics = S                      
velset = 0,0                     
ctrl = 0                                                                 
sprpriority = 7
anim = 3102

[State 3102, b2]
type = PlayerPush
trigger1 = 1
value = 0

[State 3102, a0]
type = RemoveExplod
trigger1 = 1
ID = 3121

[State 3102, a0];back
type = Explod 
trigger1 = time =0
sprpriority = -4
anim = 3123
pos = -55, 0
removeongethit = 1
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
[State 3102, a4]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 3102, a5]
Type = BGPalfx
Trigger1 = 1
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 3102, Bind 2]
type = TargetBind
trigger1 = AnimElem = 1
pos = 95, -30

[State 3102, Bind 3]
type = TargetBind
trigger1 = AnimElem = 2 
pos = 45, -30

[State 3102, Bind 4]
type = TargetBind
trigger1 = AnimElem = 3 
pos = 40, -30

[State 3102, Bind 5]
type = TargetBind
trigger1 = AnimElem = 4 
pos = 37, -29

[State 3102, Bind 6]
type = TargetBind
trigger1 = AnimElem = 5
pos = 34, -28

[State 3102, Bind 7]
type = TargetBind
trigger1 = AnimElem = 6 
pos = 31, -27

[State 3102, Bind 8]
type = TargetBind
trigger1 = AnimElem = 7 
pos = 27, -26


[State 3102, Bind 9]
type = TargetBind
trigger1 = AnimElem = 8 
pos = 24, -25

[State 3102, a9]
type = TargetState
trigger1 = AnimElem = 8
value = 3116

[State 3102, som]
type = PlaySnd
trigger1 = animelem =6
value = 20, 8
channel = 9
volume = -150


[State 3102, end]
type = ChangeState
trigger1 = !AnimTime
value = 3110

[Statedef 3103]
type    = S                      
movetype= A                      
physics = S                      
velset = 0,0                     
ctrl = 0                                                                 
sprpriority = 7
anim = 3103

[State 3103, b2]
type = PlayerPush
trigger1 = 1
value = 0


[State 3103, a0]
type = RemoveExplod
trigger1 = 1
ID = 3121

[State 3103, a0];back
type = Explod 
trigger1 = time =0
sprpriority = -4
anim = 3124
pos = -55, 0
removeongethit = 1
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
[State 3103, a4]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 3103, a5]
Type = BGPalfx
Trigger1 = 1
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 3103, a3]
type = ScreenBound
trigger1 = 1
movecamera = 0, 0
value = 1

[State 3103, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1 
pos = 165, -30

[State 3103, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2 
pos = 95, -30

[State 3103, Bind 3]
type = TargetBind
trigger1 = AnimElem = 3 
pos = 45, -30

[State 3103, Bind 4]
type = TargetBind
trigger1 = AnimElem = 4 
pos = 40, -30

[State 3103, Bind 5]
type = TargetBind
trigger1 = AnimElem = 5 
pos = 37, -29

[State 3103, Bind 6]
type = TargetBind
trigger1 = AnimElem = 6 
pos = 34, -28

[State 3103, Bind 7]
type = TargetBind
trigger1 = AnimElem = 7 
pos = 31, -27

[State 3103, Bind 8]
type = TargetBind
trigger1 = AnimElem = 8 
pos = 27, -26


[State 3103, Bind 9]
type = TargetBind
trigger1 = AnimElem = 9 
pos = 24, -25

[State 3103, a9]
type = TargetState
trigger1 = AnimElem = 9
value = 3116


[State 3103, som]
type = PlaySnd
trigger1 = animelem =7
value = 20, 8
channel = 9
volume = -150

[State 3103, end]
type = ChangeState
trigger1 = !AnimTime
value = 3110


[Statedef 3110]
type    = S                      
movetype= A                      
physics = S                      
velset = 0,0                     
ctrl = 0                                                                 
sprpriority = 6
anim = 3110


[State 3110, a1]
type = explod
trigger1 = animelemtime(1)>0 && animelemtime(9)<0
anim =29998
ID = 99
sprpriority = -2
postype = p2
pos = 20,-50
accel = .3,ifelse(random<500,.2,-.2)
random = 10,160
ignorehitpause = 1
facing = ifelse(random<500,1,-1)
scale = .4,.4
supermovetime = 40
pausemovetime = 40

[State 3110, b2]
type = PlayerPush
trigger1 = 1
value = 0

[State 3110, a4]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 3110, som]
type = PlaySnd
trigger1 = target,BackEdgeBodyDist <= 20
trigger2 = target,FrontEdgeBodyDist <= 20
value = 40, 3
channel = -1
volume = 250
persistent = 0

[State 3110, b1] ;explod
type = Explod
trigger1 = target,BackEdgeBodyDist <= 20
trigger2 = target,FrontEdgeBodyDist <= 20
anim = 8510
postype = p2
facing = -1
pos = 0, -70
sprpriority = -3
scale = 2.2,2.2
removetime = -2
persistent = 0
supermovetime = 9999
pausemovetime = 9999


[State 3110, p2] ;explodpedr
type = helper
trigger1 = target,BackEdgeBodyDist <= 20
trigger2 = target,FrontEdgeBodyDist <= 20
helpertype = normal
stateno = 8706
ID = 8706
name = "hitspark6"
postype = p2
pos = 0,-25
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
ownpal = 1
persistent = 0


[State 3110, a5]
Type = BGPalfx
Trigger1 = 1
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 3110, a3]
type = ScreenBound
trigger1 = 1
movecamera = 0, 0
value = 1

[State 3110, b1] ;explod
type = Explod
trigger1 = !Time 
anim = 3120
postype = p2
facing = -1
pos = 0, 20
sprpriority = 7
removetime = 39
bindtime =-1
supermovetime = 9999
pausemovetime = 9999



[State 3110, end]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl=1



[Statedef 3115]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -2

[State 3115, a1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3115

[State 3115, a2]
type = ScreenBound
trigger1 = 1
movecamera = 0, 0
value = 1

[State 3115, a3]
type = SelfState
trigger1 = time = 150 ;!gethitvar(isbound)
value = 5050

[State 3115, safe]
type = SelfState
trigger1 = p2movetype = H
value = 5050

[Statedef 3116]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -2

[State 3116, a1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3116


[State 3116, a2]
type = ScreenBound
trigger1 = 1
movecamera = 0, 0
value = 1

[State 3116, a3]
type = Velset
trigger1 = time = 0
x = -14

[State 3116, a4]
type = VelAdd
trigger1 = time = 0
x = -6

[State 3116, a5]
type = Velset
trigger1 = time = 39
x = 0

[State 3116, a6]
type = EnvShake
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
time = 30
ampl = -11
freq = 40
persistent = 0

[State 3116, a1]
type = lifeadd
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = -300
persistent = 0

[State 3116, a6]
type = SelfState
trigger1 = time >= 39 ;!gethitvar(isbound)
trigger2 = p2movetype = H
value = 5050


;------------------------------------------------------------------
[Statedef 3200]
type    = S                      
movetype= I                      
physics = S                      
velset = 0,0                     
ctrl = 0                                                                 
sprpriority = 3
anim = 3200
hitcountpersist=0

;-------------------
; DCvM hyper portrait/BG
[State 777, superportrait]
type = Explod
trigger1 = Var(55)=1 && !time
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = -1
removetime = 70
removeongethit =1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -15
ownpal = 1
persistent=0
[State 777, superbg]
type = Explod
trigger1 = Var(55)=1 && !time
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = -1
removetime = 70
removeongethit =1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -20
ownpal = 1
persistent=0
[State 777, hyperBG2]
type = Helper
trigger1 = Var(55)=1 && !time 
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[state 3200,a0]
type = varset
trigger1 = !time
var(5) = 0

[State 3200, 0]
type = VarSet
trigger1 = !time 
v = 9
value = ifelse(var(15),1,0)
ignorehitpause = 1


[State 7777, voice]
type = PlaySnd
trigger1 = animelem=5
value = 200,10
channel = 0
volume = 250

[State 3200, b1]
Type = BGPalfx
Trigger1 = time = [0, 800];BG VANISH IN
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 3200, a5] 
type = SuperPause
trigger1 = !time
darken = 1
anim = S8400
sound = S40, 5
pos = 7, -70
movetime = 110
poweradd = -1000
bindtime = -1
sprpriority = 6
Time = 110
p2defmul = 1.4

[State 3200, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1

[State 3200, a8] ;SuperPort
type = Explod
trigger1 = !var(55) && !time
anim = IfElse((random <333),8951,IfElse((random>666),8950,8952))
postype = back
pos = 20,0
ownpal = 1
ignorehitpause = 1
sprpriority = -20
supermovetime = 9999
pausemovetime = 9999
removeongethit = 1
bindtime = -1

[State 3200, a9] ;bgscreen
type = Explod
trigger1 = !var(55) && !time
anim = 8900
ownpal = 1
pos = ifelse(facing=1,0,1),0
postype = back
facing = 1 
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -25
scale = 1,1
removeongethit = 1

[State 3200, a1]
type = explod
trigger1 = (animelemtime(12)>=0) &&(animelemtime(22)<=0)
anim = 3225
ID = 3225
sprpriority = 9
postype = p1
pos = 0,0
random = 240,4
ignorehitpause = 1
supermovetime=99
pausemovetime=99
[State 3200, a2];r
type = explod
trigger1 = animelemtime(5)>=0
anim = 3225
ID = 3226
sprpriority = 10
postype = p1
pos = 0,0
random = 240,0
ignorehitpause = 1
scale = .6,.6
supermovetime=99
pausemovetime=99


[State 3200,a0] 
type = Helper
trigger1 = !time
StateNo = 3598
id = 3599
name = "camera1"
pos = 160,0
[State 3200,a0]
type = Helper
trigger1 = !time
StateNo = 3598
id = 3598
name = "camera2"
pos = -160,0


[State 3200, qs]
type = Helper
trigger1 = animelem = 1;10
name = "ground"
stateno = 3210
ID = 3210
pos = 0,0
ignorehitpause = 1
postype = p1
supermovetime = 9999
pausemovetime = 9999


[State 7777, sfx]
type = PlaySnd
triggerall = animelemtime(3)>=0 && animelemtime(24)<=0
trigger1 = time%16=0
value = 20,0
channel = 9
volume=250

[State 3200, A1]
type = VarSet
trigger1 = animelem = 23
V = 8
Value = 300
;bar
[State 3200, bar] 
type = Explod
trigger1 = animelem = 22
id = 8780
anim = 8780
ownpal = 1
pos = ifelse(TeamSide = 1, 10, 218),45
postype = left
bindtime = -1
supermovetime = -1
sprpriority = 7
removetime = -2
scale = 1,1
ontop = 1
ignorehitpause = 1


[State 3200, b1]
type = ChangeState
trigger1 = !AnimTime
value = 3201
ctrl = 0


[Statedef 3201];==============
type    = S                      
movetype= A                    
physics = S                      
velset = 0,0                     
ctrl = 0                                                                 
sprpriority = -1
facep2 = 1


[State 3201, b1]
Type = BGPalfx
Trigger1 = time = [0, 1500];BG VANISH IN
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 3201, a]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1


[state 3200,a0]
type = varset
trigger1 = !time
var(5) = ifelse(random<=499,1,2)


[State 3201, 0];stand
type = ChangeAnim
trigger1 = !time
trigger2 = anim=3202&&animtime=0
trigger3 = anim=3203&&animtime=0
value = 3201
ignorehitpause=1

[State 3201, 0]
type = ChangeAnim
triggerall = (anim=3201)&&(!NumHelper(3220)) 
trigger1 = timemod = 50,1 && (ifelse(prevstateno=9000,time>7,time>0))
trigger2 = (prevstateno =9000)&& (time=20)
;trigger1 = command="x"||command="y"||command="z"   
;trigger2 = command="a"||command="b"||command="c"   
value = 3202
ignorehitpause=1

[State 3201, 0]
type = ChangeAnim
trigger1 = P2Dist X < 0
value = 3203
ignorehitpause=1
[State 2998, a8]
type = Turn
trigger1 = P2Dist X < 0


[State 3200, A3]
type = Helper
triggerall=  (Var(8) >= 30) && (!NumHelper(3220)) 
trigger1 = timemod = 50,1 && (ifelse(prevstateno=9000,time>7,time>0))
trigger2 = (prevstateno =9000)&& (time=20)
;trigger1 = command="x"||command="y"||command="z"   
;trigger2 = command="a"||command="b"||command="c"  
ID = 3220
name = "UP"
StateNo = 3220
postype = p2
pos = 0, 0
ownpal = 1



[State 3200, 0]
type = HitAdd
trigger1 = !var(9)
trigger1 = (P2MoveType = H) && (!WinKO) && (NumHelper(3220))
trigger1 = helper(3220), movehit = 1
value = var(15)
ignorehitpause = 1

[State 3200, b1]
type = ChangeState
trigger1 = Var(8) <= 0
trigger2 = winko
value = 3205
ctrl = 0



[Statedef 3205];======
type    = S                      
movetype= I                      
physics = S                      
velset = 0,0                     
ctrl = 0                                                                 
sprpriority = -1
anim = 3205

[State 3205, b1]
Type = BGPalfx
Trigger1 = time = [0, 10];BG VANISH IN
Add = -50,-50,-70
IgnoreHitPause = 1
time = 1

[State 3201, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 7777, sfx]
type = PlaySnd
trigger1 = animelem=4 
value = 20,0
channel = 10
volume=250

[State 3201, ]
type = PlayerPush
trigger1 = 1
value = 1
ignorehitpause = 0

[State 3201, a2]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
[State 3501, a] 
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 3200, b1]
type = ChangeState
trigger1 = animtime=0
value = 0
ctrl = 1




[Statedef 3210];------
type = S
movetype = I
physics = N
anim = 8787
sprpriority = -7

[State 3210, A0]
type = screenbound
trigger1 = 1
value = 0
[state 3210, a1]
type = assertspecial
trigger1 = 1
flag = noshadow


[State 3200, som]
type = PlaySnd
trigger1 = !time
value = 300, 9
channel = 8

[State 3210, b1] ;groundb
type = Explod
trigger1 = !time
anim = 3210
id = 3210
postype = p1
pos = 0, 0
sprpriority = -7
ownpal = 1
scale = .01,1
supermovetime = 999
pausemovetime = 999
[State 3210, b1] ;groundf
type = Explod
trigger1 = !time
anim = 3220
id = 3210
postype = p1
pos = 0, 0
sprpriority = 7
ownpal = 1
scale = .01,1
supermovetime = 999
pausemovetime = 999



[State 3210, a4]
type = VarSet
trigger1 = 1
fv = 10
value = .01+(.005*time)


[State 3210, a5]
type = modifyexplod
trigger1 = 1
ID = 3210
scale = fvar(10),1


[State 3210, a6];safe
type = destroyself
trigger1 =time>=675

[State 3210, A7]
type = changestate
triggerall = parent, stateno!=9000
trigger1 = parent, stateno!=[3000,3590]
trigger2 = parent, movetype = H
value = 3211
ignorehitpause=1



[Statedef 3211];----
type = S
movetype = I
physics = N
anim = 8787
sprpriority = -7

[State 3211, re] 
type = RemoveExplod
trigger1 = !time
ID = 3210

[State 3211, A0]
type = screenbound
trigger1 = 1
value = 0
[state 3211, a1]
type = assertspecial
trigger1 = 1
flag = noshadow


[State 3211, b1] ;groundb
type = Explod
trigger1 = !time
anim = 3213
id = 3213
postype = p1
pos = 0, 0
sprpriority = -7
ownpal = 1
scale = fvar(10),1
supermovetime = 999
pausemovetime = 999
[State 3211, b1] ;groundf
type = Explod
trigger1 = !time
anim = 3214
id = 3213
postype = p1
pos = 0, 0
sprpriority = 7
ownpal = 1
scale = fvar(10),1
supermovetime = 999
pausemovetime = 999

[State 3211, a4]
type = modifyexplod
trigger1 = 1
ID = 3213
scale = fvar(10)+(.005*time),1

[State 3211, a6]
type = destroyself
trigger1 =time>=150


[Statedef 3220];====== helper
type    = S
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
sprpriority = 1


[State 3220, 0]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 0

[state 7777, hs]
type = varset
trigger1 =!time 
var(1) =ifelse((parent,var(55)<=0),0,1)
ignorehitpause = 1

[State 3220, A1]
type = PlaySnd
trigger1 = animelem=14 && random<=500
value = 50,ifelse(random<250,5,1)
channel = 5


[State 3220, 1]
type = ChangeAnim
trigger1 = !time
value = ifelse(parent,var(5)=2,3250,3255)
persistent=0

[State 3200, a1]
type = explod
triggerall = movehit
trigger1 = time%6=0
anim =29998
ID = 98
sprpriority = -2
postype = p2
pos = 0,-60
accel = ifelse(random<500,.05,-.05),ifelse(random<500,.05,-.05)
ignorehitpause = 1
facing = ifelse(random<500,1,-1)
scale = 1,1
supermovetime = 40
pausemovetime = 40


[State 3220, a1]
type = explod
triggerall= NumExplod(3225)<6
trigger1 = AnimElemtime(1)>= 0 && animelemtime(8)<=0
anim = 3225
ID = 3225
sprpriority = 15
postype = p1
pos = 0,0
random = 200,2
ignorehitpause = 1
supermovetime=40
pausemovetime=40

[State 3220, 1]
type = hitoverride
trigger1 =1
attr = SCA,AA,AP
stateno = 3221
ignorehitpause = 1
slot = 1
[State 3220, 2]
type = nothitby
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1
[State 3220, 3]
type = hitby
trigger1 = 1
value = SCA,AA,AP
ignorehitpause = 1


[state 7777, a0]
type = assertspecial
trigger1 = 1
flag = noshadow



[State 777, hsp]
type = helper
trigger1 = !var(1)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos =0,ifelse(p2statetype=S,(enemynear ,const(size.mid.pos.y)),(enemynear ,const(size.head.pos.y)))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(1)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.mid.pos.y)),(enemynear ,const(size.head.pos.y)))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1


[State 3220, Width]
type = Width
trigger1 = 1
player = 1,1

[State 3220, A1]
type = PlaySnd
trigger1 = !time
value = 20,6
channel = 8

[State 3220, A5]
type = EnvShake
trigger1 = !time
time = 8
ampl = -4

[State 3220, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3220, 0]
type = envcolor
trigger1 = movehit
time = 1
value = 255,255,255
ignorehitpause = 1
persistent = 0
under = 1


[State 3220, 2]
type = HitDef
trigger1 = !time
p2facing = 1
attr = S, HA                     
animtype = Up                 
damage = 80,4
hitflag = MAFD                  
guardflag = MA 
priority = 4,Hit 
sprpriority = 1
pausetime = 0,4;6   
guard.pausetime = 4,2
sparkno = ifelse(!var(1),-1,3)
guard.sparkno = ifelse(!var(1),-1,40)                     
sparkxy = 0,-120        
hitsound = S5,4                  
guardsound = S7,1           
ground.type = high               
ground.slidetime = 4;30            
ground.hittime  = 4;30             
ground.velocity = -15,-8;-7,-8         
guard.velocity = 8
airguard.velocity = 8,-1     
air.type = high                  
air.velocity = -15,-7.5;8 ;-12,-9        
air.hittime = 30
fall.envshake.time = 30
fall.envshake.ampl = -8
envshake.time = 8
envshake.freq = 130
envshake.ampl = -8
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0
givepower = 5
down.velocity = -15,-9;-10     
down.hittime = 32
affectteam =E
guard.dist=320
yaccel =ifelse(root,hitcount>2,.29,.34)


[State 777, xy]
type = parentvaradd
trigger1 = movehit=1 && numtarget
var(15) = 1
ignorehitpause = 1
persistent = 0

[State 3220, 0]
type = TargetVelAdd
trigger1 = movehit && time>=0
x = .3
y = -.01

[State 3220, A6]
type = DestroySelf
trigger1 = !animtime 


[Statedef 3221];hand gethit
type    = S
movetype= I
physics = N
anim = 3251
velset = 0,0
ctrl = 0
sprpriority = 10

[state 7777, a0]
type = assertspecial
trigger1 = 1
flag = noshadow


[State 3221, a3] 
type = PalFX
trigger1 =!time
time = 4
add = 0,0,0
mul = 430,276,297
sinadd = 41,164,20,4
invertall = 0
color = 256

[State 3221, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 7777, sfx]
type = PlaySnd
trigger1 = !time
value = 300,3
channel = 9

[State 3221, A5]
type = EnvShake
trigger1 = !time
time = 8
ampl = -6

[State 3221, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3221, a4]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 3221, A6]
type = DestroySelf
trigger1 = !animtime




[Statedef 3300];----------------------
type    = S                      
movetype= A                      
physics = S                      
velset = 0,0                     
ctrl = 0                                                                 
sprpriority = 3
anim = 3300


;-------------------
; DCvM hyper portrait/BG
[State 777, superportrait]
type = Explod
trigger1 = Var(55)=1 && !time
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = -1
removetime = 70
removeongethit =1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -15
ownpal = 1
persistent=0
[State 777, superbg]
type = Explod
trigger1 = Var(55)=1 && !time
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = -1
removetime = 70
removeongethit =1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -20
ownpal = 1
persistent=0
[State 777, hyperBG2]
type = Helper
trigger1 = Var(55)=1 && !time 
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------


[State 7777, voice]
type = PlaySnd
trigger1 = !time
value = 200,12
channel = 0
volume =200

[State 3300, b1]
Type = BGPalfx
Trigger1 = time = [0, 800];BG VANISH IN
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 3300, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1

[State 3300, a8] ;SuperPort
type = Explod
trigger1 = !var(55) && !time
anim = IfElse((random <333),8951,IfElse((random>666),8950,8952))
postype = back
pos = 20,0
ownpal = 1
ignorehitpause = 1
sprpriority = -20
supermovetime = 9999
pausemovetime = 9999
removeongethit = 1
bindtime = -1

[State 3300, a9] ;bgscreen
type = Explod
trigger1 = !var(55) && !time
anim = 8900
ownpal = 1
pos = ifelse(facing=1,0,1),0
postype = back
facing = 1 
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -25
scale = 1,1
removeongethit = 1



[State 3300, a2]
type = SuperPause
trigger1 = animelem=2 
darken = 1
anim = S8400
sound = S40, 5
pos = 0, 0
movetime = 85
poweradd = -1000
bindtime = -1
sprpriority = 12
Time = 85
p2defmul = 1.2

[State 3300, a1]
type = explod
triggerall= NumExplod(29998)<6
trigger1 = (animelemtime(4)>=0) 
anim = ifelse(random<500,3225,29998)
ID = 29998
sprpriority = 4
postype = p1
pos = 0,0
random = 170,4
ignorehitpause = 1
supermovetime=99
pausemovetime=99

[State 3300, qs];ground
type = Helper
trigger1 = animelem = 1
name = "ground"
stateno = 3210
ID = 3210
pos = 0,0
ignorehitpause = 1
postype = p1
supermovetime = 9999
pausemovetime = 9999


[State 3300, c4]
type = ChangeState
trigger1 = !AnimTime
value = 3301
ctrl = 0

[Statedef 3301];---------------------------------------------------
type    = S                      
movetype= A                      
physics = S                      
juggle  = 10                     
ctrl = 0                                                                 
sprpriority = 3


[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 3305
ctrl = 1


[State 7777, sfx]
type = PlaySnd
trigger1 = animelem=1
value = 70,0
channel = 9
volume = 250
[State 7777, sfx]
type = PlaySnd
trigger1 = animelem=9
value = 70,1
channel = 8
volume = 250


[State 3301, a1]
type = explod
triggerall= NumExplod(29998)<10
trigger1 = (animelemtime(1)>=0) 
anim = ifelse(random<500,3225,29998)
ID = 29998
sprpriority = 4
postype = p1
pos = 0,0
random = 190,4
ignorehitpause = 1
supermovetime=99
pausemovetime=99


[State 3301, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1


[State 3301, b1]
Type = BGPalfx
trigger1 = time = [0, 800];BG VANISH IN
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1



[State 3301, ab2]
type = Explod 
triggerall = !Numexplod(3310)
trigger1 = animelemtime(2)>=0 && animelemtime(3)<= 0
sprpriority = -5
id = 3310
anim = 3310
postype = P1
pos = 0, 0
bindtime = -1
supermovetime =9999
pausemovetime =9999
[State 3301, re] 
type = RemoveExplod
trigger1 = AnimElem = 3
ID = 3310

[State 3301, ab2]
type = Explod 
trigger1 = animelem = 3
sprpriority = -5
id = 3311
anim = 3311
postype = P1
pos = 0, 0
bindtime = -1
supermovetime =9999
pausemovetime =9999

[State 3301, re] 
type = RemoveExplod
trigger1 = AnimElem = 4
ID = 3311
[State 3301, ab2]
type = Explod 
trigger1 = animelem = 4
sprpriority = -5
id = 3310
anim = 3312
postype = P1
pos = 0, 15
bindtime = -1
supermovetime =9999
pausemovetime =9999

[State 3301, re] 
type = RemoveExplod
trigger1 = AnimElem = 5
ID = 3310
[State 3301, ab2]
type = Explod 
trigger1 = animelem = 5
sprpriority = -5
id = 3311
anim = 3313
postype = P1
pos = 0, 0
bindtime = -1
supermovetime =9999
pausemovetime =9999

[State 3301, re] 
type = RemoveExplod
trigger1 = AnimElem = 6
ID = 3311
[State 3301, ab2]
type = Explod 
trigger1 = animelem = 6
sprpriority = -5
id = 3310
anim = 3314
postype = P1
pos = 0, 0
bindtime = -1
supermovetime =9999
pausemovetime =9999

[State 3301, re] 
type = RemoveExplod
trigger1 = AnimElem = 7
ID = 3310
[State 3301, ab2]
type = Explod 
trigger1 = animelem = 7
sprpriority = -5
id = 3311
anim = 3315
postype = P1
pos = 0, 0
bindtime = -1
supermovetime =9999
pausemovetime =9999

[State 3301, re] 
type = RemoveExplod
trigger1 = AnimElem =8
ID = 3311
[State 3301, ab2]
type = Explod 
trigger1 = animelem = 8
sprpriority = -5
id = 3310
anim = 3316
postype = P1
pos = 0, 0
bindtime = -1
supermovetime =9999
pausemovetime =9999

[State 3301, re] 
type = RemoveExplod
trigger1 = AnimElemtime(9)>= 0
ID = 3310
[State 3301, re] 
type = RemoveExplod
trigger1 = AnimElemtime(9)>= 0
ID = 3311



[State 3301, a2]
type = VelSet
trigger1 = AnimElemtime(3) >= 0 
x = 1  

[State 3301, 20] 
type = VelMul
trigger1 = AnimElemtime(9) >= 0
x = .8




[State 3301, 3]
type = HitDef
trigger1 = !Time
attr = S, HA
damage    = 300,15
priority = 2, Hit 
hitflag = MAFD
guardflag = MA
pausetime = 3,3
sparkno = ifelse(!var(55),-1,3);S8500
guard.sparkno = ifelse(!var(55),-1,40)
sparkxy =0,(enemynear ,const(size.mid.pos.y))
hitsound   = S5,4
guardsound = S7,1
ground.type = Trip
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -2,-4
air.hittime = 32
air.velocity = -2,-3
airguard.ctrltime = 26
airguard.velocity = -10,1
guard.velocity = -10
down.velocity = -3,-8
down.hittime = 32
envshake.time = 12
envshake.ampl = 4
fall.envshake.time = 50
fall.envshake.ampl = -8
ground.cornerpush.veloff = 0;-15
air.cornerpush.veloff = 0;-15
guard.cornerpush.veloff = 0
getpower  = 0
givepower = 10
yaccel =.65
fall = 1
fall.recover = 0


[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos =0,(enemynear ,const(size.mid.pos.y))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1


[State 777, hdf]
type = helper
triggerall = !var(55)
trigger1 = moveguarded=1 && (numhelper(8716)<=1) 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,(enemynear ,const(size.mid.pos.y))   
facing = -1;
supermovetime = 30
pausemovetime = 30
ignorehitpause = 1
ownpal = 1

[State 3301, A5]
type = EnvShake
trigger1 = animelem = 9
time = 15
ampl = -4

[State 3301, 0]
type = envcolor
trigger1 = movehit 
time = 2
value = 255,255,255
ignorehitpause = 1
persistent=0


[State 3301, c4]
type = ChangeState
trigger1 = !AnimTime
value = 3516
ctrl = 0



;==================================================================

[Statedef 3500]
type    = S                      
movetype = A;I                      
physics = S                      
ctrl = 0                         
sprpriority = 2

;-------------------
; DCvM hyper portrait/BG
[State 777, superportrait]
type = Explod
trigger1 = Var(55)=1 && !time
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = -1
removetime = 70
removeongethit =1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -15
ownpal = 1
persistent=0
[State 777, superbg]
type = Explod
trigger1 = Var(55)=1 && !time
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = -1
removetime = 70
removeongethit =1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -20
ownpal = 1
persistent=0
[State 777, hyperBG2]
type = Helper
trigger1 = Var(55)=1 && !time 
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 3500
ctrl = 1

[State 777, 0];reset var
type = VarSet
trigger1 = !time
fv = 16
value = 0

[State 777, 0]
type = VarRangeSet
trigger1 = !time
value = 0  
first = 30
last = 32
ignorehitpause = 1

[State 777,  0]
type = NotHitBy
trigger1 = !time
value = SCA
time = 42

[State 3500, b1]
Type = BGPalfx
Trigger1 = time = [0, 400];BG VANISH IN
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 3500, a5] 
type = SuperPause
trigger1 = !time
darken = 1
anim = S8400
sound = S40, 5
pos = 10, -75
movetime = 40
poweradd = -1000
bindtime = -1
sprpriority = 12
Time = 40
p2defmul = 1.1


[State 3500, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1

[State 3500, a8] ;SuperPort
type = Explod
trigger1 = !var(55) && !time
anim = IfElse((random <333),8950,IfElse((random>666),8952,8951))
postype = back
pos = 20,0
ownpal = 1
ignorehitpause = 1
sprpriority = -20
supermovetime = 9999
pausemovetime = 9999
removeongethit = 1
bindtime = -1

[State 3500, a9] ;bgscreen
type = Explod
trigger1 = !var(55) && !time
anim = 8900
ownpal = 1
pos = ifelse(facing=1,0,1),0
postype = back
facing = 1 
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -25
scale = 1,1
removeongethit = 1

[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos =-10,-50
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1



[State 3500 , a6]
type = HitDef
trigger1 = animelem=1
attr = S, HA
damage= 0,20
priority = 7, hit
animtype = light 
hitflag = MAFD
guardflag = MA
pausetime = 0,6
sparkxy = 10,-50;
sparkno = -1
sprpriority = 6
guard.sparkno = ifelse(!var(55),-1,40) 
hitsound   = S5,4
guardsound = S7,1
ground.slidetime = 30
ground.hittime = 50
ground.velocity = 0  
air.velocity = 0,1
fall = 1
air.fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall.recover = 0      
p1stateno = 3502
p2stateno = 3520      
getpower  = 0
givepower = 5
kill = 0

[State 7777, voice]
type = PlaySnd
trigger1 = animelem=3
value = 200,13
channel = 0
volume =250
persistent=0

[State 7777, voice]
type = PlaySnd
trigger1 = animelem=5
value = 20,2
persistent=0

[State 3500, a4]
type = AfterImage
trigger1 = animelem = 6
time = 45
palcontrast = 222,142,82
trans = add
length = 8 
palbright = 42,22,2
palmul = .73,.63,.3
palcontrast = 222,142,82
timegap = 1
framegap = 1



[State 3500, hsp]
type = helper
trigger1 =  movehit
helpertype = normal
stateno = 47000
ID = 8700
name = "hitspark1"
postype = p2
pos =20,-55
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1




[State 3500, A5]
type = Veladd
trigger1 = animelemtime(5)>= 0
x = 4

[State 3500, b1]
type = ChangeState
trigger1 = moveguarded
value = 3535
ctrl = 0

[State 3500, b1]
type = ChangeState
trigger1 = time >=75
trigger2 = frontEdgeBodyDist <= 0 
value = 3501
ctrl = 0





[Statedef 3501];miss ---------------
type    = S
physics = S
ctrl = 0

[State 3501, a0]
type = ChangeAnim
trigger1 =!time 
value = 100
elem =12 
ignorehitpause = 1

[State 3501, a] 
type = AssertSpecial
trigger1 = 1
flag = NoWalk
flag2 = Noautoturn

[State 3501, 1]
type = VelMul
trigger1 = time>= 0
x = .05
;y = .01

[State 3501, 3]
type = PosSet
trigger1 = !time
y = 0


[State 3501, be]
type = Explod
trigger1 = Time % 3 = 0  
anim = 8730  
postype = p1
sprpriority = 7
ownpal = 1
pos = -35, -2
scale = .3,.3
random = 30
supermovetime = 9999
pausemovetime = 9999
ownpal=1
[State 3501, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


[Statedef 3502] 
type    = S                      
movetype = I                      
physics = N                      
ctrl = 0                         
sprpriority = 2
anim = 3502


[State 3502, Bind 1]
type = TargetBind
trigger1 = 1 
pos = 73, -40
[State 3502, aa]
type = AssertSpecial
trigger1 = 1
flag  = nobardisplay
flag2 = noFG
ignorehitpause = 1
[State 3502, a3] 
type = ScreenBound
trigger1 = 1
movecamera = 0, 0
value = 1
[State 777,  0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3502, b1]
Type = BGPalfx
Trigger1 = time = [0, 400]
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1


[State 3502, f0]
type = EnvShake
triggerall = time>=12
trigger1 = BackEdgeBodyDist <= 15
trigger2 = FrontEdgeBodyDist <= 15
time = 20
freq = 60
ampl = -4
persistent=0

[State 3502, a0]
type = TargetState
triggerall = time>=12
trigger1 = BackEdgeBodyDist <= 15
trigger2 = FrontEdgeBodyDist <= 15
value = 3521
persistent=0

[State 3502, 10]
type = PlaySnd
trigger1 = p2stateno = 3521
value = 7,2
volume = 200
persistent = 0


[State 3502, 5]
type = ChangeState
triggerall = time>=12
trigger1 = BackEdgeBodyDist <= 15
trigger2 = FrontEdgeBodyDist <= 15
value = 3505
ctrl = 0



[Statedef 3505] 
type    = S                      
movetype = A                     
physics = S                      
velset = 0,0                     
ctrl = 0                         
sprpriority = -5
anim= 3510


[State 3502, hsp]
type = helper
trigger1 = !time
helpertype = normal
stateno = 8599
ID = 85991
name = "hcsix"
pos = 160,-1500
postype = back
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
ownpal = 1

[State 3505, hsp]
type = helper
trigger1 = !time
helpertype = normal
stateno = 8598
ID = 85981
name = "hcbg"
pos = 160,-1500
postype = back
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
ownpal = 1


[State 3505, dd]
type = PlaySnd
trigger1 = !time
value = 20,0
channel = 0
volume = 250

[State 777, 0];reset var
type = VarSet
trigger1 = !time
fv = 16
value = 0


[State 3505, a1]
type = Turn
trigger1 =!time 

[State 777, b1]
Type = BGPalfx
Trigger1 = time = [0, 1600]
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1
[State 777, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1
[State 777, a0]
type = NotHitBy
trigger1 = 1
value = SCA
time =1
[State 777, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 777, 0]
type = ChangeAnim
trigger1 = anim=3510 && animtime=0
trigger2 = anim=3515 && animtime=0
value = 3511
ignorehitpause=1


[State 0, ]
type = VarRandom
trigger1 = !time
v = 30
range = 1,15
ignorehitpause = 1



[State 3505, hsp]
type = helper
triggerall = var(30)=1||var(30)=2||var(30)=3||var(30)=5||var(30)=7
trigger1 = time = 50
helpertype = normal
stateno = 3550
ID = 3550
name = "kravinoff"
postype = front
pos =40,-100
facing = -1
ownpal = 1

[State 3505, hsp]
type = helper
triggerall = var(30)=1||var(30)=11||var(30)=4||var(30)=6||var(30)=8
trigger1 = time = 50
helpertype = normal
stateno = 3560
ID = 3560
name = "toomes"
postype = front
pos = -330,-250
facing = 1
ownpal = 1

[State 3505, hsp]
type = helper
triggerall = var(30)=12||var(30)=9||var(30)=6||var(30)=3||var(30)=14
trigger1 = time = 50
helpertype = normal
stateno = 3570
ID = 3570
name = "dillon"
postype = back
pos = 40,3
facing = 1
ownpal = 1


[State 3505, hsp]
type = helper
triggerall = var(30)=4||var(30)=2||var(30)=13||var(30)=10||var(30)=9
trigger1 = time = 50
helpertype = normal
stateno = 3580
ID = 3580
name = "beck"
postype = p2
pos = 80,0
facing = -1
ownpal = 1


[State 3505, hsp]
type = helper
triggerall = var(30)=15||var(30)=12||var(30)=10||var(30)=8||var(30)=5
trigger1 = time = 50
helpertype = normal
stateno = 3590
ID = 3590
name = "octavius"
postype = front
pos =10,-100
facing = -1
ownpal = 1


[State 3506, p2]
type = helper
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
helpertype = normal
stateno = 8706
ID = 8706
name = "hitspark6"
postype = p2
pos = 0,0
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
ownpal = 1
;persistent=0

[State 3506, 10]
type = PlaySnd
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
value = 40,1
volume = 200
;persistent=0
[State 3506, f0]
type = EnvShake
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
freq = 60
ampl = -4
;persistent=0
[State 3506, fxgrd]
type = Explod
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
ID = 8001
anim = 8001
postype = p2
pos = 0, 0
sprpriority = -3
ownpal = 1
;persistent=0



[State 777, 0]
type = ChangeAnim
trigger1 = var(30)=7||var(30)=11||var(30)=13||var(30)=14||var(30)=15
trigger1 = time >= 150
value = 3515
ignorehitpause=1
persistent=0

[State 777, a1]
type = VelAdd
trigger1 = anim=3515 && (P2Dist X > 40)  
trigger1 = (animelemtime(1)>=0) && (animelemtime(5)<=0)
x = 1.1;-0.2



[State 3505, dd]
type = PlaySnd
trigger1 = (anim=3515) && (animelemtime(1)=0)
value = 20,6
channel = 10
volume = 250
persistent=0


[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos =  0,(enemynear ,const(size.head.pos.y))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,(enemynear ,const(size.head.pos.y))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, sfx]
type = PlaySnd
trigger1 = movehit
value = 20,4
channel = 9
persistent=0

[State 3505, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3505, 2]
type = HitDef
triggerall = anim = 3515
trigger1 = time%6=0
attr = S, HA                     
animtype = hard                 
damage = 35,5
hitflag = MAFD                  
guardflag = M 
priority = 6, Hit 
sprpriority = -5
pausetime = 2, 2   
sparkno = ifelse(!var(55),-1,2)
guard.sparkno = ifelse(!var(55),-1,40)                     
sparkxy = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))         
hitsound = S5,4                 
guardsound = S7,1           
ground.type = high               
ground.slidetime = 30            
ground.hittime  = 30             
ground.velocity = 0,-7.5     
guard.velocity = -13
airguard.velocity = -8,-1     
air.type = high                  
air.velocity = 0,-7         
air.hittime = 30
fall.envshake.time = 30
fall.envshake.ampl = -8
envshake.time = 7
envshake.ampl = 4
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower  = 0
down.velocity = -1.5,-8
down.hittime = 32
yaccel =.55
p2stateno = 3523

[State 3505, mh]
type = varadd
triggerall = !WinKO
triggerall = power >=1000 
trigger1 = command="x"||command="y"||command="z"       
trigger2 = (var(59)>=1) && (time%6=0);AI MASH
fvar(16)=.35
ignorehitpause=1

[State 3505, mh]
type = null
trigger1= Numhelper(3550)&& Numhelper(3560) ;1 v+k
trigger1 = var(31) :=35
trigger2= Numhelper(3580)&& Numhelper(3550) ;2 m+k
trigger2 = var(31) :=43
trigger3= Numhelper(3570)&& Numhelper(3550) ;3 e+k
trigger3 = var(31) :=55
trigger4= Numhelper(3580)&& Numhelper(3560) ;4 m+v
trigger4 = var(31) :=58
trigger5= Numhelper(3590)&& Numhelper(3550) ;5 o+k
trigger5 = var(31) :=61
trigger6= Numhelper(3570)&& Numhelper(3560) ;6 e+v
trigger6 = var(31) :=70
trigger7= Numhelper(3550) && anim=3515      ;7 k+s
trigger7 = var(31) :=75
trigger8= Numhelper(3590)&& Numhelper(3560) ;8 o+v
trigger8 = var(31) :=76
trigger9= Numhelper(3570)&& Numhelper(3580) ;9 e+m
trigger9 = var(31) :=78
trigger10= Numhelper(3590)&& Numhelper(3580) ;10 o+m
trigger10 = var(31) :=84
trigger11= Numhelper(3560)&& anim=3515       ;11 v+s
trigger11 = var(31) :=90
trigger12= Numhelper(3590)&& Numhelper(3570) ;12 o+e
trigger12 = var(31) :=96
trigger13= Numhelper(3580) && anim=3515      ;13 m+s
trigger13 = var(31) :=98
trigger14= Numhelper(3570) && anim=3515     ;14 e+s
trigger14 = var(31) :=110
trigger15= Numhelper(3590) && anim=3515     ;15 o+s
trigger15 = var(31) :=116
ignorehitpause=1


[State 3505, 1];link1
type = ChangeState
triggerall = !WinKO
trigger1 = power >=1000 && fvar(16)>=10
trigger1= (!Numhelper(3550))&&(!Numhelper(3560))&&(!Numhelper(3570))&&(!Numhelper(3580))&&(!Numhelper(3590))
value = 3506
ctrl = 0
ignorehitpause=1

[State 777, 0]
type = Changestate
trigger1 = fvar(16)<=9.9 
trigger1 = anim=3511 && time>=200
trigger1= (!Numhelper(3550))&&(!Numhelper(3560))&&(!Numhelper(3570))&&(!Numhelper(3580))&&(!Numhelper(3590))
trigger2 = WinKO
value = 3516
ctrl = 0
ignorehitpause=1


[Statedef 3506] 
type    = S                      
movetype = A                     
physics = S                      
velset = 0,0                     
ctrl = 0                         
sprpriority = -5
anim= 3511

[State 777, 0];reset var
type = VarSet
trigger1 = !time
fv = 16
value = 0
[State 777, 0]
type = PowerAdd
trigger1=!time 
value = -1000

[State 777, 0];reset var
type = VarSet
trigger1 = !time
v = 30
value = 0


[State 3506, hsp];coming from  p1
type = helper
triggerall = var(31)!=43
triggerall = var(31)!=58
triggerall = var(31)!=78
triggerall = var(31)!=84
triggerall = var(31)!=98
trigger1 = var(30)=[0,1];Numhelper(3506)<=1
trigger1 = time = 30
helpertype = normal
stateno = 3580
ID =3580
name = "beck"
postype = p2
pos = 80,0
facing = -1
ownpal = 1
ignorehitpause=1

[State 3506, hsp]
type = helper
triggerall = var(31)!=35
triggerall =var(31)!=43
triggerall =var(31)!=55
triggerall =var(31)!=61
triggerall =var(31)!=75
trigger1 = var(30)=[0,1]
trigger1 = time = 40
helpertype = normal
stateno = 3550
ID = 3550
name = "kravinoff"
postype = front
pos =40,-100
facing = -1
ownpal = 1
ignorehitpause=1

[State 3506, hsp]
type = helper
triggerall = var(31)!=35
triggerall=var(31)!=58
triggerall =var(31)!=70
triggerall =var(31)!=76
triggerall =var(31)!=90
trigger1 = var(30)=[0,1]
trigger1 = time = 50
helpertype = normal
stateno = 3560
ID = 3560
name = "toomes"
postype = front
pos = -330,-250
facing = 1
ownpal = 1
ignorehitpause=1

[State 3506, hsp]
type = helper
triggerall = var(31)!=55
triggerall =var(31)!=70
triggerall=var(31)!=78
triggerall =var(31)!=96
triggerall =var(31)!=110
trigger1 = var(30)=[0,1]
trigger1 = time = 60
helpertype = normal
stateno = 3570
ID = 3570
name = "dillon"
postype = back
pos = 40,3
facing = 1
ownpal = 1
ignorehitpause=1



[State 3506, hsp]
type = helper
triggerall = var(31)!=61
triggerall =var(31)!=76
triggerall =var(31)!=84
triggerall =var(31)!=96
triggerall =var(31)!=116
trigger1 = var(30)=[0,1]
trigger1 = time = 70
helpertype = normal
stateno = 3590
ID = 3590
name = "octavius"
postype = front
pos =10,-100
facing = -1
ownpal = 1
ignorehitpause=1


[State 777, b1]
Type = BGPalfx
Trigger1 = time = [0, 1600]
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1
[State 777, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1
[State 777, a0]
type = NotHitBy
trigger1 = 1
value = SCA
time =1
[State 777, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 777, 0]
type = ChangeAnim
trigger1 = anim=3515 && animtime=0
value = 3511
ignorehitpause=1


[State 3506, p2] ;explodpedr
type = helper
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
helpertype = normal
stateno = 8706
ID = 8706
name = "hitspark6"
postype = p2
pos = 0,0
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
ownpal = 1
;persistent=0

[State 3506, 10]
type = PlaySnd
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
value = 40,1
volume = 200
;persistent=0
[State 3506, f0]
type = EnvShake
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
freq = 60
ampl = -4
;persistent=0
[State 3506, fxgrd]
type = Explod
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
ID = 8001
anim = 8001
postype = p2
pos = 0, 0
sprpriority = -3
ownpal = 1
;persistent=0


[State 777, 0]
type = ChangeAnim
triggerall= var(31)!=75
triggerall=var(31)!=90
triggerall=var(31)!=98
triggerall=var(31)!=110
triggerall=var(31)!=116
trigger1 = var(30)=1
trigger1 = time >= 150;95
value = 3515
ignorehitpause=1
persistent=0

[State 777, a1]
type = VelAdd
trigger1 = anim=3515 && (P2Dist X > 40)  
trigger1 = (animelemtime(1)>=0) && (animelemtime(5)<=0)
x = 1.1;-0.2

[State 3506, dd]
type = PlaySnd
trigger1 = (anim=3515) && (animelemtime(1)=0)
value = 20,6
channel = 10
volume = 250
persistent=0

[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos =  0,(enemynear ,const(size.head.pos.y))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,(enemynear ,const(size.head.pos.y))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, sfx]
type = PlaySnd
trigger1 = movehit
value = 20,4
channel = 9
persistent=0

[State 3506, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3506, 2]
type = HitDef
triggerall = anim = 3515
trigger1 = time%6=0
attr = S, HA                     
animtype = hard                 
damage = 35,5
hitflag = MAFD                  
guardflag = M 
priority = 6, Hit 
sprpriority = -5
pausetime = 2, 2   
sparkno = ifelse(!var(55),-1,2)
guard.sparkno = ifelse(!var(55),-1,40)                     
sparkxy = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))         
hitsound = S5,4                
guardsound = S7,1           
ground.type = high               
ground.slidetime = 30            
ground.hittime  = 30             
ground.velocity = 0,-7.5     
guard.velocity = -13
airguard.velocity = -8,-1     
air.type = high                  
air.velocity = 0,-7         
air.hittime = 30
fall.envshake.time = 30
fall.envshake.ampl = -8
envshake.time = 7
envshake.ampl = 4
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower  = 0
down.velocity = -1.5,-8
down.hittime = 32
yaccel =.55
p2stateno = 3523


[State 3505, mh]
type = null
trigger1= Numhelper(3550)&& Numhelper(3560) ;1 v+k
trigger1 = var(32) :=35
trigger2= Numhelper(3580)&& Numhelper(3550) ;2 m+k
trigger2 = var(32) :=43
trigger3= Numhelper(3570)&& Numhelper(3550) ;3 e+k
trigger3 = var(32) :=55
trigger4= Numhelper(3580)&& Numhelper(3560) ;4 m+v
trigger4 = var(32) :=58
trigger5= Numhelper(3590)&& Numhelper(3550) ;5 o+k
trigger5 = var(32) :=61
trigger6= Numhelper(3570)&& Numhelper(3560) ;6 e+v
trigger6 = var(32) :=70
trigger7= Numhelper(3550) && anim=3515      ;7 k+s
trigger7 = var(32) :=75
trigger8= Numhelper(3590)&& Numhelper(3560) ;8 o+v
trigger8 = var(32) :=76
trigger9= Numhelper(3570)&& Numhelper(3580) ;9 e+m
trigger9 = var(32) :=78
trigger10= Numhelper(3590)&& Numhelper(3580) ;10 o+m
trigger10 = var(32) :=84
trigger11= Numhelper(3560)&& anim=3515       ;11 v+s
trigger11 = var(32) :=90
trigger12= Numhelper(3590)&& Numhelper(3570) ;12 o+e
trigger12 = var(32) :=96
trigger13= Numhelper(3580) && anim=3515      ;13 m+s
trigger13 = var(32) :=98
trigger14= Numhelper(3570) && anim=3515     ;14 e+s
trigger14 = var(32) :=110
trigger15= Numhelper(3590) && anim=3515     ;15 o+s
trigger15 = var(32) :=116
ignorehitpause=1


[State 3506, mh]
type = varadd
triggerall = !WinKO
triggerall = power >=1000 
trigger1 = command="x"||command="y"||command="z"       
trigger2 = (var(59)>=1) && (time%6=0);AI MASH
fvar(16)=.35
ignorehitpause=1


[State 3506, 1];link1
type = ChangeState
triggerall = !WinKO
trigger1 = power >=1000 && fvar(16)>=10
trigger1= (!Numhelper(3550))&&(!Numhelper(3560))&&(!Numhelper(3570))&&(!Numhelper(3580))&&(!Numhelper(3590))
value = 3507;3507
ctrl = 0


[State 777, 0]
type = Changestate
trigger1 = fvar(16)<=9.9 
trigger1 = anim=3511 && time>=150
trigger1= (!Numhelper(3550))&&(!Numhelper(3560))&&(!Numhelper(3570))&&(!Numhelper(3580))&&(!Numhelper(3590))
trigger2 = WinKO
value = 3516
ctrl = 0
ignorehitpause=1

[Statedef 3507] 
type    = S                      
movetype = A                     
physics = S                      
velset = 0,0                     
ctrl = 0                         
sprpriority = -5
anim= 3511

[State 777, 0];reset var
type = VarSet
trigger1 = !time
fv = 16
value = 0

[State 777, 0]
type = PowerAdd
trigger1=!time 
value = -1000

[State 777, 0];reset var
type = VarSet
trigger1 = !time
v = 30
value = 0


[State 3507, hsp]
type = helper
triggerall = var(31)!=43
triggerall = var(31)!=58
triggerall = var(31)!=78
triggerall = var(31)!=84
triggerall = var(31)!=98
triggerall = var(32)!=43
triggerall = var(32)!=58
triggerall= var(32)!=78
triggerall = var(32)!=84
triggerall = var(32)!=98
trigger1 = var(30)=[0,1]
trigger1 = time = 30
helpertype = normal
stateno = 3580
ID =3580
name = "beck"
postype = p2
pos = 80,0
facing = -1
ownpal = 1
ignorehitpause=1

[State 3507, hsp]
type = helper
triggerall = var(31)!=35
triggerall =var(31)!=43
triggerall =var(31)!=55
triggerall =var(31)!=61
triggerall =var(31)!=75
triggerall = var(32)!=35
triggerall =var(32)!=43
triggerall =var(32)!=55
triggerall =var(32)!=61
triggerall =var(32)!=75
trigger1 = var(30)=[0,1]
trigger1 = time = 40
helpertype = normal
stateno = 3550
ID = 3550
name = "kravinoff"
postype = front
pos =40,-100
facing = -1
ownpal = 1
ignorehitpause=1

[State 3507, hsp]
type = helper
triggerall = var(31)!=35
triggerall=var(31)!=58
triggerall =var(31)!=70
triggerall =var(31)!=76
triggerall =var(31)!=90
triggerall = var(32)!=35
triggerall =var(32)!=58
triggerall =var(32)!=70
triggerall =var(32)!=76
triggerall =var(32)!=90
trigger1 = var(30)=[0,1]
trigger1 = time = 50
helpertype = normal
stateno = 3560
ID = 3560
name = "toomes"
postype = front
pos = -330,-250
facing = 1
ownpal = 1
ignorehitpause=1

[State 3507, hsp]
type = helper
triggerall = var(31)!=55
triggerall =var(31)!=70
triggerall=var(31)!=78
triggerall =var(31)!=96
triggerall =var(31)!=110
triggerall = var(32)!=55
triggerall =var(32)!=70
triggerall =var(32)!=78
triggerall=var(32)!=96
triggerall=var(32)!=110
trigger1 = var(30)=[0,1]
trigger1 = time = 60
helpertype = normal
stateno = 3570
ID = 3570
name = "dillon"
postype = back
pos = 40,3
facing = 1
ownpal = 1
ignorehitpause=1



[State 3507, hsp]
type = helper
triggerall = var(31)!=61
triggerall =var(31)!=76
triggerall =var(31)!=84
triggerall =var(31)!=96
triggerall =var(31)!=116
triggerall = var(32)!=61
triggerall =var(32)!=76
triggerall =var(32)!=84
triggerall=var(32)!=96
triggerall =var(32)!=116
trigger1 = var(30)=[0,1]
trigger1 = time = 70
helpertype = normal
stateno = 3590
ID = 3590
name = "octavius"
postype = front
pos =10,-100
facing = -1
ownpal = 1
ignorehitpause=1

[State 777, b1]
Type = BGPalfx
Trigger1 = time = [0, 1600]
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1
[State 777, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1
[State 777, a0]
type = NotHitBy
trigger1 = 1
value = SCA
time =1
[State 777, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 777, 0]
type = ChangeAnim
trigger1 = anim=3515 && animtime=0
value = 3511
ignorehitpause=1

[State 3507, p2]
type = helper
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
helpertype = normal
stateno = 8706
ID = 8706
name = "hitspark6"
postype = p2
pos = 0,0
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
ownpal = 1
;persistent=0

[State 3507, 10]
type = PlaySnd
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
value = 40,1
volume = 200
;persistent=0
[State 3507, f0]
type = EnvShake
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
freq = 60
ampl = -4
;persistent=0
[State 3507, fxgrd]
type = Explod
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
ID = 8001
anim = 8001
postype = p2
pos = 0, 0
sprpriority = -3
ownpal = 1
;persistent=0

[State 777, 0]
type = ChangeAnim
triggerall=var(31)!=75
triggerall=var(31)!=90
triggerall=var(31)!=98
triggerall=var(31)!=110
triggerall=var(31)!=116
triggerall=var(32)!=75
triggerall=var(32)!=90
triggerall=var(32)!=98
triggerall=var(32)!=110
triggerall=var(32)!=116
trigger1 = var(30)=1
trigger1 = time >= 150;95
value = 3515
ignorehitpause=1
persistent=0


[State 3507, dd]
type = PlaySnd
trigger1 = (anim=3515) && (animelemtime(1)=0)
value = 20,6
channel = 10
volume = 250
persistent=0


[State 777, a1]
type = VelAdd
trigger1 = anim=3515 && (P2Dist X > 40)  
trigger1 = (animelemtime(1)>=0) && (animelemtime(5)<=0)
x = 1.1;-0.2


[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos =  0,(enemynear ,const(size.head.pos.y))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,(enemynear ,const(size.head.pos.y))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, sfx]
type = PlaySnd
trigger1 = movehit
value = 20,4
channel = 9
persistent=0

[State 3507, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3507, 2]
type = HitDef
triggerall = anim = 3515
trigger1 = time%6=0
attr = S, HA                     
animtype = hard                 
damage = 35,5
hitflag = MAFD                  
guardflag = M 
priority = 6, Hit 
sprpriority = -5
pausetime = 2, 2   
sparkno = ifelse(!var(55),-1,2)
guard.sparkno = ifelse(!var(55),-1,40)                     
sparkxy = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))         
hitsound = S40,3                  
guardsound = S7,1           
ground.type = high               
ground.slidetime = 30            
ground.hittime  = 30             
ground.velocity = 0,-7.5     
guard.velocity = -13
airguard.velocity = -8,-1     
air.type = high                  
air.velocity = 0,-7         
air.hittime = 30
fall.envshake.time = 30
fall.envshake.ampl = -8
envshake.time = 7
envshake.ampl = 4
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower  = 0
down.velocity = -1.5,-8
down.hittime = 32
yaccel =.55
p2stateno = 3523


[State 777, 0]
type = Changestate
trigger1 = anim=3511 && time>=150
trigger1= (!Numhelper(3550))&&(!Numhelper(3560))&&(!Numhelper(3570))&&(!Numhelper(3580))&&(!Numhelper(3590))
trigger2 = WinKO
value = 3516
ctrl = 0
ignorehitpause=1

[Statedef 3516] 
type    = S                      
movetype = I                     
physics = S                      
velset = 0,0                     
ctrl = 0                         
sprpriority = 1
anim = 3516

[State 777, 0];reset var
type = VarSet
trigger1 = !time
fv = 16
value = 0

[State 777, r];
type = VarRangeSet
trigger1 = !time
value = 0
first = 30
last = 31
ignorehitpause = 1


[State 777, a0]
type = NotHitBy
trigger1 = 1
value = SCA
time =1

[State 3516, dd]
type = PlaySnd
trigger1 = !time
value = 20,0
channel = 0
volume = 250

[State 3516, b1]
Type = BGPalfx
Trigger1 = time = [0, 800]
Add = -45,-45,-65
IgnoreHitPause = 1
time = 1
[State 3516, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1

[State 3516, 5]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 3520]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 5
facep2 = 1 

[State 3520, a1]
type = ChangeAnim2
Trigger1 = !Time
value = 3522


[State 3520, a2]
type = ScreenBound
trigger1 = 1
value = 0

[State 3520, a3];safe
type = SelfState
trigger1 = time >= 250 ;!gethitvar(isbound)
trigger2 = !alive
value = 5050



[Statedef 3521]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 3521, a1]
type = ChangeAnim2
Trigger1 = !Time
value = 3523

[State 3521, a2]
type = ScreenBound
trigger1 = 1
value = 0

[State 3521, a2]
type = PosAdd
Triggerall = Facing = -1
trigger1 = ScreenPos x = [160,320]
x = ifelse(p2stateno=3505,3,5) 
[State 3521, a2]
type = PosAdd
Triggerall = Facing = 1
trigger1 = ScreenPos x = [0,160]
x = ifelse(p2stateno=3505,3,5)

[State 3521, A5]
type = Veladd
trigger1 = time >= 10
y = .9

[State 3500, A6]
type = Velset
trigger1 = !time
y = -6

[State 3521, a3];safe
type = SelfState
trigger1 = time >= 250 ;!gethitvar(isbound)
trigger2 = !alive
value = 5050

[State 3521, a3];safe
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3522

[Statedef 3522]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -2

[State 3522,a2]
type = Turn
trigger1 =!time 


;[State 777, xy]
;type = PowerAdd
;trigger1 =!time 
;value = 5

[State 3522, a1]
type = ChangeAnim
Triggerall = p2stateno!=3570 
Triggerall = selfAnimExist(5300) 
trigger1 = anim=3521 && animelem = 6
value = 5300

[State 3522, a1]
type = ChangeAnim2
Trigger1 = !Time
value = 3521



[State 3522, a11]
type = PosSet
trigger1 = !time
y =0 

[State 3522, a2]
type = ScreenBound
trigger1 = 1
movecamera = 0, 0
value = 1

[State 3522, a3];safe
type = changestate    
trigger1 = time >= 475 ;zeus end
value = 3523
ctrl = 0
[State 3522, a3];safe
type = selfstate    
trigger1 = p2stateno != [3500,3590]
trigger2 = !alive
value = 5050
ctrl = 0


[Statedef 3523]
type = U
movetype = H
physics = N
sprpriority = -2
velset = 0,-3.5

[State 3523, a2]
type = PosAdd
Triggerall = Facing = -1
trigger1 = ScreenPos x = [160,320]
x = ifelse(p2stateno=3505,3,5) 
[State 3523, a2]
type = PosAdd
Triggerall = Facing = 1
trigger1 = ScreenPos x = [0,160]
x = ifelse(p2stateno=3505,3,5)

;[State 777, xy]
;type = PowerAdd
;trigger1 =!time 
;value = 2

[State 3523, a0]
type = ChangeAnim2
Trigger1 = !Time
value = 3525

[State 3523, a0]
type = StateTypeSet
trigger1 = time = 10
StateType = A

[State 3523, a2]
type = ScreenBound
trigger1 = 1
value = 0

[State 3523, a0]
type = VelAdd
trigger1 = time <= 10
y = .1

[State 3523, a0]
type = VelAdd
trigger1 = time >= 15
y = .9

[State 3523, a3];safe
type = selfstate
triggerall = p2stateno != [3500,3590]
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger2 = !alive
value = 5110

[State 3523, a3];safe
type = changestate
triggerall = p2stateno = [3500,3590]
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3524



[Statedef 3524]
type    = U
movetype= H
physics = N
velset = 0,0
sprpriority = -2

[State 3524, a1]
type = ChangeAnim2
Trigger1 = !Time
value = 3526

[State 3524, a1]
type = ChangeAnim2
triggerall = anim!=3521 && anim!=5300
Trigger1 = p2stateno=3505
Trigger2 = p2stateno=3506
Trigger3 = p2stateno=3507
value = 3521
persistent=0

[State 3524, a1]
type = ChangeAnim
Triggerall = selfAnimExist(5300) 
trigger1 = anim=3521 && animelem = 6
value = 5300

[State 3524, a11]
type = PosSet
trigger1 = !time
y = 0 

[State 3524, a2]
type = ScreenBound
trigger1 = 1
movecamera = 0, 0
value = 1


[State 3524, a3];safe
type = SelfState    
trigger1 = p2stateno != [3500,3590]
trigger2 = time >= 500 ;safe
trigger3 = !alive
value = 5110






[Statedef 3525]
type = A
movetype = H
physics = N
sprpriority = -2
velset = 0,-3

[State 3525, a0]
type = ChangeAnim2
Trigger1 = !Time
value = 3527

;[State 777, xy]
;type = PowerAdd
;trigger1 =!time 
;value = 5

[State 3525, a2]
type = ScreenBound
trigger1 = 1
value = 0

[State 3525, a0]
type = VelAdd
trigger1 = time >= 0
y = .9


[State 3525, a3];safe
type = selfstate
triggerall = p2stateno != [3500,3590]
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger2 = !alive
value = 5110

[State 3525, a3];safe
type = changestate
triggerall = p2stateno = [3500,3590]
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3524


[Statedef 3527]
type = U
movetype = H
physics = N
sprpriority = -2

[State 3527, a0]
type = Velset
trigger1 = timemod = 4,1
x = -.1
y = 0

[State 3527, a0]
type = ChangeAnim2
Trigger1 = !Time
value = 3528

[State 3527, a1]
type = ChangeAnim;2
Triggerall = selfAnimExist(7696) 
trigger1 = anim=3528 && animelem = 1
value = 7696;3529

;[State 3527, xy]
;type = PowerAdd
;trigger1 =!time 
;value = 5

[State 3527, a2]
type = ScreenBound
trigger1 = 1
value = 0

[State 3527, PalFX] ;more darken
type = PalFX
trigger1 = !time
time =25 
add = -45,-15,-255
invertall = 1
color = 0


[State 3527, a3];safe
type = selfstate
triggerall = p2stateno != [3500,3590]
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger2 = time >= 400
trigger3 = !alive
value = 5050

[State 3527, a3];safe
type = changestate
triggerall = p2stateno = [3500,3590]
trigger1 = time >= 20
value =ifelse(Pos Y >= 0,3522,3523)



[Statedef 3550] ; ------------------- KRAVEN - THE HUNTER SECTION
type = A
movetype = I
sprpriority = 4
physics = N
anim = 3550

[State 777, 0st]
type = ParentVarAdd
trigger1 = (!time) && (Parent,stateno=3506||Parent,stateno=3507)
v = 30
value =1 
ignorehitpause=1


[state 7777, hs]
type = varset
trigger1 =!time 
var(1) =ifelse((parent,var(55)<=0),0,1)
ignorehitpause = 1


[State 3550, a2]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1


[State 3550, a3]
type = ScreenBound
trigger1 = 1
value = 0

[State 3550, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3510, som]
type = PlaySnd
trigger1 = !time 
value  = 6, 8
channel = 4

[State 777, voz]
type = PlaySnd
trigger1 = !time
value = 350,6
channel = 7
volume = 250

[State 3510, a1]
type = Velset
trigger1 = !time
x = 4
y = 3
[State 3510, A2]
type = VelAdd
trigger1 = time>=0
y = .3

[State 3510, a3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value   = 3551 

[Statedef 3551];---- land
type = S
movetype = A
sprpriority = 4
physics = N
anim = 3551


[State 777, hdf]
type = helper
trigger1 = !var(1)&& moveguarded=1 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -15,(enemynear,const(size.mid.pos.y))  
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 3551, a1]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP
stateno = 3555
ignorehitpause = 1
[State 3551, a2]
type = NotHitBy
trigger1 = 1
value = SCA,AT
ignorehitpause = 1
[State 3551, a3]
type = hitby
trigger1 = 1
value = SCA,AA,AP
ignorehitpause = 1


[State 3551, a1]
type = Posset
trigger1 = !time
y = 0

[State 3551, a3]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3551, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3551, a2]
type = Velset
trigger1 = !time
x = 0
y =0

[State 3551, a2]
type = Velset
trigger1 = animelemtime(17)>=0
x = -2.7
y = -1
[State 3551, a2]
type = Veladd
trigger1 = animelemtime(17)>=0
x = -.3



[State 3551, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 40, 9
channel = 5
volume = 200
[State 3551, ds]
type = PlaySnd
trigger1 = animelem =6|| animelem =9||animelem =11||animelem =14
value = 350, 2
channel = 9

[State 3571, dd];jump
type = PlaySnd
trigger1 = animelem =17
value = 40, 10
channel = 5
volume = 250

[State 3551, 0]
type = Explod 
trigger1 = !var(1) && !Time
anim = 8000
pos = -3,-3
supermovetime = 999
pausemovetime = 999
ownpal = 1
scale=.6,.6
[State 52, 0]
type = Explod 
trigger1 =var(1)&&!Time 
anim = F60
pos = 0,0
supermovetime = 999
pausemovetime = 999
ownpal = 1

[State 3550,front ]
type = Projectile
trigger1 = animelem =6|| animelem =9||animelem =11||animelem =14
ProjID = 3552
projanim = 3552
projhitanim = -1
projremanim = 3553
projcancelanim =3553 
projscale = 1,1
projremove = 1
projremovetime = 200
velocity = 7,0
remvelocity = 7,0
velmul = 1
projhits = 1
projmisstime = 0
projpriority = 3
projsprpriority = 3
projedgebound = 60
projstagebound = 60
projheightbound = -240,1
offset = 42,-98
postype = p1
ignorehitpause = 1
attr = S, HP
animtype = Hard
damage = 10, 5
hitflag = MAF
guardflag = MA
pausetime = 2, 10
sparkno = Sifelse(random<500,8520,8521) 
guard.sparkno = S8550
sparkxy = 0,0;(enemy,const(size.mid.pos.y))
hitsound   = S5,5
guardsound = S7,1
ground.type = low 
ground.velocity = 0,-4
air.velocity = 0,2
ground.hittime  = 45 
air.type = high
getpower  = 0
guard.slidetime = 25
guard.hittime = 25
guard.velocity = -9
envshake.time = 6
envshake.freq = 127
envshake.ampl = -6
fall = 1
air.fall = 1
fall.recover = 0
p2stateno = 3523
yaccel =.65



[State 3550, down]
type = Projectile
trigger1 = animelem =6|| animelem =9||animelem =11||animelem =14
ProjID = 3552
projanim = 3552
projhitanim = -1
projremanim = 3553
projcancelanim =3553 
projscale = 1,1
projremove = 1
projremovetime = 200
velocity = 7,2.5
remvelocity = 7,0
velmul = 1
projhits = 1
projmisstime = 0
projpriority = 3
projsprpriority = 3
projedgebound = 60
projstagebound = 60
projheightbound = -240,1
offset = 42,-98
postype = p1
ignorehitpause = 1
attr = S, HP
animtype = Hard
damage = 10, 5
hitflag = MAF
guardflag = MA
pausetime = 2, 10
sparkno = Sifelse(random<500,8520,8521) 
guard.sparkno = S8550
sparkxy = 0,2;(enemy,const(size.mid.pos.y))
hitsound   = S5,5
guardsound = S7,1
ground.type = low 
ground.velocity = 0,-4
air.velocity = 0,2
ground.hittime  = 45 
air.type = high
getpower  = 0
guard.slidetime = 25
guard.hittime = 25
guard.velocity = -9
envshake.time = 6
envshake.freq = 127
envshake.ampl = -6
fall = 1
air.fall = 1
fall.recover = 0
p2stateno = 3523
yaccel =.65



[State 3550, up]
type = Projectile
trigger1 = animelem =6|| animelem =9||animelem =11||animelem =14
ProjID = 3552
projanim = 3552
projhitanim = -1
projremanim = 3553
projcancelanim =3553 
projscale = 1,1
projremove = 1
projremovetime = 200
velocity = 7,-2.5
remvelocity = 7,0
velmul = 1
projhits = 1
projmisstime = 0
projpriority = 3
projsprpriority = 3
projedgebound = 60
projstagebound = 60
projheightbound = -240,1
offset = 42,-98
postype = p1
ignorehitpause = 1
attr = S, HP
animtype = Hard
damage = 10, 5
hitflag = MAF
guardflag = MA
pausetime = 2, 10
sparkno = Sifelse(random<500,8520,8521) 
guard.sparkno = S8550
sparkxy = 0,-2;(enemy,const(size.mid.pos.y))
hitsound   = S5,5
guardsound = S7,1
ground.type = low 
ground.velocity = 0,-1
air.velocity = 0,2
ground.hittime  = 45 
air.type = high
getpower  = 0
guard.slidetime = 25
guard.hittime = 25
guard.velocity = -9
envshake.time = 6
envshake.freq = 127
envshake.ampl = -6
fall = 1
air.fall = 1
fall.recover = 0
p2stateno = 3523
yaccel =.65


[State 3511, 5] 
type = destroyself
trigger1 = time>=260





[Statedef 3555];-----------------KRAVEN withdraw
type = U
movetype = I 
physics = U
anim=3555
sprpriority = 4

[State 3555, a2]
type = Velset
trigger1 = animelem =6
x = -4
y = -1
[State 3555, a2]
type = Veladd
trigger1 = animelemtime(6)>=0
x = -.3

[State 3555, a1]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1


[State 3571, dd];jump
type = PlaySnd
trigger1 = animelem =6
value = 40, 10
channel = 5
volume = 250

[State 3555, a3] 
type = PalFX
trigger1 =!time
time = 8
add = 0,0,0
mul = 430,276,297
sinadd = 41,164,20,4
invertall = 0
color = 256

[State 3555, a4]
type = DestroySelf
trigger1 = time >= 200

























[Statedef 3560] ; ------------------- VULTURE SECTION
type = A
movetype = A
sprpriority = 4
physics = N
anim = 3560

[State 777, 0st]
type = ParentVarAdd
trigger1 = (!time)&& (Parent,stateno=3506||Parent,stateno=3507)
v = 30
value =1 
ignorehitpause=1


[State 3560, a1]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP
stateno = 3565
ignorehitpause = 1
[State 3560, a2]
type = NotHitBy
trigger1 = 1
value = SCA,AT
ignorehitpause = 1
[State 3560, a3]
type = hitby
trigger1 = 1
value = SCA,AA,AP
ignorehitpause = 1

[State 3560, 0]
type = VarAdd
trigger1 =!time 
v = 6
value =1 


[State 3560,0]
type = Turn
trigger1 =!time && var(6)>=2 
ignorehitpause = 1
persistent=0


[State 3560, sfx]
type = PlaySnd
trigger1 = !time
value = 350,0
volume = 250
persistent=0
channel=6

[State 3560, a3]
type = ScreenBound
trigger1 = 1
value = 0
[State 3560, a4]
type = PlayerPush
trigger1 = 1
value = 0


[State 777, p.to p.] 
type = Null
trigger1 = time >= 0
trigger1 = (FVar(0) := (P2Dist X * 35) / (Exp(0.5*ln((P2Dist X * P2Dist X) + ((P2Dist Y+(-50)) * (P2Dist Y+(-50)))))))
trigger1 = (FVar(1) := ((P2Dist Y+(-50)) * 12) / (Exp(0.5*ln((P2Dist X * P2Dist X) + ((P2Dist Y+(-50)) * (P2Dist Y+(-50)))))))

[State 777, VelSet]
type = VelSet
trigger1 = time >= 0
x = FVar(0)
y = FVar(1)


[state 7777, a7]
type = assertspecial
trigger1 = 1
flag = noshadow

[state 7777, hs]
type = varset
trigger1 =!time 
var(1) =ifelse((parent,var(55)<=0),0,1)
ignorehitpause = 1
[State 777, hdf]
type = helper
trigger1 = !var(1)&& moveguarded=1 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = ifelse(p2statetype=S,(enemynear ,const(size.head.pos.x)),(enemynear ,const(size.mid.pos.x))),ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 3560, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 3560, 2]
type = HitDef
trigger1 = !time
attr = A, HA                     
animtype = hard                 
damage = 65,5
hitflag = MAFD                  
guardflag = M 
priority = 6, Hit 
sprpriority = 4
pausetime = 0, 8   
sparkno = -1
guard.sparkno = ifelse(!var(1),-1,40)                     
sparkxy = ifelse(p2statetype=S,(enemynear ,const(size.head.pos.x)),(enemynear ,const(size.mid.pos.x))),ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))         
hitsound = S5,6                  
guardsound = S7,1           
getpower  = 0
ground.type = high               
ground.slidetime = 30            
ground.hittime  = 30             
ground.velocity = 0,1     
guard.velocity = -1
airguard.velocity = -1,1     
air.type = high                  
air.velocity = 0,1        
air.hittime = 30
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel =.7
p1stateno = ifelse(var(6)>=3,3562,3561)
p2stateno = 3523


[State 3521, a3];safe
type = changestate
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = ifelse(var(6)>=3,3562,3561)
[State 3560, a3];safe
type = destroyself
trigger1 = time>=250


[Statedef 3561] ; -------up for 2nd
type = A
movetype = I
sprpriority = 4
physics = N
anim = 3561
velset = 0,0

[State 777, wing]
type = explod 
trigger1 = animelemtime(2)=0
anim = 3566
ID = 3566
sprpriority = 21
postype = p1
pos = 0,10
ignorehitpause = 1
supermovetime = 30
pausemovetime = 30
scale = 1,1
ownpal = 1
persistent=0
[State 777, wing]
type = explod 
trigger1 = animelemtime(2)=2
anim = 3567
ID = 3567
sprpriority = 20
postype = p1
pos = 0,10
ignorehitpause = 1
supermovetime = 30
pausemovetime = 30
scale = 1,1
ownpal = 1
persistent=0



[State 3561, a1]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP
stateno = 3565
ignorehitpause = 1
[State 3561, a2]
type = NotHitBy
trigger1 = 1
value = SCA,AT
ignorehitpause = 1
[State 3561, a3]
type = hitby
trigger1 = 1
value = SCA,AA,AP
ignorehitpause = 1

[state 7777, a0]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 3561, Width]
type = Width
trigger1 = 1
player = -25,-25


[State 777, voz]
type = PlaySnd
trigger1 = var(6)=1
value = 350,7
channel = 8
volume = 250
persistent = 0

[State 3561, sfx]
type = PlaySnd
trigger1 = animelem = 5
value = 350,1


[State 3561, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3561, a3]
type = ScreenBound
trigger1 = 1
value = 0

[State 3561, a2]
type = PosAdd
trigger1 = animelemtime(5)>= 0 && animelemtime(8)<=0
trigger1 = ScreenPos x = [0,320]
x = 8

[State 3561, A6]
type = Velset
trigger1 = animelemtime(5)=0
y = -6
[State 3561, A6]
type = Velset
trigger1 = ScreenPos y <= 60
y = 0

[State 3561, a3]
type = changestate
trigger1 = animtime=0
value = 3560
[State 3561, a3];safe
type = destroyself
trigger1 = time>=200

[Statedef 3562] ; -------up for end
type = A
movetype = I
sprpriority = 4
physics = N
anim = 3561
velset = 0,0

[State 777, wing]
type = explod 
trigger1 = animelemtime(2)=0
anim = 3566
ID = 3566
sprpriority = 21
postype = p1
pos = 0,10
ignorehitpause = 1
supermovetime = 30
pausemovetime = 30
scale = 1,1
ownpal = 1
persistent=0
[State 777, wing]
type = explod 
trigger1 = animelemtime(2)=2
anim = 3567
ID = 3567
sprpriority = 20
postype = p1
pos = 0,10
ignorehitpause = 1
supermovetime = 30
pausemovetime = 30
scale = 1,1
ownpal = 1
persistent=0

[State 3562, a2]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1

[state 7777, a0]
type = assertspecial
trigger1 = 1
flag = noshadow
[State 3562, Width]
type = Width
trigger1 = 1
player = -25,-25

[State 3562, sfx]
type = PlaySnd
trigger1 = animelem = 5
value = 350,1
persistent=0

[State 3562, X0]
type = PlayerPush
trigger1 = 1
value = 0
[State 3562, a3]
type = ScreenBound
trigger1 = 1
value = 0

[State 3562, A6]
type = Velset
trigger1 = animelemtime(4)=0
y = 1.5
[State 3562, A6]
type = Velset
trigger1 = animelemtime(5)=0
y = -7

[State 3562, a3];safe
type = destroyself
trigger1 = time>=200



[Statedef 3565];-----------------VULTURE withdraw
type = U
movetype = I 
physics = U
anim=3565
sprpriority = 4

[State 3565, sfx]
type = PlaySnd
trigger1 = animelem = 4
value = 350,1
persistent=0

[State 3565, a2]
type = Velset
trigger1 = animelem =4
y = -5
[State 3565, a2]
type = Veladd
trigger1 = animelemtime(3)>=0
y = -.3

[State 3565, a1]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1



[State 3565, a3] 
type = PalFX
trigger1 =!time
time = 8
add = 0,0,0
mul = 430,276,297
sinadd = 41,164,20,4
invertall = 0
color = 256

[State 3565, a4]
type = DestroySelf
trigger1 = time >= 250


[Statedef 3570] ; ------------------- ELECTRO- SECTION
type = S
movetype = I
sprpriority = 2
physics = N
anim = 3570


[State 777, 0st]
type = ParentVarAdd
trigger1 = (!time) && (Parent,stateno=3506||Parent,stateno=3507)
v = 30
value =1 
ignorehitpause=1




[State 3570, a2]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1

[State 3570, a3]
type = ScreenBound
trigger1 = 1
value = 0

[State 3570, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3570, som]
type = PlaySnd
trigger1 = animelem=5
value  = 7, 3
channel = 7

[State 3570, a1]
type = Velset
trigger1 = !time
x = 4
[State 3570, a2] 
type = VelMul
trigger1 = AnimElemtime(2) >= 0
x = .25

[State 3570, dust]
type = Explod 
triggerall = AnimElemtime(6)<= 0
trigger1 = time%6=0
anim = 8730
postype = p1
pos = 10, -3
removetime = -2
sprpriority = 12
ownpal=1

[State 3570, a3]
type = ChangeState
trigger1 = !animtime
value   = 3571 


[Statedef 3571];---- prepare to shoot
type = S
movetype = A
sprpriority = 2
physics = N
anim = 3571


[State 3571, a1]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP
stateno = 3575
ignorehitpause = 1
[State 3571, a2]
type = NotHitBy
trigger1 = 1
value = SCA,AT
ignorehitpause = 1
[State 3571, a3]
type = hitby
trigger1 = 1
value = SCA,AA,AP
ignorehitpause = 1

[State 3571, a1];ELECTRICAL CHARGE
type = explod
triggerall = animelemtime(1)>=0 && animelemtime(2)<=18
trigger1 =time%6=0
anim =3577
ID = 13577
sprpriority = 7
postype = p1
pos = ifelse(random>=500,-38,38),-60
accel = .05,ifelse(random>=500,-.1,.1)
ignorehitpause = 1
vfacing = ifelse(random>=500,-1,1)
scale = .7,.7
supermovetime = 20
pausemovetime = 20


[State 3571, a1];ELECTRICAL CHARGEup
type = explod
trigger1 = animelem=3
anim =3579
ID = 13579
sprpriority = 7
postype = p1
pos = 68,-60
ignorehitpause = 1
scale = .1,.1
supermovetime = 20
pausemovetime = 20
[State 3571, a4]
type = modifyexplod
trigger1 = 1
ID = 13579
scale = .1 +(.013*time),.1 +(.013*time)


[State 3571, A3]
type = Helper
trigger1 = animelem = 3
ID = 1510
name = "bzzzzz"
StateNo = 3576
postype = p1
pos = -40, 0
ownpal = 1

[State 777, voz]
type = PlaySnd
trigger1 = !time
value = 350,8
channel = 2


[State 3571, a3]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3571, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3571, a2]
type = Velset
trigger1 = animelem =14
x = -2.7
y = -1
[State 3571, a2]
type = Veladd
trigger1 = animelemtime(14)>=0
x = -.3

[State 3571, dd];jump
type = PlaySnd
trigger1 = animelem =14
value = 40, 10
volume = 250


[State 3571, 5] 
type = destroyself
trigger1 = time>=200




[Statedef 3575];-----------------electro withdraw
type = U
movetype = I 
physics = U
anim=3575
sprpriority = 2

[State 3575, a2]
type = Velset
trigger1 = animelem =7
x = -4
y = -1
[State 3575, a2]
type = Veladd
trigger1 = animelemtime(6)>=0
x = -.3

[State 3575, a1]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1

[State 3575, a2];gethit voice electro
type = PlaySnd
trigger1 = !time
value = 100,ifelse(random<500,5,6)

[State 3575, a3] 
type = PalFX
trigger1 =!time
time = 8
add = 0,0,0
mul = 430,276,297
sinadd = 41,164,20,4
invertall = 0
color = 256

[State 3575, a4]
type = DestroySelf
trigger1 = time >= 200


[Statedef 3576];----------- electrical
type    = S
movetype= A
physics = N
anim = 3576
juggle  = 3
velset = 0,0
ctrl = 0
sprpriority = 5

[state 7777, a0]
type = assertspecial
trigger1 = 1
flag = noshadow
[State 777, 0]
type = BindToParent
trigger1 = 1
pos = -47,-4
ignorehitpause = 1




[State 777, voz]
type = PlaySnd
trigger1 = !time 
value = 350,3
channel = 9
[State 777, voz]
type = PlaySnd
trigger1 = animelem=30 
value = 350,4
channel = 9

[state 7777, hs]
type = varset
trigger1 =!time 
var(1) =ifelse((root,var(55)<=0),0,1)
ignorehitpause = 1

[State 777, hdf]
type = helper
trigger1 = !var(1)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 3576, Width]
type = Width
trigger1 = 1
player = -25,-25


[State 3576, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 777, hsp]
type = explod 
triggerall = NumTarget > 0 
triggerall = target(0), StateNo = 3527
trigger1 = target(0),time = 0
anim = 3578
ID = 33578
sprpriority = 20
postype = p2
pos = 0,-70
ignorehitpause = 1
supermovetime = 99
pausemovetime = 99
ownpal = 1
id=0


[State 3576, 2]
type = HitDef
trigger1 = time%18=0
attr = S, HP                     
animtype = hard                 
damage = 25,5
hitflag = MAFD                  
guardflag = M 
priority = 6, Hit 
sprpriority = 3
pausetime = 0,4  
sparkno = -1;S3578
guard.sparkno = ifelse(!var(1),-1,40)                     
sparkxy = -10,(enemynear ,const(size.mid.pos.y))         
hitsound = S350,4                  
guardsound = S7,1           
ground.type = high               
ground.slidetime = 30            
ground.hittime  = 30             
ground.velocity = 0,0      
guard.velocity = -3
airguard.velocity = -3,-1     
air.type = high                  
air.velocity = 0,0           
air.hittime = 30
envshake.time = 7
envshake.ampl = 4
fall = 1
fall.recover = 0
getpower  = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.velocity = -1.5,-8
down.hittime = 32
yaccel =.55
p2stateno = 3527


[State 1509, 2]
type = hitoverride
trigger1 =(AnimElemTime(1) >= 0)&&(AnimElemTime(8) <= 3)
time = 1
attr = SCA,AA,AP,AT
stateno = 3576
ignorehitpause = 1
slot=1

[State 3576, A6]
type = DestroySelf
trigger1 = animtime=0
trigger2 = parent,stateno!=3571
ignorehitpause=1




[Statedef 3580] ; ------------------- mysterio - SECTION
type = A
movetype = I
sprpriority = 12
physics = N
anim = 3580


[State 777, 0st]
type = ParentVarAdd
trigger1 = (!time) && (Parent,stateno=3506||Parent,stateno=3507)
v = 30
value =1 
ignorehitpause=1


[State 3580,0]
type = PosSet
trigger1 = !time
y = 0

[State 3580, a2]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1

[State 3580, a3]
type = ScreenBound
trigger1 = 1
value = 0

[State 3580, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3580, som]
type = PlaySnd
trigger1 = !time
value = 350,5
channel = 3
volume = 250
[State 777, voz]
type = PlaySnd
trigger1 = !time
value = 350,10
channel = 4



[State 3580, a1]
type = explod
trigger1 = !time
anim =3587
sprpriority = 10
postype = p1
pos = -40,0
accel = .009,0
ignorehitpause = 1
scale = 1,1
supermovetime = 30
pausemovetime = 30
[State 3580, a1]
type = explod
trigger1 = !time
anim =3587
sprpriority = 10
postype = p1
pos = -110,0
accel = .019,0
ignorehitpause = 1
scale = 1,1
supermovetime = 30
pausemovetime = 30
[State 3580, a1]
type = explod
trigger1 = !time
anim =3587
sprpriority = 10
postype = p1
pos = 40,0
accel = -.009,0
ignorehitpause = 1
scale = 1,1
supermovetime = 30
pausemovetime = 30
[State 3580, a1]
type = explod
trigger1 = !time
anim =3587
sprpriority = 10
postype = p1
pos = 110,0
accel = -.019,0
ignorehitpause = 1
scale = 1,1
supermovetime = 30
pausemovetime = 30

[State 3580, a3]
type = ChangeState
trigger1 = animtime=0
value   = 3581 


[Statedef 3581];---- myst land
type = S
movetype = A
sprpriority = 4
physics = N
anim = 3581

[state 7777, hs]
type = varset
trigger1 =!time 
var(1) =ifelse((parent,var(55)<=0),0,1)
ignorehitpause = 1
[State 777, hdf]
type = helper
trigger1 = !var(1)&& moveguarded=1 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -15,(enemynear,const(size.mid.pos.y))  
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 3581, a1]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP
stateno = 3585
ignorehitpause = 1
[State 3581, a2]
type = NotHitBy
trigger1 = 1
value = SCA,AT
ignorehitpause = 1
[State 3581, a3]
type = hitby
trigger1 = 1
value = SCA,AA,AP
ignorehitpause = 1

[State 3581, a3]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
[State 3581, X0]
type = PlayerPush
trigger1 = 1
value = 0


[State 3555, b0]
type = HitDef
trigger1 = time%12=0
attr = S, HA
animtype = Hard
damage = 30, 5
hitflag = MAFD
guardflag = MA
pausetime = 2, 10
priority = 7, Hit
sparkno = -1;Sifelse(random<500,8520,8521) 
guard.sparkno = ifelse(!var(1),-1,40) 
sparkxy = ifelse(random<500,-27,0),(enemy,const(size.mid.pos.y))
hitsound   = S5,4
guardsound = S7,1
ground.type = low 
ground.velocity = 0,-4
ground.hittime  = 45 
air.velocity = 0,-1
air.type = high
getpower  = 0
guard.slidetime = 25
guard.hittime = 25
guard.velocity = -9
envshake.time = 6
envshake.freq = 127
envshake.ampl = -6
palfx.time = 80
palfx.mul= 236,276,225    
palfx.sinadd= 31,143,92,6
fall = 1
air.fall = 1
fall.recover = 0
p2stateno = 3523

[State 7500, a1];fireworks
type = explod
triggerall= NumExplod(3583)<6
trigger1 = animelemtime(8)>=0 && animelemtime(13)<=0
anim =3583
ID = 3583
sprpriority = 12
postype = p2
pos = 0,-50
random = 70,70
ignorehitpause = 1
scale = ifelse(random<500,.3,.1),ifelse(random<500,.3,.1)
supermovetime = 20
pausemovetime = 20


[State 3581, a2];fireworks
type = palfx
trigger1 = animelemtime(8)=0 ;&& animelemtime(13)<=0
time = 80
add = 72,-80,-10
mul = 236,276,225
sinadd = 31,143,92,6
color = 256
ignorehitpause = 1

[State 3581, a2];fireworks
type = palfx
trigger1 = animelemtime(13)=0 
time = 1
add = 1,1,1
color = 256
ignorehitpause = 1


[State 3581, 5] 
type = changestate
trigger1 =animtime=0
value = 3582


[Statedef 3582] ; ------------------- mysterio - bye
type = A
movetype = I
sprpriority = 12
physics = N
anim = 3582

[State 3582, a2]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1

[State 3582, a3]
type = ScreenBound
trigger1 = 1
value = 0

[State 3582, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3582, som]
type = PlaySnd
trigger1 = !time
value = 350,5
volume = 250



[State 3582, a1]
type = explod
trigger1 = !time
anim =3586
sprpriority = 10
postype = p1
pos = 0,0
accel = .012,0
ignorehitpause = 1
scale = 1,1
supermovetime = 30
pausemovetime = 30
[State 3582, a1]
type = explod
trigger1 = !time
anim =3586
sprpriority = 10
postype = p1
pos = 0,0
accel = .025,0
ignorehitpause = 1
scale = 1,1
supermovetime = 30
pausemovetime = 30
[State 3582, a1]
type = explod
trigger1 = !time
anim =3586
sprpriority = 10
postype = p1
pos = 0,0
accel = -.012,0
ignorehitpause = 1
scale = 1,1
supermovetime = 30
pausemovetime = 30
[State 3582, a1]
type = explod
trigger1 = !time
anim =3586
sprpriority = 10
postype = p1
pos = 0,0
accel = -.025,0
ignorehitpause = 1
scale = 1,1
supermovetime = 30
pausemovetime = 30

[State 3582, a3]
type = destroyself
trigger1 = animtime=0


[Statedef 3585];-----------------myst withdraw
type = U
movetype = I 
physics = U
anim=3585
sprpriority = 4


[State 3585, a1]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1

[State 3580, som]
type = PlaySnd
trigger1 = !time
value = 350,5
volume = 250

[State 3585, a3] 
type = PalFX
trigger1 =!time
time = 8
add = 0,0,0
mul = 430,276,297
sinadd = 41,164,20,4
invertall = 0
color = 256

[State 3585, a4]
type = DestroySelf
trigger1 = animtime=0
























[Statedef 3590] ; ------------------- OCTOPUS - SECTION
type = A
movetype = I
sprpriority = 4
physics = N
anim = 3590


[State 777, 0st]
type = ParentVarAdd
trigger1 = !time && (Parent,stateno=3506||Parent,stateno=3507)
v = 30
value =1 
ignorehitpause=1

[state 7777, hs]
type = varset
trigger1 =!time 
var(1) =ifelse((parent,var(55)<=0),0,1)
ignorehitpause = 1


[State 3590, a2]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1

[State 3590, a3]
type = ScreenBound
trigger1 = 1
value = 0

[State 3590, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3590, som]
type = PlaySnd
trigger1 = !time 
value  = 6, 8
volume = 200

[State 3590, a1]
type = Velset
trigger1 = !time
x = 4
y = 3
[State 3590, A2]
type = VelAdd
trigger1 = time>=0
y = .3

[State 3590, a3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value   = 3592 



[Statedef 3592];---- DOCK land
type = S
movetype = A
sprpriority = 4
physics = N
anim = 3592


[State 3592, a2]
type = Velset
trigger1 = !time
x = 0
y = 0

[State 3592, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 40, 9
volume = 200
[State 3592, 0]
type = Explod 
trigger1 = !var(1) && !Time
anim = 8000
pos = -3,-3
supermovetime = 999
pausemovetime = 999
ownpal = 1
scale=.6,.6
[State 3592, 0]
type = Explod 
trigger1 = var(1)&& !Time 
anim = F60
pos = 0,0
supermovetime = 999
pausemovetime = 999
ownpal = 1

[State 3592, a1]
type = Posset
trigger1 = !time
y = 0
[State 3591, a3]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
[State 3592, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3590, a3]
type = ChangeState
trigger1 = animtime = 0
value   = 3591 


[Statedef 3591];---- DOCK attack
type = S
movetype = A
sprpriority = 4
physics = N
anim = 3591

[State 777, hdf]
type = helper
trigger1 = !var(1)&& moveguarded=1 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = -15,(enemynear,const(size.mid.pos.y))  
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 3591, a1]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP
stateno = 3555
ignorehitpause = 1
[State 3591, a2]
type = NotHitBy
trigger1 = 1
value = SCA,AT
ignorehitpause = 1
[State 3591, a3]
type = hitby
trigger1 = 1
value = SCA,AA,AP
ignorehitpause = 1


[State 3591, a3]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
[State 3591, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 777, hsp]
type = helper
trigger1 = !var(1)&& var(10)&& movehit 
helpertype = normal
stateno = 47000
ID = 48700
name = "hitspark1"
postype = p2
pos = 0,(enemy,const(size.mid.pos.y))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hsp]
type = helper
trigger1 = !var(1)&& var(11)&& movehit 
helpertype = normal
stateno = 47001
ID = 48701
name = "hitspark2"
postype = p2
pos = 0,(enemy,const(size.mid.pos.y))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hsp]
type = helper
trigger1 = !var(1)&& var(12)&& movehit 
helpertype = normal
stateno = 47002
ID = 48702
name = "hitspark3"
postype = p2
pos = 0,(enemy,const(size.mid.pos.y))
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 777, voz]
type = PlaySnd
trigger1 = animelem = 1
value = 350,12
channel = 2


[State 3591, b0]
type = HitDef
trigger1 = animelemtime(4)>= 0 && animelemtime(5)<=4
trigger1 = var(10):=1
attr = S, HA
animtype = Hard
damage = 30, 5
hitflag = MAFD
guardflag = MA
pausetime = 4, 4
priority = 7, Hit
sparkno = ifelse(!var(1),-1,0) 
guard.sparkno = ifelse(!var(1),-1,40) 
sparkxy = 0,(enemy,const(size.mid.pos.y))
hitsound   = S350,11
guardsound = S7,1
ground.type = low 
ground.velocity = 0,-6
ground.hittime  = 45 
air.velocity = 0,-2
air.type = high
getpower  = 0
guard.slidetime = 25
guard.hittime = 25
guard.velocity = -9
envshake.time = 6
envshake.freq = 127
envshake.ampl = -6
fall = 1
air.fall = 1
fall.recover = 0
p2stateno = 3523
persistent =0


[State 777, voz]
type = PlaySnd
trigger1 = animelem = 7
value = 350,12
channel = 2


[State 777, voz]
type = PlaySnd
trigger1 = animelem = 10
value = 350,9
channel = 5

[State 3591, b0]
type = HitDef
trigger1 = animelem = 12
trigger1 = var(11):=1
attr = S, HA
animtype = Hard
damage = 30, 5
hitflag = MAFD
guardflag = MA
pausetime = 8, 8
priority = 7, Hit
sparkno = ifelse(!var(1),-1,0) 
guard.sparkno = ifelse(!var(1),-1,40) 
sparkxy = 0,(enemy,const(size.mid.pos.y))
hitsound   = S350,11
guardsound = S7,1
ground.type = low 
ground.velocity = 0,-6
ground.hittime  = 45 
air.velocity = 0,-2
air.type = high
getpower  = 0
guard.slidetime = 25
guard.hittime = 25
guard.velocity = -9
envshake.time = 6
envshake.freq = 127
envshake.ampl = -6
fall = 1
air.fall = 1
fall.recover = 0
p2stateno = 3523


[State 777, voz]
type = PlaySnd
trigger1 = animelem = 15
value = 350,12
channel = 2


[State 3591, b0]
type = HitDef
trigger1 = animelemtime(18)>= 0 && animelemtime(20)<=4
trigger1 = var(12):=1
attr = S, HA
animtype = Hard
damage = 40, 5
hitflag = MAFD
guardflag = MA
pausetime = 6,6
priority = 7, Hit
sparkno = ifelse(!var(1),-1,0) 
guard.sparkno = ifelse(!var(1),-1,40) 
sparkxy = 0,(enemy,const(size.mid.pos.y))
hitsound   = S350,11
guardsound = S7,1
ground.type = low 
ground.velocity = 0,-6
ground.hittime  = 45 
air.velocity = 0,-2
air.type = high
getpower  = 0
guard.slidetime = 25
guard.hittime = 25
guard.velocity = -9
envshake.time = 6
envshake.freq = 127
envshake.ampl = -6
fall = 1
air.fall = 1
fall.recover = 0
p2stateno = 3523
persistent = 0


[State 3591, a]
type = ChangeAnim
trigger1 = anim=3591 && animtime=0
value = 3597
ignorehitpause = 1

[State 3591, a2]
type = Velset
trigger1 = anim=3597 && animelem=3
x = -2.7
y = -2

[State 3591, a2]
type = Veladd
trigger1 = anim=3597 && animelemtime(3)>=0
x = -.3
[State 3591, dd];jump
type = PlaySnd
trigger1 = anim=3597 && animelem=3
value = 40, 10
volume = 250
persistent=0

[State 3591, 5] 
type = destroyself
trigger1 = time>=200





[Statedef 3595];-----------------DOCK withdraw
type = U
movetype = I 
physics = U
anim=3595
sprpriority = 4

[State 3595, a2]
type = Velset
trigger1 = animelem =4
x = -4
y = -1
[State 3595, a2]
type = Veladd
trigger1 = animelemtime(4)>=0
x = -.3

[State 3595, a1]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1


[State 3595, dd];jump
type = PlaySnd
trigger1 = animelem =4
value = 40, 10
volume = 250

[State 3595, a3] 
type = PalFX
trigger1 =!time
time = 8
add = 0,0,0
mul = 430,276,297
sinadd = 41,164,20,4
invertall = 0
color = 256

[State 3595, a4]
type = DestroySelf
trigger1 = time >= 200



[Statedef 3535]
type    = S
physics = N
ctrl = 0
sprpriority = 1

[State 3535, a0]
type = ChangeAnim
trigger1 =!time 
value = 105
elem =3 
ignorehitpause = 1

[State 3535, a2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 3535, a7]
type = Explod 
trigger1 = Time % 7=0
sprpriority = 7
anim = 8590
postype = P1
pos = ifelse(random<500,10,35),ifelse(random<500,-75,-50)
accel = ifelse(random<500,.09,.05),0
random = 6,55
removeongethit = 1
facing = -1
ownpal = 1
;bindtime= 1
supermovetime = 9999
pausemovetime = 9999
scale = .5,.5

[State 3535, a2]
type = VelSet
trigger1 = !time
x = -9  

[State 3535, 20] 
type = VelMul
trigger1 = AnimElemtime(11) >= 0
x = .12

[State 355, a1]
type = playsnd
trigger1 = !time
value = 40,6
channel = 0

[State 3535, a1]
type = playsnd
trigger1 = animelem=11
value = 7,3
channel = 6


[State 3535, be]
type = Explod
trigger1 = Time % 4 = 0  
anim = 8730  
postype = p1
sprpriority = 7
ownpal = 1
pos = 110, -2
scale = .5,.5
supermovetime = 9999
pausemovetime = 9999


[State 3535, b3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1





[Statedef 3598]
type = S
movetype = I
physics = N
ctrl = 0
anim =8787
velset = 0,0

[State 3598, ]
type = PlayerPush
trigger1 = 1
value = 0

[State 3598, a0]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1, 1

[State 3598, a1]
type = DestroySelf
trigger1 = time>=50
;trigger2 = p2movetype!=H



[Statedef 3599]
type = S
movetype = I
physics = N
ctrl = 0
anim =8787
velset = 0,0

[State 0, ]
type = PlayerPush
trigger1 = 1
value = 0

[State 3599, a0]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1, 1

[State 3599, a1]
type = DestroySelf
trigger1 = parent, stateno != [3500,3590]




[Statedef 8598];hc
type = S
movetype = I
physics = N
anim = 8787
sprpriority = 5

[State 777, aa]
type = AssertSpecial;
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1

[State 777, a9] ;bgscreen
type = Explod
trigger1 = !time
anim = 18950
id=18790
pos = 160,120
postype = back
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -47
scale = 2.6,2
removeongethit = 1
removetime = -1
;ownpal=1

[State 8598, re]
type = RemoveExplod
trigger1 = parent, stateno = 3516
trigger2 = parent, movetype = H
trigger3 = parent, winko
ID = 18790

[State 8598, PalFXWiz] 
type = PalFX
trigger1 =(parent, stateno = 3505)
time = 2000
add = -112,21,-255
mul = 332,0,0
sinadd = 0,0,0,1
invertall = 1
color = 256
ignorehitpause = 1
persistent = 0


[State 8598, PalFXWiz] 
type = PalFX
trigger1 =(parent, stateno = 3506)
time = 2000
add = -20,-255,-97
mul = 0,0,262
sinadd = 0,0,0,1
invertall = 1
color = 256
ignorehitpause = 1
persistent = 0


[State 8598, PalFXWiz] 
type = PalFX
trigger1 =(parent, stateno = 3507)
time = 2000
add = -122,-255,-153
mul = 297,0,512
sinadd = 0,0,0,1
invertall = 1
color = 256
ignorehitpause = 1
persistent = 0


[State 8598, A0]
type = screenbound
trigger1 = 1
value = 0
[state 8598, a1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8598, a6]
type = destroyself
trigger1 = parent, stateno = 0
trigger2 = parent, movetype=H 
trigger3 = parent, stateno != [3500,3590]
trigger4 = parent, winko 





[Statedef 8599]
type = S
movetype = I
physics = N
anim = 8787
sprpriority = 5


[State 8599, A0]
type = screenbound
trigger1 = 1
value = 0
[state 8599, a1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8599, a2]
type = VarSet
trigger1 = !time
v = 45
value = 0

[State 8599, a2]
type = Varadd
triggerall = var(45)>=1
trigger1 = time%20 = 0
v = 45
value = 1

[State 8599, VA]
type = Explod
trigger1 = time = [0,20]
id = 8753
anim = 8753
ownpal = 1
pos = ifelse(TeamSide = 1, 50, 265),33
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
scale = 1,.65
ontop = 1
ignorehitpause = 1
persistent = 0

[State 8599, lvup]
type = PlaySnd
trigger1 = time = [20,24]
value = 300,11
persistent=0

[State 8599, VA]
type = Explod
trigger1 = time = [24,27]
id = 8750
anim = ifelse(TeamSide = 1, 8750, 8751)
ownpal = 1
pos = ifelse(TeamSide = 1, 50, 265),15
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
scale = 1,1
ontop = 1
ignorehitpause = 1
persistent = 0

[State 8599, VA]
type = Explod
trigger1 = time = [24,27]
id = 8757
anim = 8757
ownpal = 1
pos = ifelse(TeamSide = 1, 50, 265),35
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
scale = 1,1
ontop = 1
ignorehitpause = 1
persistent = 0



[State 8599, VA]
type = Explod
trigger1 = time = [44,47]
id = 8754
anim = 8754
ownpal = 1
pos = ifelse(TeamSide = 1, 50, 265),35
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
scale = 1,1
ontop = 1
ignorehitpause = 1
persistent = 0



[State 8599, VA] 
type = Explod
trigger1 = (parent, stateno = 3505) && (parent, power >=1000)
id = 3071
anim = 3070
ownpal = 1
pos = 160,52;ifelse(TeamSide = 1, 50, 280),52;67
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
removetime = -1
scale = 1,1
ontop = 1
ignorehitpause = 1
persistent =0 
[State 8599, VA] 
type = Explod
trigger1 = (parent, stateno = 3506) && (parent, power >=1000)
id = 3071
anim = 3070
ownpal = 1
pos = 160,52;ifelse(TeamSide = 1, 50, 280),52;67
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
removetime = -1
scale = 1,1
ontop = 1
ignorehitpause = 1
persistent =0 



[State 8599, re]
type = RemoveExplod
trigger1 = parent, fvar(16)>=10
trigger2 = parent, stateno = 3507||parent, stateno = 3516
ID = 3071

[State 8599, VA] 
type = Explod
trigger1 = (parent, stateno = 3506) && (parent, power >=1000)
id = 8750
anim = ifelse(TeamSide = 1, 8750, 8751)
ownpal = 1
pos = ifelse(TeamSide = 1, 50, 265),15
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
scale = 1,1
ontop = 1
ignorehitpause = 1
persistent = 0


[State 8599, VA] 
type = Explod
trigger1 = (parent, stateno = 3505) && (parent, fvar(16)>=10)
id = 8750
anim = ifelse(TeamSide = 1, 8750, 8751)
ownpal = 1
pos = ifelse(TeamSide = 1, 50, 265),15
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
scale = 1,1
ontop = 1
ignorehitpause = 1
persistent = 0



[State 8599, VA]
type = Explod
trigger1 = (parent, stateno = 3506) && (parent, power >=1000)
id = 8757
anim = 8757
ownpal = 1
pos = ifelse(TeamSide = 1, 50, 265),35
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
scale = 1,1
ontop = 1
ignorehitpause = 1
persistent = 0


[State 8599, re]
type = RemoveExplod
trigger1 = parent, fvar(16)>=10
ID = 8757

[State 8599, VA]
type = Explod
trigger1 = var(45) :=1
trigger1 = parent, fvar(16)>=10 && var(45)<=9
id = 8755
anim = 8755
ownpal = 1
pos = ifelse(TeamSide = 1, 50, 265),35
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
scale = 1,1
ontop = 1
ignorehitpause = 1
persistent = 0

[State 8599, VA] 
type = Explod
trigger1 = (parent, stateno = 3506) && (parent, fvar(16)>=10)
id = 18750
anim = ifelse(TeamSide = 1, 8750, 8751)
ownpal = 1
pos = ifelse(TeamSide = 1, 50, 265),15
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
scale = 1,1
ontop = 1
ignorehitpause = 1
persistent = 0


[State 8599, VA]
type = Explod
trigger1 = NumExplod(18750)
trigger1 = parent, fvar(16)>=10 && var(45)>=10
id = 8756
anim = 8756
ownpal = 1
pos = ifelse(TeamSide = 1, 50, 265),35
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
scale = 1,1
ontop = 1
ignorehitpause = 1
persistent = 0


[State 8599, lvup]
type = PlaySnd
trigger1 = NumExplod(8755)
value = 300,11
persistent=0
[State 8599, lvup]
type = PlaySnd
trigger1 = NumExplod(8756)
value = 300,11
persistent=0


[State 8599, a6]
type = destroyself
trigger1 = parent, stateno = 0
trigger2 = parent, movetype=H 
trigger3 = parent, stateno != [3500,3590]






;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[Statedef 3530]
type    = S                      
movetype = A;I                      
physics = S                      
ctrl = 0                         
sprpriority = 2

;-------------------
; DCvM hyper portrait/BG
[State 777, superportrait]
type = Explod
trigger1 = Var(55)=1 && !time
anim = 10000
ID = 10000
pos = 0,0
postype = back
bindtime = -1
removetime = 70
removeongethit =1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -15
ownpal = 1
persistent=0
[State 777, superbg]
type = Explod
trigger1 = Var(55)=1 && !time
anim = 10005
ID = 10005
pos = 0,0
postype = back
bindtime = -1
removetime = 70
removeongethit =1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -20
ownpal = 1
persistent=0
[State 777, hyperBG2]
type = Helper
trigger1 = Var(55)=1 && !time 
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1
; end DCvM stuff
;-------------------

[State 777, ch]
type = ChangeAnim
trigger1 = !time && prevstateno != 9000
value = 3500
ctrl = 1

[State 777, 0];reset var
type = VarSet
trigger1 = !time
fv = 16
value = 0

[State 777, 0]
type = VarRangeSet
trigger1 = !time
value = 0  
first = 30
last = 32
ignorehitpause = 1

[State 777,  0]
type = NotHitBy
trigger1 = !time
value = SCA
time = 42

[State 3530, b1]
Type = BGPalfx
Trigger1 = time = [0, 400];BG VANISH IN
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 3530, a5] 
type = SuperPause
trigger1 = !time
darken = 1
anim = S8400
sound = S40, 5
pos = 10, -75
movetime = 40
poweradd = -3000
bindtime = -1
sprpriority = 12
Time = 40
p2defmul = 1.1


[State 3530, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1

[State 3530, a8] ;SuperPort
type = Explod
trigger1 = !var(55) && !time
anim = IfElse((random <333),8950,IfElse((random>666),8951,8952))
postype = back
pos = 20,0
ownpal = 1
ignorehitpause = 1
sprpriority = -20
supermovetime = 9999
pausemovetime = 9999
removeongethit = 1
bindtime = -1

[State 3530, a9] ;bgscreen
type = Explod
trigger1 = !var(55) && !time
anim = 8900
ownpal = 1
pos = ifelse(facing=1,0,1),0
postype = back
facing = 1 
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
sprpriority = -25
scale = 1,1
removeongethit = 1

[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos =-10,-50
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1



[State 3530 , a6]
type = HitDef
trigger1 = animelem=1
attr = S, HA
damage= 0,20
priority = 7, hit
animtype = light 
hitflag = MAFD
guardflag = MA
pausetime = 0,6
sparkxy = 10,-50;
sparkno = -1
sprpriority = 6
guard.sparkno = ifelse(!var(55),-1,40) 
hitsound   = S5,4
guardsound = S7,1
ground.slidetime = 30
ground.hittime = 50
ground.velocity = 0  
air.velocity = 0,1
fall = 1
air.fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall.recover = 0      
p1stateno = 3540
p2stateno = 3520      
givepower = 5
kill = 0

[State 7777, voice]
type = PlaySnd
trigger1 = animelem=3
value = 200,13
channel = 0
volume =250
persistent=0

[State 7777, voice]
type = PlaySnd
trigger1 = animelem=5
value = 20,2
persistent=0

[State 3500, a4]
type = AfterImage
trigger1 = animelem = 6
time = 45
palcontrast = 222,142,82
trans = add
length = 8 
palbright = 42,22,2
palmul = .73,.63,.3
palcontrast = 222,142,82
timegap = 1
framegap = 1

[State 3500, hsp]
type = helper
trigger1 =  movehit
helpertype = normal
stateno = 47000
ID = 8700
name = "hitspark1"
postype = p2
pos =20,-55
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1

[State 3500, A5]
type = Veladd
trigger1 = animelemtime(5)>= 0
x = 4

[State 3500, b1]
type = ChangeState
trigger1 = moveguarded
value = 3535
ctrl = 0

[State 3500, b1]
type = ChangeState
trigger1 = time >=75
trigger2 = frontEdgeBodyDist <= 0 
value = 3501
ctrl = 0



[Statedef 3540] ;----going to wall
type    = S                      
movetype = I                      
physics = N                      
ctrl = 0                         
sprpriority = 2
anim = 3502

[State 3540, Bind 1]
type = TargetBind
trigger1 = 1 
pos = 73, -40
[State 3540, aa]
type = AssertSpecial
trigger1 = 1
flag  = nobardisplay
flag2 = noFG
ignorehitpause = 1
[State 3540, a3] 
type = ScreenBound
trigger1 = 1
movecamera = 0, 0
value = 1
[State 777,  0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3540, b1]
Type = BGPalfx
Trigger1 = time = [0, 400]
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 3540, f0]
type = EnvShake
triggerall = time>=12
trigger1 = BackEdgeBodyDist <= 15
trigger2 = FrontEdgeBodyDist <= 15
time = 20
freq = 60
ampl = -4
persistent=0

[State 3540, a0]
type = TargetState
triggerall = time>=12
trigger1 = BackEdgeBodyDist <= 15
trigger2 = FrontEdgeBodyDist <= 15
value = 3521
persistent=0

[State 3540, 10]
type = PlaySnd
trigger1 = p2stateno = 3521
value = 7,2
volume = 200
persistent = 0



[State 3540, 5]
type = ChangeState
triggerall = time>=12
trigger1 = BackEdgeBodyDist <= 15
trigger2 = FrontEdgeBodyDist <= 15
value = 3545
ctrl = 0


[Statedef 3545] ; ================
type    = S                      
movetype = A                     
physics = S                      
velset = 0,0                     
ctrl = 0                         
sprpriority = -5
anim= 3510

[State 3545, VA]
type = Explod
trigger1 = time = [0,20]
id = 8750
anim = ifelse(TeamSide = 1, 8750, 8751)
ownpal = 1
pos = ifelse(TeamSide = 1, 50, 265),15
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
scale = 1,1
ontop = 1
ignorehitpause = 1
persistent = 0
[State 3545, VA]
type = Explod
trigger1 = time = [10,20]
id = 8753
anim = 8753
ownpal = 1
pos = ifelse(TeamSide = 1, 50, 265),33
postype = left
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = 9;7
scale = 1,.65
ontop = 1
ignorehitpause = 1
persistent = 0

[State 3545, hsp]
type = helper
trigger1 = !time
helpertype = normal
stateno = 8598
ID = 85981
name = "hcbg"
pos = 160,-1500
postype = back
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
ownpal = 1


[State 3545, dd]
type = PlaySnd
trigger1 = !time
value = 20,0
channel = 0
volume = 250

[State 3545, a1]
type = Turn
trigger1 =!time 

[State 777, b1]
Type = BGPalfx
Trigger1 = time = [0, 1600]
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1
[State 777, aa]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG
ignorehitpause = 1
[State 777, a0]
type = NotHitBy
trigger1 = 1
value = SCA
time =1
[State 777, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 777, 0]
type = ChangeAnim
trigger1 = anim=3510 && animtime=0
trigger2 = anim=3515 && animtime=0
value = 3511
ignorehitpause=1





[State 3545, hsp];coming from  p1
type = helper
trigger1 = time >= 50
helpertype = normal
stateno = 3550
ID = 3550
name = "kravinoff"
postype = front
pos =40,-100
facing = -1
ownpal = 1
persistent=0

[State 3545, hsp]
type = helper
trigger1 = time >= 150
helpertype = normal
stateno = 3560
ID = 3560
name = "toomes"
postype = front
pos = -330,-250
facing = 1
ownpal = 1
persistent=0

[State 3545, hsp]
type = helper
trigger1 = time >= 250
helpertype = normal
stateno = 3570
ID = 3570
name = "dillon"
postype = back
pos = 40,3
facing = 1
ownpal = 1
persistent=0

[State 3545, hsp]
type = helper
trigger1 = time >= 350
helpertype = normal
stateno = 3580
ID = 3580
name = "beck"
postype = p2
pos = 80,0
facing = -1
ownpal = 1
persistent=0

[State 3545, hsp]
type = helper
trigger1 = time >= 450
helpertype = normal
stateno = 3590
ID = 3590
name = "octavius"
postype = front
pos =10,-100
facing = -1
ownpal = 1
persistent=0

[State 3545, p2] 
type = helper
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
helpertype = normal
stateno = 8706
ID = 8706
name = "hitspark6"
postype = p2
pos = 0,0
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
ownpal = 1
;persistent=0

[State 3545, 10]
type = PlaySnd
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
value = 40,1
volume = 200
;persistent=0
[State 3545, f0]
type = EnvShake
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
freq = 60
ampl = -4
;persistent=0
[State 3545, fxgrd]
type = Explod
triggerall = enemynear,anim=3521
trigger1 = enemynear,time=1
ID = 8001
anim = 8001
postype = p2
pos = 0, 0
sprpriority = -3
ownpal = 1
;persistent=0


[State 777, 0]
type = ChangeAnim
trigger1 = time >= 550
value = 3515
ignorehitpause=1
persistent=0

[State 777, a1]
type = VelAdd
trigger1 = anim=3515 && (P2Dist X > 40)  
trigger1 = (animelemtime(1)>=0) && (animelemtime(5)<=0)
x = 1.1;-0.2



[State 3545, dd]
type = PlaySnd
trigger1 = (anim=3515) && (animelemtime(1)=0)
value = 20,6
channel = 10
volume = 250
persistent=0


[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos =  0,(enemynear ,const(size.head.pos.y))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos = 0,(enemynear ,const(size.head.pos.y))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, sfx]
type = PlaySnd
trigger1 = movehit
value = 20,4
channel = 9
persistent=0

[State 3545, X0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3545, 2]
type = HitDef
triggerall = anim = 3515
trigger1 = time%6=0
attr = S, HA                     
animtype = hard                 
damage = 35,5
hitflag = MAFD                  
guardflag = M 
priority = 6, Hit 
sprpriority = -5
pausetime = 2, 2   
sparkno = ifelse(!var(55),-1,2)
guard.sparkno = ifelse(!var(55),-1,40)                     
sparkxy = 0,ifelse(p2statetype=S,(enemynear ,const(size.head.pos.y)),(enemynear ,const(size.mid.pos.y)))         
hitsound = S5,4                 
guardsound = S7,1           
ground.type = high               
ground.slidetime = 30            
ground.hittime  = 30             
ground.velocity = 0,-7.5     
guard.velocity = -13
airguard.velocity = -8,-1     
air.type = high                  
air.velocity = 0,-7         
air.hittime = 30
fall.envshake.time = 30
fall.envshake.ampl = -8
envshake.time = 7
envshake.ampl = 4
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower  = 40
givepower = 20
down.velocity = -1.5,-8
down.hittime = 32
yaccel =.55
p2stateno = 3523

;===============================================================


[State 777, 0]
type = Changestate
trigger1 = anim=3515 && time>350
trigger2 = WinKO
trigger3 = time>1100
value = 3516
ctrl = 0
ignorehitpause=1


[Statedef 6000];-----counter
type    = S
movetype= A
physics = S
velset = 0,0
Anim = 6000
sprpriority = 4

[State 777, es]
type = Explod 
trigger1 = !time
sprpriority = 10
anim = 8580
pos = -30, 3
removeongethit = 1
scale = .77,.77
bindtime = 1
supermovetime = 99
pausemovetime = 99

[State 6000, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 6000, 3]
type = SuperPause
trigger1 = !time
time = 30
movetime = 30
darken = 1
anim = S6150
sound = S7, 0
pos = 70, -100
poweradd = -1000
bindtime = -1
sprpriority = 6

[State 6000, a1]
type = PlaySnd
trigger1 = !time
value = 7,0
volume = 200

[State 6000, 6]
type = ChangeState
trigger1 = !AnimTime
value = 6150
ctrl = 0


[Statedef 6100]
type    = S
movetype= A
physics = S
velset = 0,0
Anim = 6100
sprpriority = 4

[State 777, es]
type = Explod 
trigger1 = !time
sprpriority = 10
anim = 8580
pos = -30, 3
removeongethit = 1
scale = .77,.77
bindtime = 1
supermovetime = 99
pausemovetime = 99

[State 6100, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 6100, 3]
type = SuperPause
trigger1 = !time
time = 30
movetime = 30
darken = 1
anim = S6150
sound = S7, 0
pos = 70, -45
poweradd = -1000
bindtime = -1
sprpriority = 6

[State 6100, a1]
type = PlaySnd
trigger1 = !time
value = 7,0
volume = 250

[State 6100, 6]
type = ChangeState
trigger1 = !AnimTime
value = 6150
ctrl = 0


[Statedef 6150];---------------------
type    = A
movetype= A
physics = S
velset = 0,0
Anim = 6200
sprpriority = 4

[State 6150, 1]
type = NotHitBy
trigger1 = time = [0,4]
value = SCA
time = 1

[State 6150, a1]
type = PlaySnd
trigger1 = !time
value = 50,3
volume = 250
channel=0


[State 6150,0 ]
type = StateTypeSet
trigger1 = animelem=2
statetype = A
movetype = A
physics = A
ignorehitpause = 1

[State 6150, a1]
type = PlaySnd
trigger1 = animelem = 2
value = 40,7
volume = 250

[State 600, xyz]
type = veladd
trigger1 = animelemtime(1)>0 &&animelemtime(6)<0 
x = .6
y = -.6


[State 777, hsp]
type = helper
trigger1 = !var(55)&& movehit 
helpertype = normal
stateno = 47002
ID = 8702
name = "hitspark3"
postype = p2
pos = -15,(enemynear ,const(size.mid.pos.y))         
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 777, hdf]
type = helper
trigger1 = !var(55)&& moveguarded 
helpertype = normal
stateno = 47016
ID = 8716
name = "defend"
postype = p2
pos= -15,(enemynear ,const(size.mid.pos.y))     
facing = -1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent=0
ownpal = 1
[State 6510, 2]
type = HitDef
trigger1 = !time
attr = S, SA                     
animtype = hard                 
damage = 120,10
p2facing =1
hitflag = MAFD                  
guardflag = MA 
priority = 6, Hit 
sprpriority = 1
pausetime = 0, 8   
sparkno = ifelse(!var(55),-1,3)
guard.sparkno = ifelse(!var(55),-1,40)                     
sparkxy= -15,ifelse(p2statetype=A,-110,-70)     
hitsound = S5,4                  
guardsound = S7,1           
ground.type = high               
ground.slidetime = 30            
ground.hittime  = 30             
ground.velocity = -14,-7.5     
guard.velocity = -13
airguard.velocity = -8,-1     
air.type = high                  
air.velocity = -14,-7         
air.hittime = 30
fall.envshake.time = 30
fall.envshake.ampl = -8
envshake.time = 7
envshake.ampl = 4
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower  = 40
givepower = 20
down.velocity = -1.5,-8
down.hittime = 32
yaccel =.55
guard.dist = 320



[State 6150, a4]
type = explod
trigger1 = animelemtime(1)>=0 &&animelemtime(8)<=0 
anim =29998
id = 3130
sprpriority = -7
postype = p1
pos = 0,-75
vel = ceil((200-random)/70),ceil((200-random)/70)
random = 30,30
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
scale = .3,.3


[State 6150, a4]
type = explod
trigger1 = animelemtime(1)>=0&&animelemtime(8)<=0 
anim =29998
id = 3131
sprpriority = 7
postype = p1
pos = 0,-75
vel = ceil((700-random)/90),ceil((700-random)/90)
random = 20,20
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
scale = .2,.2



[State 6150, 6]
type = ChangeState
trigger1 = !AnimTime
value = 51
ctrl = 0





[State 3130, 2]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 3130, 3]
type = destroyself
trigger1 = time >= 30

[Statedef 6300]
type    = S
movetype= I
physics = N
poweradd= 0
velset = 10,0
ctrl = 0
anim = 6300
sprpriority = 2

[State 6300, a1]
type = VelMul
trigger1 = 1
x = 0.75

[State 6300, a2]
type = VelSet
trigger1 = Time = 10
x = 0

[State 6300, a3]
type = Width
trigger1 = 1
value = 10,0

[State 6300, a4]
type = NotHitBy
trigger1 = !Time
value = SCA
time = 25

[State 6300, a5]
type = Helper
trigger1 = !Time
helpertype = Normal
name = "GuardPush"
postype = P1
pos = -50,0
stateno = 6350
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 6300, a6]
type = Explod
trigger1 = !Time
anim = 6355
postype = p1
pos = 73,-50
ownpal = 1
vel = 2,0
ignorehitpause = 1
sprpriority = 7

[State 6300, a7]
type = PlaySnd
trigger1 = !Time
value = 7,1
volume = 200
channel = 1

[State 6300, a8]
type = PlaySnd
trigger1 = !Time
value = 50,0
channel = 0

[State 6300, a9]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

[Statedef 6310];--------------crouch
type    = C
movetype= I
physics = N
poweradd= 0
velset = 10,0
ctrl = 0
anim = 6310
sprpriority = 2

[State 6310, a1]
type = VelMul
trigger1 = 1
x = 0.75

[State 6310, a2]
type = VelSet
trigger1 = Time = 10
x = 0

[State 6310, a3]
type = Width
trigger1 = 1
value = 10,0

[State 6310, a4]
type = NotHitBy
trigger1 = !Time
value = SCA
time = 25

[State 6310, a5]
type = Helper
trigger1 = !Time
helpertype = Normal
name = "GuardPush"
postype = P1
pos = -50,0
stateno = 6350
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 6310, a6]
type = Explod
trigger1 = !Time
anim = 6355
postype = p1
pos = 73,-45
ownpal = 1
vel = 2,0
ignorehitpause = 1
sprpriority = 7

[State 6310, a7]
type = PlaySnd
trigger1 = !Time
value = 7,1
volume = 200
channel = 1

[State 6310, a8]
type = PlaySnd
trigger1 = !Time
value = 50,0
channel = 0

[State 6310, a9]
type = ChangeState
trigger1 = !AnimTime
value = 11
ctrl = 1


[Statedef 6320];------------air
type    = A
movetype= I
physics = N
poweradd= 0
velset = 10,0
ctrl = 0
anim = 6320
sprpriority = 2

[State 6320, a1]
type = VelMul
trigger1 = 1
x = 0.75

[State 6320, a2]
type = VelSet
trigger1 = Time = 10
x = 0

[State 6320, a3]
type = Width
trigger1 = 1
value = 10,0

[State 6320, a4]
type = NotHitBy
trigger1 = !Time
value = SCA
time = 25

[State 6320, a5]
type = Helper
trigger1 = !Time
helpertype = Normal
name = "GuardPush"
postype = P1
pos = -50,0
stateno = 6350
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 6320, a6]
type = Explod
trigger1 = !Time
anim = 6355
postype = p1
pos = 73,-55
ownpal = 1
vel = 2,0
ignorehitpause = 1
sprpriority = 7

[State 6320, a7]
type = PlaySnd
trigger1 = !Time
value = 7,1
volume = 200
channel = 1

[State 6320, a8]
type = PlaySnd
trigger1 = !Time
value = 50,0
channel = 0

[State 6320, a9]
type = ChangeState
trigger1 = !AnimTime
value = 51
ctrl = 1


[Statedef 6350];guard push helper
type    = S
movetype= I
physics = N
poweradd= 0
ctrl = 0
anim = 6350
sprpriority = -4

[State 6350, a1]
type = PlayerPush
trigger1 = Time >= 0
value = 1

[State 6350, a2]
type = VelSet
trigger1 = Time = [0,10]
x = 30

[State 6350, a3]
type = VelSet
trigger1 = Time = [11,13]
x = 20

[State 6350, a4]
type = VelSet
trigger1 = Time >= 14
x = 10

[State 6350, a5]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 6350, a6]
type = DestroySelf
trigger1 = Time >= 18


;===================================================================
;Recovery Roll - Based on mugenguild code snippet & Flowagirl archives 
;====================================================================
[Statedef 6500]
type = L
movetype = I
physics = N
anim = 6550
velset = 0,0
ctrl = 0
poweradd = 0
juggle = 0
facep2 = 1
sprpriority = 0

[State 6500, A1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 6500, A2]
type = PlayerPush
trigger1 = 1
value = 0

[State 6500, A3]
type = PosSet
trigger1 = (!Time)
y = 0

[State 6500, A4]
type = VelSet
trigger1 = (!Time)
x = 7
y = 0

[State 6500, A5]
type = ChangeState
trigger1 = (var(59)<=0)
trigger1 = ((Time > 15) && (Command != "holdfwd")) || ((Time > 35) && (Command = "holdfwd"))
trigger2 = (var(59)) && (time>35)
value = 12 ;5120
ctrl= 1


;----------------------------------
[Statedef 8740]
type = S
movetype = I
physics = N
anim = 8787
sprpriority = -20

;[State 0, PalFXWiz] ;red
;type = PalFX
;trigger1 =1
;time = 10
;add = 144,-81,-122
;mul = 205,369,471
;sinadd = 0,0,0,1
;invertall = 0
;color = 0
;ignorehitpause = 0
;persistent = 1

;[State 0, PalFXWiz] ;blue
;type = PalFX
;trigger1 =1
;time = 10
;add = -40,62,103
;mul = 297,200,292
;sinadd = 0,0,0,1
;invertall = 0
;color = 40
;ignorehitpause = 0
;persistent = 1

[State 8740, a0]
type = EnvShake
trigger1 = !time 
time = 15
freq = 80
ampl = -7

[state 8740, a1]
type = assertspecial
trigger1 = 1
flag = NoBarDisplay
flag2 = noshadow
ignorehitpause = 1



[State 8740, a3] 
type = Explod
trigger1 = parent, StateNo != [200,700]
trigger1 = !time
anim = 8901
id = 8901
pos = 0,0
postype = back
ontop = 1 
bindtime = -1
supermovetime = 999
pausemovetime= 999
sprpriority = 20
removetime = -2
ignorehitpause = 1
scale = 1,1
removeongethit = 1
ownpal = 1

[State 8740, a3] 
type = Explod
trigger1 = parent, StateNo != [200,700]
trigger1 = !time
anim = 8740;8789
id = 8740
pos = 0,0
postype = back
ontop = 1 
bindtime = -1
supermovetime = 999
pausemovetime= 999
sprpriority = 20
removetime = -2
ignorehitpause = 1
scale = .5,.5
removeongethit = 1
ownpal = 1

[State 8740, a3] 
type = Explod
trigger1 = parent, StateNo = [200,700]
trigger1 = !time
anim = 8741;8789
id = 8741
pos = 0,0
postype = back
ontop = 1 
bindtime = -1
supermovetime = 999
pausemovetime= 999
sprpriority = 20
removetime = -2
ignorehitpause = 1
scale = .5,.5
removeongethit = 1
ownpal = 1


[State 8740, a6]
type = destroyself
trigger1 = time >= 300


[Statedef 8787]
type = S
movetype = I
physics = N
anim = 8787
sprpriority = -20

;[State 0, PalFXWiz] ;red
;type = PalFX
;trigger1 =1
;time = 10
;add = 144,-81,-122
;mul = 205,369,471
;sinadd = 0,0,0,1
;invertall = 0
;color = 0
;ignorehitpause = 0


;[State 8787, PalFXWiz] ;YELLOW
;type = PalFX
;trigger1 =1
;time = 10
;add = 136,113,-118;136,113,-118
;mul = 318,184,512;318,184,512
;sinadd = 0,0,0,0
;invertall = 0
;color = 0
;ignorehitpause = 1


[State 8787, PalFXWiz] ;YELLOW2
type = PalFX
trigger1 =1
time = 10
add = 103,52,-35
mul = 394,276,326
sinadd = 0,0,0,1
invertall = 0
color = 256
invertall = 0
ignorehitpause = 1

;[State 0, PalFXWiz] ;blue
;type = PalFX
;trigger1 =1
;time = 10
;add = -40,62,103
;mul = 297,200,292
;sinadd = 0,0,0,1
;invertall = 0
;color = 40
;ignorehitpause = 0


[state 8787, a1]
type = assertspecial
trigger1 = 1
flag = NoBarDisplay
flag2 = Noshadow

[state 8787, a1]
type = assertspecial
triggerall = numexplod(8789)
trigger1 = 1
flag = NoBG
flag2 = NoFG


[State 8787, a9] ;bgscreen
type = Explod
trigger1 = !time
anim = 8902
id = 8789
pos = 0,0
postype = back
bindtime = -1
supermovetime = 999
pausemovetime = 999
sprpriority = -20
scale = 1,1
removeongethit = 1
IgnoreHitPause = 1


[State 8787, a4] 
type = Explod
trigger1 = !time 
anim = 87897
id = 8785
pos = 0,0
postype = back
bindtime = -1
supermovetime =999
pausemovetime =999
sprpriority = -15;-15
removetime = -2
scale = 1,1
removeongethit = 1
IgnoreHitPause = 1

[State 8787, a6]
type = destroyself
trigger1 = time >= 300



;================================================================
; Hit Wall + aerial>ground  gethits 
;================================================================

[Statedef 9020]; Reloaded custom "Hulk style" fierce hitwall <C.of.L project-Loganir> 
type    = A
movetype= H
physics = N

[State 9020, a1]
type = VelSet
trigger1 = !Time
x = 0
y = 0

[State 9020, a2]
type = ChangeAnim2
trigger1 = !Time
value = 79020

[State 9020, a3]
type = PosAdd
trigger1 = !Time
x = (-25) - BackEdgeBodyDist

[State 9020, a4]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 9020, a5]
type = ChangeState
trigger1 = time >=1
value = 9021 

[Statedef 9021]
type    = A
movetype= H
physics = N
ctrl = 0

[State 9021, a1] 
type = Velset
trigger1 = !Time
y = ifelse((Pos Y = [-27,0]),-16.5,ifelse((Pos Y = [-100,-28]) ,-11.8,-7))

[State 9021, a2]
type = VelAdd
trigger1 = 1
y =ifelse((Time=[0,6]),.6,2.5)

[State 9021, a3]
type = ChangeAnim2
trigger1 = !Time
value = 79020

[State 9021, a4] 
type = Turn
trigger1 = (p2dist X < -20) && (!Time)

[State 9021, a5]
type = NotHitBy
trigger1 = 1
value = SCA


[State 9021, a6]
type = SelfState
trigger1 = Time >= 8 && alive
value = 5040 
ctrl = 1

[State 9021, a7]
type = SelfState
trigger1 = Time >= 8 && !alive
value = 5050 
ctrl = 0




[Statedef 9023];--- vs bounce ground <C.of.L project-Loganir> 
type    = A
movetype= H
physics = N
anim = 5080
ctrl = 0
velset=-6,-6

[State 9023, ax]
type = envshake
trigger1 = !time
time = 8
ampl = 2

[State 9023, a0]
type = HitFallSet
trigger1 = 1
value = 0

[State 9023, a1]
type = VelAdd
trigger1 = 1
y = .55

[State 9023, a2]
type = ScreenBound
trigger1 = 1
value =1

[State 9023, a3]
type = NotHitBy
trigger1 = 1 
value = SCA
time = 1

[State 9023, a4]
type = SelfState
trigger1 = Time >= 1 && alive
value = 5040 
ctrl = 1

[State 9023, a5]
type = SelfState
trigger1 = Time >= 1 && !alive
value = 5050 
ctrl = 0







[Statedef 9025];---------aerial
type    = A
movetype= H
physics = N

[State 9025, 1]
type = Velset
trigger1 = time>=2
x=-1
y=6

[State 9025, 1]
type = VelAdd
trigger1 = 1
y = -.1

[State 9025, Anim]
type = ChangeAnim2
trigger1 = !Time
value = 1022

[State 9025, 4]
type = changestate
trigger1 = Vel Y > 0    
trigger1 = Pos Y >= 0  
value = 9026 
ctrl = 0


[Statedef 9026];---------aerial
type    = S
movetype= H
physics = N


[State 9026, Anim]
type = ChangeAnim
trigger1 = !Time
value = 5100

[State 9026, 4]
type = SelfState
trigger1 = Time>=15
value = 5050 
ctrl = 0

;=========================  
[Statedef 9623];--- aerial rave end states <C.of.L project-Loganir> 
type    = A
physics = A

[State 9623, a0]
type = VelSet
trigger1 = !time
x = 1

[State 9623, a1]
type = ChangeAnim
trigger1 = !Time
value = 51

[State 9623, a3]
type = ScreenBound
triggerall = var(26)
trigger1=1
value = 1
movecamera = 1,0
ignorehitpause = 1

[Statedef 9624] ;jump down aerial rave
type    = A
physics = N

[State 9624, 0]
type = VelSet
trigger1 = !time
x = 0
y = 0

[State 9624, 1a]
type = VarSet
trigger1 = !time
v = 1
value = 0
ignorehitpause = 1

[State 9624, a]
type = ChangeAnim
trigger1 = !Time
value = 51

[State 9624, 0]
type = ScreenBound 
trigger1 = 1
value = 0

[State 9624, 1]
type = ChangeState
trigger1 = time>= 25
value = 9625
ctrl = 0

[Statedef 9625];wait out screen
type = S
physics = S
anim = 100
sprpriority = 1
ctrl = 0

[State 9625, A7]
type = PosSet
trigger1 = !time
y = 0

[State 9625, 0]
type = VelSet
trigger1 = time>25
x = 18

[State 9625, 0]
type = ScreenBound 
trigger1 = 1
value = 0

[State 9625, 1]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 9625, 2]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 9625, 3]
type = ChangeState 
trigger1 = p2bodydist x <= 320
value = 104 ;or "dash end" state
ctrl = 0


;SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS
;END Hit Wall + aerial>ground gethits
;SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS



;SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS
;====== DCvsMARVEL SCREENPACK SECTION ==========
;SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS

;---------------------------------------------------------------------------
;--[Super Animations]------------------
;---------------------------------------------------------------------------
[Statedef 8000]
type = S
movetype = I

[State 8000, a0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = invisible
flag3 = noshadow
ignorehitpause=1
[State 8000, a0]
type = NotHitBy
trigger1 = 1
value = SAC, AA,AT,AP;:P   NT, ST, HT ,NA, SA, HA ,NP, SP, HP
time = -1
[State 8000, a0];---------- hyper portrait background
type = Explod
trigger1 = time = 2
anim = F105
ID = 105
pos = 0,60
postype = back
bindtime = -1
removetime = 45
supermove = 60
pausemovetime = 60
sprpriority = -2
ownpal = 1

[State 8000, a0];------------ effects level
type = Explod
trigger1 = time = 0
anim = F100
ontop = 1
ownpal = 1
supermove = -1
pausemovetime = -1
[State 8000, a0];------------ effects level
type = Explod
trigger1 = time = 12
anim = F101
ontop = 1
ownpal = 1
supermove = -1
pausemovetime = -1
[State 8000, a0];------------ effects level
type = Explod
trigger1 = time = 0
anim = F102
ontop = 1
ownpal = 1
supermove = -1
pausemovetime = -1
[State 8000, a0]
type = Null
trigger1 = time = 0
name = "Super BG"
ID = 8005
stateno = 8005
postype = front
supermovetime = 999999
pausemovetime = 999999
ownpal = 1

[State 8000, a0]
type = DestroySelf
trigger1 = !animtime

;-------------------------------------------------------------
;Super BG
;-------------------------------------------------------------
[Statedef 8005]
type = A
physics  = N
anim=8787

[State 8005]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = noFG
flag3 = noshadow
ignorehitpause = 1

[State 8005, muteki]
type = NotHitBy
trigger1 = 1
value = SAC,AA,AP,AT; NT, ST, HT ,NA, SA, HA ,NP, SP, HP
time = -1
[State 8005, 3]
type = PosSet
trigger1 = 1
y = 0
x = -160


[State 8005,1];------- bg ground
type = Explod
trigger1 = time= 1
anim = F110
ID = 110
supermovetime = 999999
pausemovetime = 999999
removeongethit = 1
removetime = -1
vel = 0, 0
postype = p1
pos = 0, 0
sprpriority = -999998
bindtime = -1
ownpal = 0
scale = 2,1
[State 8005,1];------- bg back gray
type = Explod
trigger1 = time= 1
anim = F115
ID = 110
supermovetime = 999999
pausemovetime = 999999
removeongethit = 1
removetime = -1
vel = 0, 0
postype = back
pos = 0, 0
sprpriority = -999999
bindtime = -1
ownpal = 0
scale = 1.0,1.0

[State 8005, 6]
type = ChangeState
Trigger1 = Time = 20
value = 8006
ctrl = 0

[Statedef 8006]
type = A
physics  = N
sprpriority = 5
anim=8787

[State 8006]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = noFG
;flag3 = noBG
[State 8006, 3]
type = posset
trigger1 = 1
y = 0
x = -160


[State 8006, b1]; my way
Type = BGPalfx
Trigger1 = time = [0,9900];BG VANISH IN
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1


[State 8006,1];------------dash line blue
type = Explod
trigger1 = timemod = 4,1 && numexplod(111) <= 20
anim = F111
ID = 111
supermovetime = 999999
pausemovetime = 999999
removeongethit = 1
removetime = 60
vel = -10-ceil(random/20), 0
postype = p1
pos = 320, 0
random = 20,500
ontop = 1
bindtime = 1
ownpal = 1
[State 8006,1];------------dash line red
type = Explod
trigger1 = timemod = 4,1 && numexplod(112) <= 20
anim = F112
ID = 112
supermovetime = 999999
pausemovetime = 999999
removeongethit = 1
removetime = 60
vel = -10-ceil(random/20), 0
postype = p1
pos = 320, 0
random = 20,500
ontop = 1
bindtime = 1
ownpal = 1
[State 8006, muteki]
type = NotHitBy
trigger1 = Time = 0
value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
time = -1

[State 8006, 6]
type = ChangeState
trigger1 = parent, stateno != [3000,3590]
value = 8007
ctrl = 0

[Statedef 8007]
type = A
physics  = N
sprpriority = 5
[State 8007]
type = AssertSpecial
trigger1 = 1
flag = invisible
[State 8007, 3]
type = PosSet
trigger1 = 1
y = 0
x = -160
[State 8007, Assert]
type = assertspecial
trigger1 = Animtime != 0
flag = noshadow
[State 8007, muteki]
type = NotHitBy
trigger1 = !Time 
value = SAC, AA,AP,AT;NT, ST, HT ,NA, SA, HA ,NP, SP, HP
time = -1
[State 8007, 0]
type = RemoveExplod
trigger1 = time >= 10
ID = 110
ignorehitpause = 1
[State 8007, 7]
type = DestroySelf
Trigger1 = Time = 20

;---------------------------------------------------------------------------
;--[Shadow]------------------
;---------------------------------------------------------------------------
[Statedef 9010]
type = S
physics  = N
anim = 9010
SprPriority = -20

[State 9010, ]
type = NotHitBy
trigger1 = !Time 
value = SAC, AA,AP,AT
time = -1

[State 9010, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
ignorehitpause = 1
[State 9010, PosSet]
type = PosSet
trigger1 = 1
x = parent,pos x
y = 0
[State 9010, Explod]
type = Explod
trigger1 = time = 0
anim = 9010
ID = 9010
bindtime = -1
removetime = -1
supermovetime = 9999999
pausemovetime = 9999999
scale = 1,1
sprpriority = -20
ownpal = 1
removeongethit = 0
ignorehitpause = 1
[State 9010, ModifyExplod]
type = ModifyExplod
trigger1 = parent,statetype = S
trigger2 = parent,statetype = C
ID = 9010
pos = 0,0
bindtime = -1
removetime = -1
supermovetime = 9999999
pausemovetime = 9999999
scale = 1,1
sprpriority = -20
ownpal = 1
removeongethit = 0
ignorehitpause = 1
[State 9010, ModifyExplod]
type = ModifyExplod
trigger1 = parent,statetype = A
ID = 9010
pos = 0,0
bindtime = -1
removetime = -1
supermovetime = 9999999
pausemovetime = 9999999
scale = .75,1
sprpriority = -20
ownpal = 1
removeongethit = 0
ignorehitpause = 1
[State 9010, ModifyExplod]
type = ModifyExplod
trigger1 = parent,statetype = L
ID = 9010
pos = 10,0
bindtime = -1
removetime = -1
supermovetime = 9999999
pausemovetime = 9999999
scale = 1.45,1.2
sprpriority = -20
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
;WWWWWWWWWW======END DCvsMARVEL SCREENPACK SECTION ==========
;WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW



[Statedef 9000]
type = U
movetype = H 
physics = U

[State 9000, b1]
Type = BGPalfx
Trigger1 = time = [0, 800]
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 9000, PalFX]
type = PalFX
trigger1 = !time
time = 4
;add = 180,90,150
sinadd=200,200,200,4
ignorehitpause = 1

[State 9000, a1]
type = explod
trigger1 = 1
anim = ifelse(random>900,1,3)
ID = 1111
sprpriority = 9
postype = p1
pos = 15,-60
random = 20,70
ignorehitpause = 1
supermovetime=99
pausemovetime=99
ownpal=1

[State 9000, a1]
type = PlaySnd
trigger1 = !time
value = 7,9
channel = 3

[State 9000, PosFreeze]
type = PosFreeze
trigger1 = Alive
trigger1 = 1
value = 1

[State 9000, NotHitBy]
type = NotHitBy 
trigger1 = 1
value = SCA, AA, AP,AT
time = 1


[State 9000, ChangeAnim]
type = ChangeAnim
trigger1 = Time < floor(gethitvar(hittime) * 0.8)
value = Anim
elem = AnimElemNo(0);3

[State 9000, VelSet]
type = VelSet
trigger1 = !Alive
x = gethitvar(xvel)
y = gethitvar(yvel)

[State 9000, End]
type = ChangeState
trigger1 = !Alive
value = 5050
[State 9000, End]
type = ChangeState
trigger1 = Alive
trigger1 = Time >= floor(gethitvar(hittime) * 0.8)
value = var(7)











;***************************************************************************
; ST
;***************************************************************************

; (Credit to ANMC, Bagaliao, and FlowaGirl for the basic helper method concept.)
;
;------------------
; AI Activation Helper State - Primary Version
; (Credit to YongMing for the basic HitPause bugfix concept.)
;
; var(1) - First tick button activation prevention.
; var(2) - Used for pause/superpause and custom state check, basically.
; var(3) - (Super/)Pause & custom state-triggered dir detection disabler.
; var(4) - Persistent direction command detection enabler (due to 2002.04.14).
; var(9) - AutoTurn bug fixer.
; parent's var(57) - Parent's GameTime var, for pause and custom state check.
; parent's var(58) - Parent's primary AI variable.
;
; The code in this state is mostly simply copy/pasteable.
; But if you're using different indices for the parent's variables,
; or if you change your character's basic commands' names, you'll
; of course need to change the code in this state accordingly.

[StateDef 9741]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9741, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 0

[State 9741, UglyHack]
type = VarSet
trigger1 = !var(1)
var(2) = 2

[State 9741, PauseCheck]
type = VarSet
trigger1 = GameTime > Parent,var(57)
trigger2 = !(Parent,Alive)
trigger3 = RoundState != 2
trigger4 = Parent,var(59)
trigger5 = var(3):=0
var(2) = (var(3):=1)+(var(4):=0)

[State 9741, Facing]
type = Turn
trigger1 = var(9):=(Facing != Parent,Facing)
trigger1 = !(var(4):=0)

[State 9741, DirTurnOnAI]
type = ParentVarSet
triggerall = !(var(3) || var(9))
trigger1 = Parent,command = "holdfwd"
trigger2 = Parent,command = "holdback"
trigger3 = Parent,command = "holdup"
trigger4 = Parent,command = "holddown"
trigger5 = !(var(4):=1)
var(59) = var(4)

[State 9741, DirTurnOffAI]
type = ParentVarSet
triggerall = !var(3)
triggerall = Parent,var(59)
trigger1 = command = "holdfwd"
trigger1 = Parent,command = "holdfwd"
trigger2 = command = "holdback"
trigger2 = Parent,command = "holdback"
trigger3 = command = "holdup"
trigger3 = Parent,command = "holdup"
trigger4 = command = "holddown"
trigger4 = Parent,command = "holddown"
var(59) = var(4):=0

[State 9741, ButtonTurnOnAI]
type = ParentVarSet
triggerall = !var(2)
trigger1 = Parent,command = "a"
trigger2 = Parent,command = "b"
trigger3 = Parent,command = "c"
trigger4 = Parent,command = "x"
trigger5 = Parent,command = "y"
trigger6 = Parent,command = "z"
trigger7 = Parent,command = "start"
var(59) = 1

[State 9741, ButtonTurnOffAI]
type = ParentVarSet
triggerall = !var(2)
trigger1 = command = "a"
trigger1 = Parent,command = "a"
trigger2 = command = "b"
trigger2 = Parent,command = "b"
trigger3 = command = "c"
trigger3 = Parent,command = "c"
trigger4 = command = "x"
trigger4 = Parent,command = "x"
trigger5 = command = "y"
trigger5 = Parent,command = "y"
trigger6 = command = "z"
trigger6 = Parent,command = "z"
trigger7 = command = "start"
trigger7 = Parent,command = "start"
var(59) = -1

[State 9741, UnPauseCheck]
type = VarSet
triggerall = var(2)
trigger1 = Parent,command = "a"
trigger2 = Parent,command = "b"
trigger3 = Parent,command = "c"
trigger4 = Parent,command = "x"
trigger5 = Parent,command = "y"
trigger6 = Parent,command = "z"
trigger7 = Parent,command = "start"
trigger8 = var(2) = 2
trigger8 = var(2):=0
var(2) = 2

[State 9741, Goodbye]
type = DestroySelf
triggerall = var(1):=1
trigger1 = Parent,var(59)
trigger2 = !(Parent,Alive)
trigger3 = RoundState != 2


;------------------
; AI Activation Helper State - Compatibly Partnered Version
;
; var(1) - First tick dir activation prevention
; var(2) - Used for pause/superpause and custom state check, basically.
; var(3) - (Super/)Pause & custom state-triggered dir detection disabler.
; var(4) - Hitpause check.
; var(5) - No button on previous tick.
; var(6) - Any dir on this tick.
; var(7) - Any button on this tick.
; var(8) - Matching partner button detected.
; var(9) - AutoTurn bug fixer.
; var(10)- Buffered dir detection disabler.
; parent's var(57) - Parent's GameTime var, for pause and custom state check.
; parent's var(58) - Parent's primary AI variable.
;
; The code in this state is mostly simply copy/pasteable.
; But if you're using different indices for the parent's variables,
; or if you change your character's basic commands' names, you'll
; of course need to change the code in this state accordingly.

[StateDef 9742]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9742, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 5050

[State 9742, UglyHack]
type = VarSet
trigger1 = !var(1)
var(2) = var(3):=2

[State 9742, PauseCheck]
type = VarSet
trigger1 = GameTime > Parent,var(57)
trigger2 = !(Parent,Alive)
trigger3 = RoundState != 2
trigger4 = Parent,var(59)
trigger5 = var(1)
trigger5 = var(3):=0
var(2) = var(3):=1

[State 9742, Facing]
type = Turn
trigger1 = var(9):=(Facing != Parent,Facing)

[State 9742, ParentDirCheck]
type = VarSet
trigger1 = Parent,command = "holdfwd"
trigger2 = Parent,command = "holdback"
trigger3 = Parent,command = "holdup"
trigger4 = Parent,command = "holddown"
trigger5 = var(6):=0
var(6) = 1

[State 9742, BufferCheck]
type = VarSet
trigger1 = var(3) || var(4) || var(10)
var(10) = var(6)

[State 9742, ParentButtonCheck]
type = VarSet
trigger1 = Parent,command = "a"
trigger2 = Parent,command = "b"
trigger3 = Parent,command = "c"
trigger4 = Parent,command = "x"
trigger5 = Parent,command = "y"
trigger6 = Parent,command = "z"
trigger7 = Parent,command = "start"
trigger8 = var(7):=0
var(7) = 1

[State 9742, SameButtonCheck]
type = VarSet
triggerall = var(7)
triggerall = !var(2)
triggerall = NumPartner
trigger1 = Parent,command = "a"
trigger1 = Partner,command = "a"
trigger2 = Parent,command = "b"
trigger2 = Partner,command = "b"
trigger3 = Parent,command = "c"
trigger3 = Partner,command = "c"
trigger4 = Parent,command = "x"
trigger4 = Partner,command = "x"
trigger5 = Parent,command = "y"
trigger5 = Partner,command = "y"
trigger6 = Parent,command = "z"
trigger6 = Partner,command = "z"
trigger7 = Parent,command = "start"
trigger7 = Partner,command = "start"
trigger8 = var(8):=0
var(8) = 1

[State 9742, DirTurnOnAI]
type = ParentVarSet
trigger1 = var(6)
trigger1 = !(var(9) || var(10))
var(59) = 1

[State 9742, DirTurnOffAI]
type = ParentVarSet
triggerall = var(6)
triggerall = !var(3)
triggerall = Parent,var(59)
trigger1 = command = "holdfwd"
trigger1 = Parent,command = "holdfwd"
trigger2 = command = "holdback"
trigger2 = Parent,command = "holdback"
trigger3 = command = "holdup"
trigger3 = Parent,command = "holdup"
trigger4 = command = "holddown"
trigger4 = Parent,command = "holddown"
var(59) = 0

[State 9742, ButtonTurnOnAI]
type = ParentVarSet
trigger1 = var(5) && var(7)
trigger1 = !(var(2) || var(8))
var(59) = 1

[State 9742, ButtonTurnOffAI]
type = ParentVarSet
triggerall = var(7)
triggerall = !(var(2) || var(8))
trigger1 = command = "a"
trigger1 = Parent,command = "a"
trigger2 = command = "b"
trigger2 = Parent,command = "b"
trigger3 = command = "c"
trigger3 = Parent,command = "c"
trigger4 = command = "x"
trigger4 = Parent,command = "x"
trigger5 = command = "y"
trigger5 = Parent,command = "y"
trigger6 = command = "z"
trigger6 = Parent,command = "z"
trigger7 = command = "start"
trigger7 = Parent,command = "start"
var(59) = -1

[State 9742, UnPauseCheck]
type = VarSet
triggerall = var(2)
triggerall = !var(4)
trigger1 = var(7)
trigger2 = var(2) = 2
trigger2 = var(2):=0
var(2) = 2

[State 9742, Goodbye]
type = DestroySelf
trigger1 = Parent,var(59)
trigger2 = !(Parent,Alive)
trigger3 = RoundState != 2

[State 9742, HitPauseCheck]
type = VarSet
trigger1 = var(6) || var(7)
trigger2 = !(Parent,HitPauseTime)
var(4) = Parent,HitPauseTime

[State 9742, Delay]
type = VarSet
trigger1 = var(1):=1
var(5) = !var(7)
;------------------
; XOR Method's Helper State for Recent Custom State Check

[StateDef 9743]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9743, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 0

[State 9743, fiXOR]
type = VarAdd
trigger1 = !(Parent,HitPauseTime)
trigger1 = var(1) > 0
var(1) = -1

[State 9743, fuXOR]
type = VarSet
trigger1 = Parent,var(57) < GameTime
var(1) = 31
IgnoreHitPause = 1

[State 9743, Goodbye]
type = DestroySelf
trigger1 = Parent,var(59) = 1
trigger2 = !(Parent,Alive)
trigger3 = RoundState != 2




[Statedef 7500];============= helper drop sand
type    = S
movetype= I
physics = N
ctrl = 0
sprpriority = 3
anim = 8787

[State 7500, a0]
type = screenbound
trigger1 = 1
value = 0
[state 7500, a1]
type = assertspecial
trigger1 = 1
flag = noshadow
[State 7500, a2]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
[State 7500, a4]
type = PlayerPush
trigger1 = 1
value = 0

[State 7500, 0]
type = BindToParent
trigger1 =parent,statetype=C
time = 1
facing = 1
pos = 0,-55
ignorehitpause = 1

[State 7500, 0]
type = BindToParent
triggerall =(parent,stateno!=100)||(parent,stateno!=105)
trigger1 =parent,statetype=S
time = 1
facing = 1
pos = 0,-90
ignorehitpause = 1

[State 7500, 0]
type = BindToParent
trigger1 =parent,statetype=A
time = 1
facing = 1
pos = 0,-70
ignorehitpause = 1

[State 7500, 0]
type = BindToParent
trigger1 =(parent,stateno=100)||(parent,stateno=105)
time = 1
facing = 1
pos = 0,-35
ignorehitpause = 1





[State 7500, a1];sand
type = explod
triggerall = parent,statetype!=A
trigger1 = timemod = 45,1 ;time%85=0 -- operator bugs with helper destroyself
anim =4
ID = 4
sprpriority = 4
postype = p1
pos = ifelse(random<500,-30,0),ifelse(random<500,35,0)
random = 5,5
ignorehitpause = 1
scale = ifelse(random<500,.5,1),ifelse(random<500,.5,1)
supermovetime = 20
pausemovetime = 20

[State 7500, a1];sand
type = explod
triggerall = parent,statetype!=A
trigger1 = timemod = 65,1 ;time%85=0 -- operator bugs with helper destroyself
anim =4
ID = 5
sprpriority = 4
postype = p1
pos = ifelse(random<500,30,10),ifelse(random<500,10,20)
random = 6,6
ignorehitpause = 1
scale = ifelse(random<500,.5,1),ifelse(random<500,.5,1)
supermovetime = 20
pausemovetime = 20

[State 7500, a1];sand
type = explod
trigger1 = (parent,stateno=2998)&& (time%3=0)
trigger2 = (parent,prevstateno=2998)&& (time%3=0)
trigger3 = (parent,stateno=100)&& (time%3=0)
trigger4 = (parent,stateno=105)&& (time%3=0)
trigger5 = (parent,stateno=50)&& (time%3=0)
trigger6 = (parent,stateno=51)&& (time%3=0)
anim =2
ID = 6
sprpriority = -7
postype = p1
pos = ifelse(random<500,15,-15),ifelse(random<500,30,10)
accel = ifelse(random<500,.05,-.05),ifelse(random<500,.05,-.05)
random = 8,20
ignorehitpause = 1
facing = ifelse(random<500,1,-1)
scale = 1,1
supermovetime = 20
pausemovetime = 20





[State 7500, end]
type = destroyself
trigger1 = (parent, movetype=H)&&(parent,stateno != [120,160])
trigger2 = parent,stateno = [850,2000]
trigger3 = parent,stateno = [3000,7000]
trigger4 = roundstate = 3
ignorehitpause = 1
